var j=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var A=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&A(e,r,t[r]);if(U)for(var r of U(t))x.call(t,r)&&A(e,r,t[r]);return e},_=(e,t)=>q(e,G(t));import{U as F,E as D,d as L,b as S,c as T,n as M,e as P,f as w,_ as b,I as X,S as K,t as Q,g as R}from"./index.674a672f.js";import{P as I,m as B,i as E,r as m,o as n,c as i,b as o,F as O,f as N,g as u,a as p,w as y,h as k,t as g,d as C,e as c}from"./vendor.1861e128.js";const z={name:"UserIconGrid",props:{userIcons:""},components:{UserIconCard:F,EditIconDialog:D,deleteDialog:L},data(){return{coralIcons:{delete:S,addIcon:T,newItem:M,edit:P,loading:w},isAd:!1,isOwner:!1}},mounted:function(){let e=this,t=I.User.current(),r=this.$route.params.user;if(t){let s=t.get("username")==r;e.isOwner=s}function l(){try{typeof _bsa!="undefined"&&_bsa&&_bsa.init("custom","CESDC2QN","placement:macosiconscom",{target:"#card-ad",template:`
                  <a href="##statlink##" target="_blank" rel="noopener sponsored" id="customAd" class="bsa-link">
                  <div class="bsa-img-wrapper" style="background-color: ##backgroundColor##;">
                    <div class="bsa-icon" style="background-image: url(##logo##);"></div>
                  </div>
                  <div class="text-ad-wrapper">
                    <img style="background: ##backgroundColor##" src="##image##">
                    <div class="bsa-desc">##description##</div>
                  </div>
                  </a>
                `})}catch{}}window.BSANativeCallback=s=>{s.ads.length,document.getElementById("_carbonads_js").children[0]},l()},render(e){return e("div",{class:"carbon-ads",attrs:{id:"native-carbon"}})},methods:_(v({},B(["adClick"])),{isSelected(e,t){try{return e.name==t}catch{return!0}},validate(e,t){let r=this;try{e.target.classList.contains("is-invalid")?r.isValidated=!1:r.isValidated=!0}catch{}r.getTextFieldValue(e,t)},getTextFieldValue(e,t){let r=e.target.value;console.log(t,": ",r)}}),computed:v({},E(["getUser","allIcons","notApproved","getAppCategories","getSelectedIcon"]))},Y={class:"icon-list-area p-t-48 p-b-40"},J={class:"card-wrapper card-hover coral-card"},Z=o("div",{id:"card-ad"},null,-1),ee=[Z],te=o("div",{class:"support-page"},[o("h3",{class:"coral-Heading--S m-0"}," Support this page "),o("p",{class:"coral-Body--S m-0"},[p(" Please consider disabling your ad blocker or making a "),o("a",{rel:"noopener",class:"coral-Link",target:"_blank",href:"https://www.paypal.com/donate/?hosted_button_id=5PMNX4DPW83KN"}," donation "),p(" to support this project. ")])],-1),oe=[te];function se(e,t,r,l,s,a){const f=m("UserIconCard");return n(),i("div",null,[o("section",Y,[o("div",J,[o("div",{onClick:t[0]||(t[0]=h=>e.adClick({position:"User Icon Grid",type:"Native"})),class:"absolute card-grid-nativeAd",style:{"z-index":"2",height:"100%"}},ee),o("a",{class:"card-no-ad relative",href:"https://www.paypal.com/donate/?hosted_button_id=5PMNX4DPW83KN",rel:"noopener",target:"_blank",style:{width:"100%",left:"0"},onClick:t[1]||(t[1]=h=>e.logDonation("support-message"))},oe)]),(n(!0),i(O,null,N(r.userIcons,h=>(n(),u(f,{key:h.id,icon:h,isAdmin:!1,isMacOs:!0,isOwner:s.isOwner},null,8,["icon","isOwner"]))),128))])])}var re=b(z,[["render",se]]);const ae={name:"UserIconCardLoading",props:{icon:{}},data:function(){return{coralIcons:{placeholderIcon:w}}},methods:{}},ne={class:"card-wrapper card-hover coral-card"},ie={class:"card-img-wrapper",style:{"max-width":"120px"}},le=["src"],ce=o("div",{class:"card-text-wrapper p-l-16 p-r-16 p-b-16"},[o("h3",{class:"coral-font-color m-t-0 m-b-8 loading-placeholder p-0"}),o("p",{class:"coral-Body--XS opacity-60 m-b-8 loading-placeholder"})],-1);function de(e,t,r,l,s,a){return n(),i("div",ne,[o("div",ie,[o("img",{width:"100px",height:"100px",style:{width:"auto"},class:"placeholder-icon",alt:"Placeholder icon",src:e.coralIcons.placeholderIcon},null,8,le)]),ce])}var ue=b(ae,[["render",de]]),pe="./assets/share.4c10c69d.svg",ge="./assets/Link.8cf05a9a.svg";const he={name:"UserProfile",components:{IconUI:X,UserIconGrid:re,UserIconCardLoading:ue,EditIconDialog:D,deleteDialog:L,StickyBanner:K},data(){return{resources:{twitter:Q,share:pe,link:ge,profilePic:R},iconsToShow:"approved",errorMessage:"",loading:{user:!0,icons:!0},user:{isOwner:!1},totalIconsApproved:0,userInfo:{},scrolledToBottom:!0,coralIcons:{delete:S,addIcon:T,newItem:M,edit:P,loading:w}}},methods:_(v({},B(["fetchUserIcons","fetchAppCategories","emptyArr","showToast","setDataToArr","setData","pushDataToArr","adClick"])),{async copyUserUrl(){let e=this,t="https://macosicons.com/u/"+e.$route.params.user;await navigator.clipboard.writeText(t),e.showToast({id:"toastMessage",message:"User profile URL copied to your clipboard",variant:"success"})},objectLenght(e){return e?Object.keys(e).length!=0:!1},async queryUser(){let e=this,t=e.user;e.loading.user;const r=new I.Query(I.User);let l=new RegExp("\\b"+t.username+"\\b");r.matches("username",l,"i");let s=await r.find();if(s=s[0],e.userInfo=s,s){e.fetchUserIcons(s).then(()=>{e.setDataToArr({arr:"selectedIcon",data:e.userIcons[0]})});let a=s.get("twitterHandle");a&&(t.twitterHandle=a,a.includes("twitter.com")||(t.twitterHandle="https://twitter.com/"+a)),t.credit=s.get("credit"),t.username=s.get("username"),t.bio=s.get("bio"),t.id=s.id,e.setData({state:"user",data:t}),I.User.current()&&t.username==I.User.current().getUsername()&&(t.isOwner=!0),e.loading.user=!1}else{let a={arr:"loading",data:!1};e.setDataToArr(a),e.loading.user=!1,e.errorMessage="This account doesn\u2019t exist"}},showDialog(e){document.getElementById(e).show()},changeIconStatus(e){let t=this;t.iconsToShow=e},userData(){let e=this;return console.log("parent.user: ",e.$store.state.user),e.$store.state.user},scrolled(){let e=this;window.onscroll=()=>{document.documentElement.offsetHeight-(Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)+window.innerHeight)<2e3&&e.scrolledToBottom&&e.userInfo.id&&(e.scrolledToBottom=!0,e.fetchUserIcons(e.userInfo))}}}),mounted:function(){let e=this;e.user.username=e.$route.params.user;let t={arr:"loading",data:!0};e.setDataToArr(t),e.emptyArr(),e.queryUser(),e.scrolled()},computed:_(v({},E(["getUser","allIcons","notApproved","approvedIcons","getAppCategories","approvedIconsCount","isLoading","getSelectedIcon","getUserInfo"])),{iconsCount(){let e=this,t=e.approvedIconsCount,r=e.isLoading,l=t.approved+t.hacked+t.notApproved;if(l==0&&r)return 15;switch(e.iconsToShow){case"all":return l;case"approved":return t.approved;case"notApproved":return t.notApproved}},placeholderCount(){let e=this;return e.iconsCount>15?15:e.iconsCount},userIcons(){let e=this;if(e.userInfo)switch(e.allIcons.length==0&&(e.errorMessage="No icons to show"),e.iconsToShow){case"all":return e.errorMessage=e.user.username+" hasn't submitted any icons yet.",e.allIcons;case"approved":return e.errorMessage=e.user.username+" doesn't have any approved icons yet.",e.approvedIcons;case"notApproved":return e.errorMessage=e.user.username+" doesn't have any icons awaiting approval.",e.notApproved}else return console.log("parent.userInfo"),0}})},me={class:"profile-page-head-wrapper"},fe={class:"profile-page-img-wrapper"},ve=["src"],Ie={class:"profile-edit-btn desktop-hidden opacity-80"},_e=p(" Edit Profile "),we={class:"profile-info-wrapper"},be={class:"profile-header-wrapper"},ye={class:"profile-name-social"},ke={class:"coral-Heading--L m-0"},Ce=["href"],Ue={key:0,class:"profile-edit-btn mobile-hidden opacity-80"},Ae=p(" Edit Profile "),De={class:"profile-descrption-box"},Le={key:0,class:"loading-placeholder m-b-8"},Se={key:1,class:"loading-placeholder m-b-8"},Te={key:2,class:"coral-Body--L m-b-4"},Me=["href"],Pe={class:"p-l-24"},Be={class:"m-auto user-profile-icons"},Ee=p(" All "),Oe={class:"coral-Detail coral-Detail--M f-w-400 opacity-80"},Ne=p(" Approved "),He={class:"coral-Detail coral-Detail--M f-w-400 opacity-80"},$e=p(" Waiting "),Ve={class:"coral-Detail coral-Detail--M f-w-400 opacity-80"},je={key:2,class:"waiting-wrapper"},qe={class:"coral-Body--M"},Ge={key:4,class:"icon-list-area p-t-48 p-b-40"},We=p(" Load more ");function xe(e,t,r,l,s,a){const f=m("IconUI"),h=m("EditIconDialog"),H=m("deleteDialog"),$=m("UserIconGrid"),V=m("UserIconCardLoading");return n(),i("div",null,[o("section",me,[o("div",fe,[o("img",{class:"profile-img",src:s.resources.profilePic,alt:""},null,8,ve),o("div",Ie,[(n(),u(k("coral-button"),{variant:"quiet",onClick:t[0]||(t[0]=d=>a.showDialog("accountDialog"))},{default:y(()=>[_e],void 0,!0),_:1}))])]),o("div",we,[o("div",be,[o("div",ye,[o("h3",ke,g(e.getUserInfo.username),1),e.getUserInfo.twitterHandle?(n(),i("a",{key:0,target:"_blank",href:e.getUserInfo.twitterHandle,class:"margin-auto relative"},[C(f,{class:"absolute-center-vertical",width:"18px",img:s.resources.twitter,alt:"Twitter Logo"},null,8,["img"])],8,Ce)):c("",!0),o("div",{target:"_blank",onClick:t[1]||(t[1]=(...d)=>a.copyUserUrl&&a.copyUserUrl(...d)),class:"margin-auto relative pointer"},[C(f,{class:"absolute-center-vertical",width:"18px",img:s.resources.share,alt:"Twitter Logo"},null,8,["img"])])]),s.user.isOwner?(n(),i("div",Ue,[(n(),u(k("coral-button"),{variant:"quiet",onClick:t[2]||(t[2]=d=>a.showDialog("accountDialog"))},{default:y(()=>[Ae],void 0,!0),_:1}))])):c("",!0)]),o("div",De,[s.loading.user?(n(),i("div",Le)):c("",!0),s.loading.user?(n(),i("div",Se)):c("",!0),e.getUserInfo.bio?(n(),i("p",Te,g(e.getUserInfo.bio),1)):c("",!0),e.getUserInfo.credit?(n(),i("a",{key:3,target:"_blank",href:e.getUserInfo.credit,class:"margin-auto relative"},[C(f,{class:"absolute-center-vertical",width:"14px",img:s.resources.link,alt:"Credit link"},null,8,["img"]),o("span",Pe,g(e.getUserInfo.credit.replace("https://","")),1)],8,Me)):c("",!0)])])]),o("section",Be,[o("coral-tablist",null,[o("coral-tab",{"aria-label":"All Icons",onClick:t[3]||(t[3]=d=>a.changeIconStatus("all"))},[Ee,o("span",Oe," ("+g(e.approvedIconsCount.approved+e.approvedIconsCount.notApproved)+") ",1)]),o("coral-tab",{"aria-label":"Approved Icons",selected:"",onClick:t[4]||(t[4]=d=>a.changeIconStatus("approved"))},[Ne,o("span",He," ("+g(e.approvedIconsCount.approved)+") ",1)]),o("coral-tab",{"aria-label":"Waiting Icons",onClick:t[5]||(t[5]=d=>a.changeIconStatus("notApproved"))},[$e,o("span",Ve," ("+g(e.approvedIconsCount.notApproved)+") ",1)])]),a.objectLenght(e.getSelectedIcon)?(n(),u(h,{key:0,icon:e.getSelectedIcon},null,8,["icon"])):c("",!0),a.objectLenght(e.getSelectedIcon)?(n(),u(H,{key:1,icon:e.getSelectedIcon},null,8,["icon"])):c("",!0),!s.loading.user&&a.iconsCount==0?(n(),i("div",je,[o("p",qe,g(s.errorMessage),1)])):c("",!0),a.userIcons.length!=0?(n(),u($,{key:3,userIcons:a.userIcons},null,8,["userIcons"])):(n(),i("div",Ge,[(n(!0),i(O,null,N(a.placeholderCount,d=>(n(),u(V,{key:d+Math.floor(Math.random()*1e7+1),icon:a.iconsCount},null,8,["icon"]))),128))])),a.userIcons.length<a.iconsCount&&a.userIcons.length>1&&e.isLoading?(n(),u(k("coral-button"),{key:5,class:"m-b-24",onClick:t[6]||(t[6]=d=>e.fetchUserIcons(s.userInfo))},{default:y(()=>[We],void 0,!0),_:1})):c("",!0)])])}var Qe=b(he,[["render",xe]]);export{Qe as default};
