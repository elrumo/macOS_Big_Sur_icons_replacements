var w=Object.defineProperty,I=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var b=(e,s,t)=>s in e?w(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,g=(e,s)=>{for(var t in s||(s={}))C.call(s,t)&&b(e,t,s[t]);if(y)for(var t of y(s))N.call(s,t)&&b(e,t,s[t]);return e},f=(e,s)=>I(e,_(s));import{p as l,m as x,V as r,a as S}from"./vendor.b02ebc17.js";import{d as E,a as T,n as R,e as D,p as L,b as k}from"./index.3361a9f1.js";var q="/assets/email.b9990d97.svg",B=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("coral-toast",{attrs:{id:"toastMessage",variant:"success"}},[e._v(" All icons have been updated ")]),t("coral-toast",{attrs:{id:"error",variant:"error"}},[e._v(" There has been an error, please try again. ")]),e.isAuth?e._e():t("div",{staticClass:"coral-Well m-t-48",attrs:{id:"signIn-wrapper"}},[t("div",{staticClass:"m-b-24"},[t("coral-textfield",{tag:"input",attrs:{id:"email",type:"email",placeholder:"Email","aria-label":"text input"}})],1),t("div",{staticClass:"m-b-24"},[t("coral-textfield",{tag:"input",attrs:{id:"password",type:"password",placeholder:"Password","aria-label":"text input"}})],1),t("div",{staticClass:"m-t-48 m-b-4",attrs:{id:"signin-button"}},[t("coral-button",{tag:"button",attrs:{variant:"cta"},on:{click:e.signIn}},[e._v("Sign In")])],1)]),e.isObjEmpty(e.icons)&e.isAuth?t("h3",{staticClass:"coral-Heading--M m-t-48",attrs:{id:"noIcons"}},[e._v(" No icons to aprove ")]):e._e(),t("coral-dialog",{attrs:{id:"editUserDialog"}},[t("coral-dialog-header",[e._v(e._s(e.selectedUser.usersName))]),t("coral-dialog-content",[t("form",{staticClass:"coral-Form coral-Form--vertical",staticStyle:{"max-width":"300px"}},[t("label",{staticClass:"coral-FieldLabel",attrs:{id:"nameEditUser"}},[e._v("usersName")]),t("coral-textfield",{tag:"input",staticClass:"coral-Form-field",attrs:{id:"nameEditUserInput",value:e.selectedUser.usersName,labelledby:"nameEditUser"},on:{change:function(a){return e.editDoc(e.selectedUser,a,"usersName",!0)}}}),t("label",{staticClass:"coral-FieldLabel",attrs:{id:"creditEditUser"}},[e._v("Credit")]),t("coral-textfield",{tag:"input",staticClass:"coral-Form-field",attrs:{id:"creditEditUserInput",value:e.selectedUser.creditUrl,labelledby:"creditEditUser"},on:{change:function(a){return e.editDoc(e.selectedUser,a,"credit",!0)}}}),t("label",{staticClass:"coral-FieldLabel",attrs:{id:"emailEditUser"}},[e._v("email")]),t("coral-textfield",{tag:"input",staticClass:"coral-Form-field",attrs:{id:"emailEditUserInput",value:e.selectedUser.email,labelledby:"emailEditUser"},on:{change:function(a){return e.editDoc(e.selectedUser,a,"email",!0)}}})],1)]),t("coral-dialog-footer",[t("coral-button",{tag:"button",attrs:{variant:"primary","coral-close":""}},[e._v("Done")])],1)],1),t("section",{staticClass:"dashBoard"},[e.isAuth?t("coral-tablist",[t("coral-tab",{attrs:{"aria-label":"newIcons",selected:""},on:{click:function(a){return e.changeIconStatus("newIcons")}}},[e._v(" New Icons "),t("span",{staticClass:"coral-Detail coral-Detail--M f-w-400 opacity-80"},[e._v(" ( "+e._s(e.iconListLen)+" ) ")])]),t("coral-tab",{attrs:{"aria-label":"Approved Icons"},on:{click:function(a){return e.changeIconStatus("reUploaded")}}},[e._v(" Re-uploaded "),t("span",{staticClass:"coral-Detail coral-Detail--M f-w-400 opacity-80"},[e._v(" ( "+e._s(e.iconListLenReUpload)+" ) ")])])],1):e._e(),t("div",{staticClass:"p-t-24 p-b-40 dashboard-wrapper"},e._l(e.iconType,function(a){return t("div",{key:a.usersName,staticClass:"p-b-32"},[t("h3",{staticClass:"coral-Heading--M p-b-8 text-left d-flex"},[t("a",{attrs:{href:"mailto:"+a.email+"?subject=macOS icons submission"},on:{click:function(i){return e.copyText(a.usersName)}}},[e._v(" "+e._s(a.usersName)+" ")]),t("img",{staticClass:"dashboard-edit-user",attrs:{src:e.coralIcons.edit,alt:""},on:{click:function(i){return e.showDialog("editUserDialog",a)}}}),t("img",{staticClass:"dashboard-edit-user p-l-16",attrs:{src:e.coralIcons.email,alt:""},on:{click:function(i){return e.sendEmail(a)}}}),a.emailSent=="requested"?t("coral-status",{attrs:{variant:"info"}}):e._e(),a.emailSent=="sent"?t("coral-status",{attrs:{variant:"success"}}):e._e()],1),t("div",{staticClass:"icon-list-area"},e._l(a.icons,function(i){return t("div",{key:i.fileName+i.imgUrl,staticClass:"card-wrapper coral-card"},[i.isReupload&&i.isAuthor?t("coral-status",{attrs:{variant:"success"}}):e._e(),i.isReupload&&!i.isAuthor?t("coral-status",{attrs:{variant:"warning"}}):e._e(),t("div",{staticClass:"card-img-wrapper",staticStyle:{"max-width":"120px"}},[i.isReview||i.isReview&&i.isReUpload?t("div",{staticClass:"loading-approval-wrapper"},[i.isReview?t("coral-status",{attrs:{variant:"success"}}):e._e()],1):e._e(),!i.isReview&&i.isReUpload?t("div",{staticClass:"loading-approval-wrapper"},[i.isReUpload?t("coral-status",{attrs:{color:"Yellow"}}):e._e()],1):e._e(),t("a",{attrs:{href:i.imgUrl,target:"_blank"}},[t("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img",loading:e.coralIcons.loading},expression:"{ selector: 'img', loading: coralIcons.loading }"}]},[t("img",{staticClass:"w-full",attrs:{"data-src":i.imgUrl.replace("/media/","/parse/")}})])]),t("div",{staticClass:"quick-actions-wrapper"},[t("div",{staticClass:"quick-action-el"},[t("coral-icon",{staticClass:"quick-action-icon",attrs:{id:i.fileName,icon:e.coralIcons.delete,title:"Delete"},on:{click:function(o){return e.deleteSubmission(i)}}})],1)])]),t("div",{staticClass:"card-text-wrapper p-l-16 p-r-16 p-b-0"},[t("p",{staticClass:"coral-Body--XS opacity-60 m-b-0"},[t("coral-textfield",{tag:"input",staticClass:"editable-input coral-Body--XS opacity-50 m-b-0",attrs:{type:"text",variant:"quiet",value:e.getDate(i.timeStamp),"aria-label":"text input"},on:{change:function(o){return e.changeDate(i,o)}}})],1),t("h3",{staticClass:"coral-font-color m-b-0 m-t-0"},[t("coral-textfield",{tag:"input",staticClass:"editable-input f-w-800 m-b-0",attrs:{type:"text",variant:"quiet",value:e.prettifyName(i.appName),"aria-label":"text input"},on:{change:function(o){return e.editDoc(i,o,"appName",!1)}}})],1),t("p",{staticClass:"coral-Body--XS p-b-0 opacity-80 m-b-0"},[t("coral-textfield",{tag:"input",staticClass:"editable-input",attrs:{type:"text",variant:"quiet",value:i.usersName,"aria-label":"text input"},on:{change:function(o){return e.editDoc(i,o,"usersName")}}})],1),i.credit!=""?t("p",{staticClass:"coral-Body--XS p-b-0 opacity-50 m-b-0"},[t("coral-textfield",{tag:"input",staticClass:"editable-input small-text",attrs:{type:"text",variant:"quiet",value:i.credit,"aria-label":"text input"},on:{change:function(o){return e.editDoc(i,o,"credit")}}})],1):e._e(),i.credit==""?t("p",{staticClass:"coral-Body--XS p-b-0 opacity-50 m-b-0"},[t("coral-textfield",{tag:"input",staticClass:"editable-input small-text",attrs:{type:"text",variant:"quiet",value:"n/a","aria-label":"text input"},on:{change:function(o){return e.editDoc(i,o,"credit")}}})],1):e._e(),t("div",{staticClass:"p-t-16 p-b-16"},[t("button",{staticClass:"coral-btn coral-btn-primary",on:{click:function(o){return e.approveIcon(i)}}},[e._v("Approve")])])])],1)}),0)])}),0)],1)],1)},M=[];l.initialize("macOSicons");l.serverURL="https://media.macosicons.com/parse";const h=l.Object.extend("Icons2");l.Object.extend("User");l.User.enableUnsafeCurrentUser();const O=l.User.current(),p=50,A={components:{},data:function(){return{icons:{reUploaded:{}},isSearch:!1,searchString:"",iconListLen:0,iconListLenReUpload:0,howManyRecords:0,sortBy:"usersName",emailMsg:"Thanks you for your submission to macosicons.com! I'm just getting in touch with you to ask if you could ..., otherwise the icons won't work propperly. You can either email me back or re-submit the icons on macosicons.com. Thanks again, Elias webbites.io",isAuth:!1,selectedUser:{},scrolledToBottom:!0,iconsToShow:"newIcons",reUploadedIcons:{},coralIcons:{delete:E,addIcon:T,newItem:R,edit:D,loading:L,email:q}}},methods:f(g({},x(["showToast"])),{changeIconStatus(e){let s=this;s.iconsToShow=e,e=="reUploaded"&&(console.log("reUploaded"),s.getReUploadIcons())},async copyText(e){await navigator.clipboard.writeText("https://macosicons.com/"+e),await navigator.clipboard.writeText(e)},uploadFile(){const e=document.getElementById("profilePhotoFileUpload");if(e.files.length>0){const s=e.files[0];console.log(s);const t=s.name;console.log(t),new l.File(t,s).save().then(i=>{console.log("Success: ",i)},function(i){console.log(i)})}},showDialog(e,s){let t=this,a=document.getElementById("nameEditUserInput"),i=document.getElementById("creditEditUserInput"),o=document.getElementById("emailEditUserInput");a.value=s.usersName,i.value=s.creditUrl,o.value=s.email,document.getElementById(e).show(),t.selectedUser=s,console.log(s)},getDate(e){let s=new Date(e),t=s.getUTCDate();t<10&&(t="0"+t);let a=s.getUTCMonth()+1;a<10&&(a="0"+a);let i=s.getFullYear();return t+"/"+a+"/"+i},async editDoc(e,s,t,a){let i=s.target.value;if(console.log("icon: ",e),a){Object.keys(e.icons).length;for(let o in e.icons){const n=l.Object.extend("Icons2"),d=await new l.Query(n).get(e.icons[o].id);d.set({[t]:i}),d.save().then(()=>{console.log(t,"updated.")}).catch(u=>{document.getElementById("error").show()})}}else if(!a){const o=l.Object.extend("Icons2"),c=await new l.Query(o).get(e.id);c.set({[t]:i}),c.save().then(()=>{console.log(t,"updated.")}).catch(d=>{document.getElementById("error").show()})}},async signIn(){let e=document.getElementById("email").value,s=document.getElementById("password").value;console.log(e);const t=new l.User;t.set({username:e,password:s,email:e}),console.log(t),l.User.logIn(e,s).then(a=>{parent.isAuth=!0,console.log(a)}).catch(a=>{console.log(a)})},isObjEmpty(e){return Object.keys(e).length==0},async deleteSubmission(e){let s=this;console.log(e),(await new l.Query(h).get(e.id)).destroy().then(()=>{r.delete(s.icons[e.usersName].icons,e.appName),Object.keys(s.icons[e.usersName].icons).length==0&&r.delete(s.icons,e.usersName)}).catch(i=>{console.log(i)})},prettifyName(e){return e=e.replaceAll("_"," "),e},async approveIcon(e){let s=this;console.log("icon.id: ",e.id);let t=g({},e);delete t.DownloadCount,delete t.user,delete t.category,delete t.type,l.Cloud.run("testJob",t).then(a=>{e.isReview=!0,e.isReUploadReview=!0,s.showToast({id:"toastMessage",message:"Icon has been approved",variant:"success"})}).catch(a=>{console.log("e: ",a),s.showToast({id:"toastMessage",message:a,variant:"error"})})},async sendEmail(e){let s=this;console.log("icon: ",e),s.icons[e.usersName].emailSent="requested";let t={email:e.email,usersName:e.usersName,id:e.user.objectId};l.Cloud.run("sendEmail",t).then(a=>{s.icons[e.usersName].emailSent="sent",console.log(s.icons[e.usersName].emailSent),s.showToast({id:"toastMessage",message:"Email has been sent",variant:"success"})}).catch(a=>{console.log(a),s.showToast({id:"toastMessage",message:a,variant:"error"})})},getIconListLen(e){let s=this;e.count().then(t=>{console.log(t),s.iconListLen=t})},getIconListLenReUpload(e){let s=this;e.count().then(t=>{console.log(t),s.iconListLenReUpload=t})},async loadMore(){let e=this,s=e.howManyRecords;e.howManyRecords=s+p;const t=new l.Query(h);t.equalTo("approved",!1),t.ascending(e.sortBy),t.exists("highResPngFile"),t.skip(s),t.limit(p);const a=await t.find();setTimeout(()=>{e.scrolledToBottom=!0},800);for(let i in a){let o=a[i].attributes,n={};for(let v in o)n[v]=o[v];n.imgUrl="";let c=n.usersName;n.appName;let d=n.email,u=n.credit,m=n.user;n.id=a[i].id,c==""||c==null?(console.log("usersName undefined "),console.log("docData: ",n)):e.icons[c]==null?(r.set(e.icons,c,{usersName:c,email:d,icons:{},creditUrl:u,user:m}),r.set(e.icons[c].icons,n.id,n),r.set(e.icons[c].icons[n.id],"imgUrl",n.highResPngUrl)):(r.set(e.icons[c].icons,n.id,n),r.set(e.icons[c].icons[n.id],"imgUrl",n.highResPngUrl))}},scroll(){let e=this;window.onscroll=()=>{document.documentElement.offsetHeight-(Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)+window.innerHeight)<1600&&e.scrolledToBottom&&!e.isSearch&&(e.scrolledToBottom=!1,e.loadMore())}},async getParseData(){let e=this;const s=new l.Query(h);s.equalTo("approved",!1),s.descending("createdAt"),s.exists("highResPngFile"),s.limit(p);try{var t=await s.find()}catch(a){console.log(a),handleParseError(a)}e.getIconListLen(s),e.howManyRecords=p;for(let a in t){let i=t[a].attributes,o=JSON.parse(JSON.stringify(i));o.id=t[a].id,o.imgUrl=o.highResPngUrl;let n=o.usersName,c;o.user&&(c=o.user);let d=o.appName,u=o.email,m=o.credit;n==""||n==null?e.icons.Undefined==null?(r.set(e.icons,"Undefined",{usersName:"Undefined",email:u,icons:{},emailSent:!1,creditUrl:m}),r.set(e.icons.Undefined.icons,d,o),r.set(e.icons.Undefined.icons[o.id],"usersName","Undefined"),r.set(e.icons.Undefined,"usersName","Undefined")):(r.set(e.icons.Undefined.icons,o.id,o),r.set(e.icons.Undefined.icons[o.id],"usersName","Undefined"),r.set(e.icons.Undefined,"usersName","Undefined")):e.icons[n]==null?(r.set(e.icons,n,{usersName:n,email:u,icons:{},emailSent:!1,creditUrl:m,user:c}),r.set(e.icons[n].icons,o.id,o)):r.set(e.icons[n].icons,o.id,o)}e.scroll()},async getReUploadIcons(){let e=this;const s=new l.Query(h);s.equalTo("approved",!1),s.equalTo("isReUpload",!0),s.descending("updatedAt"),s.exists("highResPngFile"),s.limit(p);try{var t=await s.find()}catch(a){console.log(a),handleParseError(a)}e.getIconListLenReUpload(s),e.howManyRecords=p;for(let a in t){let i=t[a].attributes,o=JSON.parse(JSON.stringify(i));o.id=t[a].id,o.imgUrl=o.highResPngUrl;let n=o.usersName,c;o.user&&(c=o.user),o.appName;let d=o.email,u=o.credit;e.icons.reUploaded[n]==null?(r.set(e.icons.reUploaded,n,{usersName:n,email:d,icons:{},emailSent:!1,creditUrl:u,user:c}),r.set(e.icons.reUploaded[n].icons,o.id,o)):r.set(e.icons.reUploaded[n].icons,o.id,o)}}}),mounted:function(){let e=this;if(O){if(!l.User.current().attributes.isAdmin){e.$router.push({path:"/"}),l.User.logOut();return}e.isAuth=!0,e.getParseData(),e.getReUploadIcons()}else e.isAuth=!1,console.log("You are not logged in")},computed:f(g({},S(["getUser","allIcons","notApproved","approvedIcons","getAppCategories","approvedIconsCount","isLoading","getSelectedIcon","getUserInfo"])),{userIcons(){let e=this;if(e.userInfo)switch(e.allIcons.length==0&&(e.errorMessage="No icons to show"),e.iconsToShow){case"newIcons":return e.errorMessage=e.user.username+" hasn't submitted any icons yet.",console.log(e.iconsToShow),e.allIcons;case"reUploaded":return console.log(e.iconsToShow),e.approvedIcons}else return console.log("parent.userInfo"),0},iconType(){let e=this;return e.iconsToShow=="newIcons"?e.icons:e.icons.reUploaded}})},U={};var j=k(A,B,M,!1,F,null,null,null);function F(e){for(let s in U)this[s]=U[s]}var J=function(){return j.exports}();export{J as default};
