(function(){'use strict';(function(){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector}if(!Element.prototype.closest){Element.prototype.closest=function(s){var el=this;if(!document.documentElement.contains(el)){return null}do{if(el.matches(s)){return el}el=el.parentElement||el.parentNode}while(el!==null&&el.nodeType==1);return null};;})();(function(){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector}})();(function(arr){arr.forEach(function(item){if(item.hasOwnProperty('remove')){return}Object.defineProperty(item,'remove',{configurable:true,enumerable:true,writable:true,value:function remove(){this.parentNode&&this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype]);(function(){var testElement=document.createElement("_");testElement.classList.add("c1","c2");if(!testElement.classList.contains("c2")){var createMethod=function createMethod(method){var original=DOMTokenList.prototype[method];DOMTokenList.prototype[method]=function(token){var i,len=arguments.length;for(i=0;i<len;i+=1){token=arguments[i];original.call(this,token)}}};createMethod('add');createMethod('remove')}testElement.classList.toggle("c3",false);if(testElement.classList.contains("c3")){var _toggle=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(token,force){if(1 in arguments&&!this.contains(token)===!force){return force}else{return _toggle.call(this,token)}}}if(!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))){var descr=Object.getOwnPropertyDescriptor(HTMLElement.prototype,'classList');Object.defineProperty(SVGElement.prototype,'classList',descr)}testElement=null})();(function(){if(typeof window.CustomEvent==="function"){return false}function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent})();var supportsPreventScrollOption=false;try{var focusElem=document.createElement('div');focusElem.addEventListener('focus',function(event){event.preventDefault();event.stopPropagation()},true);focusElem.focus(Object.defineProperty({},'preventScroll',{get:function get(){supportsPreventScrollOption=true}}))}catch(e){}if(HTMLElement.prototype.nativeFocus===undefined&&!supportsPreventScrollOption){HTMLElement.prototype.nativeFocus=HTMLElement.prototype.focus;var getScrollParent=function getScrollParent(node){var isElement=node instanceof HTMLElement;var overflowY=isElement&&window.getComputedStyle(node).overflowY;var isScrollable=overflowY!=='visible'&&overflowY!=='hidden';if(!node){return null}else if(isScrollable&&node.scrollHeight>=node.clientHeight){return node}return getScrollParent(node.parentNode)||document.body};var patchedFocus=function patchedFocus(args){var scrollElement=getScrollParent(this);var actualPosition=scrollElement.scrollTop;this.nativeFocus();if(args&&args.preventScroll){setTimeout(function(){scrollElement.scrollTop=actualPosition},0)}};HTMLElement.prototype.focus=patchedFocus}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i+=1){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor){descriptor.writable=true}Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps){_defineProperties(Constructor.prototype,protoProps)}if(staticProps){_defineProperties(Constructor,staticProps)}return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass){_setPrototypeOf(subClass,superClass)}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct){return false}if(Reflect.construct.sham){return false}if(typeof Proxy==="function"){return true}try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null){break}}return object}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base){return}var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function set(target,property,value,receiver){if(typeof Reflect!=="undefined"&&Reflect.set){set=Reflect.set}else{set=function set(target,property,value,receiver){var base=_superPropBase(target,property);var desc;if(base){desc=Object.getOwnPropertyDescriptor(base,property);if(desc.set){desc.set.call(receiver,value);return true}else if(!desc.writable){return false}}desc=Object.getOwnPropertyDescriptor(receiver,property);if(desc){if(!desc.writable){return false}desc.value=value;Object.defineProperty(receiver,property,desc)}else{_defineProperty(receiver,property,value)}return true}}return set(target,property,value,receiver)}function _set(target,property,value,receiver,isStrict){var s=set(target,property,value,receiver||target);if(!s&&isStrict){throw new Error('failed to set property')}return value}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){return _arrayLikeToArray(arr)}}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter)){return Array.from(iter)}}function _unsupportedIterableToArray(o,minLen){if(!o){return}if(typeof o==="string"){return _arrayLikeToArray(o,minLen)}var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor){n=o.constructor.name}if(n==="Map"||n==="Set"){return Array.from(o)}if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)){return _arrayLikeToArray(o,minLen)}}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length){len=arr.length}for(var i=0,arr2=[len];i<len;i+=1){arr2[i]=arr[i]}return arr2}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var check=function check(it){return it&&it.Math==Math&&it};var global_1=check((typeof globalThis==="undefined"?"undefined":_typeof(globalThis))=='object'&&globalThis)||check((typeof window==="undefined"?"undefined":_typeof(window))=='object'&&window)||check((typeof self==="undefined"?"undefined":_typeof(self))=='object'&&self)||check(_typeof(commonjsGlobal)=='object'&&commonjsGlobal)||Function('return this')();var fails=function fails(exec){try{return!!exec()}catch(error){return true}};var descriptors=!fails(function(){return Object.defineProperty({},1,{get:function get(){return 7}})[1]!=7});var nativePropertyIsEnumerable={}.propertyIsEnumerable;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1);var f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable}:nativePropertyIsEnumerable;var objectPropertyIsEnumerable={f:f};var createPropertyDescriptor=function createPropertyDescriptor(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}};var toString={}.toString;var classofRaw=function classofRaw(it){return toString.call(it).slice(8,-1)};var split=''.split;var indexedObject=fails(function(){return!Object('z').propertyIsEnumerable(0)})?function(it){return classofRaw(it)=='String'?split.call(it,''):Object(it)}:Object;var requireObjectCoercible=function requireObjectCoercible(it){if(it==undefined){throw TypeError("Can't call method on "+it)}return it};var toIndexedObject=function toIndexedObject(it){return indexedObject(requireObjectCoercible(it))};var isObject=function isObject(it){return _typeof(it)==='object'?it!==null:typeof it==='function'};var toPrimitive=function toPrimitive(input,PREFERRED_STRING){if(!isObject(input)){return input}var fn,val;if(PREFERRED_STRING&&typeof(fn=input.toString)=='function'&&!isObject(val=fn.call(input))){return val}if(typeof(fn=input.valueOf)=='function'&&!isObject(val=fn.call(input))){return val}if(!PREFERRED_STRING&&typeof(fn=input.toString)=='function'&&!isObject(val=fn.call(input))){return val}throw TypeError("Can't convert object to primitive value")};var hasOwnProperty={}.hasOwnProperty;var has=function has(it,key){return hasOwnProperty.call(it,key)};var document$1=global_1.document;var EXISTS=isObject(document$1)&&isObject(document$1.createElement);var documentCreateElement=function documentCreateElement(it){return EXISTS?document$1.createElement(it):{}};var ie8DomDefine=!descriptors&&!fails(function(){return Object.defineProperty(documentCreateElement('div'),'a',{get:function get(){return 7}}).a!=7});var nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var f$1=descriptors?nativeGetOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){O=toIndexedObject(O);P=toPrimitive(P,true);if(ie8DomDefine){try{return nativeGetOwnPropertyDescriptor(O,P)}catch(error){}}if(has(O,P)){return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(O,P),O[P])}}var objectGetOwnPropertyDescriptor={f:f$1};var anObject=function anObject(it){if(!isObject(it)){throw TypeError(String(it)+' is not an object')}return it};var nativeDefineProperty=Object.defineProperty;var f$2=descriptors?nativeDefineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(ie8DomDefine){try{return nativeDefineProperty(O,P,Attributes)}catch(error){}}if('get'in Attributes||'set'in Attributes){throw TypeError('Accessors not supported')}if('value'in Attributes){O[P]=Attributes.value}return O};var objectDefineProperty={f:f$2};var createNonEnumerableProperty=descriptors?function(object,key,value){return objectDefineProperty.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){object[key]=value;return object};var setGlobal=function setGlobal(key,value){try{createNonEnumerableProperty(global_1,key,value)}catch(error){global_1[key]=value}return value};var SHARED='__core-js_shared__';var store=global_1[SHARED]||setGlobal(SHARED,{});var sharedStore=store;var functionToString=Function.toString;if(typeof sharedStore.inspectSource!='function'){sharedStore.inspectSource=function(it){return functionToString.call(it)}}var inspectSource=sharedStore.inspectSource;var WeakMap$1=global_1.WeakMap;var nativeWeakMap=typeof WeakMap$1==='function'&&/native code/.test(inspectSource(WeakMap$1));var shared=createCommonjsModule(function(module){(module.exports=function(key,value){return sharedStore[key]||(sharedStore[key]=value!==undefined?value:{})})('versions',[]).push({version:'3.6.4',mode:'global',copyright:'© 2020 Denis Pushkarev (zloirock.ru)'})});var id=0;var postfix=Math.random();var uid=function uid(key){return 'Symbol('+String(key===undefined?'':key)+')_'+(++id+postfix).toString(36)};var keys=shared('keys');var sharedKey=function sharedKey(key){return keys[key]||(keys[key]=uid(key))};var hiddenKeys={};var WeakMap$2=global_1.WeakMap;var set$1,get,has$1;var enforce=function enforce(it){return has$1(it)?get(it):set$1(it,{})};var getterFor=function getterFor(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE){throw TypeError('Incompatible receiver, '+TYPE+' required')}return state}};if(nativeWeakMap){var store$1=new WeakMap$2();var wmget=store$1.get;var wmhas=store$1.has;var wmset=store$1.set;set$1=function set(it,metadata){wmset.call(store$1,it,metadata);return metadata};get=function get(it){return wmget.call(store$1,it)||{}};has$1=function has(it){return wmhas.call(store$1,it)}}else{var STATE=sharedKey('state');hiddenKeys[STATE]=true;set$1=function set(it,metadata){createNonEnumerableProperty(it,STATE,metadata);return metadata};get=function get(it){return has(it,STATE)?it[STATE]:{}};has$1=function has$1(it){return has(it,STATE)}}var internalState={set:set$1,get:get,has:has$1,enforce:enforce,getterFor:getterFor};var redefine=createCommonjsModule(function(module){var getInternalState=internalState.get;var enforceInternalState=internalState.enforce;var TEMPLATE=String(String).split('String');(module.exports=function(O,key,value,options){var unsafe=options?!!options.unsafe:false;var simple=options?!!options.enumerable:false;var noTargetGet=options?!!options.noTargetGet:false;if(typeof value=='function'){if(typeof key=='string'&&!has(value,'name')){createNonEnumerableProperty(value,'name',key)}enforceInternalState(value).source=TEMPLATE.join(typeof key=='string'?key:'')}if(O===global_1){if(simple){O[key]=value}else{setGlobal(key,value)}return}else if(!unsafe){delete O[key]}else if(!noTargetGet&&O[key]){simple=true}if(simple){O[key]=value}else{createNonEnumerableProperty(O,key,value);}})(Function.prototype,'toString',function toString(){return typeof this=='function'&&getInternalState(this).source||inspectSource(this)})});var path=global_1;var aFunction=function aFunction(variable){return typeof variable=='function'?variable:undefined};var getBuiltIn=function getBuiltIn(namespace,method){return arguments.length<2?aFunction(path[namespace])||aFunction(global_1[namespace]):path[namespace]&&path[namespace][method]||global_1[namespace]&&global_1[namespace][method]};var ceil=Math.ceil;var floor=Math.floor;var toInteger=function toInteger(argument){return isNaN(argument= +argument)?0:(argument>0?floor:ceil)(argument)};var min=Math.min;var toLength=function toLength(argument){return argument>0?min(toInteger(argument),0x1FFFFFFFFFFFFF):0;};var max=Math.max;var min$1=Math.min;var toAbsoluteIndex=function toAbsoluteIndex(index,length){var integer=toInteger(index);return integer<0?max(integer+length,0):min$1(integer,length)};var createMethod=function createMethod(IS_INCLUDES){return function($this,el,fromIndex){var O=toIndexedObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el){while(length>index){value=O[index++];if(value!=value){return true;}}else{for(;length>index;index+=1){if((IS_INCLUDES||index in O)&&O[index]===el){return IS_INCLUDES||index||0}}return!IS_INCLUDES&&-1}}}};var arrayIncludes={includes:createMethod(true),indexOf:createMethod(false)};var indexOf=arrayIncludes.indexOf;var objectKeysInternal=function objectKeysInternal(object,names){var O=toIndexedObject(object);var i=0;var result=[];var key;for(key in O){!has(hiddenKeys,key)&&has(O,key)&&result.push(key)}while(names.length>i){if(has(O,key=names[i++])){~indexOf(result,key)||result.push(key)}}return result};var enumBugKeys=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'];var hiddenKeys$1=enumBugKeys.concat('length','prototype');var f$3=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return objectKeysInternal(O,hiddenKeys$1)};var objectGetOwnPropertyNames={f:f$3};var f$4=Object.getOwnPropertySymbols;var objectGetOwnPropertySymbols={f:f$4};var ownKeys=getBuiltIn('Reflect','ownKeys')||function ownKeys(it){var keys=objectGetOwnPropertyNames.f(anObject(it));var getOwnPropertySymbols=objectGetOwnPropertySymbols.f;return getOwnPropertySymbols?keys.concat(getOwnPropertySymbols(it)):keys};var copyConstructorProperties=function copyConstructorProperties(target,source){var keys=ownKeys(source);var defineProperty=objectDefineProperty.f;var getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f;for(var i=0;i<keys.length;i+=1){var key=keys[i];if(!has(target,key)){defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}};var replacement=/#|\.prototype\./;var isForced=function isForced(feature,detection){var value=data[normalize(feature)];return value==POLYFILL?true:value==NATIVE?false:typeof detection=='function'?fails(detection):!!detection};var normalize=isForced.normalize=function(string){return String(string).replace(replacement,'.').toLowerCase()};var data=isForced.data={};var NATIVE=isForced.NATIVE='N';var POLYFILL=isForced.POLYFILL='P';var isForced_1=isForced;var getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f;var _export=function _export(options,source){var TARGET=options.target;var GLOBAL=options.global;var STATIC=options.stat;var FORCED,target,key,targetProperty,sourceProperty,descriptor;if(GLOBAL){target=global_1}else if(STATIC){target=global_1[TARGET]||setGlobal(TARGET,{})}else{target=(global_1[TARGET]||{}).prototype}if(target){for(key in source){sourceProperty=source[key];if(options.noTargetGet){descriptor=getOwnPropertyDescriptor$1(target,key);targetProperty=descriptor&&descriptor.value}else{targetProperty=target[key]}FORCED=isForced_1(GLOBAL?key:TARGET+(STATIC?'.':'#')+key,options.forced);if(!FORCED&&targetProperty!==undefined){if(_typeof(sourceProperty)===_typeof(targetProperty)){continue}copyConstructorProperties(sourceProperty,targetProperty)}if(options.sham||targetProperty&&targetProperty.sham){createNonEnumerableProperty(sourceProperty,'sham',true)}redefine(target,key,sourceProperty,options)}}};var aFunction$1=function aFunction(it){if(typeof it!='function'){throw TypeError(String(it)+' is not a function')}return it};var nativeApply=getBuiltIn('Reflect','apply');var functionApply=Function.apply;var OPTIONAL_ARGUMENTS_LIST=!fails(function(){nativeApply(function(){})});_export({target:'Reflect',stat:true,forced:OPTIONAL_ARGUMENTS_LIST},{apply:function apply(target,thisArgument,argumentsList){aFunction$1(target);anObject(argumentsList);return nativeApply?nativeApply(target,thisArgument,argumentsList):functionApply.call(target,thisArgument,argumentsList)}});var objectKeys=Object.keys||function keys(O){return objectKeysInternal(O,enumBugKeys)};var objectDefineProperties=descriptors?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=objectKeys(Properties);var length=keys.length;var index=0;var key;while(length>index){objectDefineProperty.f(O,key=keys[index++],Properties[key])}return O};var html=getBuiltIn('document','documentElement');var GT='>';var LT='<';var PROTOTYPE='prototype';var SCRIPT='script';var IE_PROTO=sharedKey('IE_PROTO');var EmptyConstructor=function EmptyConstructor(){};var scriptTag=function scriptTag(content){return LT+SCRIPT+GT+content+LT+'/'+SCRIPT+GT};var NullProtoObjectViaActiveX=function NullProtoObjectViaActiveX(activeXDocument){activeXDocument.write(scriptTag(''));activeXDocument.close();var temp=activeXDocument.parentWindow.Object;activeXDocument=null;return temp};var NullProtoObjectViaIFrame=function NullProtoObjectViaIFrame(){var iframe=documentCreateElement('iframe');var JS='java'+SCRIPT+':';var iframeDocument;iframe.style.display='none';html.appendChild(iframe);iframe.src=String(JS);iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(scriptTag('document.F=Object'));iframeDocument.close();return iframeDocument.F};var activeXDocument;var _NullProtoObject=function NullProtoObject(){try{activeXDocument=document.domain&&new ActiveXObject('htmlfile')}catch(error){}_NullProtoObject=activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame();var length=enumBugKeys.length;while(length--){delete _NullProtoObject[PROTOTYPE][enumBugKeys[length]]}return _NullProtoObject()};hiddenKeys[IE_PROTO]=true;var objectCreate=Object.create||function create(O,Properties){var result;if(O!==null){EmptyConstructor[PROTOTYPE]=anObject(O);result=new EmptyConstructor();EmptyConstructor[PROTOTYPE]=null;result[IE_PROTO]=O}else{result=_NullProtoObject()}return Properties===undefined?result:objectDefineProperties(result,Properties)};var slice=[].slice;var factories={};var construct=function construct(C,argsLength,args){if(!(argsLength in factories)){for(var list=[],i=0;i<argsLength;i+=1){list[i]='a['+i+']'}factories[argsLength]=Function('C,a','return new C('+list.join(',')+')')}return factories[argsLength](C,args)};var functionBind=Function.bind||function bind(that ){var fn=aFunction$1(this);var partArgs=slice.call(arguments,1);var boundFunction=function bound(){var args=partArgs.concat(slice.call(arguments));return this instanceof boundFunction?construct(fn,args.length,args):fn.apply(that,args)};if(isObject(fn.prototype)){boundFunction.prototype=fn.prototype}return boundFunction};var nativeConstruct=getBuiltIn('Reflect','construct');var NEW_TARGET_BUG=fails(function(){function F(){}return!(nativeConstruct(function(){},[],F)instanceof F)});var ARGS_BUG=!fails(function(){nativeConstruct(function(){})});var FORCED=NEW_TARGET_BUG||ARGS_BUG;_export({target:'Reflect',stat:true,forced:FORCED,sham:FORCED},{construct:function construct(Target,args ){aFunction$1(Target);anObject(args);var newTarget=arguments.length<3?Target:aFunction$1(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG){return nativeConstruct(Target,args,newTarget)}if(Target==newTarget){switch(args.length){case 0:return new Target();case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];$args.push.apply($args,args);return new(functionBind.apply(Target,$args))()}var proto=newTarget.prototype;var instance=objectCreate(isObject(proto)?proto:Object.prototype);var result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance}});var ERROR_INSTEAD_OF_FALSE=fails(function(){Reflect.defineProperty(objectDefineProperty.f({},1,{value:1}),1,{value:2})});_export({target:'Reflect',stat:true,forced:ERROR_INSTEAD_OF_FALSE,sham:!descriptors},{defineProperty:function defineProperty(target,propertyKey,attributes){anObject(target);var key=toPrimitive(propertyKey,true);anObject(attributes);try{objectDefineProperty.f(target,key,attributes);return true}catch(error){return false}}});var getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f;_export({target:'Reflect',stat:true},{deleteProperty:function deleteProperty(target,propertyKey){var descriptor=getOwnPropertyDescriptor$2(anObject(target),propertyKey);return descriptor&&!descriptor.configurable?false:delete target[propertyKey]}});var toObject=function toObject(argument){return Object(requireObjectCoercible(argument))};var correctPrototypeGetter=!fails(function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F())!==F.prototype});var IE_PROTO$1=sharedKey('IE_PROTO');var ObjectPrototype=Object.prototype;var objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(O){O=toObject(O);if(has(O,IE_PROTO$1)){return O[IE_PROTO$1]}if(typeof O.constructor=='function'&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectPrototype:null};function get$1(target,propertyKey ){var receiver=arguments.length<3?target:arguments[2];var descriptor,prototype;if(anObject(target)===receiver){return target[propertyKey]}if(descriptor=objectGetOwnPropertyDescriptor.f(target,propertyKey)){return has(descriptor,'value')?descriptor.value:descriptor.get===undefined?undefined:descriptor.get.call(receiver)}if(isObject(prototype=objectGetPrototypeOf(target))){return get$1(prototype,propertyKey,receiver)}}_export({target:'Reflect',stat:true},{get:get$1});_export({target:'Reflect',stat:true,sham:!descriptors},{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return objectGetOwnPropertyDescriptor.f(anObject(target),propertyKey)}});_export({target:'Reflect',stat:true,sham:!correctPrototypeGetter},{getPrototypeOf:function getPrototypeOf(target){return objectGetPrototypeOf(anObject(target))}});_export({target:'Reflect',stat:true},{has:function has(target,propertyKey){return propertyKey in target}});var objectIsExtensible=Object.isExtensible;_export({target:'Reflect',stat:true},{isExtensible:function isExtensible(target){anObject(target);return objectIsExtensible?objectIsExtensible(target):true}});_export({target:'Reflect',stat:true},{ownKeys:ownKeys});var freezing=!fails(function(){return Object.isExtensible(Object.preventExtensions({}))});_export({target:'Reflect',stat:true,sham:!freezing},{preventExtensions:function preventExtensions(target){anObject(target);try{var objectPreventExtensions=getBuiltIn('Object','preventExtensions');if(objectPreventExtensions){objectPreventExtensions(target)}return true}catch(error){return false}}});function set$2(target,propertyKey,V ){var receiver=arguments.length<4?target:arguments[3];var ownDescriptor=objectGetOwnPropertyDescriptor.f(anObject(target),propertyKey);var existingDescriptor,prototype;if(!ownDescriptor){if(isObject(prototype=objectGetPrototypeOf(target))){return set$2(prototype,propertyKey,V,receiver)}ownDescriptor=createPropertyDescriptor(0)}if(has(ownDescriptor,'value')){if(ownDescriptor.writable===false||!isObject(receiver)){return false}if(existingDescriptor=objectGetOwnPropertyDescriptor.f(receiver,propertyKey)){if(existingDescriptor.get||existingDescriptor.set||existingDescriptor.writable===false){return false}existingDescriptor.value=V;objectDefineProperty.f(receiver,propertyKey,existingDescriptor)}else{objectDefineProperty.f(receiver,propertyKey,createPropertyDescriptor(0,V))}return true}return ownDescriptor.set===undefined?false:(ownDescriptor.set.call(receiver,V),true)}var MS_EDGE_BUG=fails(function(){var object=objectDefineProperty.f({},'a',{configurable:true});return Reflect.set(objectGetPrototypeOf(object),'a',1,object)!==false});_export({target:'Reflect',stat:true,forced:MS_EDGE_BUG},{set:set$2});var aPossiblePrototype=function aPossiblePrototype(it){if(!isObject(it)&&it!==null){throw TypeError("Can't set "+String(it)+' as a prototype')}return it};var objectSetPrototypeOf=Object.setPrototypeOf||('__proto__'in{}?function(){var CORRECT_SETTER=false;var test={};var setter;try{setter=Object.getOwnPropertyDescriptor(Object.prototype,'__proto__').set;setter.call(test,[]);CORRECT_SETTER=test instanceof Array}catch(error){}return function setPrototypeOf(O,proto){anObject(O);aPossiblePrototype(proto);if(CORRECT_SETTER){setter.call(O,proto)}else{O.__proto__=proto}return O}}():undefined);if(objectSetPrototypeOf){_export({target:'Reflect',stat:true},{setPrototypeOf:function setPrototypeOf(target,proto){anObject(target);aPossiblePrototype(proto);try{objectSetPrototypeOf(target,proto);return true}catch(error){return false}}})}var reflect=path.Reflect;var nativeSymbol=!!Object.getOwnPropertySymbols&&!fails(function(){return!String(Symbol())});var useSymbolAsUid=nativeSymbol &&!Symbol.sham &&_typeof(Symbol.iterator)=='symbol';var WellKnownSymbolsStore=shared('wks');var _Symbol=global_1.Symbol;var createWellKnownSymbol=useSymbolAsUid?_Symbol:_Symbol&&_Symbol.withoutSetter||uid;var wellKnownSymbol=function wellKnownSymbol(name){if(!has(WellKnownSymbolsStore,name)){if(nativeSymbol&&has(_Symbol,name)){WellKnownSymbolsStore[name]=_Symbol[name]}else{WellKnownSymbolsStore[name]=createWellKnownSymbol('Symbol.'+name)}}return WellKnownSymbolsStore[name]};var TO_STRING_TAG=wellKnownSymbol('toStringTag');var test={};test[TO_STRING_TAG]='z';var toStringTagSupport=String(test)==='[object z]';var TO_STRING_TAG$1=wellKnownSymbol('toStringTag');var CORRECT_ARGUMENTS=classofRaw(function(){return arguments}())=='Arguments';var tryGet=function tryGet(it,key){try{return it[key]}catch(error){}};var classof=toStringTagSupport?classofRaw:function(it){var O,tag,result;return it===undefined?'Undefined':it===null?'Null':typeof(tag=tryGet(O=Object(it),TO_STRING_TAG$1))=='string'?tag :CORRECT_ARGUMENTS?classofRaw(O):(result=classofRaw(O))=='Object'&&typeof O.callee=='function'?'Arguments':result};var objectToString=toStringTagSupport?{}.toString:function toString(){return '[object '+classof(this)+']'};if(!toStringTagSupport){redefine(Object.prototype,'toString',objectToString,{unsafe:true})}var createMethod$1=function createMethod(CONVERT_TO_STRING){return function($this,pos){var S=String(requireObjectCoercible($this));var position=toInteger(pos);var size=S.length;var first,second;if(position<0||position>=size){return CONVERT_TO_STRING?'':undefined}first=S.charCodeAt(position);return first<0xD800||first>0xDBFF||position+1===size||(second=S.charCodeAt(position+1))<0xDC00||second>0xDFFF?CONVERT_TO_STRING?S.charAt(position):first:CONVERT_TO_STRING?S.slice(position,position+2):(first-0xD800<<10)+(second-0xDC00)+0x10000}};var stringMultibyte={codeAt:createMethod$1(false),charAt:createMethod$1(true)};var ITERATOR=wellKnownSymbol('iterator');var BUGGY_SAFARI_ITERATORS=false;var returnThis=function returnThis(){return this};var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;if([].keys){arrayIterator=[].keys();if(!('next'in arrayIterator)){BUGGY_SAFARI_ITERATORS=true}else{PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator));if(PrototypeOfArrayIteratorPrototype!==Object.prototype){IteratorPrototype=PrototypeOfArrayIteratorPrototype}}}if(IteratorPrototype==undefined){IteratorPrototype={};}if(!has(IteratorPrototype,ITERATOR)){createNonEnumerableProperty(IteratorPrototype,ITERATOR,returnThis)}var iteratorsCore={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS};var defineProperty=objectDefineProperty.f;var TO_STRING_TAG$2=wellKnownSymbol('toStringTag');var setToStringTag=function setToStringTag(it,TAG,STATIC){if(it&&!has(it=STATIC?it:it.prototype,TO_STRING_TAG$2)){defineProperty(it,TO_STRING_TAG$2,{configurable:true,value:TAG})}};var iterators={};var IteratorPrototype$1=iteratorsCore.IteratorPrototype;var returnThis$1=function returnThis(){return this};var createIteratorConstructor=function createIteratorConstructor(IteratorConstructor,NAME,next){var TO_STRING_TAG=NAME+' Iterator';IteratorConstructor.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(1,next)});setToStringTag(IteratorConstructor,TO_STRING_TAG,false);iterators[TO_STRING_TAG]=returnThis$1;return IteratorConstructor};var IteratorPrototype$2=iteratorsCore.IteratorPrototype;var BUGGY_SAFARI_ITERATORS$1=iteratorsCore.BUGGY_SAFARI_ITERATORS;var ITERATOR$1=wellKnownSymbol('iterator');var KEYS='keys';var VALUES='values';var ENTRIES='entries';var returnThis$2=function returnThis(){return this};var defineIterator=function defineIterator(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var getIterationMethod=function getIterationMethod(KIND){if(KIND===DEFAULT&&defaultIterator){return defaultIterator}if(!BUGGY_SAFARI_ITERATORS$1&&KIND in IterablePrototype){return IterablePrototype[KIND]}switch(KIND){case KEYS:return function keys(){return new IteratorConstructor(this,KIND)};case VALUES:return function values(){return new IteratorConstructor(this,KIND)};case ENTRIES:return function entries(){return new IteratorConstructor(this,KIND)}}return function(){return new IteratorConstructor(this)}};var TO_STRING_TAG=NAME+' Iterator';var INCORRECT_VALUES_NAME=false;var IterablePrototype=Iterable.prototype;var nativeIterator=IterablePrototype[ITERATOR$1]||IterablePrototype['@@iterator']||DEFAULT&&IterablePrototype[DEFAULT];var defaultIterator=!BUGGY_SAFARI_ITERATORS$1&&nativeIterator||getIterationMethod(DEFAULT);var anyNativeIterator=NAME=='Array'?IterablePrototype.entries||nativeIterator:nativeIterator;var CurrentIteratorPrototype,methods,KEY;if(anyNativeIterator){CurrentIteratorPrototype=objectGetPrototypeOf(anyNativeIterator.call(new Iterable()));if(IteratorPrototype$2!==Object.prototype&&CurrentIteratorPrototype.next){if(objectGetPrototypeOf(CurrentIteratorPrototype)!==IteratorPrototype$2){if(objectSetPrototypeOf){objectSetPrototypeOf(CurrentIteratorPrototype,IteratorPrototype$2)}else if(typeof CurrentIteratorPrototype[ITERATOR$1]!='function'){createNonEnumerableProperty(CurrentIteratorPrototype,ITERATOR$1,returnThis$2)}}setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,true)}}if(DEFAULT==VALUES&&nativeIterator&&nativeIterator.name!==VALUES){INCORRECT_VALUES_NAME=true;defaultIterator=function values(){return nativeIterator.call(this)}}if(IterablePrototype[ITERATOR$1]!==defaultIterator){createNonEnumerableProperty(IterablePrototype,ITERATOR$1,defaultIterator)}iterators[NAME]=defaultIterator;if(DEFAULT){methods={values:getIterationMethod(VALUES),keys:IS_SET?defaultIterator:getIterationMethod(KEYS),entries:getIterationMethod(ENTRIES)};if(FORCED){for(KEY in methods){if(BUGGY_SAFARI_ITERATORS$1||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype)){redefine(IterablePrototype,KEY,methods[KEY])}}}else{_export({target:NAME,proto:true,forced:BUGGY_SAFARI_ITERATORS$1||INCORRECT_VALUES_NAME},methods)}}return methods};var charAt=stringMultibyte.charAt;var STRING_ITERATOR='String Iterator';var setInternalState=internalState.set;var getInternalState=internalState.getterFor(STRING_ITERATOR);defineIterator(String,'String',function(iterated){setInternalState(this,{type:STRING_ITERATOR,string:String(iterated),index:0});},function next(){var state=getInternalState(this);var string=state.string;var index=state.index;var point;if(index>=string.length){return{value:undefined,done:true}}point=charAt(string,index);state.index+=point.length;return{value:point,done:false}});var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};var UNSCOPABLES=wellKnownSymbol('unscopables');var ArrayPrototype=Array.prototype;if(ArrayPrototype[UNSCOPABLES]==undefined){objectDefineProperty.f(ArrayPrototype,UNSCOPABLES,{configurable:true,value:objectCreate(null)})}var addToUnscopables=function addToUnscopables(key){ArrayPrototype[UNSCOPABLES][key]=true};var ARRAY_ITERATOR='Array Iterator';var setInternalState$1=internalState.set;var getInternalState$1=internalState.getterFor(ARRAY_ITERATOR);var es_array_iterator=defineIterator(Array,'Array',function(iterated,kind){setInternalState$1(this,{type:ARRAY_ITERATOR,target:toIndexedObject(iterated),index:0,kind:kind });},function(){var state=getInternalState$1(this);var target=state.target;var kind=state.kind;var index=state.index++;if(!target||index>=target.length){state.target=undefined;return{value:undefined,done:true}}if(kind=='keys'){return{value:index,done:false}}if(kind=='values'){return{value:target[index],done:false}}return{value:[index,target[index]],done:false}},'values');iterators.Arguments=iterators.Array;addToUnscopables('keys');addToUnscopables('values');addToUnscopables('entries');var ITERATOR$2=wellKnownSymbol('iterator');var TO_STRING_TAG$3=wellKnownSymbol('toStringTag');var ArrayValues=es_array_iterator.values;for(var COLLECTION_NAME in domIterables){var Collection=global_1[COLLECTION_NAME];var CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR$2]!==ArrayValues){try{createNonEnumerableProperty(CollectionPrototype,ITERATOR$2,ArrayValues)}catch(error){CollectionPrototype[ITERATOR$2]=ArrayValues}}if(!CollectionPrototype[TO_STRING_TAG$3]){createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG$3,COLLECTION_NAME)}if(domIterables[COLLECTION_NAME]){for(var METHOD_NAME in es_array_iterator){if(CollectionPrototype[METHOD_NAME]!==es_array_iterator[METHOD_NAME]){try{createNonEnumerableProperty(CollectionPrototype,METHOD_NAME,es_array_iterator[METHOD_NAME])}catch(error){CollectionPrototype[METHOD_NAME]=es_array_iterator[METHOD_NAME]}}}}}}var nativePromiseConstructor=global_1.Promise;var redefineAll=function redefineAll(target,src,options){for(var key in src){redefine(target,key,src[key],options)}return target};var SPECIES=wellKnownSymbol('species');var setSpecies=function setSpecies(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME);var defineProperty=objectDefineProperty.f;if(descriptors&&Constructor&&!Constructor[SPECIES]){defineProperty(Constructor,SPECIES,{configurable:true,get:function get(){return this}})}};var anInstance=function anInstance(it,Constructor,name){if(!(it instanceof Constructor)){throw TypeError('Incorrect '+(name?name+' ':'')+'invocation')}return it};var ITERATOR$3=wellKnownSymbol('iterator');var ArrayPrototype$1=Array.prototype;var isArrayIteratorMethod=function isArrayIteratorMethod(it){return it!==undefined&&(iterators.Array===it||ArrayPrototype$1[ITERATOR$3]===it)};var functionBindContext=function functionBindContext(fn,that,length){aFunction$1(fn);if(that===undefined){return fn}switch(length){case 0:return function(){return fn.call(that)};case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}};var ITERATOR$4=wellKnownSymbol('iterator');var getIteratorMethod=function getIteratorMethod(it){if(it!=undefined){return it[ITERATOR$4]||it['@@iterator']||iterators[classof(it)]}}var callWithSafeIterationClosing=function callWithSafeIterationClosing(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value);}catch(error){var returnMethod=iterator['return'];if(returnMethod!==undefined){anObject(returnMethod.call(iterator))}throw error}};var iterate_1=createCommonjsModule(function(module){var Result=function Result(stopped,result){this.stopped=stopped;this.result=result};var iterate=module.exports=function(iterable,fn,that,AS_ENTRIES,IS_ITERATOR){var boundFunction=functionBindContext(fn,that,AS_ENTRIES?2:1);var iterator,iterFn,index,length,result,next,step;if(IS_ITERATOR){iterator=iterable}else{iterFn=getIteratorMethod(iterable);if(typeof iterFn!='function'){throw TypeError('Target is not iterable');}if(isArrayIteratorMethod(iterFn)){for(index=0,length=toLength(iterable.length);length>index;index+=1){result=AS_ENTRIES?boundFunction(anObject(step=iterable[index])[0],step[1]):boundFunction(iterable[index]);if(result&&result instanceof Result){return result}}return new Result(false)}iterator=iterFn.call(iterable)}next=iterator.next;while(!(step=next.call(iterator)).done){result=callWithSafeIterationClosing(iterator,boundFunction,step.value,AS_ENTRIES);if(_typeof(result)=='object'&&result&&result instanceof Result){return result}}return new Result(false)};iterate.stop=function(result){return new Result(true,result)}});var ITERATOR$5=wellKnownSymbol('iterator');var SAFE_CLOSING=false;try{var called=0;var iteratorWithReturn={next:function next(){return{done:!!called++}},'return':function _return(){SAFE_CLOSING=true}};iteratorWithReturn[ITERATOR$5]=function(){return this};Array.from(iteratorWithReturn,function(){throw 2})}catch(error){}var checkCorrectnessOfIteration=function checkCorrectnessOfIteration(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING){return false}var ITERATION_SUPPORT=false;try{var object={};object[ITERATOR$5]=function(){return{next:function next(){return{done:ITERATION_SUPPORT=true}}}};exec(object)}catch(error){}return ITERATION_SUPPORT};var SPECIES$1=wellKnownSymbol('species');var speciesConstructor=function speciesConstructor(O,defaultConstructor){var C=anObject(O).constructor;var S;return C===undefined||(S=anObject(C)[SPECIES$1])==undefined?defaultConstructor:aFunction$1(S)};var engineUserAgent=getBuiltIn('navigator','userAgent')||'';var engineIsIos=/(iphone|ipod|ipad).*applewebkit/i.test(engineUserAgent);var location$1=global_1.location;var set$3=global_1.setImmediate;var clear=global_1.clearImmediate;var process=global_1.process;var MessageChannel=global_1.MessageChannel;var Dispatch=global_1.Dispatch;var counter=0;var queue={};var ONREADYSTATECHANGE='onreadystatechange';var defer,channel,port;var run=function run(id){if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var runner=function runner(id){return function(){run(id)}};var listener=function listener(event){run(event.data)};var post=function post(id){global_1.postMessage(id+'',location$1.protocol+'//'+location$1.host)};if(!set$3||!clear){set$3=function setImmediate(fn){var args=[];var i=1;while(arguments.length>i){args.push(arguments[i++])}queue[counter+=1]=function(){(typeof fn=='function'?fn:Function(fn)).apply(undefined,args)};defer(counter);return counter};clear=function clearImmediate(id){delete queue[id]};if(classofRaw(process)=='process'){defer=function defer(id){process.nextTick(runner(id))};}else if(Dispatch&&Dispatch.now){defer=function defer(id){Dispatch.now(runner(id))};}else if(MessageChannel&&!engineIsIos){channel=new MessageChannel();port=channel.port2;channel.port1.onmessage=listener;defer=functionBindContext(port.postMessage,port,1);}else if(global_1.addEventListener&&typeof postMessage=='function'&&!global_1.importScripts&&!fails(post)){defer=post;global_1.addEventListener('message',listener,false);}else if(ONREADYSTATECHANGE in documentCreateElement('script')){defer=function defer(id){html.appendChild(documentCreateElement('script'))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run(id)}};}else{defer=function defer(id){setTimeout(runner(id),0)}}}var task={set:set$3,clear:clear};var getOwnPropertyDescriptor$3=objectGetOwnPropertyDescriptor.f;var macrotask=task.set;var MutationObserver$1=global_1.MutationObserver||global_1.WebKitMutationObserver;var process$1=global_1.process;var Promise$1=global_1.Promise;var IS_NODE=classofRaw(process$1)=='process';var queueMicrotaskDescriptor=getOwnPropertyDescriptor$3(global_1,'queueMicrotask');var queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value;var flush,head,last,notify,toggle,node,promise,then;if(!queueMicrotask){flush=function flush(){var parent,fn;if(IS_NODE&&(parent=process$1.domain)){parent.exit()}while(head){fn=head.fn;head=head.next;try{fn()}catch(error){if(head){notify()}else{last=undefined}throw error}}last=undefined;if(parent){parent.enter()};}if(IS_NODE){notify=function notify(){process$1.nextTick(flush)};}else if(MutationObserver$1&&!engineIsIos){toggle=true;node=document.createTextNode('');new MutationObserver$1(flush).observe(node,{characterData:true});notify=function notify(){node.data=toggle=!toggle};}else if(Promise$1&&Promise$1.resolve){promise=Promise$1.resolve(undefined);then=promise.then;notify=function notify(){then.call(promise,flush)};}else{notify=function notify(){macrotask.call(global_1,flush)}}}var microtask=queueMicrotask||function(fn){var task={fn:fn,next:undefined};if(last){last.next=task}if(!head){head=task;notify()}last=task};var PromiseCapability=function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined){throw TypeError('Bad Promise constructor')}resolve=$$resolve;reject=$$reject});this.resolve=aFunction$1(resolve);this.reject=aFunction$1(reject)};var f$5=function f(C){return new PromiseCapability(C)};var newPromiseCapability={f:f$5};var promiseResolve=function promiseResolve(C,x){anObject(C);if(isObject(x)&&x.constructor===C){return x}var promiseCapability=newPromiseCapability.f(C);var resolve=promiseCapability.resolve;resolve(x);return promiseCapability.promise};var hostReportErrors=function hostReportErrors(a,b){var console=global_1.console;if(console&&console.error){arguments.length===1?console.error(a):console.error(a,b)}};var perform=function perform(exec){try{return{error:false,value:exec()}}catch(error){return{error:true,value:error}}};var process$2=global_1.process;var versions=process$2&&process$2.versions;var v8=versions&&versions.v8;var match,version;if(v8){match=v8.split('.');version=match[0]+match[1]}else if(engineUserAgent){match=engineUserAgent.match(/Edge\/(\d+)/);if(!match||match[1]>=74){match=engineUserAgent.match(/Chrome\/(\d+)/);if(match){version=match[1]}}}var engineV8Version=version&& +version;var task$1=task.set;var SPECIES$2=wellKnownSymbol('species');var PROMISE='Promise';var getInternalState$2=internalState.get;var setInternalState$2=internalState.set;var getInternalPromiseState=internalState.getterFor(PROMISE);var PromiseConstructor=nativePromiseConstructor;var TypeError$1=global_1.TypeError;var document$2=global_1.document;var process$3=global_1.process;var $fetch=getBuiltIn('fetch');var newPromiseCapability$1=newPromiseCapability.f;var newGenericPromiseCapability=newPromiseCapability$1;var IS_NODE$1=classofRaw(process$3)=='process';var DISPATCH_EVENT=!!(document$2&&document$2.createEvent&&global_1.dispatchEvent);var UNHANDLED_REJECTION='unhandledrejection';var REJECTION_HANDLED='rejectionhandled';var PENDING=0;var FULFILLED=1;var REJECTED=2;var HANDLED=1;var UNHANDLED=2;var Internal,OwnPromiseCapability,PromiseWrapper,nativeThen;var FORCED$1=isForced_1(PROMISE,function(){var GLOBAL_CORE_JS_PROMISE=inspectSource(PromiseConstructor)!==String(PromiseConstructor);if(!GLOBAL_CORE_JS_PROMISE){if(engineV8Version===66){return true;}if(!IS_NODE$1&&typeof PromiseRejectionEvent!='function'){return true}}if(engineV8Version>=51&&/native code/.test(PromiseConstructor)){return false;}var promise=PromiseConstructor.resolve(1);var FakePromise=function FakePromise(exec){exec(function(){},function(){})};var constructor=promise.constructor={};constructor[SPECIES$2]=FakePromise;return!(promise.then(function(){})instanceof FakePromise)});var INCORRECT_ITERATION=FORCED$1||!checkCorrectnessOfIteration(function(iterable){PromiseConstructor.all(iterable)['catch'](function(){})});var isThenable=function isThenable(it){var then;return isObject(it)&&typeof(then=it.then)=='function'?then:false};var notify$1=function notify(promise,state,isReject){if(state.notified){return}state.notified=true;var chain=state.reactions;microtask(function(){var value=state.value;var ok=state.state==FULFILLED;var index=0;while(chain.length>index){var reaction=chain[index++];var handler=ok?reaction.ok:reaction.fail;var resolve=reaction.resolve;var reject=reaction.reject;var domain=reaction.domain;var result,then,exited;try{if(handler){if(!ok){if(state.rejection===UNHANDLED){onHandleUnhandled(promise,state)}state.rejection=HANDLED}if(handler===true){result=value}else{if(domain){domain.enter()}result=handler(value);if(domain){domain.exit();exited=true}}if(result===reaction.promise){reject(TypeError$1('Promise-chain cycle'))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else{resolve(result)}}else{reject(value)}}catch(error){if(domain&&!exited){domain.exit()}reject(error)}}state.reactions=[];state.notified=false;if(isReject&&!state.rejection){onUnhandled(promise,state)}})};var dispatchEvent=function dispatchEvent(name,promise,reason){var event,handler;if(DISPATCH_EVENT){event=document$2.createEvent('Event');event.promise=promise;event.reason=reason;event.initEvent(name,false,true);global_1.dispatchEvent(event)}else{event={promise:promise,reason:reason}}if(handler=global_1['on'+name]){handler(event)}else if(name===UNHANDLED_REJECTION){hostReportErrors('Unhandled promise rejection',reason)}}var onUnhandled=function onUnhandled(promise,state){task$1.call(global_1,function(){var value=state.value;var IS_UNHANDLED=isUnhandled(state);var result;if(IS_UNHANDLED){result=perform(function(){if(IS_NODE$1){process$3.emit('unhandledRejection',value,promise)}else{dispatchEvent(UNHANDLED_REJECTION,promise,value)}});state.rejection=IS_NODE$1||isUnhandled(state)?UNHANDLED:HANDLED;if(result.error){throw result.value}}})};var isUnhandled=function isUnhandled(state){return state.rejection!==HANDLED&&!state.parent};var onHandleUnhandled=function onHandleUnhandled(promise,state){task$1.call(global_1,function(){if(IS_NODE$1){process$3.emit('rejectionHandled',promise)}else{dispatchEvent(REJECTION_HANDLED,promise,state.value)}})};var bind=function bind(fn,promise,state,unwrap){return function(value){fn(promise,state,value,unwrap)}};var internalReject=function internalReject(promise,state,value,unwrap){if(state.done){return}state.done=true;if(unwrap){state=unwrap}state.value=value;state.state=REJECTED;notify$1(promise,state,true)};var internalResolve=function internalResolve(promise,state,value,unwrap){if(state.done){return}state.done=true;if(unwrap){state=unwrap}try{if(promise===value){throw TypeError$1("Promise can't be resolved itself")}var then=isThenable(value);if(then){microtask(function(){var wrapper={done:false};try{then.call(value,bind(internalResolve,promise,wrapper,state),bind(internalReject,promise,wrapper,state))}catch(error){internalReject(promise,wrapper,error,state)}})}else{state.value=value;state.state=FULFILLED;notify$1(promise,state,false)}}catch(error){internalReject(promise,{done:false},error,state)}};if(FORCED$1){PromiseConstructor=function Promise(executor){anInstance(this,PromiseConstructor,PROMISE);aFunction$1(executor);Internal.call(this);var state=getInternalState$2(this);try{executor(bind(internalResolve,this,state),bind(internalReject,this,state))}catch(error){internalReject(this,state,error)}};Internal=function Promise(executor){setInternalState$2(this,{type:PROMISE,done:false,notified:false,parent:false,reactions:[],rejection:false,state:PENDING,value:undefined})};Internal.prototype=redefineAll(PromiseConstructor.prototype,{then:function then(onFulfilled,onRejected){var state=getInternalPromiseState(this);var reaction=newPromiseCapability$1(speciesConstructor(this,PromiseConstructor));reaction.ok=typeof onFulfilled=='function'?onFulfilled:true;reaction.fail=typeof onRejected=='function'&&onRejected;reaction.domain=IS_NODE$1?process$3.domain:undefined;state.parent=true;state.reactions.push(reaction);if(state.state!=PENDING){notify$1(this,state,false)}return reaction.promise},'catch':function _catch(onRejected){return this.then(undefined,onRejected)}});OwnPromiseCapability=function OwnPromiseCapability(){var promise=new Internal();var state=getInternalState$2(promise);this.promise=promise;this.resolve=bind(internalResolve,promise,state);this.reject=bind(internalReject,promise,state)};newPromiseCapability.f=newPromiseCapability$1=function newPromiseCapability(C){return C===PromiseConstructor||C===PromiseWrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)};if(typeof nativePromiseConstructor=='function'){nativeThen=nativePromiseConstructor.prototype.then;redefine(nativePromiseConstructor.prototype,'then',function then(onFulfilled,onRejected){var that=this;return new PromiseConstructor(function(resolve,reject){nativeThen.call(that,resolve,reject)}).then(onFulfilled,onRejected);},{unsafe:true});if(typeof $fetch=='function'){_export({global:true,enumerable:true,forced:true},{fetch:function fetch(input ){return promiseResolve(PromiseConstructor,$fetch.apply(global_1,arguments))}})}}}_export({global:true,wrap:true,forced:FORCED$1},{Promise:PromiseConstructor});setToStringTag(PromiseConstructor,PROMISE,false);setSpecies(PROMISE);PromiseWrapper=getBuiltIn(PROMISE);_export({target:PROMISE,stat:true,forced:FORCED$1},{reject:function reject(r){var capability=newPromiseCapability$1(this);capability.reject.call(undefined,r);return capability.promise}});_export({target:PROMISE,stat:true,forced:FORCED$1},{resolve:function resolve(x){return promiseResolve(this,x)}});_export({target:PROMISE,stat:true,forced:INCORRECT_ITERATION},{all:function all(iterable){var C=this;var capability=newPromiseCapability$1(C);var resolve=capability.resolve;var reject=capability.reject;var result=perform(function(){var $promiseResolve=aFunction$1(C.resolve);var values=[];var counter=0;var remaining=1;iterate_1(iterable,function(promise){var index=counter++;var alreadyCalled=false;values.push(undefined);remaining+=1;$promiseResolve.call(C,promise).then(function(value){if(alreadyCalled){return}alreadyCalled=true;values[index]=value;--remaining||resolve(values)},reject)});--remaining||resolve(values)});if(result.error){reject(result.value)}return capability.promise},race:function race(iterable){var C=this;var capability=newPromiseCapability$1(C);var reject=capability.reject;var result=perform(function(){var $promiseResolve=aFunction$1(C.resolve);iterate_1(iterable,function(promise){$promiseResolve.call(C,promise).then(capability.resolve,reject)})});if(result.error){reject(result.value)}return capability.promise}});_export({target:'Promise',stat:true},{allSettled:function allSettled(iterable){var C=this;var capability=newPromiseCapability.f(C);var resolve=capability.resolve;var reject=capability.reject;var result=perform(function(){var promiseResolve=aFunction$1(C.resolve);var values=[];var counter=0;var remaining=1;iterate_1(iterable,function(promise){var index=counter++;var alreadyCalled=false;values.push(undefined);remaining+=1;promiseResolve.call(C,promise).then(function(value){if(alreadyCalled){return}alreadyCalled=true;values[index]={status:'fulfilled',value:value};--remaining||resolve(values)},function(e){if(alreadyCalled){return}alreadyCalled=true;values[index]={status:'rejected',reason:e};--remaining||resolve(values)})});--remaining||resolve(values)});if(result.error){reject(result.value)}return capability.promise}});var NON_GENERIC=!!nativePromiseConstructor&&fails(function(){nativePromiseConstructor.prototype['finally'].call({then:function then(){}},function(){})});_export({target:'Promise',proto:true,real:true,forced:NON_GENERIC},{'finally':function _finally(onFinally){var C=speciesConstructor(this,getBuiltIn('Promise'));var isFunction=typeof onFinally=='function';return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x})}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e})}:onFinally)}});if(typeof nativePromiseConstructor=='function'&&!nativePromiseConstructor.prototype['finally']){redefine(nativePromiseConstructor.prototype,'finally',getBuiltIn('Promise').prototype['finally'])}var promise$1=path.Promise;(function(doc){if(!doc){return}var NAVIGATION_KEYS=['Tab','ArrowUp','ArrowRight','ArrowDown','ArrowLeft','Home','End','PageUp','PageDown','Enter',' ','Escape','Up','Right','Down','Left','Esc'];var TEXT_INPUT_TYPES=['text','date','datetime-local','email','month','number','password','search','tel','time','url','week'];var keyboardFocus=false;var elements=doc.getElementsByClassName('focus-ring');function onKeydownHandler(event){if(event.ctrlKey||event.altKey||event.metaKey||NAVIGATION_KEYS.indexOf(event.key)===-1){return}keyboardFocus=true;if(doc.activeElement&&doc.activeElement!==doc.body&&doc.activeElement.tagName!=='TEXTAREA'&&!(doc.activeElement.tagName==='INPUT'&&TEXT_INPUT_TYPES.indexOf(doc.activeElement.type)!==-1)){doc.activeElement.classList.add('focus-ring')}}function onMousedownHandler(){keyboardFocus=false;for(var i=0;i<elements.length;i+=1){elements[i].classList.remove('focus-ring')}}function onFocusHandler(event){var classList=event.target.classList;if(classList&&keyboardFocus){classList.add('focus-ring')}}function onBlurHandler(event){var classList=event.target.classList;classList&&classList.remove('focus-ring')}doc.addEventListener('keydown',onKeydownHandler,true);doc.addEventListener('mousedown',onMousedownHandler,true);doc.addEventListener('focus',onFocusHandler,true);doc.addEventListener('blur',onBlurHandler,true)})(typeof window==="undefined"?undefined:document);if(window.customElements){window.customElements.forcePolyfill=true}(function(){var g=new function(){}();var aa=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function k(b){var a=aa.has(b);b=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(b);return!a&&b}function l(b){var a=b.isConnected;if(void 0!==a){return a}for(;b&&!(b.__CE_isImportDocument||b instanceof Document);){b=b.parentNode||(window.ShadowRoot&&b instanceof ShadowRoot?b.host:void 0)}return!(!b||!(b.__CE_isImportDocument||b instanceof Document))}function m(b,a){for(;a&&a!==b&&!a.nextSibling;){a=a.parentNode}return a&&a!==b?a.nextSibling:null}function n(b,a,d){d=d?d:new Set();for(var c=b;c;){if(c.nodeType===Node.ELEMENT_NODE){var e=c;a(e);var h=e.localName;if("link"===h&&"import"===e.getAttribute("rel")){c=e.import;if(c instanceof Node&&!d.has(c)){for(d.add(c),c=c.firstChild;c;c=c.nextSibling){n(c,a,d)}}c=m(b,e);continue}else if("template"===h){c=m(b,e);continue}if(e=e.__CE_shadowRoot){for(e=e.firstChild;e;e=e.nextSibling){n(e,a,d)}}}c=c.firstChild?c.firstChild:m(b,c)}}function p(b,a,d){b[a]=d}function q(){this.a=new Map();this.f=new Map();this.m=[];this.b=!1}function ba(b,a,d){b.a.set(a,d);b.f.set(d.constructor,d)}function r(b,a){b.b=!0;b.m.push(a)}function v(b,a){b.b&&n(a,function(a){return w(b,a)})}function w(b,a){if(b.b&&!a.__CE_patched){a.__CE_patched=!0;for(var d=0;d<b.m.length;d+=1){b.m[d](a)}}}function x(b,a){var d=[];n(a,function(b){return d.push(b)});for(a=0;a<d.length;a+=1){var c=d[a];1===c.__CE_state?b.connectedCallback(c):y(b,c)}}function z(b,a){var d=[];n(a,function(b){return d.push(b)});for(a=0;a<d.length;a+=1){var c=d[a];1===c.__CE_state&&b.disconnectedCallback(c)}}function A(b,a,d){d=d?d:new Set();var c=[];n(a,function(e){var a;if("link"===e.localName&&"import"===e.getAttribute("rel")){a=e.import,a instanceof Node&&"complete"===a.readyState?(a.__CE_isImportDocument=!0,a.__CE_hasRegistry=!0):e.addEventListener("load",function(){var a=e.import;a.__CE_documentLoadHandled||(a.__CE_documentLoadHandled=!0,a.__CE_isImportDocument=!0,a.__CE_hasRegistry=!0,d.delete(a),A(b,a,d))})}else{if(a=e.getAttribute("is")){e.__CE_is=a}c.push(e)}},d);if(b.b){for(a=0;a<c.length;a+=1){w(b,c[a])}}for(a=0;a<c.length;a+=1){y(b,c[a])}}function y(b,a){if(void 0===a.__CE_state){var d=b.a.get(a.__CE_is||a.localName);if(d=d&&d.localName===a.localName?d:null){d.constructionStack.push(a);var c=d.constructor;try{try{if(new c()!==a){throw Error("The custom element constructor did not produce the element being upgraded.")}}finally{d.constructionStack.pop()}}catch(f){throw a.__CE_state=2,f}a.__CE_state=1;a.__CE_definition=d;if(d.attributeChangedCallback){for(d=d.observedAttributes,c=0;c<d.length;c+=1){var e=d[c],h=a.getAttribute(e);null!==h&&b.attributeChangedCallback(a,e,null,h,null)}}l(a)&&b.connectedCallback(a)}}}q.prototype.connectedCallback=function(b){var a=b.__CE_definition;a.connectedCallback&&a.connectedCallback.call(b)};q.prototype.disconnectedCallback=function(b){var a=b.__CE_definition;a.disconnectedCallback&&a.disconnectedCallback.call(b)};q.prototype.attributeChangedCallback=function(b,a,d,c,e){var h=b.__CE_definition;h.attributeChangedCallback&&-1<h.observedAttributes.indexOf(a)&&h.attributeChangedCallback.call(b,a,d,c,e)};function B(b,a){this.c=b;this.a=a;this.b=void 0;A(this.c,this.a);"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function C(b){b.b&&b.b.disconnect()}B.prototype.f=function(b){var a=this.a.readyState;"interactive"!==a&&"complete"!==a||C(this);for(a=0;a<b.length;a+=1){for(var d=b[a].addedNodes,c=0;c<d.length;c+=1){A(this.c,d[c])}}};function ca(){var b=this;this.b=this.a=void 0;this.f=new Promise(function(a){b.b=a;b.a&&a(b.a)})}function D(b){if(b.a){throw Error("Already resolved.")}b.a=void 0;b.b&&b.b(void 0)}function E(b){this.i=!1;this.c=b;this.l=new Map();this.j=function(b){return b()};this.g=!1;this.h=[];this.s=new B(b,document)}E.prototype.define=function(b,a,d){var c=this;if(!(a instanceof Function)){throw new TypeError("Custom element constructors must be functions.")}if(!k(b)){throw new SyntaxError("The element name '"+b+"' is not valid.")}if(this.c.a.get(b)){throw Error("A custom element with name '"+b+"' has already been defined.")}var e=b;if(d&&d.extends){if(!this.enableCustomizedBuiltins){throw Error("Customized builtin elements are disabled by default. Set customElements.enableCustomizedBuiltins = true.")}if(k(d.extends)){throw Error("A customized builtin element may not extend a custom element.")}if(document.createElement(d.extends)instanceof window.HTMLUnknownElement){throw Error("Cannot extend '"+d.extends+"': is not a real HTML element")}e=d.extends}if(this.i){throw Error("A custom element is already being defined.")}this.i=!0;var h,f,u,t,P;try{d=function d(b){var a=Q[b];if(void 0!==a&&!(a instanceof Function)){throw Error("The '"+b+"' callback must be a function.")}return a};var Q=a.prototype;if(!(Q instanceof Object)){throw new TypeError("The custom element constructor's prototype is not an object.")}h=d("connectedCallback");f=d("disconnectedCallback");u=d("adoptedCallback");t=d("attributeChangedCallback");P=a.observedAttributes||[]}catch(xa){return}finally{this.i=!1}ba(this.c,b,{name:b,localName:e,constructor:a,connectedCallback:h,disconnectedCallback:f,adoptedCallback:u,attributeChangedCallback:t,observedAttributes:P,constructionStack:[]});this.h.push(b);this.g||(this.g=!0,this.j(function(){if(!1!==c.g){for(c.g=!1,A(c.c,document);0<c.h.length;){var b=c.h.shift();(b=c.l.get(b))&&D(b)}}}))};E.prototype.get=function(b){if(b=this.c.a.get(b)){return b.constructor}}E.prototype.upgradeElement=function(b){y(this.c,b)};E.prototype.whenDefined=function(b){if(!k(b)){return Promise.reject(new SyntaxError("'"+b+"' is not a valid custom element name."))}var a=this.l.get(b);if(a){return a.f}a=new ca();this.l.set(b,a);this.c.a.get(b)&&-1===this.h.indexOf(b)&&D(a);return a.f};E.prototype.u=function(b){C(this.s);var a=this.j;this.j=function(d){return b(function(){return a(d)})}};window.CustomElementRegistry=E;E.prototype.define=E.prototype.define;E.prototype.get=E.prototype.get;E.prototype.whenDefined=E.prototype.whenDefined;E.prototype.upgrade=E.prototype.upgradeElement;E.prototype.polyfillWrapFlushCallback=E.prototype.u;var F=window.Document.prototype.createElement,da=window.Document.prototype.createElementNS,ea=window.Document.prototype.importNode,fa=window.Document.prototype.prepend,ga=window.Document.prototype.append,G=window.Node.prototype.cloneNode,H=window.Node.prototype.appendChild,I=window.Node.prototype.insertBefore,J=window.Node.prototype.removeChild,K=window.Node.prototype.replaceChild,L=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),M=window.Element.prototype.attachShadow,N=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),O=window.Element.prototype.getAttribute,R=window.Element.prototype.setAttribute,S=window.Element.prototype.removeAttribute,T=window.Element.prototype.getAttributeNS,U=window.Element.prototype.setAttributeNS,V=window.Element.prototype.removeAttributeNS,W=window.Element.prototype.insertAdjacentElement,ha=window.Element.prototype.prepend,ia=window.Element.prototype.append,ja=window.Element.prototype.before,ka=window.Element.prototype.after,la=window.Element.prototype.replaceWith,ma=window.Element.prototype.remove,na=window.HTMLElement,X=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),oa=window.HTMLElement.prototype.insertAdjacentElement,pa={Button:window.HTMLButtonElement,Canvas:window.HTMLCanvasElement,Data:window.HTMLDataElement,Head:window.HTMLHeadElement,Mod:window.HTMLModElement,TableCell:window.HTMLTableCellElement,TableCol:window.HTMLTableColElement,Anchor:window.HTMLAnchorElement,Area:window.HTMLAreaElement,Base:window.HTMLBaseElement,Body:window.HTMLBodyElement,BR:window.HTMLBRElement,DataList:window.HTMLDataListElement,Details:window.HTMLDetailsElement,Dialog:window.HTMLDialogElement,Div:window.HTMLDivElement,DList:window.HTMLDListElement,Embed:window.HTMLEmbedElement,FieldSet:window.HTMLFieldSetElement,Form:window.HTMLFormElement,Heading:window.HTMLHeadingElement,HR:window.HTMLHRElement,Html:window.HTMLHtmlElement,IFrame:window.HTMLIFrameElement,Image:window.HTMLImageElement,Input:window.HTMLInputElement,Keygen:window.HTMLKeygenElement,Label:window.HTMLLabelElement,Legend:window.HTMLLegendElement,LI:window.HTMLLIElement,Link:window.HTMLLinkElement,Map:window.HTMLMapElement,Media:window.HTMLMediaElement,Menu:window.HTMLMenuElement,MenuItem:window.HTMLMenuItemElement,Meta:window.HTMLMetaElement,Meter:window.HTMLMeterElement,Object:window.HTMLObjectElement,OList:window.HTMLOListElement,OptGroup:window.HTMLOptGroupElement,Option:window.HTMLOptionElement,Output:window.HTMLOutputElement,Paragraph:window.HTMLParagraphElement,Param:window.HTMLParamElement,Picture:window.HTMLPictureElement,Pre:window.HTMLPreElement,Progress:window.HTMLProgressElement,Quote:window.HTMLQuoteElement,Script:window.HTMLScriptElement,Select:window.HTMLSelectElement,Slot:window.HTMLSlotElement,Source:window.HTMLSourceElement,Span:window.HTMLSpanElement,Style:window.HTMLStyleElement,TableCaption:window.HTMLTableCaptionElement,Table:window.HTMLTableElement,TableRow:window.HTMLTableRowElement,TableSection:window.HTMLTableSectionElement,Template:window.HTMLTemplateElement,TextArea:window.HTMLTextAreaElement,Time:window.HTMLTimeElement,Title:window.HTMLTitleElement,Track:window.HTMLTrackElement,UList:window.HTMLUListElement,Unknown:window.HTMLUnknownElement};function qa(){var b=Y;window.HTMLElement=function(){function a(){var a=this.constructor,c=b.f.get(a);if(!c){throw Error("The custom element being constructed was not registered with `customElements`.")}var e=c.constructionStack;if(!e.length){return e=F.call(document,c.localName),Object.setPrototypeOf(e,a.prototype),e.__CE_state=1,e.__CE_definition=c,w(b,e),e}var c=e.length-1,h=e[c];if(h===g){throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.")}e[c]=g;Object.setPrototypeOf(h,a.prototype);w(b,h);return h}a.prototype=na.prototype;return a}()}function ra(){var b=Y;function a(a,e){e&&(window[a]=function(){function d(){var e=this.constructor,d=b.f.get(e);if(!d){throw Error("The custom element being constructed was not registered with `customElements`.")}var c=d.constructionStack;if(!c.length){return c=F.call(document,d.localName),c.setAttribute("is",d.name),Object.setPrototypeOf(c,e.prototype),c.__CE_state=1,c.__CE_definition=d,w(b,c),c}var d=c.length-1,h=c[d];if(h===g){throw Error("The "+a+" constructor was either called reentrantly for this constructor or called multiple times.")}c[d]=g;Object.setPrototypeOf(h,e.prototype);w(b,h);return h}d.prototype=e.prototype;return d}())}for(var d in pa){a("HTML"+d+"Element",pa[d])}}function sa(b,a,d){a.prepend=function(a){for(var e=[],c=0;c<arguments.length;c+=1){e[c-0]=arguments[c]}c=e.filter(function(b){return b instanceof Node&&l(b)});d.o.apply(this,e);for(var f=0;f<c.length;f+=1){z(b,c[f])}if(l(this)){for(c=0;c<e.length;c+=1){f=e[c],f instanceof Element&&x(b,f)}}};a.append=function(a){for(var e=[],c=0;c<arguments.length;c+=1){e[c-0]=arguments[c]}c=e.filter(function(b){return b instanceof Node&&l(b)});d.append.apply(this,e);for(var f=0;f<c.length;f+=1){z(b,c[f])}if(l(this)){for(c=0;c<e.length;c+=1){f=e[c],f instanceof Element&&x(b,f)}}}}function ta(){var b=Y;p(Document.prototype,"createElement",function(a,d){if(this.__CE_hasRegistry){var c=b.a.get(d&&d.is?d.is:a);if(c){return new c.constructor()}}a=F.call(this,a);d&&d.is&&(a.__CE_is=d.is,a.setAttribute("is",d.is));w(b,a);return a});p(Document.prototype,"importNode",function(a,d){a=ea.call(this,a,d);this.__CE_hasRegistry?A(b,a):v(b,a);return a});p(Document.prototype,"createElementNS",function(a,d,c){if(this.__CE_hasRegistry&&(null===a||"http://www.w3.org/1999/xhtml"===a)){var e=b.a.get(c&&c.is?c.is:d);if(e){return new e.constructor()}}a=da.call(this,a,d);c&&c.is&&(a.__CE_is=c.is,a.setAttribute("is",c.is));w(b,a);return a});sa(b,Document.prototype,{o:fa,append:ga})}function ua(){var b=Y;function a(a,c){Object.defineProperty(a,"textContent",{enumerable:c.enumerable,configurable:!0,get:c.get,set:function set(a){if(this.nodeType===Node.TEXT_NODE){c.set.call(this,a)}else{var e=void 0;if(this.firstChild){var d=this.childNodes,u=d.length;if(0<u&&l(this)){for(var e=Array(u),t=0;t<u;t+=1){e[t]=d[t]}}}c.set.call(this,a);if(e){for(a=0;a<e.length;a+=1){z(b,e[a])}}}}})}p(Node.prototype,"insertBefore",function(a,c){if(a instanceof DocumentFragment){var e=Array.prototype.slice.apply(a.childNodes);a=I.call(this,a,c);if(l(this)){for(c=0;c<e.length;c+=1){x(b,e[c])}}return a}e=l(a);c=I.call(this,a,c);e&&z(b,a);l(this)&&x(b,a);return c});p(Node.prototype,"appendChild",function(a){if(a instanceof DocumentFragment){var c=Array.prototype.slice.apply(a.childNodes);a=H.call(this,a);if(l(this)){for(var e=0;e<c.length;e+=1){x(b,c[e])}}return a}c=l(a);e=H.call(this,a);c&&z(b,a);l(this)&&x(b,a);return e});p(Node.prototype,"cloneNode",function(a){a=G.call(this,a);this.ownerDocument.__CE_hasRegistry?A(b,a):v(b,a);return a});p(Node.prototype,"removeChild",function(a){var c=l(a),e=J.call(this,a);c&&z(b,a);return e});p(Node.prototype,"replaceChild",function(a,c){if(a instanceof DocumentFragment){var e=Array.prototype.slice.apply(a.childNodes);a=K.call(this,a,c);if(l(this)){for(z(b,c),c=0;c<e.length;c+=1){x(b,e[c])}}return a}var e=l(a),d=K.call(this,a,c),f=l(this);f&&z(b,c);e&&z(b,a);f&&x(b,a);return d});L&&L.get?a(Node.prototype,L):r(b,function(b){a(b,{enumerable:!0,configurable:!0,get:function get(){for(var a=[],b=0;b<this.childNodes.length;b+=1){a.push(this.childNodes[b].textContent)}return a.join("")},set:function set(a){for(;this.firstChild;){J.call(this,this.firstChild)}H.call(this,document.createTextNode(a))}})})}function va(b){var a=Element.prototype;a.before=function(a){for(var c=[],e=0;e<arguments.length;e+=1){c[e-0]=arguments[e]}e=c.filter(function(a){return a instanceof Node&&l(a)});ja.apply(this,c);for(var d=0;d<e.length;d+=1){z(b,e[d])}if(l(this)){for(e=0;e<c.length;e+=1){d=c[e],d instanceof Element&&x(b,d)}}};a.after=function(a){for(var c=[],e=0;e<arguments.length;e+=1){c[e-0]=arguments[e]}e=c.filter(function(a){return a instanceof Node&&l(a)});ka.apply(this,c);for(var d=0;d<e.length;d+=1){z(b,e[d])}if(l(this)){for(e=0;e<c.length;e+=1){d=c[e],d instanceof Element&&x(b,d)}}};a.replaceWith=function(a){for(var c=[],e=0;e<arguments.length;e+=1){c[e-0]=arguments[e]}var e=c.filter(function(a){return a instanceof Node&&l(a)}),d=l(this);la.apply(this,c);for(var f=0;f<e.length;f+=1){z(b,e[f])}if(d){for(z(b,this),e=0;e<c.length;e+=1){d=c[e],d instanceof Element&&x(b,d)}}};a.remove=function(){var a=l(this);ma.call(this);a&&z(b,this)}}function wa(){var b=Y;function a(a,c){Object.defineProperty(a,"innerHTML",{enumerable:c.enumerable,configurable:!0,get:c.get,set:function set(a){var e=this,d=void 0;l(this)&&(d=[],n(this,function(a){a!==e&&d.push(a)}));c.set.call(this,a);if(d){for(var h=0;h<d.length;h+=1){var f=d[h];1===f.__CE_state&&b.disconnectedCallback(f)}}this.ownerDocument.__CE_hasRegistry?A(b,this):v(b,this);return a}})}function d(a,c){p(a,"insertAdjacentElement",function(a,e){var d=l(e);a=c.call(this,a,e);d&&z(b,e);l(a)&&x(b,e);return a})}M?p(Element.prototype,"attachShadow",function(a){return this.__CE_shadowRoot=a=M.call(this,a)}):console.warn("Custom Elements: `Element#attachShadow` was not patched.");if(N&&N.get){a(Element.prototype,N)}else if(X&&X.get){a(HTMLElement.prototype,X)}else{var c=F.call(document,"div");r(b,function(b){a(b,{enumerable:!0,configurable:!0,get:function get(){return G.call(this,!0).innerHTML},set:function set(a){var b="template"===this.localName?this.content:this;for(c.innerHTML=a;0<b.childNodes.length;){J.call(b,b.childNodes[0])}for(;0<c.childNodes.length;){H.call(b,c.childNodes[0])}}})})}p(Element.prototype,"setAttribute",function(a,c){if(1!==this.__CE_state){return R.call(this,a,c)}var e=O.call(this,a);R.call(this,a,c);c=O.call(this,a);b.attributeChangedCallback(this,a.toLowerCase(),e,c,null)});p(Element.prototype,"setAttributeNS",function(a,c,d){if(1!==this.__CE_state){return U.call(this,a,c,d)}var e=T.call(this,a,c);U.call(this,a,c,d);d=T.call(this,a,c);b.attributeChangedCallback(this,c,e,d,a)});p(Element.prototype,"removeAttribute",function(a){if(1!==this.__CE_state){return S.call(this,a)}var c=O.call(this,a);S.call(this,a);null!==c&&b.attributeChangedCallback(this,a.toLowerCase(),c,null,null)});p(Element.prototype,"removeAttributeNS",function(a,c){if(1!==this.__CE_state){return V.call(this,a,c)}var d=T.call(this,a,c);V.call(this,a,c);var e=T.call(this,a,c);d!==e&&b.attributeChangedCallback(this,c,d,e,a)});oa?d(HTMLElement.prototype,oa):W?d(Element.prototype,W):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched.");sa(b,Element.prototype,{o:ha,append:ia});va(b)}var Z=window.customElements;if(!Z||Z.forcePolyfill||"function"!=typeof Z.define||"function"!=typeof Z.get){var Y=new q();qa();ra();ta();ua();wa();document.__CE_hasRegistry=!0;var customElements=new E(Y);customElements.enableCustomizedBuiltins=true;Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:customElements})}}).call(self);var vent=createCommonjsModule(function(module,exports){(function(root,factory){{module.exports=factory()}})(commonjsGlobal,function(){var lastID=0;var scopedSelectorRegex=/^\s*(>|:scope\s*>)/;function contains(set,subSet){for(var i=0;i<subSet.length;i+=1){if(set.indexOf(subSet[i])===-1){return false}}return true}function isScoped(selector){return selector&&scopedSelectorRegex.test(selector)}function ventStopPropagation(){this._ventPropagationStopped=true;Event.prototype.stopPropagation.call(this)}function ventStopImmediatePropagation(){this._ventImmediatePropagationStopped=true;Event.prototype.stopImmediatePropagation.call(this)}var matchesSelector=function(){var proto=Element.prototype;var matchesSelector=proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;if(!matchesSelector){throw new Error('Vent: Browser does not support matchesSelector')}return matchesSelector}();function Vent(elementOrSelector){if(this===root){throw new Error('Vent must be invoked with the new keyword')}var root;if(typeof elementOrSelector==='string'){root=document.querySelector(elementOrSelector)}else{root=elementOrSelector}this.root=root;this._listenersByType=Object.create(null);this._allListeners=[];this._executeCaptureListeners=this._executeCaptureListeners.bind(this);this._executeBubbleListeners=this._executeBubbleListeners.bind(this);this._id=this._id||lastID++}Vent.prototype._listenerMatchesRootTarget=function(listener,target){return(listener.selector===null&&target===this.root)};Vent.prototype._listenerMatchesDelegateTarget=function(listener,target){return(target!==document&&target!==this.root&&listener.selector!==null&&(listener.isScoped?matchesSelector.call(target,'[__vent-id__="'+this._id+'"] '+listener.selector):matchesSelector.call(target,listener.selector)))};Vent.prototype._listenerMatchesEventPhase=function(listener,useCapture){return listener.useCapture===useCapture};Vent.prototype._executeListenersAtElement=function(target,listeners,event,useCapture){var listener;var returnValue;executeListeners:for(var listenerIndex=0;listenerIndex<listeners.length;listenerIndex+=1){listener=listeners[listenerIndex];if(!(event.type==='click'&&target.disabled===true)&&(this._listenerMatchesRootTarget(listener,target)||this._listenerMatchesDelegateTarget(listener,target))&&this._listenerMatchesEventPhase(listener,useCapture)){event.matchedTarget=target;returnValue=listener.handler.call(target,event);if(returnValue===false){event.preventDefault();event.stopPropagation()}if(event._ventImmediatePropagationStopped){break executeListeners}}};};Vent.prototype._executeCaptureListeners=function(event){var listeners=this._listenersByType[event.type];if(!listeners){throw new Error('Vent: _executeListeners called in response to '+event.type+', but we are not listening to it')}if(listeners.length){listeners=listeners.slice();this._decorateEvent(event);var eventPath=this._getPath(event);trickleDown:for(var eventPathIndex=eventPath.length-1;eventPathIndex>=0;eventPathIndex-=1){if(!listeners.length){break trickleDown}var currentTargetElement=eventPath[eventPathIndex];this._executeListenersAtElement(currentTargetElement,listeners,event,true);if(event._ventImmediatePropagationStopped||event._ventPropagationStopped){break trickleDown}}}this._undecorateEvent(event)};Vent.prototype._executeBubbleListeners=function(event){var listeners=this._listenersByType[event.type];if(!listeners){throw new Error('Vent: _executeListeners called in response to '+event.type+', but we are not listening to it')}if(listeners.length){listeners=listeners.slice();this._decorateEvent(event);var shouldBubble=event.type!=='focus'&&event.type!=='blur';var eventPath=this._getPath(event);bubbleUp:for(var eventPathIndex=0;eventPathIndex<eventPath.length;eventPathIndex+=1){if(!listeners.length){break bubbleUp}var currentTargetElement=eventPath[eventPathIndex];this._executeListenersAtElement(currentTargetElement,listeners,event,false);if(event._ventImmediatePropagationStopped||event._ventPropagationStopped){break bubbleUp}if(!shouldBubble){break bubbleUp}}}this._undecorateEvent(event);event['_ventPath'+this._id]=null};Vent.prototype._decorateEvent=function(event){event.stopPropagation=ventStopPropagation;event.stopImmediatePropagation=ventStopImmediatePropagation};Vent.prototype._undecorateEvent=function(event){event.stopPropagation=Event.prototype.stopPropagation;event.stopImmediatePropagation=Event.prototype.stopImmediatePropagation};Vent.prototype._getPath=function(event){if(event['_ventPath'+this._id]){return event['_ventPath'+this._id]}var target=event.target;if(target.nodeType===Node.TEXT_NODE){target=target.parentNode}var pathEl=target;var eventPath=[];while(pathEl&&pathEl!==this.root){eventPath.push(pathEl);pathEl=pathEl.parentNode}eventPath.push(this.root);event['_ventPath'+this._id]=eventPath;return eventPath};Vent.prototype.on=function(eventName,selector,handler,useCapture){if(typeof selector==='function'){useCapture=handler;handler=selector;selector=null}if(typeof handler!=='function'){throw new Error('Vent: Cannot add listener with non-function handler')}if(!selector){selector=null}if(typeof useCapture==='undefined'){if(eventName==='focus'||eventName==='blur'){useCapture=true}else{useCapture=false}}var namespaces=null;var dotIndex=eventName.indexOf('.');if(dotIndex!==-1){namespaces=eventName.slice(dotIndex+1).split('.');eventName=eventName.slice(0,dotIndex)}var listenerList=this._listenersByType[eventName];if(!listenerList){listenerList=this._listenersByType[eventName]=[];this.root.addEventListener(eventName,this._executeCaptureListeners,true);this.root.addEventListener(eventName,this._executeBubbleListeners,false)}var listenerIsScoped=isScoped(selector);if(listenerIsScoped){selector=selector.replace(scopedSelectorRegex,'>');this.root.setAttribute('__vent-id__',this._id)}var eventObject={eventName:eventName,handler:handler,namespaces:namespaces,selector:selector,useCapture:useCapture,isScoped:listenerIsScoped};listenerList.push(eventObject);this._allListeners.push(eventObject)};Vent.prototype.off=function(eventName,selector,handler,useCapture){if(typeof selector==='function'){useCapture=handler;handler=selector;selector=null}if(typeof eventName==='undefined'){eventName=null}if(typeof selector==='undefined'){selector=null}if(typeof handler==='undefined'){handler=null}if(typeof useCapture==='undefined'){useCapture=null}var namespaces=null;if(eventName){var dotIndex=eventName.indexOf('.');if(dotIndex!==-1){namespaces=eventName.slice(dotIndex+1).split('.');eventName=eventName.slice(0,dotIndex)}}if(eventName===''){eventName=null}var listener;var index;var listeners=this._allListeners;for(var i=0;i<listeners.length;i+=1){listener=listeners[i];if((eventName===null||listener.eventName===eventName)&&(selector===null||listener.selector===selector)&&(handler===null||listener.handler===handler)&&(useCapture===null||listener.useCapture===useCapture)&&(namespaces===null||listener.namespaces&&contains(listener.namespaces,namespaces))){this._allListeners.splice(i,1);i-=1;if(!this._listenersByType[listener.eventName]){throw new Error('Vent: Missing listenersByType for '+listener.eventName)}index=this._listenersByType[listener.eventName].indexOf(listener);if(index!==-1){var mapList=this._listenersByType[listener.eventName];mapList.splice(index,1);if(mapList.length===0){this.root.removeEventListener(listener.eventName,this._executeCaptureListeners,true);this.root.removeEventListener(listener.eventName,this._executeBubbleListeners,false);this._listenersByType[listener.eventName]=null}}else{throw new Error('Vent: Event existed in allEvents, but did not exist in listenersByType')}}}return this};if(typeof CustomEvent==='function'){Vent.prototype.dispatch=function(eventName,options){options=options||{};if(typeof options.bubbles==='undefined'){options.bubbles=true}if(typeof options.cancelable==='undefined'){options.cancelable=true}var event=new CustomEvent(eventName,options);this.root.dispatchEvent(event);return event}}else{Vent.prototype.dispatch=function(eventName,options){options=options||{};if(typeof options.bubbles==='undefined'){options.bubbles=true}if(typeof options.cancelable==='undefined'){options.cancelable=true}var event=document.createEvent('CustomEvent');event.initCustomEvent(eventName,options.bubbles,options.cancelable,options.detail);var defaultPrevented=!this.root.dispatchEvent(event);if(defaultPrevented!==event.defaultPrevented){var patchedEvent=Object.create(event);Object.defineProperty(patchedEvent,'defaultPrevented',{value:defaultPrevented});return patchedEvent}return event}}Vent.prototype.destroy=function(){if(this.destroyed){return}this.off();this._listenersByType=null;this._allListeners=null;this.root=null;this.destroyed=true};return Vent})});var documentCreateElement$1=document.createElement;document.createElement=function createElement(){if(typeof arguments[1]==='string'){arguments[1]={is:arguments[1]}}return documentCreateElement$1.apply(this,arguments)};!function(e,t){function n(){var e=A.splice(0,A.length);for(et=0;e.length;){e.shift().call(null,e.shift())}}function r(e,t){for(var n=0,r=e.length;n<r;n+=1){T(e[n],t)}}function o(e){for(var t,n=0,r=e.length;n<r;n+=1){t=e[n],V(t,ae[a(t)])}}function l(e){return function(t){ke(t)&&(T(t,e),ie.length&&r(t.querySelectorAll(ie),e))}}function a(e){var t=Ge.call(e,"is"),n=e.nodeName.toUpperCase(),r=ce.call(le,t?ne+t.toUpperCase():te+n);return t&&-1<r&&!i(n,t)?-1:r}function i(e,t){return -1<ie.indexOf(e+'[is="'+t+'"]')}function u(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[Q]||2,a=e[W]||3;!at||o&&o!==t||!t[j]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[j](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function c(e){var t=l(e);return function(e){A.push(t,e.target),et&&clearTimeout(et),et=setTimeout(n,1)}}function s(e){lt&&(lt=!1,e.currentTarget.removeEventListener(J,s)),ie.length&&r((e.target||y).querySelectorAll(ie),e.detail===B?B:x),Ue&&p()}function m(e,t){var n=this;Xe.call(n,e,t),O.call(n,{target:n})}function f(e,t,n){var r=t.apply(e,n),l=a(r);return -1<l&&V(r,ae[l]),n.pop()&&ie.length&&o(r.querySelectorAll(ie)),r}function d(e,t){Se(e,t),I?I.observe(e,Ye):(ot&&(e.setAttribute=m,e[_]=D(e),e[k](ee,O)),e[k](Y,u)),e[X]&&at&&(e.created=!0,e[X](),e.created=!1)}function p(){for(var e,t=0,n=xe.length;t<n;t+=1){e=xe[t],ue.contains(e)||(n--,xe.splice(t--,1),T(e,B))}}function h(e){throw new Error("A "+e+" type is already registered")}function T(e,t){var n,r,o=a(e);-1<o&&!Ze.call(e,"TEMPLATE")&&(S(e,ae[o]),o=0,t!==x||e[x]?t!==B||e[B]||(e[x]=!1,e[B]=!0,r="disconnected",o=1):(e[B]=!1,e[x]=!0,r="connected",o=1,Ue&&ce.call(xe,e)<0&&xe.push(e)),o&&(n=e[t+q]||e[r+q])&&n.call(e))}function L(){}function M(e,t,n){var r=n&&n[Z]||"",o=t.prototype,l=Fe(o),a=t.observedAttributes||pe,i={prototype:l};_e(l,X,{value:function value(){if(Ae){Ae=!1}else if(!this[He]){this[He]=!0,new t(this),o[X]&&o[X].call(this);var e=Oe[De.get(t)];(!be||e.create.length>1)&&H(this)}}}),_e(l,j,{value:function value(e){-1<ce.call(a,e)&&o[j]&&o[j].apply(this,arguments)}}),o[z]&&_e(l,G,{value:o[z]}),o[K]&&_e(l,$,{value:o[K]}),r&&(i[Z]=r),e=e.toUpperCase(),Oe[e]={constructor:t,create:r?[r,Ie(e)]:[e]},De.set(t,e),y[R](e.toLowerCase(),i),g(e),Ne[e].r()}function E(e){var t=Oe[e.toUpperCase()];return t&&t.constructor}function v(e){return "string"==typeof e?e:e&&e.is||""}function H(e){for(var t,n=e[j],r=n?e.attributes:pe,o=r.length;o-=1;){t=r[o],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}}function g(e){return e=e.toUpperCase(),e in Ne||(Ne[e]={},Ne[e].p=new we(function(t){Ne[e].r=t})),Ne[e].p}function b(){ge&&delete e.customElements,de(e,"customElements",{configurable:!0,value:new L()}),de(e,"CustomElementRegistry",{configurable:!0,value:L});for(var t=w.get(/^HTML[A-Z]*[a-z]/),n=t.length;n-=1;function(t){var n=e[t];if(n){e[t]=function(e){var t,r;return e||(e=this),e[He]||(Ae=!0,t=Oe[De.get(e.constructor)],r=be&&1===t.create.length,e=r?Reflect.construct(n,pe,t.constructor):y.createElement.apply(y,t.create),e[He]=!0,Ae=!1,r||H(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(r){de(n,He,{value:e[t]})}}}(t[n])){}y.createElement=function(e,t){var n=v(t);return n?We.call(this,e,Ie(n)):We.call(this,e)},tt||(rt=!0,y[R](""))}var y=e.document,C=e.Object,w=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,a=function a(e){var t,n=[];for(t in u){e.test(t)&&n.push(t)}return n},i=function i(e,t){(t=t.toLowerCase())in u||(u[e]=(u[e]||[]).concat(t),u[t]=u[t.toUpperCase()]=e)},u=(C.create||C)(null),c={};for(n in e){for(o in e[n]){for(r=e[n][o],u[o]=r,t=0;t<r.length;t+=1){u[r[t].toLowerCase()]=u[r[t].toUpperCase()]=o}}}return c.get=function(e){return "string"==typeof e?u[e]||(l.test(e)?[]:""):a(e)},c.set=function(e,t){return l.test(e)?i(e,t):i(t,e),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=_typeof(t)&&(t={type:t||"auto"});var A,O,N,D,I,F,S,V,P,R="registerElement",U=1e5*e.Math.random()>>0,_="__"+R+U,k="addEventListener",x="attached",q="Callback",B="detached",Z="extends",j="attributeChanged"+q,G=x+q,z="connected"+q,K="disconnected"+q,X="created"+q,$=B+q,Q="ADDITION",W="REMOVAL",Y="DOMAttrModified",J="DOMContentLoaded",ee="DOMSubtreeModified",te="<",ne="=",re=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,oe=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],le=[],ae=[],ie="",ue=y.documentElement,ce=le.indexOf||function(e){for(var t=this.length;t-- &&this[t]!==e;){}return t},se=C.prototype,me=se.hasOwnProperty,fe=se.isPrototypeOf,de=C.defineProperty,pe=[],he=C.getOwnPropertyDescriptor,Te=C.getOwnPropertyNames,Le=C.getPrototypeOf,Me=C.setPrototypeOf,Ee=!!C.__proto__,He="__dreCEv1",ge=e.customElements,be=!/^force/.test(t.type)&&!!(ge&&ge.define&&ge.get&&ge.whenDefined),ye=C.create||C,Ce=e.Map||function(){var e,t=[],n=[];return{get:function get(e){return n[ce.call(t,e)]},set:function set(r,o){e=ce.call(t,r),e<0?n[t.push(r)-1]=o:n[e]=o}}},we=e.Promise||function(e){function t(e){for(r=!0;n.length;){n.shift()(e)}}var n=[],r=!1,o={"catch":function _catch(){return o},then:function then(e){return n.push(e),r&&setTimeout(t,1),o}};return e(t),o},Ae=!1,Oe=ye(null),Ne=ye(null),De=new Ce(),Ie=function Ie(e){return e.toLowerCase()},Fe=C.create||function ct(e){return e?(ct.prototype=e,new ct()):this},Se=Me||(Ee?function(e,t){return e.__proto__=t,e}:Te&&he?function(){function e(e,t){for(var n,r=Te(t),o=0,l=r.length;o<l;o+=1){n=r[o],me.call(e,n)||de(e,n,he(t,n))}}return function(t,n){do{e(t,n)}while((n=Le(n))&&!fe.call(n,t));return t}}():function(e,t){for(var n in t){e[n]=t[n]}return e}),Ve=e.MutationObserver||e.WebKitMutationObserver,Pe=e.HTMLAnchorElement,Re=(e.HTMLElement||e.Element||e.Node).prototype,Ue=!fe.call(Re,ue),_e=Ue?function(e,t,n){return e[t]=n.value,e}:de,ke=Ue?function(e){return 1===e.nodeType}:function(e){return fe.call(Re,e)},xe=Ue&&[],qe=Re.attachShadow,Be=Re.cloneNode,Ze=Re.closest||function(e){for(var t=this;t&&t.nodeName!==e;){t=t.parentNode}return t},je=Re.dispatchEvent,Ge=Re.getAttribute,ze=Re.hasAttribute,Ke=Re.removeAttribute,Xe=Re.setAttribute,$e=y.createElement,Qe=y.importNode,We=$e,Ye=Ve&&{attributes:!0,characterData:!0,attributeOldValue:!0},Je=Ve||function(e){ot=!1,ue.removeEventListener(Y,Je)},et=0,tt=R in y&&!/^force-all/.test(t.type),nt=!0,rt=!1,ot=!0,lt=!0,at=!0;if(Ve&&(P=y.createElement("div"),P.innerHTML="<div><div></div></div>",new Ve(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){P=he(Re,"innerHTML");var n=P&&P.set;n&&de(Re,"innerHTML",{set:function set(e){for(;this.lastChild;){this.removeChild(this.lastChild)}n.call(this,e)}})}t.disconnect(),P=null}).observe(P,{childList:!0,subtree:!0}),P.innerHTML=""),tt||(Me||Ee?(S=function S(e,t){fe.call(t,e)||d(e,t)},V=d):(S=function S(e,t){e[_]||(e[_]=C(!0),d(e,t))},V=S),Ue?(ot=!1,function(){var e=he(Re,k),t=e.value,n=function n(e){var t=new CustomEvent(Y,{bubbles:!0});t.attrName=e,t.prevValue=Ge.call(this,e),t.newValue=null,t[W]=t.attrChange=2,Ke.call(this,e),je.call(this,t)},r=function r(e,t){var n=ze.call(this,e),r=n&&Ge.call(this,e),o=new CustomEvent(Y,{bubbles:!0});Xe.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o.MODIFICATION=o.attrChange=1:o[Q]=o.attrChange=0,je.call(this,o)},o=function o(e){var t,n=e.currentTarget,r=n[_],o=e.propertyName;r.hasOwnProperty(o)&&(r=r[o],t=new CustomEvent(Y,{bubbles:!0}),t.attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[o]||null,null==t.prevValue?t[Q]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,je.call(n,t))};e.value=function(e,l,a){e===Y&&this[j]&&this.setAttribute!==r&&(this[_]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,e,l,a)},de(Re,k,e)}()):Ve||(ue[k](Y,Je),ue.setAttribute(_,1),ue.removeAttribute(_),ot&&(O=function O(e){var t,n,r,o=this;if(o===e.target){t=o[_],o[_]=n=D(o);for(r in n){if(!(r in t)){return N(0,o,r,t[r],n[r],Q)}if(n[r]!==t[r]){return N(1,o,r,t[r],n[r],"MODIFICATION")}}for(r in t){if(!(r in n)){return N(2,o,r,t[r],n[r],W)}}}},N=function N(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,u(a)},D=function D(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l+=1){t=o[l],"setAttribute"!==(n=t.name)&&(r[n]=t.value)}return r})),y[R]=function(e,t){if(n=e.toUpperCase(),nt&&(nt=!1,Ve?(I=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++])){}}return new Ve(function(r){for(var o,l,a,i=0,u=r.length;i<u;i+=1){o=r[i],"childList"===o.type?(n(o.addedNodes,e),n(o.removedNodes,t)):(l=o.target,at&&l[j]&&"style"!==o.attributeName&&(a=Ge.call(l,o.attributeName))!==o.oldValue&&l[j](o.attributeName,o.oldValue,a))}})}(l(x),l(B)),F=function F(e){return I.observe(e,{childList:!0,subtree:!0}),e},F(y),qe&&(Re.attachShadow=function(){return F(qe.apply(this,arguments))})):(A=[],y[k]("DOMNodeInserted",c(x)),y[k]("DOMNodeRemoved",c(B))),y[k](J,s),y[k]("readystatechange",s),y.importNode=function(e,t){switch(e.nodeType){case 1:return f(y,Qe,[e,!!t]);case 11:for(var n=y.createDocumentFragment(),r=e.childNodes,o=r.length,l=0;l<o;l+=1){n.appendChild(y.importNode(r[l],!!t))}return n;default:return Be.call(e,!!t)}},Re.cloneNode=function(e){return f(this,Be,[!!e])}),rt){return rt=!1}if(-2<ce.call(le,ne+n)+ce.call(le,te+n)&&h(e),!re.test(n)||-1<ce.call(oe,n)){throw new Error("The type "+e+" is invalid")}var n,o,a=function a(){return u?y.createElement(m,n):y.createElement(m)},i=t||se,u=me.call(i,Z),m=u?t[Z].toUpperCase():n;return u&&-1<ce.call(le,te+m)&&h(m),o=le.push((u?ne:te)+n)-1,ie=ie.concat(ie.length?",":"",u?m+'[is="'+e.toLowerCase()+'"]':m),a.prototype=ae[o]=me.call(i,"prototype")?i.prototype:Fe(Re),ie.length&&r(y.querySelectorAll(ie),x),a},y.createElement=We=function We(e,t){var n=v(t),r=n?$e.call(y,e,Ie(n)):$e.call(y,e),o=""+e,l=ce.call(le,(n?ne:te)+(n||o).toUpperCase()),a=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),a&&(a=i(o.toUpperCase(),n))),at=!y.createElement.innerHTMLHelper,a&&V(r,ae[l]),r}),addEventListener("beforeunload",function(){delete y.createElement,delete y.importNode,delete y[R]},!1),L.prototype={constructor:L,define:be?function(e,t,n){if(n){M(e,t,n)}else{var r=e.toUpperCase();Oe[r]={constructor:t,create:[r]},De.set(t,r),ge.define(e,t)}}:M,get:be?function(e){return ge.get(e)||E(e)}:E,whenDefined:be?function(e){return we.race([ge.whenDefined(e),g(e)])}:g},!ge||/^force/.test(t.type)){b()}else if(!t.noBuiltIn){try{!function(t,n,r){var o=new RegExp("^<a\\s+is=('|\")"+r+"\\1></a>$");if(n[Z]="a",t.prototype=Fe(Pe.prototype),t.prototype.constructor=t,e.customElements.define(r,t,n),!o.test(y.createElement("a",{is:r}).outerHTML)||!o.test(new t().outerHTML)){throw n}}(function st(){return Reflect.construct(Pe,[],st)},{},"document-register-element-a"+U)}catch(it){b()}}if(!t.noBuiltIn){try{if($e.call(y,"a","a").outerHTML.indexOf("is")<0){throw{};;}catch(ut){Ie=function Ie(e){return{is:e.toLowerCase()}}}}}(window);var innerHTML=function(e){var t,r,n=e.registerElement,a=e.createElement("div"),l="document-register-element",i=n.innerHTML;if(i){return i}try{if(n.call(e,l,{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:Object}})}),a.innerHTML="<"+l+"></"+l+">","createdCallback"in a.querySelector(l)){return n.innerHTML=function(e,t){return e.innerHTML=t,e};;}catch(c){}return r=[],t=function t(_t){if(!("createdCallback"in _t||"attachedCallback"in _t||"detachedCallback"in _t||"attributeChangedCallback"in _t)){e.createElement.innerHTMLHelper=!0;for(var r,n,a=_t.parentNode,l=_t.getAttribute("is"),i=_t.nodeName,c=e.createElement.apply(e,l?[i,l]:[i]),d=_t.attributes,u=0,o=d.length;u<o;u+=1){r=d[u],c.setAttribute(r.name,r.value)}for(;n=_t.firstChild;){c.appendChild(n)}e.createElement.innerHTMLHelper=!1,a&&a.replaceChild(c,_t),c.createdCallback&&(c.created=!0,c.createdCallback(),c.created=!1)}},(e.registerElement=function(t,a){var l=(a["extends"]?a["extends"]+'[is="'+t+'"]':t).toLowerCase();return r.indexOf(l)<0&&r.push(l),n.apply(e,arguments)}).innerHTML=function(e,n){e.innerHTML=n;for(var a=r.length?e.querySelectorAll(r.join(",")):[],l=a.length;l-=1;t(a[l])){}return e}}(document);var f$6=function f(){};if(!window.CustomElements){window.CustomElements={flags:{}};window.CustomElements.upgrade=f$6;window.CustomElements.upgradeAll=f$6;window.CustomElements.instanceof=function(el,ins){return el instanceof ins};window.CustomElements.upgradeDocumentTree=f$6;window.CustomElements.upgradeSubtree=f$6;window.CustomElements.addModule=f$6;window.CustomElements.initializeModules=f$6;window.CustomElements.takeRecords=f$6;window.CustomElements.takeRecords=f$6;window.CustomElements.watchShadow=f$6}var ResizeObserver=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){var MapShim=function(){if(typeof Map!=='undefined'){return Map}function getIndex(arr,key){var result=-1;arr.some(function(entry,index){if(entry[0]===key){result=index;return true}return false});return result}return(function(){function class_1(){this.__entries__=[]}Object.defineProperty(class_1.prototype,"size",{get:function get(){return this.__entries__.length},enumerable:true,configurable:true});class_1.prototype.get=function(key){var index=getIndex(this.__entries__,key);var entry=this.__entries__[index];return entry&&entry[1]};class_1.prototype.set=function(key,value){var index=getIndex(this.__entries__,key);if(~index){this.__entries__[index][1]=value}else{this.__entries__.push([key,value])}};class_1.prototype.delete=function(key){var entries=this.__entries__;var index=getIndex(entries,key);if(~index){entries.splice(index,1)}};class_1.prototype.has=function(key){return! !~getIndex(this.__entries__,key)};class_1.prototype.clear=function(){this.__entries__.splice(0)};class_1.prototype.forEach=function(callback,ctx){if(ctx===void 0){ctx=null}for(var _i=0,_a=this.__entries__;_i<_a.length;_i+=1){var entry=_a[_i];callback.call(ctx,entry[1],entry[0])}};return class_1}())}();var isBrowser=typeof window!=='undefined'&&typeof document!=='undefined'&&window.document===document;var global$1=function(){if(typeof commonjsGlobal!=='undefined'&&commonjsGlobal.Math===Math){return commonjsGlobal}if(typeof self!=='undefined'&&self.Math===Math){return self}if(typeof window!=='undefined'&&window.Math===Math){return window}return Function('return this')()}();var requestAnimationFrame$1=function(){if(typeof requestAnimationFrame==='function'){return requestAnimationFrame.bind(global$1)}return function(callback){return setTimeout(function(){return callback(Date.now())},1000/60)}}();var trailingTimeout=2;function throttle(callback,delay){var leadingCall=false,trailingCall=false,lastCallTime=0;function resolvePending(){if(leadingCall){leadingCall=false;callback()}if(trailingCall){proxy()}}function timeoutCallback(){requestAnimationFrame$1(resolvePending)}function proxy(){var timeStamp=Date.now();if(leadingCall){if(timeStamp-lastCallTime<trailingTimeout){return}trailingCall=true}else{leadingCall=true;trailingCall=false;setTimeout(timeoutCallback,delay)}lastCallTime=timeStamp}return proxy}var REFRESH_DELAY=20;var transitionKeys=['top','right','bottom','left','width','height','size','weight'];var mutationObserverSupported=typeof MutationObserver!=='undefined';var ResizeObserverController=function(){function ResizeObserverController(){this.connected_=false;this.mutationEventsAdded_=false;this.mutationsObserver_=null;this.observers_=[];this.onTransitionEnd_=this.onTransitionEnd_.bind(this);this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)}ResizeObserverController.prototype.addObserver=function(observer){if(!~this.observers_.indexOf(observer)){this.observers_.push(observer)}if(!this.connected_){this.connect_()}};ResizeObserverController.prototype.removeObserver=function(observer){var observers=this.observers_;var index=observers.indexOf(observer);if(~index){observers.splice(index,1)}if(!observers.length&&this.connected_){this.disconnect_()}};ResizeObserverController.prototype.refresh=function(){var changesDetected=this.updateObservers_();if(changesDetected){this.refresh()}};ResizeObserverController.prototype.updateObservers_=function(){var activeObservers=this.observers_.filter(function(observer){return observer.gatherActive(),observer.hasActive()});activeObservers.forEach(function(observer){return observer.broadcastActive()});return activeObservers.length>0};ResizeObserverController.prototype.connect_=function(){if(!isBrowser||this.connected_){return}document.addEventListener('transitionend',this.onTransitionEnd_);window.addEventListener('resize',this.refresh);if(mutationObserverSupported){this.mutationsObserver_=new MutationObserver(this.refresh);this.mutationsObserver_.observe(document,{attributes:true,childList:true,characterData:true,subtree:true})}else{document.addEventListener('DOMSubtreeModified',this.refresh);this.mutationEventsAdded_=true}this.connected_=true};ResizeObserverController.prototype.disconnect_=function(){if(!isBrowser||!this.connected_){return}document.removeEventListener('transitionend',this.onTransitionEnd_);window.removeEventListener('resize',this.refresh);if(this.mutationsObserver_){this.mutationsObserver_.disconnect()}if(this.mutationEventsAdded_){document.removeEventListener('DOMSubtreeModified',this.refresh)}this.mutationsObserver_=null;this.mutationEventsAdded_=false;this.connected_=false};ResizeObserverController.prototype.onTransitionEnd_=function(_a){var _b=_a.propertyName,propertyName=_b===void 0?'':_b;var isReflowProperty=transitionKeys.some(function(key){return! !~propertyName.indexOf(key)});if(isReflowProperty){this.refresh()}};ResizeObserverController.getInstance=function(){if(!this.instance_){this.instance_=new ResizeObserverController()}return this.instance_};ResizeObserverController.instance_=null;return ResizeObserverController}();var defineConfigurable=function defineConfigurable(target,props){for(var _i=0,_a=Object.keys(props);_i<_a.length;_i+=1){var key=_a[_i];Object.defineProperty(target,key,{value:props[key],enumerable:false,writable:false,configurable:true})}return target};var getWindowOf=function getWindowOf(target){var ownerGlobal=target&&target.ownerDocument&&target.ownerDocument.defaultView;return ownerGlobal||global$1};var emptyRect=createRectInit(0,0,0,0);function toFloat(value){return parseFloat(value)||0}function getBordersSize(styles){var positions=[];for(var _i=1;_i<arguments.length;_i+=1){positions[_i-1]=arguments[_i]}return positions.reduce(function(size,position){var value=styles['border-'+position+'-width'];return size+toFloat(value)},0)}function getPaddings(styles){var positions=['top','right','bottom','left'];var paddings={};for(var _i=0,positions_1=positions;_i<positions_1.length;_i+=1){var position=positions_1[_i];var value=styles['padding-'+position];paddings[position]=toFloat(value)}return paddings}function getSVGContentRect(target){var bbox=target.getBBox();return createRectInit(0,0,bbox.width,bbox.height)}function getHTMLElementContentRect(target){var clientWidth=target.clientWidth,clientHeight=target.clientHeight;if(!clientWidth&&!clientHeight){return emptyRect}var styles=getWindowOf(target).getComputedStyle(target);var paddings=getPaddings(styles);var horizPad=paddings.left+paddings.right;var vertPad=paddings.top+paddings.bottom;var width=toFloat(styles.width),height=toFloat(styles.height);if(styles.boxSizing==='border-box'){if(Math.round(width+horizPad)!==clientWidth){width-=getBordersSize(styles,'left','right')+horizPad}if(Math.round(height+vertPad)!==clientHeight){height-=getBordersSize(styles,'top','bottom')+vertPad}}if(!isDocumentElement(target)){var vertScrollbar=Math.round(width+horizPad)-clientWidth;var horizScrollbar=Math.round(height+vertPad)-clientHeight;if(Math.abs(vertScrollbar)!==1){width-=vertScrollbar}if(Math.abs(horizScrollbar)!==1){height-=horizScrollbar}}return createRectInit(paddings.left,paddings.top,width,height)}var isSVGGraphicsElement=function(){if(typeof SVGGraphicsElement!=='undefined'){return function(target){return target instanceof getWindowOf(target).SVGGraphicsElement}}return function(target){return target instanceof getWindowOf(target).SVGElement&&typeof target.getBBox==='function'}}();function isDocumentElement(target){return target===getWindowOf(target).document.documentElement}function getContentRect(target){if(!isBrowser){return emptyRect}if(isSVGGraphicsElement(target)){return getSVGContentRect(target)}return getHTMLElementContentRect(target)}function createReadOnlyRect(_a){var x=_a.x,y=_a.y,width=_a.width,height=_a.height;var Constr=typeof DOMRectReadOnly!=='undefined'?DOMRectReadOnly:Object;var rect=Object.create(Constr.prototype);defineConfigurable(rect,{x:x,y:y,width:width,height:height,top:y,right:x+width,bottom:height+y,left:x});return rect}function createRectInit(x,y,width,height){return{x:x,y:y,width:width,height:height}}var ResizeObservation=function(){function ResizeObservation(target){this.broadcastWidth=0;this.broadcastHeight=0;this.contentRect_=createRectInit(0,0,0,0);this.target=target}ResizeObservation.prototype.isActive=function(){var rect=getContentRect(this.target);this.contentRect_=rect;return rect.width!==this.broadcastWidth||rect.height!==this.broadcastHeight};ResizeObservation.prototype.broadcastRect=function(){var rect=this.contentRect_;this.broadcastWidth=rect.width;this.broadcastHeight=rect.height;return rect};return ResizeObservation}();var ResizeObserverEntry=function(){function ResizeObserverEntry(target,rectInit){var contentRect=createReadOnlyRect(rectInit);defineConfigurable(this,{target:target,contentRect:contentRect})}return ResizeObserverEntry}();var ResizeObserverSPI=function(){function ResizeObserverSPI(callback,controller,callbackCtx){this.activeObservations_=[];this.observations_=new MapShim();if(typeof callback!=='function'){throw new TypeError('The callback provided as parameter 1 is not a function.')}this.callback_=callback;this.controller_=controller;this.callbackCtx_=callbackCtx}ResizeObserverSPI.prototype.observe=function(target){if(!arguments.length){throw new TypeError('1 argument required, but only 0 present.')}if(typeof Element==='undefined'||!(Element instanceof Object)){return}if(!(target instanceof getWindowOf(target).Element)){throw new TypeError('parameter 1 is not of type "Element".')}var observations=this.observations_;if(observations.has(target)){return}observations.set(target,new ResizeObservation(target));this.controller_.addObserver(this);this.controller_.refresh()};ResizeObserverSPI.prototype.unobserve=function(target){if(!arguments.length){throw new TypeError('1 argument required, but only 0 present.')}if(typeof Element==='undefined'||!(Element instanceof Object)){return}if(!(target instanceof getWindowOf(target).Element)){throw new TypeError('parameter 1 is not of type "Element".')}var observations=this.observations_;if(!observations.has(target)){return}observations.delete(target);if(!observations.size){this.controller_.removeObserver(this)}};ResizeObserverSPI.prototype.disconnect=function(){this.clearActive();this.observations_.clear();this.controller_.removeObserver(this)};ResizeObserverSPI.prototype.gatherActive=function(){var _this=this;this.clearActive();this.observations_.forEach(function(observation){if(observation.isActive()){_this.activeObservations_.push(observation)}})};ResizeObserverSPI.prototype.broadcastActive=function(){if(!this.hasActive()){return}var ctx=this.callbackCtx_;var entries=this.activeObservations_.map(function(observation){return new ResizeObserverEntry(observation.target,observation.broadcastRect())});this.callback_.call(ctx,entries,ctx);this.clearActive()};ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)};ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0};return ResizeObserverSPI}();var observers=typeof WeakMap!=='undefined'?new WeakMap():new MapShim();var ResizeObserver=function(){function ResizeObserver(callback){if(!(this instanceof ResizeObserver)){throw new TypeError('Cannot call a class as a function.')}if(!arguments.length){throw new TypeError('1 argument required, but only 0 present.')}var controller=ResizeObserverController.getInstance();var observer=new ResizeObserverSPI(callback,controller,this);observers.set(this,observer)}return ResizeObserver}();['observe','unobserve','disconnect'].forEach(function(method){ResizeObserver.prototype[method]=function(){var _a;return(_a=observers.get(this))[method].apply(_a,arguments)}});var index=function(){if(typeof global$1.ResizeObserver!=='undefined'){return global$1.ResizeObserver}return ResizeObserver}();return index})});var nextID=0;var cleanOption=function cleanOption(name){name=name.replace('coral','');return name.charAt(0).toLowerCase()+name.slice(1)};var TRANSITION_DURATION_THRESHOLD=100;var FOCUSABLE_ELEMENTS=['input:not([disabled])','select:not([disabled])','textarea:not([disabled])','button:not([disabled])','a[href]','area[href]','summary','iframe','object','embed','audio[controls]','video[controls]','[contenteditable]','[tabindex]'];var CORAL_COMPONENTS=[];function cssTimeToMilliseconds(time){var num=parseFloat(time,10);var unit=time.match(/m?s/);if(unit){unit=unit[0]}if(unit==='s'){return num*1000}else if(unit==='ms'){return num}return 0}function returnFirst(first,second){return function(){for(var _len=arguments.length,args=[_len],_key=0;_key<_len;_key+=1){args[_key]=arguments[_key]}var ret=first.apply(this,args);second.apply(this,args);return ret}}function isFunction(object){return typeof object==='function'}var Commons=function(){function Commons(){var _this=this;_classCallCheck(this,Commons);this._resizeObserverMap=new Map();this._resizeObserver=new ResizeObserver(function(entries){for(var i=0;i<entries.length;i+=1){var observedElement=entries[i].target;var allCallbacks=_this._resizeObserverMap.get(observedElement);if(allCallbacks){for(var j=0;j<allCallbacks.length;j+=1){allCallbacks[j].call(observedElement)}}}});var focusableElements=FOCUSABLE_ELEMENTS.slice();this._focusableElementsSelector=focusableElements.join(',');focusableElements[focusableElements.length-1]+=':not([tabindex="-1"])';this._tabbableElementsSelector=focusableElements.join(':not([tabindex="-1"]),');this._coralSelector='';if(!document.currentScript){var scripts=document.getElementsByTagName('script');this._script=scripts[scripts.length-1]}else{this._script=document.currentScript}}_createClass(Commons,[{key:"_log",value:function _log(level){if(console[level]&&this.options.logging!=='off'){for(var _len2=arguments.length,args=[_len2>1?_len2-1:0],_key2=1;_key2<_len2;_key2+=1){args[_key2-1]=arguments[_key2]}console[level].apply(null,args)}}},{key:"extend",value:function extend(){var dest=arguments.length<=0?undefined:arguments[0];for(var i=1,ni=arguments.length;i<ni;i+=1){var source=i<0||arguments.length<=i?undefined:arguments[i];for(var prop in source){dest[prop]=source[prop]}}return dest}},{key:"augment",value:function augment(){var dest=arguments.length<=0?undefined:arguments[0];var handleCollision;var argCount=arguments.length;var lastArg=argCount-1<0||arguments.length<=argCount-1?undefined:arguments[argCount-1];if(typeof lastArg==='function'){handleCollision=lastArg;argCount-=1}for(var i=1;i<argCount;i+=1){var source=i<0||arguments.length<=i?undefined:arguments[i];for(var prop in source){if(typeof dest[prop]!=='undefined'){if(typeof handleCollision==='function'){var ret=handleCollision(dest[prop],source[prop],prop,dest,source);if(typeof ret!=='undefined'){dest[prop]=ret}}}else{dest[prop]=source[prop]}}}return dest}},{key:"swapKeysAndValues",value:function swapKeysAndValues(obj){var map={};for(var key in obj){map[obj[key]]=key}return map}},{key:"nextFrame",value:function nextFrame(onNextFrame){return window.requestAnimationFrame(function(){if(typeof onNextFrame==='function'){onNextFrame()}})}},{key:"transitionEnd",value:function transitionEnd(element,onTransitionEndCallback){var propertyName;var hasTransitionEnded=false;var transitionEndEventName=null;var transitions={transition:'transitionend',WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',MSTransition:'msTransitionEnd'};var transitionEndTimeout=null;var onTransitionEnd=function onTransitionEnd(event){var transitionStoppedByTimeout=typeof event==='undefined';if(!hasTransitionEnded){hasTransitionEnded=true;clearTimeout(transitionEndTimeout);element.removeEventListener(transitionEndEventName,onTransitionEnd);onTransitionEndCallback({target:element,cssTransitionSupported:true,transitionStoppedByTimeout:transitionStoppedByTimeout})}};for(propertyName in transitions){if(element.style[propertyName]!==undefined){transitionEndEventName=transitions[propertyName];break}}if(transitionEndEventName!==null){var timeoutDelay=0;var transitionDuration=cssTimeToMilliseconds(window.getComputedStyle(element).transitionDuration);if(transitionDuration!==0){element.addEventListener(transitionEndEventName,onTransitionEnd);timeoutDelay=transitionDuration+TRANSITION_DURATION_THRESHOLD}transitionEndTimeout=window.setTimeout(onTransitionEnd,timeoutDelay)}}},{key:"_define",value:function _define(name,constructor,options){window.customElements.define(name,constructor,options);CORAL_COMPONENTS.push(name)}},{key:"ready",value:function ready(element,onDefined){var root=element;if(typeof element==='function'){onDefined=element;root=document.body}if(!root){root=document.body}if(!(root instanceof HTMLElement)){onDefined(root);return}this._coralSelector=this._coralSelector||CORAL_COMPONENTS.join(',');var elements=root.querySelectorAll(this._coralSelector);var promises=[];if(root!==document.body&&!root._componentReady&&root.matches(this._coralSelector)){var name=(root.getAttribute('is')||root.tagName).toLowerCase();promises.push(window.customElements.whenDefined(name))}for(var i=0;i<elements.length;i+=1){var el=elements[i];if(!el._componentReady){var _name=(el.getAttribute('is')||el.tagName).toLowerCase();promises.push(window.customElements.whenDefined(_name))}}if(promises.length){Promise.all(promises).then(function(){onDefined(element instanceof HTMLElement&&element||window)}).catch(function(err){console.error(err)})}else{onDefined(element instanceof HTMLElement&&element||window)}}},{key:"setSubProperty",value:function setSubProperty(root,path,obj){var nsParts=path.split('.');var curObj=root;if(nsParts.length===1){curObj[path]=obj;return}while(nsParts.length>1){var part=nsParts.shift();if(curObj[part]){curObj=curObj[part]}else{throw new Error("Coral.commons.setSubProperty: could not set ".concat(path,", part ").concat(part," not found"))}}curObj[nsParts.shift()]=obj}},{key:"getSubProperty",value:function getSubProperty(root,path){var nsParts=path.split('.');var curObj=root;if(nsParts.length===1){return curObj[path]}while(nsParts.length){var part=nsParts.shift();if(nsParts.length===0||typeof curObj[part]!=='undefined'){curObj=curObj[part]}else{throw new Error("Coral.commons.getSubProperty: could not get ".concat(path,", part ").concat(part," not found"))}}return curObj}},{key:"_applyMixin",value:function _applyMixin(target,mixin,options){var mixinType=_typeof(mixin);if(mixinType==='function'){mixin(target,options)}else if(mixinType==='object'&&mixin!==null){this.extend(target,mixin)}else{throw new Error("Coral.commons.mixin: Cannot mix in ".concat(mixinType," to ").concat(target.toString()))}}},{key:"mixin",value:function mixin(target,mixins,options){if(Array.isArray(mixins)){for(var i=0;i<mixins.length;i+=1){this._applyMixin(target,mixins[i],options)}}else{this._applyMixin(target,mixins,options)}}},{key:"getUID",value:function getUID(){return "coral-id-".concat(nextID++)}},{key:"callAll",value:function callAll(){for(var _len3=arguments.length,args=[_len3],_key3=0;_key3<_len3;_key3+=1){args[_key3]=arguments[_key3]}var nth=args[args.length-1];if(typeof nth!=='number'){nth=0}var funcToReturn=args[nth];var functions=Array.prototype.filter.call(args,isFunction);if(functions.length===2&&nth===0){return returnFirst(functions[0],functions[1])}else if(functions.length===1){return functions[0]}else if(functions.length===0){return function(){}}if(typeof funcToReturn!=='function'){funcToReturn=functions[0]}return function(){var finalRet;var ret;var func;for(var i=0;i<functions.length;i+=1){func=functions[i];ret=func.apply(this,args);if(func===funcToReturn){finalRet=ret}}return finalRet}}},{key:"addResizeListener",value:function addResizeListener(element,onResize){if(!this._resizeObserverMap.has(element)){this._resizeObserverMap.set(element,[])}this._resizeObserverMap.get(element).push(onResize);this._resizeObserver.observe(element)}},{key:"removeResizeListener",value:function removeResizeListener(element,onResize){this._resizeObserver.unobserve(element);this._resizeObserver.disconnect(element);var onResizeEvents=this._resizeObserverMap.get(element);if(onResizeEvents){var index=onResizeEvents.indexOf(onResize);if(index!==-1){onResizeEvents.splice(index,1)}}}},{key:"options",get:function get(){var options={};var props=this._script.dataset;for(var key in props){if(key.indexOf('coral')===0){options[cleanOption(key)]=props[key]}}return options}},{key:"FOCUSABLE_ELEMENT_SELECTOR",get:function get(){return this._focusableElementsSelector}},{key:"TABBABLE_ELEMENT_SELECTOR",get:function get(){return this._tabbableElementsSelector}}]);return Commons}();var commons=new Commons();var Events=function(){function Events(elementOrSelector){_classCallCheck(this,Events);this._vent=new vent(elementOrSelector)}_createClass(Events,[{key:"on",value:function on(eventName,selector,handler,useCapture){this._vent.on(eventName,selector,handler,useCapture);return this}},{key:"off",value:function off(eventName,selector,handler,useCapture){this._vent.off(eventName,selector,handler,useCapture);return this}},{key:"dispatch",value:function dispatch(eventName,options){return this._vent.dispatch(eventName,options)}},{key:"destroy",value:function destroy(){this._vent.destroy()}}]);return Events}();var events=new Events(window);var typeKitId=commons&&commons.options.typekit;if(!typeKitId){typeKitId=document.querySelector('[lang]:not([lang^="en"])')===null?'mge7bvf':'rok6rmo'}var config={kitId:typeKitId,scriptTimeout:3000,active:function active(){events.dispatch('coral-commons:_webfontactive')}};if(!window.Typekit){var h=document.getElementsByTagName('html')[0];h.classList.add('wf-loading');var t=window.setTimeout(function(){h.classList.remove('wf-loading');h.classList.add('wf-inactive')},config.scriptTimeout);var tk=document.createElement('script');var d=false;tk.src="https://use.typekit.net/".concat(config.kitId,".js");tk.type='text/javascript';tk.async='true';tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!=='complete'&&a!=='loaded'){return}d=true;clearTimeout(t);try{window.Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(tk,s)}else{var root=document.documentElement;if(root.className.indexOf('wf-inactive')!==-1||root.className.indexOf('wf-loading')!==-1){var webFontLoadObserver=new MutationObserver(function(){if(root.className.indexOf('wf-active')!==-1){webFontLoadObserver.disconnect();events.dispatch('coral-commons:_webfontactive')}});webFontLoadObserver.observe(root,{attributes:true,attributeFilter:['class']})}}var locales={'en':'en-US','en-us':'en-US','cs':'cs-CZ','cs-cz':'cs-CZ','da':'da-DK','da-dk':'da-DK','de':'de-DE','de-de':'de-DE','es':'es-ES','es-es':'es-ES','fi':'fi-FI','fi-fi':'fi-FI','fr':'fr-FR','fr-fr':'fr-FR','it':'it-IT','it-it':'it-IT','ja':'ja-JP','ja-jp':'ja-JP','ko':'ko-KR','ko-kr':'ko-KR','nb':'nb-NO','nb-no':'nb-NO','nl':'nl-NL','pl':'pl-PL','pl-pl':'pl-PL','nl-nl':'nl-NL','pt':'pt-BR','pt-br':'pt-BR','ru':'ru-RU','ru-ru':'ru-RU','sv':'sv-SE','sv-se':'sv-SE','tr':'tr-TR','tr-tr':'tr-TR','zh-cn':'zh-CN','zh-hans-cn':'zh-CN','zh-hans':'zh-CN','zh-tw':'zh-TW','zh-hant-tw':'zh-TW','zh-hant':'zh-TW'};var strings={generic:{}};var I18nProvider=function(){function I18nProvider(options){_classCallCheck(this,I18nProvider);options=options||{};this._locale='en-US';if(options.locale){this._locale=options.locale}this._evaluate=/(\{.+?\})/g}_createClass(I18nProvider,[{key:"set",value:function set(){strings.generic[this._locale]=strings.generic[this._locale]||{};var key,value,translationHint;for(var _len=arguments.length,args=[_len],_key=0;_key<_len;_key+=1){args[_key]=arguments[_key]}if(args.length===0){return ''}else if(args.length===1){if(!args[0]){throw new Error('Coral.i18n.set: Single argument must be an array of arrays of key/value/(translation hint).')}else if(_typeof(args[0])==='object'&&_typeof(args[0][0])==='object'){for(var i=0;i<args[0].length;i+=1){key=args[0][i][0];value=args[0][i][1];translationHint=args[0][i][2];if(translationHint){key="".concat(key,"/[translation hint:").concat(translationHint.replace(/&period;/g,'.'),"]")}strings.generic[this._locale][key]=value}}else{throw new Error('Coral.i18n.set: Single argument must be an array of key-value pairs.')}}else if(args.length===2){if(typeof args[0]==='string'&&!!args[0]&&typeof args[1]==='string'&&!!args[1]){key=args[0];value=args[1];strings.generic[this._locale][key]=value}else{throw new Error('Coral.i18n.set: Both arguments must be non-empty string values.')}}else if(args.length===3){if(typeof args[0]==='string'&&typeof args[1]==='string'&&typeof args[2]==='string'){key=args[0];value=args[1];translationHint=args[2];if(translationHint!=='null'){key="".concat(key,"/[translation hint:").concat(translationHint.replace(/&period;/g,'.'),"]")}strings.generic[this._locale][key]=value}else{throw new Error('Coral.i18n.set: All arguments must be of string type.')}}else{throw new Error('Coral.i18n.set: Too many arguments provided.')}return this}},{key:"get",value:function get(){for(var _len2=arguments.length,args=[_len2],_key2=0;_key2<_len2;_key2+=1){args[_key2]=arguments[_key2]}if(args.length===0){return ''}var key=args[0].replace('.','&period;');var placeholderMatches=key.match(this._evaluate);var variablePlaceholderCount=placeholderMatches?placeholderMatches.length:0;var translationHint='';var variables={};var variableCount=0;var i;if(args[1]!==null&&_typeof(args[1])==='object'){variables=args[1];var placeholderName='';for(i=0;i<placeholderMatches.length;i+=1){placeholderName=placeholderMatches[i].slice(1).slice(0,-1);if(variables[placeholderName]===null||typeof variables[placeholderName]==='undefined'){throw new Error("Coral.i18n.get: Named key \"".concat(placeholderName,"\" not present in provided object."))}}if(typeof args[2]==='string'){translationHint=args[2]}}else{variableCount=args.length-1;if(variableCount===variablePlaceholderCount+1){translationHint=args[args.length-1]}else if(variableCount!==variablePlaceholderCount){throw new Error("Coral.i18n.get: Number of variable placeholders (".concat(variablePlaceholderCount,") does not match number of variables (").concat(variableCount,")."))}for(i=0;i<variableCount;i+=1){variables[i]=args[i+1]}}if(translationHint){key="".concat(key,"/[translation hint:").concat(translationHint,"]")}var str=key;for(var component in strings){if(typeof strings[component]!=='undefined'&&typeof strings[component][this._locale]!=='undefined'){str=strings[component][this._locale][key]||str}}if(variablePlaceholderCount===0){return str}return str.replace(this._evaluate,function(name){name=name.slice(1).slice(0,-1);return variables[name]});}},{key:"locale",get:function get(){return this._locale},set:function set(newLocale){this._locale=newLocale}}]);return I18nProvider}();var docLang=document.documentElement.lang.toLowerCase();var locale=locales[docLang]||'en-US';var i18n=new I18nProvider({locale:locale});var modifierCodes={'⇧':16,'shift':16,'⌥':18,'alt':18,'option':18,'⌃':17,'ctrl':17,'control':17,'⌘':91,'cmd':91,'command':91,'meta':91};var modifierCodeMap={16:true,17:true,18:true,91:true,224:true};var modifierEventPropertyNames=['shiftKey','ctrlKey','altKey','metaKey'];var normalizedCodes={96:48,97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57};var specialKeyCodes={backspace:8,tab:9,return:13,pause:19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46,delete:46,period:190,plus:107,minus:189,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,f13:124,f14:125,f15:126,f16:127,f17:128,f18:129,f19:130,numlock:144,scroll:145};var namespaceRE=/(.*?)(\..+)$/;var needsContextRE=/^[\x20\t\r\n\f]*[>+~]/;var restrictedTagNames={INPUT:true,SELECT:true,TEXTAREA:true,'CORAL-SELECTLIST-ITEM':true};function normalizeCode(code){return normalizedCodes[code]||code}function mapSpecialEventKeyToSpecialAPIDefinition(eventKey){switch(eventKey){case 'enter':return 'return';case ' ':return 'space';case 'arrowup':return 'up';case 'arrowdown':return 'down';case 'arrowleft':return 'left';case 'arrowright':return 'right';default:return eventKey}}function _keyToCode(key){key=mapSpecialEventKeyToSpecialAPIDefinition(key.toLowerCase());var code=specialKeyCodes[key]||modifierCodes[key];if(!code&&key.length>1){throw new Error("Coral.Keys: Key ".concat(key," not recognized"))}return code||key.toUpperCase().charCodeAt(0)}function cleanupFilteredListeners(keycombo,listeners,event){var result=[];if(!listeners||!event.key||keycombo.indexOf('+')>0){return listeners}var key=mapSpecialEventKeyToSpecialAPIDefinition(event.key.toLowerCase());for(var i=0;i<listeners.length;i+=1){if(listeners[i].originalString.indexOf(key)===0||key.indexOf(listeners[i].originalString)===0){result.push(listeners[i])}}return result}var Keys=function(){function Keys(elOrSelector,options){_classCallCheck(this,Keys);options=options||{};if(typeof elOrSelector==='undefined'){throw new Error("Coral.Keys: Cannot create a combo handler for ".concat(elOrSelector))}this._el=typeof elOrSelector==='string'?document.querySelector(elOrSelector):elOrSelector;this._context=options.context;this._filter=options.filter||this.constructor.filterInputs;this._preventDefault=options.preventDefault||false;this._stopPropagation=options.stopPropagation||false;this._keyListeners=[];this._keySequences=[];this._currentKeys=[];this._currentKeyCombo=[];this._sequenceTimeout=null;this._handleKeyDown=this._handleKeyDown.bind(this);this._handleKeyUp=this._handleKeyUp.bind(this);this._resetSequence=this._resetSequence.bind(this);this.reset=this.reset.bind(this);this.init()}_createClass(Keys,[{key:"_resetSequence",value:function _resetSequence(){window.clearTimeout(this._sequenceTimeout);this._keySequences.forEach(function(sequence){sequence.currentPart=0})}},{key:"_setCurrentKeyCombo",value:function _setCurrentKeyCombo(event){var currentModifiers=[];for(var i=0;i<modifierEventPropertyNames.length;i+=1){var propName=modifierEventPropertyNames[i];if(event[propName]){currentModifiers.push(modifierCodes[propName.slice(0,-3)])}}this._currentKeyCombo=this._currentKeys.concat(currentModifiers).sort().join('+')}},{key:"reset",value:function reset(){this._currentKeys=[];this._currentKeyCombo='';return this}},{key:"_processSequences",value:function _processSequences(){var _this=this;var activeSequenceListeners=[];this._keySequences.forEach(function(sequence){if(sequence.parts[sequence.currentPart]===_this._currentKeyCombo){sequence.currentPart+=1}else{sequence.currentPart=0}if(sequence.currentPart===sequence.parts.length){activeSequenceListeners.push(sequence);sequence.currentPart=0}});return activeSequenceListeners}},{key:"_executeListeners",value:function _executeListeners(event,keyup){if(!this._currentKeyCombo){return}if(!this._filter(event)){return}var target=event.target||event.srcElement;var doc=Object.prototype.toString.call(event.currentTarget)==='[object Window]'?event.currentTarget.document:event.currentTarget;var listeners=[];var comboListeners=this._keyListeners[this._currentKeyCombo];comboListeners=cleanupFilteredListeners(this._currentKeyCombo,comboListeners,event);if(!keyup&&!comboListeners){if(event.key){comboListeners=this._keyListeners[event.key.charCodeAt(0)];comboListeners=cleanupFilteredListeners(this._currentKeyCombo,comboListeners,event)}}var sequenceListeners;if(!keyup){sequenceListeners=this._processSequences()}if(comboListeners&&comboListeners.length){listeners=listeners.concat(comboListeners)}if(sequenceListeners&&sequenceListeners.length){listeners=listeners.concat(sequenceListeners)}if(listeners&&listeners.length){for(var i=0;i<listeners.length;i+=1){var listener=listeners[i];if(listener.selector){var selector='';if(listener.needsContext){doc.id=doc.id||commons.getUID();selector="#".concat(doc.id," ")}var matches=Array.prototype.indexOf.call(doc.querySelectorAll(selector+listener.selector),target)>=0;if(!matches){continue}}if(typeof listener.data!=='undefined'){event.data=listener.data}event.matchedTarget=target;event.keys=listener.originalString;listener.listener.call(this._context||doc,event)}if(this._preventDefault){event.preventDefault()}if(this._stopPropagation){event.stopPropagation()}}}},{key:"_handleKeyDown",value:function _handleKeyDown(event){window.clearTimeout(this._sequenceTimeout);this._sequenceTimeout=window.setTimeout(this._resetSequence,this.constructor.sequenceTime);var key=normalizeCode(event.keyCode);if(modifierCodeMap[key]){return}if(this._currentKeys.indexOf(key)===-1){this._currentKeys.push(key);this._setCurrentKeyCombo(event)}this._executeListeners(event);if(event.metaKey){this.reset()}if(!event.target.parentNode){this.reset()}}},{key:"_handleKeyUp",value:function _handleKeyUp(event){var key=normalizeCode(event.keyCode);if(modifierCodeMap[key]){this.reset();return}var index=this._currentKeys.indexOf(key);if(index!==-1){this._currentKeys.splice(index,1);this._setCurrentKeyCombo(event);this._executeListeners(event,true)}}},{key:"_keySequenceStringToArray",value:function _keySequenceStringToArray(keyCombo){return keyCombo.toString().split('-').map(this._keyComboToCodeString)}},{key:"on",value:function on(keyCombo,selector,data,listener){if(_typeof(keyCombo)==='object'){if(typeof selector!=='string'){data=data||selector;selector=undefined}for(var combo in keyCombo){this.on(combo,selector,data,keyCombo[combo])}return this}if(typeof data==='undefined'&&typeof listener==='undefined'){listener=selector;data=selector=undefined}else if(typeof listener==='undefined'){if(typeof selector==='string'){listener=data;data=undefined}else{listener=data;data=selector;selector=undefined}}if(typeof listener!=='function'){throw new Error("Coral.Keys: Cannot add listener of type ".concat(_typeof(listener)))}var namespace;var namespaceMatch=namespaceRE.exec(keyCombo);if(namespaceMatch){keyCombo=namespaceMatch[1];namespace=namespaceMatch[2]}var needsContext=selector?needsContextRE.test(selector):false;if(keyCombo.toString().indexOf('-')!==-1&&keyCombo.toString().length>1){var sequenceParts=this._keySequenceStringToArray(keyCombo);this._keySequences.push({originalString:keyCombo,currentPart:0,parts:sequenceParts,needsContext:needsContext,selector:selector,listener:listener,data:data,namespace:namespace})}else{var originalString=keyCombo.toString();keyCombo=this._keyComboToCodeString(keyCombo);var listeners=this._keyListeners[keyCombo]=this._keyListeners[keyCombo]||[];listeners.push({originalString:originalString,needsContext:selector?needsContextRE.test(selector):false,selector:selector,listener:listener,data:data,namespace:namespace})}return this}},{key:"_offByKeyComboString",value:function _offByKeyComboString(keyComboString,namespace,selector,listener){var i;var listeners=this._keyListeners[keyComboString];if(listeners&&listeners.length){if(typeof selector==='undefined'&&typeof listener==='undefined'&&typeof namespace==='undefined'){listeners.length=0}else if(typeof listener==='undefined'){for(i=0;i<listeners.length;i+=1){if(listeners[i].selector===selector&&listeners[i].namespace===namespace){listeners.splice(i,1);i-=1}}}else{for(i=0;i<listeners.length;i+=1){if(listeners[i].listener===listener&&listeners[i].selector===selector&&listeners[i].namespace===namespace){listeners.splice(i,1);i-=1}}}}}},{key:"off",value:function off(keyCombo,selector,listener){if(typeof listener==='undefined'){listener=selector;selector=undefined}var i;var namespace;var namespaceMatch=namespaceRE.exec(keyCombo);if(namespaceMatch){keyCombo=namespaceMatch[1];namespace=namespaceMatch[2]}if(keyCombo===''&&namespace!==undefined){for(keyCombo in this._keyListeners){this._offByKeyComboString(keyCombo,namespace,selector,listener)}for(i=0;i<this._keySequences.length;i+=1){if(this._keySequences[i].namespace===namespace){this._keySequences.splice(i,1);i-=1}}return this}if(keyCombo.indexOf('-')!==-1){for(i=0;i<this._keySequences.length;i+=1){if((keyCombo===undefined||this._keySequences[i].originalString===keyCombo)&&(listener===undefined||this._keySequences[i].listener===listener)&&(selector===undefined||this._keySequences[i].selector===selector)&&(namespace===undefined||this._keySequences[i].namespace===namespace)){this._keySequences.splice(i,1);i-=1}}}else{keyCombo=this._keyComboToCodeString(keyCombo);this._offByKeyComboString(keyCombo,namespace,selector,listener)}return this}},{key:"destroy",value:function destroy(globalsOnly){if(!globalsOnly){this._keyListeners=null;this._currentKeys=null;this._currentKeyCombo=null;this._el.removeEventListener('keydown',this._handleKeyDown)}window.removeEventListener('keyup',this._handleKeyUp,true);window.removeEventListener('focus',this.reset);return this}},{key:"init",value:function init(globalsOnly){if(!globalsOnly){this._currentKeys=[];this._currentKeyCombo='';this._keyListeners={};this._keySequences=[];this._el.addEventListener('keydown',this._handleKeyDown)}this.destroy(true);window.addEventListener('keyup',this._handleKeyUp,true);window.addEventListener('focus',this.reset);return this}},{key:"_keyComboToCodeString",value:function _keyComboToCodeString(keyCombo){if(keyCombo==='+'){return _keyToCode(keyCombo)}return keyCombo .toString().split('+').map(_keyToCode).sort().join('+')}}],[{key:"filterInputs",value:function filterInputs(event){if(event.keyCode===specialKeyCodes.escape){return true}var target=event.target;var tagName=target.tagName;var isContentEditable=target.isContentEditable;var isRestrictedTag=restrictedTagNames[tagName];return!isContentEditable&&!isRestrictedTag}},{key:"keyToCode",value:function keyToCode(key){return _keyToCode(key)}},{key:"sequenceTime",get:function get(){return 1500}}]);return Keys}();var keys$1=new Keys(document.documentElement,{stopPropagation:true,preventDefault:true});var Transformation=function(){function Transformation(){_classCallCheck(this,Transformation)}_createClass(Transformation,[{key:"boolean",value:function boolean(value){return!!value}},{key:"booleanAttr",value:function booleanAttr(value){return typeof value==='boolean'?value:!(value===null||typeof value==='undefined')}},{key:"number",value:function number(value){value=parseFloat(value);return isNaN(value)?null:value}},{key:"float",value:function float(value){if(/^(-|\+)?([0-9]+(\.[0-9]+)?|Infinity)$/.test(value)){return Number(value)}return null}},{key:"string",value:function string(value){if(value===null||typeof value==='undefined'){return ''}return typeof value==='string'?value:String(value)}}]);return Transformation}();var transform=new Transformation();var Validation=function(){function Validation(){_classCallCheck(this,Validation)}_createClass(Validation,[{key:"valueMustChange",value:function valueMustChange(newValue,oldValue){return newValue!==oldValue}},{key:"enumeration",value:function enumeration(_enumeration){var enumReversed=commons.swapKeysAndValues(_enumeration);return function(newValue){return typeof enumReversed[newValue]!=='undefined'}}}]);return Validation}();var validate=new Validation();var Tracking=function(){function Tracking(){_classCallCheck(this,Tracking);this._trackers=[]}_createClass(Tracking,[{key:"_isTrackingDisabledForComponent",value:function _isTrackingDisabledForComponent(component){return component&&typeof component.tracking!=='undefined'&&component.tracking===component.constructor.tracking.OFF}},{key:"_getTrackingDataFromComponentAttr",value:function _getTrackingDataFromComponentAttr(component){if(this._isTrackingDisabledForComponent(component)){return{trackingElement:'',trackingFeature:''}}var trackingFeature=component.trackingFeature||'';var trackingElement=component.trackingElement||'';return{trackingFeature:trackingFeature,trackingElement:trackingElement}}},{key:"_createTrackingData",value:function _createTrackingData(eventType,targetType,event,component,childComponent){var parentComponentType=(component.getAttribute('is')||component.tagName).toLowerCase();var trackDataFromAttr=this._getTrackingDataFromComponentAttr(component);return{targetType:targetType||parentComponentType||'',targetElement:childComponent&&childComponent.trackingElement?childComponent.trackingElement:component.trackingElement,eventType:eventType||event.type,rootElement:trackDataFromAttr.trackingElement,rootFeature:trackDataFromAttr.trackingFeature,rootType:parentComponentType}}},{key:"addListener",value:function addListener(trackingCallback){if(typeof trackingCallback!=='function'){throw new Error('Coral.Tracking: Tracker must be a function callback.')}if(this._trackers.indexOf(trackingCallback)!==-1){throw new Error('Coral.Tracking: Tracker callback cannot be added twice.')}this._trackers.push(trackingCallback)}},{key:"removeListener",value:function removeListener(trackingCallback){this._trackers=this._trackers.filter(function(trackerFn){return trackerFn!==trackingCallback})}},{key:"track",value:function track(eventType,targetType,event,component,childComponent){if(this._trackers.length===0||this._isTrackingDisabledForComponent(component)||this._isTrackingDisabledForComponent(childComponent)){return false}var args=Array.prototype.slice.call(arguments,[2]);var trackingData=this._createTrackingData(eventType,targetType,event,component,childComponent);this._trackers.forEach(function(trackerFn){trackerFn.apply(null,[trackingData].concat(args))});return true}}]);return Tracking}();var tracking=new Tracking();var delegateEventSplitter=/^(\S+)\s*(.*)$/;var ELEMENT_NODE=Node.ELEMENT_NODE;function getListenerFromMethodNameOrFunction(obj,eventName,methodNameOrFunction){if(typeof methodNameOrFunction==='function'){return methodNameOrFunction}else if(typeof methodNameOrFunction==='string'){if(!obj[methodNameOrFunction]){throw new Error('Coral.Component: Unable to add '+eventName+' listener for '+obj.toString()+', method '+methodNameOrFunction+' not found')}var listener=obj[methodNameOrFunction];if(typeof listener!=='function'){throw new Error('Coral.Component: Unable to add '+eventName+' listener for '+obj.toString()+', listener is a '+_typeof(listener)+' but should be a function')}return listener}else if(methodNameOrFunction){throw new Error('Coral.Component: Unable to add '+eventName+' listener for '+obj.toString()+', '+methodNameOrFunction+' is neither a method name or a function')}return null}var Component=function Component(){throw new Error('Coral.Component is not meant to be invoked directly. Inherit from its prototype instead.')};Component.prototype=Object.create(HTMLElement.prototype);Component.prototype._properties={};Component.prototype.toString=function(){if(this._namespace===window.Coral){return "Coral.".concat(this._componentName)}return this._componentName};Component.prototype._events={};Component.prototype.createdCallback=function(){if(this.toString!==Component.prototype.toString){this.toString=Component.prototype.toString}this._setProps={};this._syncQueue=[];this._syncDOM=this._syncDOM.bind(this);this._vent=new Vent(this);if(this._className){this.classList.add.apply(this.classList,this._className.split(' '))}this._elements={};if(typeof this._render==='function'){this._render()}var prop;var attr;var value;var descriptor;var methods;this._contentZones={};var attrValues={};for(prop in this._properties){descriptor=this._properties[prop];if(descriptor.contentZone){if(this._contentZones[descriptor.tagName]){commons._log('warn','Coral.Component: content zone for "%s" is already defined',descriptor.tagName)}this._contentZones[descriptor.tagName]=prop}attr=descriptor.attribute||prop;attrValues[prop]=this.getAttribute(attr)}for(prop in this._properties){descriptor=this._properties[prop];methods=descriptor._methods;value=attrValues[prop];if(value!==null){if(methods.attributeTransform){value=methods.attributeTransform.call(this,value,descriptor.default)}if(descriptor.transform){value=methods.transform.call(this,value,descriptor.default)}if(methods.validate){for(var i=0;i<methods.validate.length;i+=1){if(!methods.validate[i].call(this,value)){value=null;break}}}}if(value===null){if(this._setProps[prop]){continue}if(typeof descriptor.default==='function'){value=descriptor.default.call(this)}else{value=descriptor.default}if(typeof value==='undefined'){continue}}this.set(prop,value,true)}this._delegateEvents();if(typeof this._initialize==='function'){this._initialize()}if(Object.keys(this._contentZones).length){this._observer=new MutationObserver(this._handleContentZones.bind(this));this._observer.observe(this,{childList:true,subtree:false })}this._componentReady=true};Component.prototype._handleContentZones=function(records){var record;var addedNodes;var removedNodes;var node;var tagName;var propertyName;for(var i=0,recordsCount=records.length;i<recordsCount;i+=1){record=records[i];addedNodes=record.addedNodes;removedNodes=record.removedNodes;for(var k=0,removedNodesCount=removedNodes.length;k<removedNodesCount;k+=1){node=removedNodes[k];if(node.nodeType===ELEMENT_NODE){tagName=node.tagName.toLowerCase();propertyName=this._contentZones[tagName];if(propertyName&&this[propertyName]===node&&node.parentNode===null){this[propertyName]=undefined}}}for(var j=0,addedNodesCount=addedNodes.length;j<addedNodesCount;j+=1){node=addedNodes[j];if(node.nodeType===ELEMENT_NODE){tagName=node.tagName.toLowerCase();propertyName=this._contentZones[tagName];if(propertyName&&this[propertyName]!==node){this[propertyName]=node}}}}};Component.prototype._filterKeys=function(){return true};Component.prototype.attachedCallback=function(){this.trigger('coral-component:attached');this._delegateGlobalEvents()};Component.prototype.detachedCallback=function(){this.trigger('coral-component:detached');this._undelegateGlobalEvents()};Component.prototype.attributeChangedCallback=function(attrName,oldValue,newValue){var propName=this._attributes[attrName]||attrName;var descriptor=this._properties[propName];if(typeof descriptor!=='undefined'){if(descriptor.attribute===null){return}['attributeTransform','transform'].forEach(function(v){var transform=descriptor._methods[v];if(transform){newValue=transform.call(this,newValue,descriptor.default)}},this);if(newValue!==this[propName]){this[propName]=newValue}}if(this._properties['_'+propName]){this._properties['_'+propName].set.call(this,newValue)}};Component.prototype._queueSync=function(){for(var i=0,ni=arguments.length;i<ni;i+=1){var propName=arguments[i];var currentIndex=this._syncQueue.indexOf(propName);if(currentIndex!==-1){this._syncQueue.splice(currentIndex,1)}this._syncQueue.push(propName)}if(!this._syncPending){window.requestAnimationFrame(this._syncDOM);this._syncPending=true}};Component.prototype._syncProp=function(propName,leaveInQueue){var method=this._properties[propName].sync;if(method){method.call(this)}else{commons._log('warn','Coral.Component: sync method for %s is not defined',propName)}if(!leaveInQueue){var index=this._syncQueue.indexOf(propName);if(index!==-1){this._syncQueue.splice(index,1)}}};Component.prototype._syncDOM=function(){var propName;while(propName=this._syncQueue.shift()){this._syncProp(propName,true)}this._syncPending=false};Component.prototype._delegateEvents=function(){var match;var eventName;var eventInfo;var listener;var selector;var elements;var isGlobal;var isKey;var isResize;var isCapture;for(eventInfo in this._events){listener=this._events[eventInfo];match=eventInfo.match(delegateEventSplitter);eventName=match[1]+'.CoralComponent';selector=match[2];if(selector===''){selector=undefined}listener=getListenerFromMethodNameOrFunction(this,eventName,listener);if(listener){listener=listener.bind(this);isGlobal=eventName.indexOf('global:')===0;if(isGlobal){eventName=eventName.substr(7)}isCapture=eventName.indexOf('capture:')===0;if(isCapture){eventName=eventName.substr(8)}isKey=eventName.indexOf('key:')===0;if(isKey){if(isCapture){throw new Error('Coral.Keys does not currently support listening to key events with capture')}eventName=eventName.substr(4)}isResize=eventName.indexOf('resize')===0;if(isResize){if(isCapture){throw new Error('Coral.commons.addResizeListener does not currently support listening to resize event with capture')}}if(isGlobal){if(isKey){this._globalKeys=this._globalKeys||[];this._globalKeys.push({keyCombo:eventName,selector:selector,listener:listener})}else{this._globalEvents=this._globalEvents||[];this._globalEvents.push({eventName:eventName,selector:selector,listener:listener,isCapture:isCapture})}}else{if(isKey){this._keys=this._keys||new Keys(this,{filter:this._filterKeys,context:this});this._keys.on(eventName,selector,listener)}else if(isResize){if(selector){elements=document.querySelectorAll(selector);for(var i=0;i<elements.length;i+=1){commons.addResizeListener(elements[i],listener)}}else{commons.addResizeListener(this,listener)}}else{this._vent.on(eventName,selector,listener,isCapture)}}}}};Component.prototype._undelegateGlobalEvents=function(){var i;if(this._globalEvents){for(i=0;i<this._globalEvents.length;i+=1){var event=this._globalEvents[i];events.off(event.eventName,event.selector,event.listener,event.isCapture)}}if(this._globalKeys){for(i=0;i<this._globalKeys.length;i+=1){var key=this._globalKeys[i];keys$1.off(key.keyCombo,key.selector,key.listener)}}if(this._keys){this._keys.destroy(true)}return this};Component.prototype._delegateGlobalEvents=function(){var i;if(this._globalEvents){for(i=0;i<this._globalEvents.length;i+=1){var event=this._globalEvents[i];events.on(event.eventName,event.selector,event.listener,event.isCapture)}}if(this._globalKeys){for(i=0;i<this._globalKeys.length;i+=1){var key=this._globalKeys[i];keys$1.on(key.keyCombo,key.selector,key.listener)}}if(this._keys){this._keys.init(true)}return this};Component.prototype.on=function(eventName,selector,func,useCapture){this._vent.on(eventName,selector,func,useCapture);return this};Component.prototype.off=function(eventName,selector,func,useCapture){this._vent.off(eventName,selector,func,useCapture);return this};Component.prototype.trigger=function(eventName,props,bubbles,cancelable){bubbles=bubbles||bubbles===undefined;cancelable=cancelable||cancelable===undefined;var event=new CustomEvent(eventName,{bubbles:bubbles,cancelable:cancelable,detail:props});var defaultPrevented=false;try{defaultPrevented=!this.dispatchEvent(event)}catch(e){}if(defaultPrevented!==event.defaultPrevented){var patchedEvent=Object.create(event);Object.defineProperty(patchedEvent,'defaultPrevented',{value:defaultPrevented});return patchedEvent}return event};Component.prototype.remove=function(){if(this.parentNode){this.parentNode.removeChild(this)}};Component.prototype._doSet=function(property,value,silent){var descriptor=this._properties&&this._properties[property];if(descriptor){if(descriptor.contentZone&&!(value instanceof HTMLElement)&&this[property].set){this[property].set(value )}else if(descriptor.contentZone&&!(value instanceof HTMLElement)&&_typeof(value)==='object'&&this[property]instanceof HTMLElement){Object.keys(value).forEach(function(prop){this[prop]=value[prop]},this[property])}else if(descriptor._methods&&descriptor._methods.set){descriptor._methods.set.call(this,value,!!silent)}else{this[property]=value}}else{this[property]=value}};Component.prototype.set=function(propertyOrProperties,valueOrSilent,silent){var property;var properties;var value;if(typeof propertyOrProperties==='string'){property=propertyOrProperties;value=valueOrSilent;this._doSet(property,value,silent)}else{properties=propertyOrProperties;silent=valueOrSilent;for(property in properties){value=properties[property];this._doSet(property,value,silent)}}return this};Component.prototype.get=function(property){return this[property]};Component.prototype.show=function(){if(!this.hidden){return this}this.hidden=false;return this};Component.prototype.hide=function(){if(this.hidden){return this}this.hidden=true;return this};Component.prototype._methods={};for(var prop in Component.prototype){if(Component.prototype.hasOwnProperty(prop)){Component.prototype._methods[prop]=Component.prototype[prop]}}var specialProperties={extend:true,properties:true,events:true,_elements:true,name:true,namespace:true,tagName:true,baseTagName:true,className:true};function noop(){}function passThrough(value){return value}function makeValidate(descriptor){if(!descriptor.validate){return[validate.valueMustChange]}if(Array.isArray(descriptor.validate)){return descriptor.validate}return[descriptor.validate]}function makeReflect(propName,descriptor){if(!descriptor.reflectAttribute){return noop}var attrName=descriptor.attribute||propName;return function doReflect(value,silent){if(value===false||value===null){this.removeAttribute(attrName)}else{if(value===true){value=''}if(this.getAttribute(attrName)!==value){this.setAttribute(attrName,value)}}}}function makeTrigger(trigger){if(!trigger){return noop}if(typeof trigger==='function'){return trigger}var eventName=trigger;return function doTrigger(newValue,oldValue){return this.trigger(eventName,{oldValue:oldValue,value:newValue})}}function makeQueueSync(propName,descriptor){var propList=descriptor.alsoSync;var sync=descriptor.sync;if(!sync&&!propList){return noop}if(propList){if(Array.isArray(propList)){propList.unshift(propName)}else{propList=[propName,propList]}return function doMultiSync(value){this._queueSync.apply(this,propList)}}return function doSync(value){this._queueSync(propName)}}function storeDescriptor(proto,propName,descriptor){var triggerBeforeValue;if(typeof descriptor.triggerBefore==='function'||typeof descriptor.triggerBefore==='string'){triggerBeforeValue=descriptor.triggerBefore}else if(descriptor.triggerBefore===true){if(typeof descriptor.trigger==='string'&&descriptor.trigger.indexOf(':')!==-1){triggerBeforeValue=descriptor.trigger.replace(':',':before')}else{throw new Error('Coral.register: Cannot automatically set "before" event name unless descriptor.trigger is a string that conatins a colon')}}descriptor.set=descriptor.set||makeBasicSetter(propName);descriptor.get=descriptor.get||makeBasicGetter(propName);var inheritedMethods=descriptor._methods;descriptor._methods={};if(inheritedMethods){for(var methodName in inheritedMethods){descriptor._methods[methodName]=inheritedMethods[methodName]}}descriptor._methods.triggerBefore=makeTrigger(triggerBeforeValue);descriptor._methods.trigger=makeTrigger(descriptor.trigger);descriptor._methods.transform=descriptor.transform||passThrough;descriptor._methods.attributeTransform=descriptor.attributeTransform||passThrough;descriptor._methods.reflectAttribute=makeReflect(propName,descriptor);descriptor._methods.queueSync=makeQueueSync(propName,descriptor);descriptor._methods.validate=makeValidate(descriptor);if(descriptor.attribute){proto._attributes[descriptor.attribute]=propName}else{proto._attributes[descriptor.attribute]=null}proto._properties[propName]=descriptor}function makeGetter(propName){return function getter(){return this._properties[propName].get.call(this)}}function makeSetter(propName){return function setter(value,silent){var descriptor=this._properties[propName];var methods=descriptor._methods;var newValue=methods.transform.call(this,value,this._properties[propName].default);var oldValue=this[propName];var self=this;var failed=methods.validate.some(function(validator){return!validator.call(self,newValue,oldValue)});if(failed){return}if(!silent){var event=methods.triggerBefore.call(this,newValue,oldValue);if(event&&event.defaultPrevented){return}}descriptor.set.call(this,newValue,silent);methods.reflectAttribute.call(this,newValue);methods.queueSync.call(this);if(!silent){methods.trigger.call(this,newValue,oldValue)}this._setProps[propName]=true}}function makeBasicGetter(propName){var tempVarName='_'+propName;return function getter(){return this[tempVarName]}}function makeBasicSetter(propName){var tempVarName='_'+propName;return function setter(value){this[tempVarName]=value}}function defineProperties(proto,properties){for(var propName in properties){if(!properties[propName]){continue}defineProperty$1(proto,propName,properties[propName])}}function defineProperty$1(proto,propName,descriptor){if(typeof descriptor==='function'){descriptor=descriptor(proto,propName);if(!descriptor){throw new Error('Coral.register.defineProperty: Property function did not return a descriptor for '+propName)}}storeDescriptor(proto,propName,descriptor);var actualSetter=descriptor._methods.set=makeSetter(propName);var actualGetter=descriptor._methods.get=makeGetter(propName);Object.defineProperty(proto,propName,{enumerable:true,configurable:false,set:actualSetter,get:actualGetter})}var tagPrototypes={};function getPrototypeOfTag(tagName){tagPrototypes[tagName]=tagPrototypes[tagName]||Object.getPrototypeOf(document.createElement(tagName));return tagPrototypes[tagName]}var register=function register(options){if(options.extend&&!options.extend.prototype._methods){options.extend=Component}var extend=options.extend||Component;var baseComponentProto=extend.prototype;var actualPrototype=baseComponentProto;var properties=options.properties?commons.extend({},options.properties):{};if(options.baseTagName){actualPrototype=getPrototypeOfTag(options.baseTagName)}var proto=Object.create(actualPrototype);proto._proto=baseComponentProto;if(options.baseTagName){var protoChain=[];var curBaseProto=baseComponentProto;while(curBaseProto&&curBaseProto._methods){protoChain.unshift(curBaseProto);curBaseProto=curBaseProto._proto}while(curBaseProto=protoChain.shift()){for(var methodName in curBaseProto._methods){proto[methodName]=curBaseProto[methodName]}}}proto._attributes=commons.extend({},baseComponentProto._attributes);proto._properties={};proto._events=commons.extend({},baseComponentProto._events,options.events);proto._elements=commons.extend({},baseComponentProto._elements,options._elements);proto._componentName=options.name;proto._namespace=options.namespace||window.Coral;proto._className=options.className;var _methods=proto._methods={};for(var method in options){if(!specialProperties[method]){proto[method]=_methods[method]=options[method]}}if(options.mixins){commons.mixin(proto,options.mixins,{properties:properties})}commons.augment(proto._properties,baseComponentProto._properties,properties,function(existingDesc,newDesc,propName){if(!newDesc){return null}if(newDesc.override===true){return newDesc}var combinedDesc=commons.augment({},newDesc,existingDesc,handleAugmentPropertyCollision);storeDescriptor(proto,propName,combinedDesc);properties[propName]=undefined;return combinedDesc});for(var propName in proto._properties){if(!proto._properties[propName]){delete proto._properties[propName]}}if(options.baseTagName){defineProperties(proto,proto._properties)}else{defineProperties(proto,properties)}var registrationOptions={prototype:proto};if(options.baseTagName){registrationOptions.extends=options.baseTagName}var Constructor=document.registerElement(options.tagName,registrationOptions);commons.setSubProperty(options.namespace||window.Coral||window,options.name,Constructor);return Constructor};register.defineProperties=defineProperties;register.defineProperty=defineProperty$1;register.augmentProperties=function(dest,source,handleCollision){commons.augment(dest,source,function(existingDesc,newDesc,propName){if(existingDesc.override===true){return existingDesc}var combinedDesc=commons.augment({},existingDesc,newDesc,handleCollision||handleAugmentPropertyCollision);return combinedDesc})};function handleAugmentPropertyCollision(destValue,sourceValue,descPropName){switch(descPropName){case 'sync':case 'set':return callBoth(sourceValue,destValue);default:return destValue}}function callBoth(first,second){return function(){first.apply(this,arguments);second.apply(this,arguments)}}var property={};property.proxy=function(descriptor){var path=descriptor.path;function setProxy(value,silent){commons.setSubProperty(this,path,value)}function getProxy(){return commons.getSubProperty(this,path)}var functionalDescriptor=function functionalDescriptor(proto,propName){var tempPropName='_'+propName;if(descriptor.needsDOMSync){descriptor.sync=function(){commons.setSubProperty(this,path,this[tempPropName]);this[tempPropName]=undefined};descriptor.set=function(value,silent){this[tempPropName]=value};descriptor.get=function(){return typeof this[tempPropName]==='undefined'?commons.getSubProperty(this,path):this[tempPropName]}}else{descriptor.set=setProxy;descriptor.get=getProxy;descriptor.sync=null}return descriptor};functionalDescriptor.override=typeof descriptor.override!=='undefined'?descriptor.override:true;return functionalDescriptor};property.proxyAttr=function(descriptor){var attribute=descriptor.attribute;var handle=descriptor.handle;var functionalDescriptor=function functionalDescriptor(proto,propName){return commons.extend({attribute:attribute,set:function set(value){this._elements[handle][value===false||value===null?'removeAttribute':'setAttribute'](attribute,value)},get:function get(){return this._elements[handle].getAttribute(attribute)}},descriptor)};functionalDescriptor.override=typeof descriptor.override!=='undefined'?descriptor.override:true;return functionalDescriptor};property.contentZone=function(descriptor){var handle=descriptor.handle;var expectedTagName=descriptor.tagName;var additionalSetter=descriptor.set;var alternateGetter=descriptor.get;var insert=descriptor.insert;var functionalDescriptor=function functionalDescriptor(proto,propName){if(descriptor.defaultContentZone){Object.defineProperty(proto,'defaultContentZone',{set:function set(value){this[propName]=value},get:function get(){return this[propName]}})}return commons.extend({},descriptor,{contentZone:true,set:function set(value){var oldNode;if(!!value){if(!(value instanceof HTMLElement)){throw new Error('DOMException: Failed to set the "'+propName+'" property on "'+this.toString()+'": The provided value is not of type "HTMLElement".')}if(expectedTagName&&value.tagName.toLowerCase()!==expectedTagName){throw new Error('DOMException: Failed to set the "'+propName+'" property on "'+this.toString()+'": The new '+propName+' element is of type "'+value.tagName+'". It must be a "'+expectedTagName.toUpperCase()+'" element.')}oldNode=this._elements[handle];if(insert){if(oldNode&&oldNode.parentNode){oldNode.parentNode.removeChild(oldNode)}insert.call(this,value)}else{if(oldNode&&oldNode.parentNode){commons._log('warn',this._componentName+' does not define an insert method for content zone '+handle+', falling back to replace.');this._elements[handle].parentNode.replaceChild(value,this._elements[handle])}else{commons._log('error',this._componentName+' does not define an insert method for content zone '+handle+', falling back to append.');this.appendChild(value)}}}else{oldNode=this._elements[handle];if(oldNode&&oldNode.parentNode){oldNode.parentNode.removeChild(oldNode)}}this._elements[handle]=value;if(typeof additionalSetter==='function'){additionalSetter.call(this,value)}},get:alternateGetter||function(){return this._elements[handle]}})};return functionalDescriptor};window.Vent=window.Vent||vent;var delegateEventSplitter$1=/^(\S+)\s*(.*)$/;var tracking$1={ON:'on',OFF:'off'};var getListenerFromMethodNameOrFunction$1=function getListenerFromMethodNameOrFunction(obj,eventName,methodNameOrFunction){if(typeof methodNameOrFunction==='function'){return methodNameOrFunction}else if(typeof methodNameOrFunction==='string'){if(!obj[methodNameOrFunction]){throw new Error("Coral.Component: Unable to add ".concat(eventName," listener for ").concat(obj.toString(),", method\n      ").concat(methodNameOrFunction," not found"))}var listener=obj[methodNameOrFunction];if(typeof listener!=='function'){throw new Error("Coral.Component: Unable to add ".concat(eventName," listener for ").concat(obj.toString(),", listener is a\n      ").concat(_typeof(listener)," but should be a function"))}return listener}else if(methodNameOrFunction){throw new Error("Coral.Component: Unable to add ".concat(eventName," listener for ").concat(obj.toString(),", ").concat(methodNameOrFunction,"\n    is neither a method name or a function"))}return null};var delegateEvents=function delegateEvents(){var match;var eventName;var eventInfo;var listener;var selector;var elements;var isGlobal;var isKey;var isResize;var isCapture;for(eventInfo in this._events){listener=this._events[eventInfo];match=eventInfo.match(delegateEventSplitter$1);eventName="".concat(match[1],".CoralComponent");selector=match[2];if(selector===''){selector=undefined}listener=getListenerFromMethodNameOrFunction$1(this,eventName,listener);if(listener){listener=listener.bind(this);isGlobal=eventName.indexOf('global:')===0;if(isGlobal){eventName=eventName.substr(7)}isCapture=eventName.indexOf('capture:')===0;if(isCapture){eventName=eventName.substr(8)}isKey=eventName.indexOf('key:')===0;if(isKey){if(isCapture){throw new Error('Coral.Keys does not currently support listening to key events with capture')}eventName=eventName.substr(4)}isResize=eventName.indexOf('resize')===0;if(isResize){if(isCapture){throw new Error('Coral.commons.addResizeListener does not currently support listening to resize event with capture')}}if(isGlobal){if(isKey){this._globalKeys=this._globalKeys||[];this._globalKeys.push({keyCombo:eventName,selector:selector,listener:listener})}else{this._globalEvents=this._globalEvents||[];this._globalEvents.push({eventName:eventName,selector:selector,listener:listener,isCapture:isCapture})}}else if(isKey){this._keys=this._keys||new Keys(this,{filter:this._filterKeys,context:this});this._keys.on(eventName,selector,listener)}else if(isResize){if(selector){elements=document.querySelectorAll(selector);for(var i=0;i<elements.length;i+=1){commons.addResizeListener(elements[i],listener)}}else{commons.addResizeListener(this,listener)}}else{this._vent.on(eventName,selector,listener,isCapture)}}}};var delegateGlobalEvents=function delegateGlobalEvents(){var i;if(this._globalEvents){for(i=0;i<this._globalEvents.length;i+=1){var event=this._globalEvents[i];events.on(event.eventName,event.selector,event.listener,event.isCapture)}}if(this._globalKeys){for(i=0;i<this._globalKeys.length;i+=1){var key=this._globalKeys[i];keys$1.on(key.keyCombo,key.selector,key.listener)}}if(this._keys){this._keys.init(true)}};var undelegateGlobalEvents=function undelegateGlobalEvents(){var i;if(this._globalEvents){for(i=0;i<this._globalEvents.length;i+=1){var event=this._globalEvents[i];events.off(event.eventName,event.selector,event.listener,event.isCapture)}}if(this._globalKeys){for(i=0;i<this._globalKeys.length;i+=1){var key=this._globalKeys[i];keys$1.off(key.keyCombo,key.selector,key.listener)}}if(this._keys){this._keys.destroy(true)}};var REG_EXP_UPPERCASE=/[A-Z]/g;var getConstructorName=function getConstructorName(constructor){var constructorName=[];var originalConstructor=constructor;if(!constructor._namespace){var find=function find(obj,constructorToFind){var found=false;var type=_typeof(obj);if(obj&&type==='object'||type==='function'){var subObj=Object.keys(obj);for(var i=0;i<subObj.length;i+=1){var key=subObj[i];if(key[0].match(REG_EXP_UPPERCASE)!==null){obj[key]._namespace={parent:obj,value:key};found=obj[key]===constructorToFind;if(found){break}else{found=find(obj[key],constructorToFind)}}}}return found};find(window.Coral,constructor)}while(constructor){if(constructor._namespace){constructorName.push(constructor._namespace.value);constructor=constructor._namespace.parent}else{constructor=false}}originalConstructor._componentName=constructorName.reverse().join('.');return originalConstructor._componentName};var BaseComponent=function BaseComponent(superClass){return function(_superClass){_inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){var _this;_classCallCheck(this,_class);_this=_super.call(this);_this._vent=new vent(_assertThisInitialized(_this));_this._events={};if(_this._contentZones){_this._contentZoneObserver=new MutationObserver(function(mutations){mutations.forEach(function(mutation){for(var i=0;i<mutation.addedNodes.length;i+=1){var addedNode=mutation.addedNodes[i];for(var name in _this._contentZones){var contentZone=_this._contentZones[name];if(addedNode.nodeName.toLowerCase()===name&&!addedNode._contentZoned){_this[contentZone]=addedNode}}}})});_this._contentZoneObserver.observe(_assertThisInitialized(_this),{childList:true,subtree:true})}return _this}_createClass(_class,[{key:"_filterKeys",value:function _filterKeys(){return true}},{key:"_delegateEvents",value:function _delegateEvents(eventMap){this._events=commons.extend(this._events,eventMap);delegateEvents.call(this);delegateGlobalEvents.call(this);this._events={}}},{key:"_getContentZone",value:function _getContentZone(contentZone){if(document.documentElement.contains(this)){return this.contains(contentZone)&&contentZone||null}return contentZone}},{key:"_setContentZone",value:function _setContentZone(property,value,options){var handle=options.handle;var expectedTagName=options.tagName;var additionalSetter=options.set;var insert=options.insert;var oldNode;if(value){if(!(value instanceof HTMLElement)){throw new Error("DOMException: Failed to set the \"".concat(property,"\" property on \"").concat(this.toString(),"\":\n        The provided value is not of type \"HTMLElement\"."))}if(expectedTagName&&value.tagName.toLowerCase()!==expectedTagName){throw new Error("DOMException: Failed to set the \"".concat(property,"\" property on \"").concat(this.toString(),"\": The new\n        ").concat(property," element is of type \"").concat(value.tagName,"\". It must be a \"").concat(expectedTagName.toUpperCase(),"\" element."))}oldNode=this._elements[handle];value._contentZoned=true;if(insert){if(oldNode&&oldNode.parentNode){oldNode.parentNode.removeChild(oldNode)}insert.call(this,value)}else if(oldNode&&oldNode.parentNode){commons._log('warn',"".concat(this._componentName," does not define an insert method for content zone ").concat(handle,", falling back to replace."));this._elements[handle].parentNode.replaceChild(value,this._elements[handle])}else{commons._log('error',"".concat(this._componentName," does not define an insert method for content zone ").concat(handle,", falling back to append."));this.appendChild(value)}}else{oldNode=this._elements[handle];if(oldNode&&oldNode.parentNode){oldNode.parentNode.removeChild(oldNode)}}this._elements[handle]=value;if(typeof additionalSetter==='function'){additionalSetter.call(this,value)}}},{key:"_reflectAttribute",value:function _reflectAttribute(attributeName,value){if(typeof value==='boolean'){if(value&&!this.hasAttribute(attributeName)){this._reflectedAttribute=true;this.setAttribute(attributeName,'');this._reflectedAttribute=false}else if(!value&&this.hasAttribute(attributeName)){this._reflectedAttribute=true;this.removeAttribute(attributeName);this._reflectedAttribute=false}}else if(this.getAttribute(attributeName)!==String(value)){this._reflectedAttribute=true;this.setAttribute(attributeName,value);this._reflectedAttribute=false}}},{key:"_trackEvent",value:function _trackEvent(eventType,targetType,event,childComponent){if(this.tracking===this.constructor.tracking.ON){tracking.track(eventType,targetType,event,this,childComponent)}return this}},{key:"toString",value:function toString(){return "Coral.".concat(this._componentName)}},{key:"on",value:function on(eventName,selector,func,useCapture){this._vent.on(eventName,selector,func,useCapture);return this}},{key:"off",value:function off(eventName,selector,func,useCapture){this._vent.off(eventName,selector,func,useCapture);return this}},{key:"trigger",value:function trigger(eventName,props,bubbles,cancelable){bubbles=bubbles||bubbles===undefined;cancelable=cancelable||cancelable===undefined;var event=new CustomEvent(eventName,{bubbles:bubbles,cancelable:cancelable,detail:props});if(this._silenced){return event}var defaultPrevented=false;try{defaultPrevented=!this.dispatchEvent(event)}catch(e){}if(defaultPrevented!==event.defaultPrevented){var patchedEvent=Object.create(event);Object.defineProperty(patchedEvent,'defaultPrevented',{value:defaultPrevented});return patchedEvent}return event}},{key:"set",value:function set(propertyOrProperties,valueOrSilent,silent){var _this2=this;var property;var properties;var value;var isContentZone=function isContentZone(prop){return _this2._contentZones&&commons.swapKeysAndValues(_this2._contentZones)[prop]};var updateContentZone=function updateContentZone(prop,val){if(_this2[prop]instanceof HTMLElement&&!(val instanceof HTMLElement)){for(var contentZoneProperty in val){_this2[prop][contentZoneProperty]=val[contentZoneProperty]}}else{_this2[prop]=val}};var setProperty=function setProperty(prop,val){if(isContentZone(prop)){updateContentZone(prop,val)}else{_this2._silenced=silent;_this2[prop]=val;_this2._silenced=false}};if(typeof propertyOrProperties==='string'){property=propertyOrProperties;value=valueOrSilent;setProperty(property,value)}else{properties=propertyOrProperties;silent=valueOrSilent;for(property in properties){value=properties[property];setProperty(property,value)}}return this}},{key:"get",value:function get(property){return this[property]}},{key:"show",value:function show(){if(!this.hidden){return this}this.hidden=false;return this}},{key:"hide",value:function hide(){if(this.hidden){return this}this.hidden=true;return this}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){var self=this;if(!self._reflectedAttribute){self[self.constructor._attributePropertyMap[name]||name]=value}}},{key:"connectedCallback",value:function connectedCallback(){if(this._disconnected){delegateGlobalEvents.call(this);this._disconnected=false}if(!this._rendered){this.render()}}},{key:"render",value:function render(){this._rendered=true}},{key:"disconnectedCallback",value:function disconnectedCallback(){this._disconnected=true;undelegateGlobalEvents.call(this)}},{key:"tracking",get:function get(){return this._tracking||this.getAttribute('tracking')||tracking$1.ON},set:function set(value){value=transform.string(value).toLowerCase();this._tracking=validate.enumeration(tracking$1)(value)&&value||tracking$1.ON}},{key:"trackingFeature",get:function get(){return this._trackingFeature||this.getAttribute('trackingFeature')||''},set:function set(value){this._trackingFeature=transform.string(value)}},{key:"trackingElement",get:function get(){return this._trackingElement||this.getAttribute('trackingElement')||''},set:function set(value){this._trackingElement=transform.string(value)}},{key:"_componentName",get:function get(){return this.constructor._componentName||getConstructorName(this.constructor)}}],[{key:"tracking",get:function get(){return tracking$1}},{key:"_attributePropertyMap",get:function get(){return{trackingelement:'trackingElement',trackingfeature:'trackingFeature'}}},{key:"observedAttributes",get:function get(){return['tracking','trackingelement','trackingfeature','trackingFeature']}}]);return _class}(superClass)};var LABELLABLE_ELEMENTS_SELECTOR='button,input:not([type=hidden]),keygen,meter,output,progress,select,textarea';if(navigator.userAgent.indexOf('MSIE')!==-1||navigator.appVersion.indexOf('Trident/')>0){LABELLABLE_ELEMENTS_SELECTOR='button,keygen,meter,output,progress,select,textarea,';['text','password','submit','reset','radio','checkbox','button','color','date','datetime-local','email','month','number','range','search','tel','time','url','week'].forEach(function(type){LABELLABLE_ELEMENTS_SELECTOR+="input[type=".concat(type,"],")});LABELLABLE_ELEMENTS_SELECTOR=LABELLABLE_ELEMENTS_SELECTOR.slice(0,-1)}var TARGET_INPUT_SELECTOR='input:not([type=hidden])';var BaseFormField=function BaseFormField(superClass){return function(_superClass){_inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){var _this;_classCallCheck(this,_class);_this=_super.call(this);_this._events={'capture:change input':'_onTargetInputChange','global:reset':'_onFormReset'};return _this}_createClass(_class,[{key:"_getLabellableElement",value:function _getLabellableElement(){var element=this._labellableElement||this.querySelector(LABELLABLE_ELEMENTS_SELECTOR);return element||this}},{key:"_getTargetChangeInput",value:function _getTargetChangeInput(){return this._targetChangeInput||(this._targetChangeInput=this._getLabellableElement().matches(TARGET_INPUT_SELECTOR)?this._getLabellableElement():null)}},{key:"_onInputChange",value:function _onInputChange(event){event.stopPropagation();this[this._componentTargetProperty]=event.target[this._eventTargetProperty];if(this._triggerChangeEvent){this.trigger('change')}}},{key:"_onFormReset",value:function _onFormReset(event){if(event.target.contains(this)){this.reset()}}},{key:"_onTargetInputChange",value:function _onTargetInputChange(event){var targetInput=this._getTargetChangeInput();if(targetInput===event.target||targetInput===null){this._onInputChange(event)}}},{key:"_updateForAttributes",value:function _updateForAttributes(labelledBy,elementId,remove){var labelIds=labelledBy.split(/\s+/);labelIds.forEach(function(currentValue){var labelElement=document.getElementById(currentValue);if(labelElement&&labelElement.tagName==='LABEL'){var forAttribute=labelElement.getAttribute('for');if(remove){if(forAttribute===elementId){labelElement.removeAttribute('for')}}else{labelElement.setAttribute('for',elementId)}}})}},{key:"clear",value:function clear(){this.value=''}},{key:"reset",value:function reset(){this.value=transform.string(this.getAttribute('value'))}},{key:"invalid",get:function get(){return this._invalid||false},set:function set(value){this._invalid=transform.booleanAttr(value);this._reflectAttribute('invalid',this._invalid);this.setAttribute('aria-invalid',this._invalid);this.classList.toggle('is-invalid',this._invalid)}},{key:"labelled",get:function get(){return this._getLabellableElement().getAttribute('aria-label')},set:function set(value){value=transform.string(value);this._getLabellableElement()[value?'setAttribute':'removeAttribute']('aria-label',value)}},{key:"labelledBy",get:function get(){return this._getLabellableElement().getAttribute('aria-labelledby')},set:function set(value){value=transform.string(value);var element=this._getLabellableElement();var elementId=element.id=element.id||commons.getUID();var currentLabelledBy=element.getAttribute('aria-labelledby');if(currentLabelledBy&&currentLabelledBy!==value){this._updateForAttributes(currentLabelledBy,elementId,true)}if(value){element.setAttribute('aria-labelledby',value);if(element.matches(LABELLABLE_ELEMENTS_SELECTOR)){this._updateForAttributes(value,elementId)}}else{element.removeAttribute('aria-labelledby')}}},{key:"_componentTargetProperty",get:function get(){return 'value'}},{key:"_eventTargetProperty",get:function get(){return 'value'}},{key:"_triggerChangeEvent",get:function get(){return true}}],[{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(_class),"_attributePropertyMap",this),{labelledby:'labelledBy',readonly:'readOnly'})}},{key:"_nativeObservedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['labelled','labelledby','invalid'])}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['labelled','labelledby','invalid','readonly','name','value','disabled','required'])}}]);return _class}(superClass)};var variant={DEFAULT:'default',QUIET:'quiet'};var CLASSNAME='_coral-Textfield';var ALL_VARIANT_CLASSES=[];for(var variantValue in variant){ALL_VARIANT_CLASSES.push("".concat(CLASSNAME,"--").concat(variant[variantValue]))}var Textfield=function(_BaseFormField){_inherits(Textfield,_BaseFormField);var _super=_createSuper(Textfield);function Textfield(){var _this;_classCallCheck(this,Textfield);_this=_super.call(this);_this._delegateEvents(_this._events);return _this}_createClass(Textfield,[{key:"render",value:function render(){_get(_getPrototypeOf(Textfield.prototype),"render",this).call(this);this.classList.add(CLASSNAME);if(!this._variant){this.variant=variant.DEFAULT}}},{key:"variant",get:function get(){return this._variant||variant.DEFAULT},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant)(value)&&value||variant.DEFAULT;this._reflectAttribute('variant',this._variant);(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES);if(this._variant!==variant.DEFAULT){this.classList.add("".concat(CLASSNAME,"--").concat(this._variant))}}}],[{key:"variant",get:function get(){return variant}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Textfield),"_nativeObservedAttributes",this).concat(['variant'])}}]);return Textfield}(BaseFormField(BaseComponent(HTMLInputElement)));commons._define('coral-textfield',Textfield,{extends:'input'});var BaseLabellable=function BaseLabellable(superClass){return function(_superClass){_inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){_classCallCheck(this,_class);return _super.apply(this,arguments)}_createClass(_class,[{key:"_observeLabel",value:function _observeLabel(){this._observableLabel=this._observableLabel||this._elements.label||this._elements.content;this._observer=new MutationObserver(this._toggleIconAriaHidden.bind(this));this._observer.observe(this._observableLabel,{childList:true,characterData:true,subtree:true})}},{key:"_toggleIconAriaHidden",value:function _toggleIconAriaHidden(){this._renderedLabel=this._renderedLabel||this.label||this.content;if(this._elements.icon){var isLabelled=this._renderedLabel&&this._renderedLabel.textContent.trim().length||this.getAttribute('aria-label')!==null||this.getAttribute('aria-labelledby')!==null;this._elements.icon[isLabelled?'setAttribute':'removeAttribute']('aria-hidden','true')}}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='aria-label'||name==='aria-labelledby'){this._toggleIconAriaHidden()}else{_get(_getPrototypeOf(_class.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['aria-label','aria-labelledby'])}}]);return _class}(superClass)};var ICON_MAP={"aBC":{"deprecated":true,"spectrumIcon":"ABC"},"abc":{"spectrumIcon":"ABC"},"accordionDown":{"spectrumIcon":"ChevronDown"},"accordionLeft":{"spectrumIcon":"ChevronDoubleLeft"},"accordionRight":{"spectrumIcon":"ChevronDoubleRight"},"accordionUp":{"spectrumIcon":"ChevronUp"},"adjust":{"spectrumIcon":"Exposure"},"adobe":{"spectrumIcon":"AdobeLogo"},"adobeAdvertisingCloudColor":{"spectrumIconDark":"AdobeAdvertisingCloudColor_Dark","spectrumIconLight":"AdobeAdvertisingCloudColor_Light"},"adobeAnalyticsColor":{"spectrumIconDark":"AdobeAnalyticsColor_Dark","spectrumIconLight":"AdobeAnalyticsColor_Light"},"adobeAnalyticsColorLight":{"spectrumIcon":"AdobeAnalyticsColor_Light"},"adobeAnalyticsColorDark":{"spectrumIcon":"AdobeAnalyticsColor_Dark"},"adobeAudienceManagerColor":{"spectrumIconDark":"AdobeAudienceManagerColor_Dark","spectrumIconLight":"AdobeAudienceManagerColor_Light"},"adobeAudienceManagerColorLight":{"spectrumIcon":"AdobeAudienceManagerColor_Light"},"adobeAudienceManagerColorDark":{"spectrumIcon":"AdobeAudienceManagerColor_Dark"},"adobeCampaignColor":{"spectrumIconDark":"AdobeCampaignColor_Dark","spectrumIconLight":"AdobeCampaignColor_Light"},"adobeCampaignColorLight":{"spectrumIcon":"AdobeCampaignColor_Light"},"adobeCampaignColorDark":{"spectrumIcon":"AdobeCampaignColor_Dark"},"adobeExperienceCloudColor":{"spectrumIcon":"AdobeExperienceCloudColor"},"adobeExperienceManagerColor":{"spectrumIconDark":"AdobeExperienceManagerColor_Dark","spectrumIconLight":"AdobeExperienceManagerColor_Light"},"adobeExperienceManagerColorLight":{"spectrumIcon":"AdobeExperienceManagerColor_Light"},"adobeExperienceManagerColorDark":{"spectrumIcon":"AdobeExperienceManagerColor_Dark"},"adobeExperiencePlatformColor":{"spectrumIcon":"AdobeExperiencePlatformColor"},"adobeMediaOptimizerColor":{"spectrumIconDark":"AdobeMediaOptimizerColor_Dark","spectrumIconLight":"AdobeMediaOptimizerColor_Light"},"adobeMediaOptimizerColorLight":{"spectrumIcon":"AdobeMediaOptimizerColor_Light"},"adobeMediaOptimizerColorDark":{"spectrumIcon":"AdobeMediaOptimizerColor_Dark"},"adobePrimetimeColor":{"spectrumIconDark":"AdobePrimetimeColor_Dark","spectrumIconLight":"AdobePrimetimeColor_Light"},"adobePrimetimeColorLight":{"spectrumIcon":"AdobePrimetimeColor_Light"},"adobePrimetimeColorDark":{"spectrumIcon":"AdobePrimetimeColor_Dark"},"adobeSocialColor":{"spectrumIconDark":"AdobeSocialColor_Dark","spectrumIconLight":"AdobeSocialColor_Light"},"adobeSocialColorLight":{"spectrumIcon":"AdobeSocialColor_Light"},"adobeSocialColorDark":{"spectrumIcon":"AdobeSocialColor_Dark"},"adobeTargetColor":{"spectrumIconDark":"AdobeTargetColor_Dark","spectrumIconLight":"AdobeTargetColor_Light"},"adobeTargetColorLight":{"spectrumIcon":"AdobeTargetColor_Light"},"adobeTargetColorDark":{"spectrumIcon":"AdobeTargetColor_Dark"},"annotate":{"spectrumIcon":"AnnotatePen"},"automate":{"spectrumIcon":"Gears"},"breadcrumb":{"spectrumIcon":"Menu"},"calendarCheckColor":{"spectrumIcon":"CalendarCheckColor_Light"},"campaignRemove":{"spectrumIcon":"CampaignClose"},"check":{"spectrumIcon":"Checkmark"},"checkCircle":{"spectrumIcon":"CheckmarkCircle"},"closedCaptions":{"spectrumIcon":"CloseCaptions"},"coverImage":{"spectrumIcon":"FacebookCoverImage"},"deviceMobile":{"spectrumIcon":"DevicePhone"},"deviceTv":{"deprecated":true,"spectrumIcon":"DeviceTV"},"downloaded":{"spectrumIcon":"Download"},"downloadFromCloud":{"deprecated":true,"spectrumIcon":"Download"},"dPS":{"deprecated":true,"spectrumIcon":"DPS"},"dps":{"spectrumIcon":"DPS"},"draw":{"spectrumIcon":"AnnotatePen"},"emailAlert":{"spectrumIcon":"Alert"},"emotionAdmirationColor":{"spectrumIcon":"EmotionAdmirationColor_Light"},"emotionAngerColor":{"spectrumIcon":"EmotionAngerColor_Light"},"emotionAnticipationColor":{"spectrumIcon":"EmotionAnticipationColor_Light"},"emotionDisgustColor":{"spectrumIcon":"EmotionDisgustColor_Light"},"emotionFearColor":{"spectrumIcon":"EmotionFearColor_Light"},"emotionJoyColor":{"spectrumIcon":"EmotionJoyColor_Light"},"emotionSadnessColor":{"spectrumIcon":"EmotionSadnessColor_Light"},"emotionSurpriseColor":{"spectrumIcon":"EmotionSurpriseColor_Light"},"exclude":{"spectrumIcon":"Cancel"},"eyedropper":{"spectrumIcon":"Sampler"},"facebookCircleColor":{"spectrumIcon":"FacebookCircleColor_Light"},"facebookColor":{"spectrumIcon":"FacebookColor_Light"},"file":{"spectrumIcon":"Document"},"fileGlobe2":{"spectrumIcon":"FileGlobe"},"film":{"spectrumIcon":"Filmroll"},"flickrColor":{"spectrumIcon":"FlickrColor_Light"},"folderDefault":{"spectrumIcon":"FolderAdobe"},"folderLockedDefault":{"spectrumIcon":"FolderLockedAdobe"},"gear":{"spectrumIcon":"Settings"},"googleAnalyticsColor":{"spectrumIcon":"GoogleAnalyticsColor_Light"},"googlePlusCircleColor":{"spectrumIcon":"GooglePlusCircleColor_Light"},"googlePlusColor":{"spectrumIcon":"GooglePlusColor_Light"},"graphBarStackedHorizontal":{"spectrumIcon":"GraphBarHorizontalStacked"},"graphBarStackedVertical":{"spectrumIcon":"GraphBarVertical"},"graphTrendRounded":{"spectrumIcon":"GraphTrend"},"helpCircle":{"spectrumIcon":"Help"},"hTML5":{"deprecated":true,"spectrumIcon":"HTML5"},"html5":{"spectrumIcon":"HTML5"},"imageCheckColor":{"spectrumIcon":"ImageCheckColor_Light"},"imageMap":{"spectrumIcon":"ImageMapRectangle"},"infoCircle":{"spectrumIcon":"Info"},"instagramCircleColor":{"spectrumIcon":"InstagramCircleColor_Light"},"instagramColor":{"spectrumIcon":"InstagramColor_Light"},"linkCheckColor":{"spectrumIcon":"LinkCheckColor_Light"},"linkedInCircleColor":{"spectrumIcon":"LinkedInCircleColor_Light"},"linkedInColor":{"spectrumIcon":"LinkedInColor_Light"},"lockOff":{"spectrumIcon":"LockOpen"},"lockOn":{"spectrumIcon":"LockClosed"},"magentoCommerceColor":{"spectrumIconDark":"MagentoCommerceColor_Dark","spectrumIconLight":"MagentoCommerceColor_Light"},"minus":{"spectrumIcon":"Remove"},"minusCircle":{"spectrumIcon":"RemoveCircle"},"navigation":{"spectrumIcon":"Rail"},"newsgatorColor":{"spectrumIcon":"NewsgatorColor_Light"},"open":{"spectrumIcon":"FolderOpen"},"os":{"spectrumIcon":"OS"},"oS":{"deprecated":true,"spectrumIcon":"OS"},"page":{"spectrumIcon":"WebPage"},"pages":{"spectrumIcon":"WebPages"},"paintBucket":{"spectrumIcon":"ColorFill"},"pausePlay":{"spectrumIcon":"StepForward"},"pausePlayCircle":{"spectrumIcon":"StepForwardCircle"},"popOut":{"spectrumIcon":"ArrowUpRight"},"projectCameraColor":{"spectrumIcon":"ProjectCameraColor_Light"},"projectColor":{"spectrumIcon":"ProjectColor_Light"},"projectPlayColor":{"spectrumIcon":"ProjectPlayColor_Light"},"projectRefreshColor":{"spectrumIcon":"ProjectRefreshColor_Light"},"publish":{"spectrumIcon":"Send"},"reflectHorizontal":{"spectrumIcon":"FlipHorizontal"},"reflectVertical":{"spectrumIcon":"FlipVertical"},"rSS":{"deprecated":true,"spectrumIcon":"RSS"},"rss":{"spectrumIcon":"RSS"},"save":{"spectrumIcon":"SaveFloppy"},"saveAs":{"spectrumIcon":"SaveAsFloppy"},"select":{"spectrumIcon":"SelectBox"},"selectAll":{"spectrumIcon":"SelectBoxAll"},"sinaWeiboCircleColor":{"spectrumIcon":"SinaWeiboCircleColor_Light"},"sinaWeiboColor":{"spectrumIcon":"SinaWeiboColor_Light"},"sms":{"spectrumIcon":"SMS"},"sMS":{"deprecated":true,"spectrumIcon":"SMS"},"sMSLightning":{"deprecated":true,"spectrumIcon":"SMSLightning"},"smsLightning":{"spectrumIcon":"SMSLightning"},"sMSRefresh":{"deprecated":true,"spectrumIcon":"SMSRefresh"},"smsRefresh":{"spectrumIcon":"SMSRefresh"},"star":{"spectrumIcon":"Star"},"starFill":{"spectrumIcon":"Star"},"starStroke":{"spectrumIcon":"StarOutline"},"stop":{"spectrumIcon":"StopCircle"},"tableCellMergeColor":{"spectrumIconActive":"TableCellMergeColor_Active","spectrumIconDark":"TableCellMergeColor_Dark","spectrumIconLight":"TableCellMergeColor_Light"},"tableColumnAddLeftColor":{"spectrumIconActive":"TableColumnAddLeftColor_Active","spectrumIconDark":"TableColumnAddLeftColor_Dark","spectrumIconLight":"TableColumnAddLeftColor_Light"},"tableColumnAddRightColor":{"spectrumIconActive":"TableColumnAddRightColor_Active","spectrumIconDark":"TableColumnAddRightColor_Dark","spectrumIconLight":"TableColumnAddLeftColor_Light"},"tableColumnMergeColor":{"spectrumIconActive":"TableColumnMergeColor_Active","spectrumIconDark":"TableColumnMergeColor_Dark","spectrumIconLight":"TableColumnMergeColor_Light"},"tableColumnRemoveCenterColor":{"spectrumIconActive":"TableColumnRemoveCenterColor_Active","spectrumIconDark":"TableColumnRemoveCenterColor_Dark","spectrumIconLight":"TableColumnRemoveCenterColor_Light"},"tableColumnSplitColor":{"spectrumIconActive":"TableColumnSplitColor_Active","spectrumIconDark":"TableColumnSplitColor_Dark","spectrumIconLight":"TableColumnSplitColor_Light"},"tableRowAddBottomColor":{"spectrumIconActive":"TableRowAddBottomColor_Active","spectrumIconDark":"TableRowAddBottomColor_Dark","spectrumIconLight":"TableRowAddBottomColor_Light"},"tableRowAddTopColor":{"spectrumIconActive":"TableRowAddTopColor_Active","spectrumIconDark":"TableRowAddTopColor_Dark","spectrumIconLight":"TableRowAddTopColor_Light"},"tableRowMergeColor":{"spectrumIconActive":"TableRowMergeColor_Active","spectrumIconDark":"TableRowMergeColor_Dark","spectrumIconLight":"TableRowMergeColor_Light"},"tableRowRemoveCenterColor":{"spectrumIconActive":"TableRowRemoveCenterColor_Active","spectrumIconDark":"TableRowRemoveCenterColor_Dark","spectrumIconLight":"TableRowRemoveCenterColor_Light"},"tableRowSplitColor":{"spectrumIconActive":"TableRowSplitColor_Active","spectrumIconDark":"TableRowSplitColor_Dark","spectrumIconLight":"TableRowSplitColor_Light"},"tableSelectColumnColor":{"spectrumIconActive":"TableSelectColumnColor_Active","spectrumIconDark":"TableSelectColumnColor_Dark","spectrumIconLight":"TableSelectColumnColor_Light"},"tableSelectRowColor":{"spectrumIconActive":"TableSelectRowColor_Active","spectrumIconDark":"TableSelectRowColor_Dark","spectrumIconLight":"TableSelectRowColor_Light"},"tag":{"spectrumIcon":"Label"},"tagExclude":{"spectrumIcon":"LabelExclude"},"tags":{"spectrumIcon":"Labels"},"targetCheckColor":{"spectrumIcon":"TargetCheckColor_Light"},"textCenter":{"spectrumIcon":"TextAlignCenter"},"textJustified":{"spectrumIcon":"TextAlignJustify"},"textLeft":{"spectrumIcon":"TextAlignLeft"},"textLetteredLowercase":{"spectrumIcon":"TextLetteredLowerCase"},"textLetteredUppercase":{"spectrumIcon":"TextLetteredUpperCase"},"textRight":{"spectrumIcon":"TextAlignRight"},"triangleDown":{"spectrumIcon":"ChevronDown"},"triangleRight":{"spectrumIcon":"ChevronRight"},"twitterCircleColor":{"spectrumIcon":"TwitterCircleColor_Light"},"twitterColor":{"spectrumIcon":"TwitterColor_Light"},"unflag":{"spectrumIcon":"FlagExclude"},"unpublish":{"spectrumIcon":"GlobeRemove"},"upload":{"spectrumIcon":"UploadToCloud"},"usa":{"spectrumIcon":"USA"},"uSA":{"deprecated":true,"spectrumIcon":"USA"},"userCircleColor":{"spectrumIconDark":"UserCircleColor_Dark","spectrumIconLight":"UserCircleColor_Light"},"userGroupCircleColor":{"spectrumIconDark":"UserGroupCircleColor_Dark","spectrumIconLight":"UserGroupCircleColor_Light"},"users":{"spectrumIcon":"UserGroup"},"viewOff":{"spectrumIcon":"VisibilityOff"},"viewOn":{"spectrumIcon":"Visibility"},"vk":{"spectrumIcon":"VK"},"vK":{"deprecated":true,"spectrumIcon":"VK"},"wand":{"spectrumIcon":"MagicWand"},"windowsColor":{"spectrumIcon":"WindowsColor_Light"},"wordpressColor":{"spectrumIcon":"WordpressColor_Light"},"write":{"spectrumIcon":"AnnotatePen"},"youTubeCircleColor":{"spectrumIcon":"YouTubeCircleColor_Light"},"youTubeColor":{"spectrumIcon":"YouTubeColor_Light"}};var SPECTRUM_ICONS_PATH='dist/resources/spectrum-icons.svg';var SPECTRUM_ICONS_COLOR_PATH='dist/resources/spectrum-icons-color.svg';var SPECTRUM_CSS_ICONS_PATH='dist/resources/spectrum-css-icons.svg';var SPECTRUM_ICONS='spectrum-icons';var SPECTRUM_ICONS_COLOR='spectrum-icons-color';var SPECTRUM_CSS_ICONS='spectrum-css-icons';function handleError(string){string="Coral.Icon#load: ".concat(string);var error=new Error(string);console.error(error.toString())}function injectSVG(svgURL){if(this.status!==200&&this.status!==0){handleError("failed to fetch icons, server returned ".concat(this.status));return}var parser=new DOMParser();try{var doc=parser.parseFromString(this.responseText,'image/svg+xml');var svg=doc.firstChild;if(svg&&svg.tagName==='svg'){if(svgURL.indexOf(SPECTRUM_ICONS_COLOR)!==-1){if(document.body){document.body.appendChild(svg)}else{document.addEventListener('DOMContentLoaded',function(){document.body.appendChild(svg)})}}else{document.head.appendChild(svg)}}else{handleError('parsed SVG document contained something other than an SVG')}}catch(err){handleError("error parsing SVG: ".concat(err))}}function loadIcons(svgURL){if(svgURL.slice(-3)==='.js'){var script=document.createElement('script');script.async=true;script.type='text/javascript';script.src=svgURL;document.head.appendChild(script)}else{var req=new XMLHttpRequest();req.open('GET',svgURL,true);req.addEventListener('load',injectSVG.bind(req,svgURL));req.addEventListener('error',function(){handleError('Request failed')});req.send()}}var SPECTRUM_ICONS_IDENTIFIER='spectrum-';var SPECTRUM_COLORED_ICONS_IDENTIFIER=['ColorLight','Color_Light','ColorDark','Color_Dark','ColorActive','Color_Active','AdobeExperienceCloudColor','AdobeExperiencePlatformColor'];var resourcesPath=(commons.options.icons||'').trim();if(resourcesPath.length&&resourcesPath[resourcesPath.length-1]!=='/'){resourcesPath+='/'}var IS_IE11=!window.ActiveXObject&&'ActiveXObject'in window;var iconsExternal=commons.options.iconsExternal||'on';if(IS_IE11){iconsExternal='off'}var resolveIconsPath=function resolveIconsPath(iconsPath){var path=commons._script.src;return "".concat(path.split('/').slice(0,-iconsPath.split('/').length).join('/'),"/").concat(iconsPath)};var URL_REGEX=/\/|:|\./g;var TEMPLATE_REGEX=/.*\{\{.+\}\}.*/g;var SPLIT_CAMELCASE_REGEX=/([a-z])([A-Z0-9])/g;var SPECTRUM_ICONS_IDENTIFIER_REGEX=/^spectrum(?:-css)?-icon(?:-\d{1,3})?-/gi;var ICONS_VARIANT_POSTFIX_REGEX=/(Outline)?(Filled)?(Small|Medium|Large)?(Color)?_?(Active|Dark|Light)?$/;var ICON_ALT_TRANSLATION_HINT='default icon alt text';var capitalize=function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)};var size={EXTRA_EXTRA_SMALL:'XXS',EXTRA_SMALL:'XS',SMALL:'S',MEDIUM:'M',LARGE:'L',EXTRA_LARGE:'XL',EXTRA_EXTRA_LARGE:'XXL'};var autoAriaLabel={ON:'on',OFF:'off'};var CLASSNAME$1='_coral-Icon';var ALL_SIZE_CLASSES=[];for(var sizeValue in size){ALL_SIZE_CLASSES.push("".concat(CLASSNAME$1,"--size").concat(size[sizeValue]))}var sizeMap={XXS:18,XS:24,S:18,M:24,L:18,XL:24,XXL:24};var Icon=function(_BaseComponent){_inherits(Icon,_BaseComponent);var _super=_createSuper(Icon);function Icon(){var _this;_classCallCheck(this,Icon);_this=_super.call(this);_this._elements={};return _this}_createClass(Icon,[{key:"_updateIcon",value:function _updateIcon(){var iconId=this.icon;if(iconId.indexOf(SPECTRUM_ICONS_IDENTIFIER)!==0){var iconMapped=ICON_MAP[iconId];var iconName;this.removeAttribute('_context');if(iconMapped){if(iconMapped.spectrumIcon){iconName=iconMapped.spectrumIcon}else{var closest=this.closest('.coral--light, .coral--dark, .coral--lightest, .coral--darkest');if(closest){if(closest.classList.contains('coral--light')||closest.classList.contains('coral--lightest')){iconName=iconMapped.spectrumIconLight}else{iconName=iconMapped.spectrumIconDark }}else{iconName=iconMapped.spectrumIconLight}this.setAttribute('_context','')}if(iconName){commons._log('warn',"Coral.Icon: the icon ".concat(iconId," has been deprecated. Please use ").concat(iconName," instead."))}else{commons._log('warn',"Coral.Icon: the icon ".concat(iconId," has been removed. Please contact Icons@Adobe."))}}else{iconName=capitalize(iconId)}if(SPECTRUM_COLORED_ICONS_IDENTIFIER.some(function(identifier){return iconName.indexOf(identifier)!==-1})){iconId="spectrum-icon-24-".concat(iconName)}else{var sizeAttribute=this.getAttribute('size');var iconSize=sizeMap[sizeAttribute&&sizeAttribute.toUpperCase()||size.SMALL];iconId="spectrum-icon-".concat(iconSize,"-").concat(iconName)}}this.insertAdjacentHTML('beforeend',this.constructor._renderSVG(iconId));this._elements.svg=this.lastElementChild}},{key:"_updateAltText",value:function _updateAltText(value){var hasAutoAriaLabel=this.autoAriaLabel===autoAriaLabel.ON;var img=this._elements.image;var isImage=this.contains(img);var altText=typeof this.alt==='string'?this.alt:this.title;if(typeof value==='string'){altText=this.alt||value}else if(isImage){altText=altText||img.getAttribute('alt')||img.getAttribute('title')||''}else if(hasAutoAriaLabel){var iconName=this.icon.replace(SPECTRUM_ICONS_IDENTIFIER_REGEX,'');iconName=iconName.replace(ICONS_VARIANT_POSTFIX_REGEX,'');altText=i18n.get(iconName.replace(SPLIT_CAMELCASE_REGEX,'$1 $2').toLowerCase(),ICON_ALT_TRANSLATION_HINT)}var role=this.getAttribute('role');var roleOverride=role&&role!=='presentation'&&role!=='img';if(!roleOverride){this.setAttribute('role',isImage?'presentation':'img')}if(isImage){hasAutoAriaLabel&&this.removeAttribute('aria-label');img.setAttribute('alt',altText)}else if(altText===''){this.removeAttribute('aria-label');if(!roleOverride){this.removeAttribute('role')}}else if(altText){this.setAttribute('aria-label',altText)}}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='alt'||name==='title'){this._updateAltText(value)}else{_get(_getPrototypeOf(Icon.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(Icon.prototype),"connectedCallback",this).call(this);if(this.hasAttribute('_context')){this.icon=this.icon}}},{key:"render",value:function render(){_get(_getPrototypeOf(Icon.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1);if(!this._size){this.size=size.SMALL}var img=this.querySelector("img:not(.".concat(CLASSNAME$1,"--image)"));if(img){this._elements.image=img;this._hasRawImage=true;this.icon=img.getAttribute('src');this._hasRawImage=false}}},{key:"autoAriaLabel",get:function get(){return this._autoAriaLabel||autoAriaLabel.OFF},set:function set(value){value=transform.string(value).toLowerCase();this._autoAriaLabel=validate.enumeration(autoAriaLabel)(value)&&value||autoAriaLabel.OFF;this._updateAltText()}},{key:"icon",get:function get(){return this._icon||''},set:function set(value){var _this2=this;var icon=transform.string(value).trim();if(icon!==this._icon||this.hasAttribute('_context')){this._icon=icon;this._reflectAttribute('icon',this._icon);if(this._icon.match(TEMPLATE_REGEX)){return}if(this._hasRawImage){this._elements.image.classList.add(CLASSNAME$1,"".concat(CLASSNAME$1,"--image"));this._updateAltText();return}['image','svg'].forEach(function(type){var el=_this2._elements[type]||_this2.querySelector(".".concat(CLASSNAME$1,"--").concat(type));if(el){el.remove()}});if(this._icon){if(this._icon.match(URL_REGEX)){this._elements.image=this._elements.image||document.createElement('img');this._elements.image.className="".concat(CLASSNAME$1," ").concat(CLASSNAME$1,"--image");this._elements.image.src=this.icon;this.appendChild(this._elements.image)}else{this._updateIcon()}}this._updateAltText()}}},{key:"size",get:function get(){return this._size||size.SMALL},set:function set(value){var _this$classList;var oldSize=this._size;value=transform.string(value).toUpperCase();this._size=validate.enumeration(size)(value)&&value||size.SMALL;this._reflectAttribute('size',this._size);(_this$classList=this.classList).remove.apply(_this$classList,ALL_SIZE_CLASSES);this.classList.add("".concat(CLASSNAME$1,"--size").concat(this._size));if(oldSize&&oldSize!==this._size&&this.contains(this._elements.svg)){this._elements.svg.remove();this._updateIcon()}this._updateAltText()}},{key:"title",get:function get(){return this.getAttribute('title')},set:function set(value){this.setAttribute('title',value)}},{key:"alt",get:function get(){return this.getAttribute('alt')},set:function set(value){this.setAttribute('alt',value)}}],[{key:"_iconsExternal",value:function _iconsExternal(){return iconsExternal}},{key:"_renderSVG",value:function _renderSVG(iconId){var additionalClasses=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];additionalClasses.unshift(CLASSNAME$1);additionalClasses.unshift("".concat(CLASSNAME$1,"--svg"));var iconPath="#".concat(iconId);if(this._iconsExternal()==='on'&&!SPECTRUM_COLORED_ICONS_IDENTIFIER.some(function(identifier){return iconId.indexOf(identifier)!==-1})){if(iconId.indexOf('spectrum-css')===0){iconPath=resourcesPath?"".concat(resourcesPath).concat(SPECTRUM_CSS_ICONS,".svg#").concat(iconId):"".concat(resolveIconsPath(SPECTRUM_CSS_ICONS_PATH),"#").concat(iconId )}else{iconPath=resourcesPath?"".concat(resourcesPath).concat(SPECTRUM_ICONS,".svg#").concat(iconId):"".concat(resolveIconsPath(SPECTRUM_ICONS_PATH),"#").concat(iconId)}}return "\n      <svg focusable=\"false\" aria-hidden=\"true\" class=\"".concat(additionalClasses.join(' '),"\">\n        <use xlink:href=\"").concat(iconPath,"\"></use>\n      </svg>\n    ")}},{key:"load",value:function load(url){var resolveIconsPath=function resolveIconsPath(iconsPath){var path=commons._script.src;if(iconsExternal==='js'){iconsPath=iconsPath.replace('.svg','.js')}return "".concat(path.split('/').slice(0,-iconsPath.split('/').length).join('/'),"/").concat(iconsPath)};if(url===SPECTRUM_ICONS){url=resolveIconsPath(SPECTRUM_ICONS_PATH)}else if(url===SPECTRUM_ICONS_COLOR){url=resolveIconsPath(SPECTRUM_ICONS_COLOR_PATH)}else if(url===SPECTRUM_CSS_ICONS){url=resolveIconsPath(SPECTRUM_CSS_ICONS_PATH)}loadIcons(url)}},{key:"size",get:function get(){return size}},{key:"autoAriaLabel",get:function get(){return autoAriaLabel}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Icon),"_attributePropertyMap",this),{autoarialabel:'autoAriaLabel'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Icon),"observedAttributes",this).concat(['autoarialabel','icon','size','alt','title'])}}]);return Icon}(BaseComponent(HTMLElement));var iconCollections=[SPECTRUM_ICONS_COLOR];var extension='.svg';if(Icon._iconsExternal()==='off'||Icon._iconsExternal()==='js'){iconCollections.push(SPECTRUM_CSS_ICONS);iconCollections.push(SPECTRUM_ICONS);if(Icon._iconsExternal()==='js'){extension='.js'}}iconCollections.forEach(function(iconSet){return Icon.load(resourcesPath?"".concat(resourcesPath).concat(iconSet).concat(extension):iconSet)});var translations={"en-US":{"123/[translation hint:default icon alt text]":"123","alert/[translation hint:default icon alt text]":"Alert","arrow down/[translation hint:default icon alt text]":"Arrow Down","arrow left/[translation hint:default icon alt text]":"Arrow Left","arrow up/[translation hint:default icon alt text]":"Arrow Up","asterisk/[translation hint:default icon alt text]":"Asterisk","checkmark/[translation hint:default icon alt text]":"Checkmark","chevron down/[translation hint:default icon alt text]":"Expand","chevron left/[translation hint:default icon alt text]":"Back","chevron right/[translation hint:default icon alt text]":"Expand","chevron up/[translation hint:default icon alt text]":"Collapse","corner triangle/[translation hint:default icon alt text]":"Expand","cross/[translation hint:default icon alt text]":"Close","dash/[translation hint:default icon alt text]":"Dash","double gripper/[translation hint:default icon alt text]":"Double Gripper","help/[translation hint:default icon alt text]":"Help","info/[translation hint:default icon alt text]":"Info","magnifier/[translation hint:default icon alt text]":"Magnifier","skip left/[translation hint:default icon alt text]":"Skip Left","skip right/[translation hint:default icon alt text]":"Skip Right","star/[translation hint:default icon alt text]":"Star","success/[translation hint:default icon alt text]":"Success","triple gripper/[translation hint:default icon alt text]":"Triple Gripper","3dmaterials/[translation hint:default icon alt text]":"3D Materials","abc/[translation hint:default icon alt text]":"ABC","actions/[translation hint:default icon alt text]":"Actions","ad display/[translation hint:default icon alt text]":"Ad Display","ad print/[translation hint:default icon alt text]":"Ad Print","add/[translation hint:default icon alt text]":"Add","add circle/[translation hint:default icon alt text]":"Add","add to/[translation hint:default icon alt text]":"Add To","add to selection/[translation hint:default icon alt text]":"Add To Selection","adobe advertising cloud/[translation hint:default icon alt text]":"Adobe Advertising Cloud","adobe analytics/[translation hint:default icon alt text]":"Adobe Analytics","adobe analytics cloud/[translation hint:default icon alt text]":"Adobe Analytics Cloud","adobe audience manager/[translation hint:default icon alt text]":"Adobe Audience Manager","adobe campaign/[translation hint:default icon alt text]":"Adobe Campaign","adobe connect/[translation hint:default icon alt text]":"Adobe Connect","adobe document cloud/[translation hint:default icon alt text]":"Adobe Document Cloud","adobe experience cloud/[translation hint:default icon alt text]":"Adobe Experience Cloud","adobe experience manager/[translation hint:default icon alt text]":"Adobe Experience Manager","adobe logo/[translation hint:default icon alt text]":"Adobe Logo","adobe marketing cloud/[translation hint:default icon alt text]":"Adobe Marketing Cloud","adobe media optimizer/[translation hint:default icon alt text]":"Adobe Media Optimizer","adobe primetime/[translation hint:default icon alt text]":"Adobe Primetime","adobe send now/[translation hint:default icon alt text]":"Adobe Send Now","adobe sign/[translation hint:default icon alt text]":"Adobe Sign","adobe social/[translation hint:default icon alt text]":"Adobe Social","adobe target/[translation hint:default icon alt text]":"Adobe Target","after effects/[translation hint:default icon alt text]":"After Effects","alert add/[translation hint:default icon alt text]":"Alert Add","alert check/[translation hint:default icon alt text]":"Alert Check","alert circle/[translation hint:default icon alt text]":"Alert","alias/[translation hint:default icon alt text]":"Alias","align bottom/[translation hint:default icon alt text]":"Align Bottom","align center/[translation hint:default icon alt text]":"Align Center","align left/[translation hint:default icon alt text]":"Align Left","align middle/[translation hint:default icon alt text]":"Align Middle","align right/[translation hint:default icon alt text]":"Align Right","align top/[translation hint:default icon alt text]":"Align Top","amazon web services/[translation hint:default icon alt text]":"Amazon Web Services","anchor/[translation hint:default icon alt text]":"Anchor","anchor select/[translation hint:default icon alt text]":"Select Anchor","android/[translation hint:default icon alt text]":"Android","annotate/[translation hint:default icon alt text]":"Annotate","annotate pen/[translation hint:default icon alt text]":"Annotate Pen","answer/[translation hint:default icon alt text]":"Answer","answer favorite/[translation hint:default icon alt text]":"Favorite Answer","app/[translation hint:default icon alt text]":"App","app refresh/[translation hint:default icon alt text]":"App Refresh","apple/[translation hint:default icon alt text]":"Apple","apple files/[translation hint:default icon alt text]":"Apple Files","approve reject/[translation hint:default icon alt text]":"Approve Reject","apps/[translation hint:default icon alt text]":"Apps","archive/[translation hint:default icon alt text]":"Archive","archive remove/[translation hint:default icon alt text]":"Remove Archive","arrow right/[translation hint:default icon alt text]":"Arrow Right","arrow up right/[translation hint:default icon alt text]":"Arrow Up Right","artboard/[translation hint:default icon alt text]":"Artboard","article/[translation hint:default icon alt text]":"Article","asset/[translation hint:default icon alt text]":"Asset","asset check/[translation hint:default icon alt text]":"Asset Check","assets added/[translation hint:default icon alt text]":"Assets Added","assets downloaded/[translation hint:default icon alt text]":"Assets Downloaded","assets expired/[translation hint:default icon alt text]":"Assets Expired","assets linked published/[translation hint:default icon alt text]":"Assets Linked Published","assets modified/[translation hint:default icon alt text]":"Assets Modified","assets published/[translation hint:default icon alt text]":"Assets Published","at/[translation hint:default icon alt text]":"At","attach/[translation hint:default icon alt text]":"Attach","attachment exclude/[translation hint:default icon alt text]":"Attachment Exclude","attributes/[translation hint:default icon alt text]":"Attributes","audio/[translation hint:default icon alt text]":"Audio","automated segment/[translation hint:default icon alt text]":"Automated Segment","back/[translation hint:default icon alt text]":"Back","back 30seconds/[translation hint:default icon alt text]":"Back 30 Seconds","back android/[translation hint:default icon alt text]":"Back Android","beaker/[translation hint:default icon alt text]":"Beaker","beaker check/[translation hint:default icon alt text]":"Beaker Check","beaker share/[translation hint:default icon alt text]":"Beaker Share","behance/[translation hint:default icon alt text]":"Behance","bell/[translation hint:default icon alt text]":"Bell","bid rule/[translation hint:default icon alt text]":"Bid Rule","bid rule add/[translation hint:default icon alt text]":"Bid Rule Add","bitly/[translation hint:default icon alt text]":"Bitly","blackberry/[translation hint:default icon alt text]":"Blackberry","blog/[translation hint:default icon alt text]":"Blog","blower/[translation hint:default icon alt text]":"Blower","blur/[translation hint:default icon alt text]":"Blur","book/[translation hint:default icon alt text]":"Book","bookmark/[translation hint:default icon alt text]":"Bookmark","boolean/[translation hint:default icon alt text]":"Boolean","border/[translation hint:default icon alt text]":"Border","box/[translation hint:default icon alt text]":"Box","box add/[translation hint:default icon alt text]":"Box Add","box export/[translation hint:default icon alt text]":"Box Export","box import/[translation hint:default icon alt text]":"Box Import","brackets/[translation hint:default icon alt text]":"Brackets","brackets square/[translation hint:default icon alt text]":"Brackets Square","branch 1/[translation hint:default icon alt text]":"Branch 1","branch 2/[translation hint:default icon alt text]":"Branch 2","branch 3/[translation hint:default icon alt text]":"Branch 3","branch circle/[translation hint:default icon alt text]":"Branch","breadcrumb navigation/[translation hint:default icon alt text]":"Breadcrumb Navigation","breakdown/[translation hint:default icon alt text]":"Breakdown","breakdown add/[translation hint:default icon alt text]":"Breakdown Add","briefcase/[translation hint:default icon alt text]":"Briefcase","browse/[translation hint:default icon alt text]":"Browse","brush/[translation hint:default icon alt text]":"Brush","bug/[translation hint:default icon alt text]":"Bug","building/[translation hint:default icon alt text]":"Building","bulk edit users/[translation hint:default icon alt text]":"Bulk Edit Users","button/[translation hint:default icon alt text]":"Button","cclibrary/[translation hint:default icon alt text]":"CC Library","calculator/[translation hint:default icon alt text]":"Calculator","calendar/[translation hint:default icon alt text]":"Calendar","calendar add/[translation hint:default icon alt text]":"Calendar Add","calendar locked/[translation hint:default icon alt text]":"Calendar Locked","calendar unlocked/[translation hint:default icon alt text]":"Calendar Unlocked","call center/[translation hint:default icon alt text]":"Call Center","camera/[translation hint:default icon alt text]":"Camera","camera flip/[translation hint:default icon alt text]":"Camera Flip","camera refresh/[translation hint:default icon alt text]":"Camera Refresh","campaign/[translation hint:default icon alt text]":"Campaign","campaign add/[translation hint:default icon alt text]":"Campaign Add","campaign close/[translation hint:default icon alt text]":"Campaign Close","campaign delete/[translation hint:default icon alt text]":"Campaign Delete","campaign edit/[translation hint:default icon alt text]":"Campaign Edit","cancel/[translation hint:default icon alt text]":"Cancel","capitals/[translation hint:default icon alt text]":"Capitals","captcha/[translation hint:default icon alt text]":"Captcha","card/[translation hint:default icon alt text]":"Card","channel/[translation hint:default icon alt text]":"Channel","chat/[translation hint:default icon alt text]":"Chat","chat add/[translation hint:default icon alt text]":"Chat Add","check pause/[translation hint:default icon alt text]":"Check Pause","checkmark circle/[translation hint:default icon alt text]":"Checkmark","chevron double left/[translation hint:default icon alt text]":"Back","chevron double right/[translation hint:default icon alt text]":"Forward","chevron up down/[translation hint:default icon alt text]":"Sortable","chrome/[translation hint:default icon alt text]":"Chrome","circle/[translation hint:default icon alt text]":"Circle","classic grid view/[translation hint:default icon alt text]":"Classic Grid View","clock/[translation hint:default icon alt text]":"Clock","clock check/[translation hint:default icon alt text]":"Clock Check","clone stamp/[translation hint:default icon alt text]":"Clone Stamp","close/[translation hint:default icon alt text]":"Close","close captions/[translation hint:default icon alt text]":"Close Captions","close circle/[translation hint:default icon alt text]":"Close","cloud/[translation hint:default icon alt text]":"Cloud","cloud disconnected/[translation hint:default icon alt text]":"Cloud Disconnected","cloud error/[translation hint:default icon alt text]":"Cloud Error","code/[translation hint:default icon alt text]":"Code","collection/[translation hint:default icon alt text]":"Collection","collection add/[translation hint:default icon alt text]":"Collection Add","collection add to/[translation hint:default icon alt text]":"Collection Add To","collection check/[translation hint:default icon alt text]":"Collection Check","collection edit/[translation hint:default icon alt text]":"Collection Edit","collection exclude/[translation hint:default icon alt text]":"Collection Exclude","collection link/[translation hint:default icon alt text]":"Collection Link","color fill/[translation hint:default icon alt text]":"Color Fill","color palette/[translation hint:default icon alt text]":"Color Palette","color wheel/[translation hint:default icon alt text]":"Color Wheel","column settings/[translation hint:default icon alt text]":"Column Settings","column two a/[translation hint:default icon alt text]":"Column Two A","column two b/[translation hint:default icon alt text]":"Column Two B","column two c/[translation hint:default icon alt text]":"Column Two C","comment/[translation hint:default icon alt text]":"Comment","compare/[translation hint:default icon alt text]":"Compare","compass/[translation hint:default icon alt text]":"Compass","condition/[translation hint:default icon alt text]":"Condition","confidence four/[translation hint:default icon alt text]":"Confidence Four","confidence one/[translation hint:default icon alt text]":"Confidence One","confidence three/[translation hint:default icon alt text]":"Confidence Three","confidence two/[translation hint:default icon alt text]":"Confidence Two","contrast/[translation hint:default icon alt text]":"Contrast","conversion funnel/[translation hint:default icon alt text]":"Conversion Funnel","copy/[translation hint:default icon alt text]":"Copy","cover image/[translation hint:default icon alt text]":"Cover Image","creative cloud/[translation hint:default icon alt text]":"Creative Cloud","credit card/[translation hint:default icon alt text]":"Credit Card","crop/[translation hint:default icon alt text]":"Crop","crop lightning/[translation hint:default icon alt text]":"Crop Lightning","crop rotate/[translation hint:default icon alt text]":"Crop Rotate","crosshairs/[translation hint:default icon alt text]":"Crosshairs","curate/[translation hint:default icon alt text]":"Curate","cut/[translation hint:default icon alt text]":"Cut","dps/[translation hint:default icon alt text]":"DPS","dashboard/[translation hint:default icon alt text]":"Dashboard","data/[translation hint:default icon alt text]":"Data","data add/[translation hint:default icon alt text]":"Data Add","data adobe/[translation hint:default icon alt text]":"Data Adobe","data book/[translation hint:default icon alt text]":"Data Book","data check/[translation hint:default icon alt text]":"Data Check","data correlated/[translation hint:default icon alt text]":"Data Correlated","data download/[translation hint:default icon alt text]":"Data Download","data edit/[translation hint:default icon alt text]":"Data Edit","data mapping/[translation hint:default icon alt text]":"Data Mapping","data refresh/[translation hint:default icon alt text]":"Data Refresh","data remove/[translation hint:default icon alt text]":"Data Remove","data settings/[translation hint:default icon alt text]":"Data Settings","data unavailable/[translation hint:default icon alt text]":"Data Unavailable","data upload/[translation hint:default icon alt text]":"Data Upload","data user/[translation hint:default icon alt text]":"Data User","date/[translation hint:default icon alt text]":"Date","date input/[translation hint:default icon alt text]":"Date Input","deduplication/[translation hint:default icon alt text]":"Deduplication","delegate/[translation hint:default icon alt text]":"Delegate","delete/[translation hint:default icon alt text]":"Delete","delivery fusion/[translation hint:default icon alt text]":"Delivery Fusion","demographic/[translation hint:default icon alt text]":"Demographic","deselect/[translation hint:default icon alt text]":"Deselect","deselect circular/[translation hint:default icon alt text]":"Deselect","desktop and mobile/[translation hint:default icon alt text]":"Desktop And Mobile","device desktop/[translation hint:default icon alt text]":"Device Desktop","device laptop/[translation hint:default icon alt text]":"Device Laptop","device phone/[translation hint:default icon alt text]":"Device Phone","device phone refresh/[translation hint:default icon alt text]":"Device Phone Refresh","device preview/[translation hint:default icon alt text]":"Device Preview","device rotate landscape/[translation hint:default icon alt text]":"Device Rotate Landscape","device rotate portrait/[translation hint:default icon alt text]":"Device Rotate Portrait","device tv/[translation hint:default icon alt text]":"Device TV","device tablet/[translation hint:default icon alt text]":"Device Tablet","devices/[translation hint:default icon alt text]":"Devices","dimension/[translation hint:default icon alt text]":"Dimension","disqus/[translation hint:default icon alt text]":"Disqus","distribute bottom edge/[translation hint:default icon alt text]":"Distribute Bottom Edge","distribute horizontal center/[translation hint:default icon alt text]":"Distribute Horizontal Center","distribute horizontally/[translation hint:default icon alt text]":"Distribute Horizontally","distribute left edge/[translation hint:default icon alt text]":"Distribute Left Edge","distribute right edge/[translation hint:default icon alt text]":"Distribute Right Edge","distribute space horiz/[translation hint:default icon alt text]":"Distribute Space Horizontally","distribute space vert/[translation hint:default icon alt text]":"Distribute Space Vertically","distribute top edge/[translation hint:default icon alt text]":"Distribute Top Edge","distribute vertical center/[translation hint:default icon alt text]":"Distribute Vertical Center","distribute vertically/[translation hint:default icon alt text]":"Distribute Vertically","divide/[translation hint:default icon alt text]":"Divide","divide path/[translation hint:default icon alt text]":"Divide Path","document/[translation hint:default icon alt text]":"Document","document fragment/[translation hint:default icon alt text]":"Document Fragment","document fragment group/[translation hint:default icon alt text]":"Document Fragment Group","document refresh/[translation hint:default icon alt text]":"Document Refresh","dolly/[translation hint:default icon alt text]":"Dolly","download/[translation hint:default icon alt text]":"Download","download from cloud/[translation hint:default icon alt text]":"Download From Cloud","draft/[translation hint:default icon alt text]":"Draft","drag handle/[translation hint:default icon alt text]":"Drag Handle","draw/[translation hint:default icon alt text]":"Draw","dropdown/[translation hint:default icon alt text]":"Dropdown","duplicate/[translation hint:default icon alt text]":"Duplicate","edit/[translation hint:default icon alt text]":"Edit","edit circle/[translation hint:default icon alt text]":"Edit","edit exclude/[translation hint:default icon alt text]":"Edit Exclude","edit in/[translation hint:default icon alt text]":"Edit In","education/[translation hint:default icon alt text]":"Education","effects/[translation hint:default icon alt text]":"Effects","efficient/[translation hint:default icon alt text]":"Efficient","ellipse/[translation hint:default icon alt text]":"Ellipse","email/[translation hint:default icon alt text]":"Email","email cancel/[translation hint:default icon alt text]":"Email Cancel","email check/[translation hint:default icon alt text]":"Email Check","email exclude/[translation hint:default icon alt text]":"Email Exclude","email gear/[translation hint:default icon alt text]":"Email Gear","email key/[translation hint:default icon alt text]":"Email Key","email lightning/[translation hint:default icon alt text]":"Email Lightning","email notification/[translation hint:default icon alt text]":"Email Notification","email refresh/[translation hint:default icon alt text]":"Email Refresh","email schedule/[translation hint:default icon alt text]":"Email Schedule","engagement/[translation hint:default icon alt text]":"Engagement","erase/[translation hint:default icon alt text]":"Erase","event/[translation hint:default icon alt text]":"Event","event exclude/[translation hint:default icon alt text]":"Event Exclude","event share/[translation hint:default icon alt text]":"Event Share","events/[translation hint:default icon alt text]":"Events","exclude overlap/[translation hint:default icon alt text]":"Exclude Overlap","experience/[translation hint:default icon alt text]":"Experience","experience add/[translation hint:default icon alt text]":"Experience Add","experience add to/[translation hint:default icon alt text]":"Experience Add To","experience export/[translation hint:default icon alt text]":"Experience Export","experience import/[translation hint:default icon alt text]":"Experience Import","export/[translation hint:default icon alt text]":"Export","export original/[translation hint:default icon alt text]":"Export Original","exposure/[translation hint:default icon alt text]":"Exposure","extension/[translation hint:default icon alt text]":"Extension","facebook/[translation hint:default icon alt text]":"Facebook","facebook cover image/[translation hint:default icon alt text]":"Facebook Cover Image","fast/[translation hint:default icon alt text]":"Fast","fast forward/[translation hint:default icon alt text]":"Fast Forward","fast forward circle/[translation hint:default icon alt text]":"Fast Forward","feed/[translation hint:default icon alt text]":"Feed","feed add/[translation hint:default icon alt text]":"Feed Add","feed management/[translation hint:default icon alt text]":"Feed Management","feedback/[translation hint:default icon alt text]":"Feedback","file add/[translation hint:default icon alt text]":"File Add","file csv/[translation hint:default icon alt text]":"File CSV","file campaign/[translation hint:default icon alt text]":"File Campaign","file chart/[translation hint:default icon alt text]":"File Chart","file checked out/[translation hint:default icon alt text]":"File Checked Out","file code/[translation hint:default icon alt text]":"File Code","file data/[translation hint:default icon alt text]":"File Data","file email/[translation hint:default icon alt text]":"File Email","file excel/[translation hint:default icon alt text]":"File Excel","file folder/[translation hint:default icon alt text]":"File Folder","file gear/[translation hint:default icon alt text]":"File Gear","file globe/[translation hint:default icon alt text]":"File Globe","file html/[translation hint:default icon alt text]":"File HTML","file important/[translation hint:default icon alt text]":"File Important","file json/[translation hint:default icon alt text]":"File JSON","file key/[translation hint:default icon alt text]":"File Key","file mobile/[translation hint:default icon alt text]":"File Mobile","file pdf/[translation hint:default icon alt text]":"File PDF","file share/[translation hint:default icon alt text]":"File Share","file single web page/[translation hint:default icon alt text]":"File Single Web Page","file space/[translation hint:default icon alt text]":"File Space","file template/[translation hint:default icon alt text]":"File Template","file txt/[translation hint:default icon alt text]":"File Txt","file user/[translation hint:default icon alt text]":"File User","file word/[translation hint:default icon alt text]":"File Word","file workflow/[translation hint:default icon alt text]":"File Workflow","file xml/[translation hint:default icon alt text]":"File XML","file zip/[translation hint:default icon alt text]":"File Zip","filing cabinet/[translation hint:default icon alt text]":"Filing Cabinet","fill sign/[translation hint:default icon alt text]":"Fill Sign","filmroll/[translation hint:default icon alt text]":"Filmroll","filmroll auto add/[translation hint:default icon alt text]":"Filmroll Auto Add","filter/[translation hint:default icon alt text]":"Filter","filter add/[translation hint:default icon alt text]":"Filter Add","filter check/[translation hint:default icon alt text]":"Filter Check","filter delete/[translation hint:default icon alt text]":"Filter Delete","filter edit/[translation hint:default icon alt text]":"Filter Edit","filter heart/[translation hint:default icon alt text]":"Filter Heart","filter remove/[translation hint:default icon alt text]":"Filter Remove","filter star/[translation hint:default icon alt text]":"Filter Star","find and replace/[translation hint:default icon alt text]":"Find And Replace","firefox/[translation hint:default icon alt text]":"Firefox","flag/[translation hint:default icon alt text]":"Flag","flag exclude/[translation hint:default icon alt text]":"Flag Exclude","flash/[translation hint:default icon alt text]":"Flash","flash auto/[translation hint:default icon alt text]":"Flash Auto","flash off/[translation hint:default icon alt text]":"Flash Off","flash on/[translation hint:default icon alt text]":"Flash On","flashlight off/[translation hint:default icon alt text]":"Flashlight Off","flashlight on/[translation hint:default icon alt text]":"Flashlight On","flickr/[translation hint:default icon alt text]":"Flickr","flip horizontal/[translation hint:default icon alt text]":"Flip Horizontal","flip vertical/[translation hint:default icon alt text]":"Flip Vertical","folder/[translation hint:default icon alt text]":"Folder","folder 2/[translation hint:default icon alt text]":"Folder","folder add/[translation hint:default icon alt text]":"Folder Add","folder add to/[translation hint:default icon alt text]":"Folder Add To","folder adobe/[translation hint:default icon alt text]":"Folder Adobe","folder archive/[translation hint:default icon alt text]":"Folder Archive","folder delete/[translation hint:default icon alt text]":"Folder Delete","folder gear/[translation hint:default icon alt text]":"Folder Gear","folder locked/[translation hint:default icon alt text]":"Folder Locked","folder locked adobe/[translation hint:default icon alt text]":"Folder Locked Adobe","folder open/[translation hint:default icon alt text]":"Folder Open","folder remove/[translation hint:default icon alt text]":"Folder Remove","folder search/[translation hint:default icon alt text]":"Folder Search","folder user/[translation hint:default icon alt text]":"Folder User","follow/[translation hint:default icon alt text]":"Follow","follow off/[translation hint:default icon alt text]":"Follow Off","for placement only/[translation hint:default icon alt text]":"For Placement Only","forecast/[translation hint:default icon alt text]":"Forecast","form/[translation hint:default icon alt text]":"Form","forward/[translation hint:default icon alt text]":"Forward","full screen/[translation hint:default icon alt text]":"Full Screen","full screen exit/[translation hint:default icon alt text]":"Full Screen Exit","function/[translation hint:default icon alt text]":"Function","game/[translation hint:default icon alt text]":"Game","gauge 1/[translation hint:default icon alt text]":"Gauge 1","gauge 2/[translation hint:default icon alt text]":"Gauge 2","gauge 3/[translation hint:default icon alt text]":"Gauge 3","gauge 4/[translation hint:default icon alt text]":"Gauge 4","gauge 5/[translation hint:default icon alt text]":"Gauge 5","gears/[translation hint:default icon alt text]":"Gears","gears add/[translation hint:default icon alt text]":"Gears Add","gears delete/[translation hint:default icon alt text]":"Gears Delete","gears edit/[translation hint:default icon alt text]":"Gears Edit","gender female/[translation hint:default icon alt text]":"Gender Female","gender male/[translation hint:default icon alt text]":"Gender Male","gift/[translation hint:default icon alt text]":"Gift","git hub/[translation hint:default icon alt text]":"Git Hub","globe/[translation hint:default icon alt text]":"Globe","globe check/[translation hint:default icon alt text]":"Globe Check","globe clock/[translation hint:default icon alt text]":"Globe Clock","globe enter/[translation hint:default icon alt text]":"Globe Enter","globe exit/[translation hint:default icon alt text]":"Globe Exit","globe grid/[translation hint:default icon alt text]":"Globe Grid","globe remove/[translation hint:default icon alt text]":"Globe Remove","globe search/[translation hint:default icon alt text]":"Globe Search","globe strike/[translation hint:default icon alt text]":"Globe Strike","globe strike clock/[translation hint:default icon alt text]":"Globe Strike Clock","google/[translation hint:default icon alt text]":"Google","google analytics/[translation hint:default icon alt text]":"Google Analytics","google play store/[translation hint:default icon alt text]":"Google Play Store","google plus/[translation hint:default icon alt text]":"Google Plus","google plus 1/[translation hint:default icon alt text]":"Google Plus","gradient/[translation hint:default icon alt text]":"Gradient","graph area/[translation hint:default icon alt text]":"Graph Area","graph area stacked/[translation hint:default icon alt text]":"Graph Area Stacked","graph bar horizontal/[translation hint:default icon alt text]":"Graph Bar Horizontal","graph bar horizontal add/[translation hint:default icon alt text]":"Graph Bar Horizontal Add","graph bar horizontal stacked/[translation hint:default icon alt text]":"Graph Bar Horizontal Stacked","graph bar vertical/[translation hint:default icon alt text]":"Graph Bar Vertical","graph bar vertical add/[translation hint:default icon alt text]":"Graph Bar Vertical Add","graph bar vertical stacked/[translation hint:default icon alt text]":"Graph Bar Vertical Stacked","graph bubble/[translation hint:default icon alt text]":"Graph Bubble","graph bullet/[translation hint:default icon alt text]":"Graph Bullet","graph confidence bands/[translation hint:default icon alt text]":"Graph Confidence Bands","graph donut/[translation hint:default icon alt text]":"Graph Donut","graph donut add/[translation hint:default icon alt text]":"Graph Donut Add","graph gantt/[translation hint:default icon alt text]":"Graph Gantt","graph histogram/[translation hint:default icon alt text]":"Graph Histogram","graph pathing/[translation hint:default icon alt text]":"Graph Pathing","graph pie/[translation hint:default icon alt text]":"Graph Pie","graph profit curve/[translation hint:default icon alt text]":"Graph Profit Curve","graph scatter/[translation hint:default icon alt text]":"Graph Scatter","graph stream/[translation hint:default icon alt text]":"Graph Stream","graph stream ranked/[translation hint:default icon alt text]":"Graph Stream Ranked","graph stream ranked add/[translation hint:default icon alt text]":"Graph Stream Ranked Add","graph sunburst/[translation hint:default icon alt text]":"Graph Sunburst","graph tree/[translation hint:default icon alt text]":"Graph Tree","graph trend/[translation hint:default icon alt text]":"Graph Trend","graph trend add/[translation hint:default icon alt text]":"Graph Trend Add","graph trend alert/[translation hint:default icon alt text]":"Graph Trend Alert","graphic/[translation hint:default icon alt text]":"Graphic","group/[translation hint:default icon alt text]":"Group","html5/[translation hint:default icon alt text]":"HTML5","hammer/[translation hint:default icon alt text]":"Hammer","hand/[translation hint:default icon alt text]":"Hand","hand 0/[translation hint:default icon alt text]":"Hand 0","hand 1/[translation hint:default icon alt text]":"Hand 1","hand 2/[translation hint:default icon alt text]":"Hand 2","hand 3/[translation hint:default icon alt text]":"Hand 3","hand 4/[translation hint:default icon alt text]":"Hand 4","heal/[translation hint:default icon alt text]":"Heal","heart/[translation hint:default icon alt text]":"Heart","histogram/[translation hint:default icon alt text]":"Histogram","history/[translation hint:default icon alt text]":"History","home/[translation hint:default icon alt text]":"Home","homepage/[translation hint:default icon alt text]":"Homepage","illustrator/[translation hint:default icon alt text]":"Illustrator","image/[translation hint:default icon alt text]":"Image","image add/[translation hint:default icon alt text]":"Image Add","image album/[translation hint:default icon alt text]":"Image Album","image auto mode/[translation hint:default icon alt text]":"Image Auto Mode","image carousel/[translation hint:default icon alt text]":"Image Carousel","image check/[translation hint:default icon alt text]":"Image Check","image checked out/[translation hint:default icon alt text]":"Image Checked Out","image map circle/[translation hint:default icon alt text]":"Image Map Circle","image map polygon/[translation hint:default icon alt text]":"Image Map Polygon","image map rectangle/[translation hint:default icon alt text]":"Image Map Rectangle","image next/[translation hint:default icon alt text]":"Image Next","image profile/[translation hint:default icon alt text]":"Image Profile","image search/[translation hint:default icon alt text]":"Image Search","image text/[translation hint:default icon alt text]":"Image Text","images/[translation hint:default icon alt text]":"Images","import/[translation hint:default icon alt text]":"Import","in design/[translation hint:default icon alt text]":"In Design","inbox/[translation hint:default icon alt text]":"Inbox","individual/[translation hint:default icon alt text]":"Individual","instagram/[translation hint:default icon alt text]":"Instagram","internet explorer/[translation hint:default icon alt text]":"Internet Explorer","intersect overlap/[translation hint:default icon alt text]":"Intersect Overlap","invert adj/[translation hint:default icon alt text]":"Invert Adj","journey/[translation hint:default icon alt text]":"Journey","journey action/[translation hint:default icon alt text]":"Journey Action","journey data/[translation hint:default icon alt text]":"Journey Data","journey event/[translation hint:default icon alt text]":"Journey Event","journey event 2/[translation hint:default icon alt text]":"Journey Event","journey reports/[translation hint:default icon alt text]":"Journey Reports","journey voyager/[translation hint:default icon alt text]":"Journey Voyager","jump to top/[translation hint:default icon alt text]":"Jump To Top","key/[translation hint:default icon alt text]":"Key","key clock/[translation hint:default icon alt text]":"Key Clock","key exclude/[translation hint:default icon alt text]":"Key Exclude","keyboard/[translation hint:default icon alt text]":"Keyboard","label/[translation hint:default icon alt text]":"Label","label exclude/[translation hint:default icon alt text]":"Label Exclude","labels/[translation hint:default icon alt text]":"Labels","landscape/[translation hint:default icon alt text]":"Landscape","launch/[translation hint:default icon alt text]":"Launch","layers/[translation hint:default icon alt text]":"Layers","layers backward/[translation hint:default icon alt text]":"Layers Backward","layers bring to front/[translation hint:default icon alt text]":"Layers Bring To Front","layers forward/[translation hint:default icon alt text]":"Layers Forward","layers send to back/[translation hint:default icon alt text]":"Layers Send To Back","lightroom/[translation hint:default icon alt text]":"Lightroom","line/[translation hint:default icon alt text]":"Line","line height/[translation hint:default icon alt text]":"Line Height","linear gradient/[translation hint:default icon alt text]":"Linear Gradient","link/[translation hint:default icon alt text]":"Link","link check/[translation hint:default icon alt text]":"Link Check","link facebook/[translation hint:default icon alt text]":"Link Facebook","link globe/[translation hint:default icon alt text]":"Link Globe","link nav/[translation hint:default icon alt text]":"Link Nav","link off/[translation hint:default icon alt text]":"Link Off","link out/[translation hint:default icon alt text]":"Link Out","link page/[translation hint:default icon alt text]":"Link Page","link user/[translation hint:default icon alt text]":"Link User","linked in/[translation hint:default icon alt text]":"LinkedIn","linux/[translation hint:default icon alt text]":"Linux","location/[translation hint:default icon alt text]":"Location","location based date/[translation hint:default icon alt text]":"Location Based Date","location based event/[translation hint:default icon alt text]":"Location Based Event","location contribution/[translation hint:default icon alt text]":"Location Contribution","lock closed/[translation hint:default icon alt text]":"Lock Closed","lock open/[translation hint:default icon alt text]":"Lock Open","log out/[translation hint:default icon alt text]":"Log Out","login/[translation hint:default icon alt text]":"Login","looks/[translation hint:default icon alt text]":"Looks","loupe view/[translation hint:default icon alt text]":"Loupe View","mbox/[translation hint:default icon alt text]":"MBox","magento commerce/[translation hint:default icon alt text]":"Magento Commerce","magic wand/[translation hint:default icon alt text]":"Magic Wand","magnify/[translation hint:default icon alt text]":"Magnify","mailbox/[translation hint:default icon alt text]":"Mailbox","map view/[translation hint:default icon alt text]":"Map View","margin bottom/[translation hint:default icon alt text]":"Margin Bottom","margin left/[translation hint:default icon alt text]":"Margin Left","margin right/[translation hint:default icon alt text]":"Margin Right","margin top/[translation hint:default icon alt text]":"Margin Top","marketing activities/[translation hint:default icon alt text]":"Marketing Activities","maximize/[translation hint:default icon alt text]":"Maximize","measure/[translation hint:default icon alt text]":"Measure","menu/[translation hint:default icon alt text]":"Menu","merge/[translation hint:default icon alt text]":"Merge","merge layers/[translation hint:default icon alt text]":"Merge Layers","messenger/[translation hint:default icon alt text]":"Messenger","minimize/[translation hint:default icon alt text]":"Minimize","mobile services/[translation hint:default icon alt text]":"Mobile Services","modern grid view/[translation hint:default icon alt text]":"Modern Grid View","money/[translation hint:default icon alt text]":"Money","moon/[translation hint:default icon alt text]":"Moon","more/[translation hint:default icon alt text]":"More","more circle/[translation hint:default icon alt text]":"More","more small list/[translation hint:default icon alt text]":"More Small List","more small list vert/[translation hint:default icon alt text]":"More Small List Vert","more vertical/[translation hint:default icon alt text]":"More Vertical","move/[translation hint:default icon alt text]":"Move","move left right/[translation hint:default icon alt text]":"Move Left or Right","move to/[translation hint:default icon alt text]":"Move To","move up down/[translation hint:default icon alt text]":"Move Up or Down","movie camera/[translation hint:default icon alt text]":"Movie Camera","multiple/[translation hint:default icon alt text]":"Multiple","multiple add/[translation hint:default icon alt text]":"Multiple Add","multiple check/[translation hint:default icon alt text]":"Multiple Check","multiple exclude/[translation hint:default icon alt text]":"Multiple Exclude","muse/[translation hint:default icon alt text]":"Muse","naming order/[translation hint:default icon alt text]":"Naming Order","new item/[translation hint:default icon alt text]":"New Item","news/[translation hint:default icon alt text]":"News","news add/[translation hint:default icon alt text]":"News Add","newsgator/[translation hint:default icon alt text]":"Newsgator","nielsen/[translation hint:default icon alt text]":"Nielsen","no edit/[translation hint:default icon alt text]":"No Edit","note/[translation hint:default icon alt text]":"Note","note add/[translation hint:default icon alt text]":"Note Add","os/[translation hint:default icon alt text]":"OS","offer/[translation hint:default icon alt text]":"Offer","offer delete/[translation hint:default icon alt text]":"Delete Offer","on air/[translation hint:default icon alt text]":"On Air","one drive/[translation hint:default icon alt text]":"One Drive","open in/[translation hint:default icon alt text]":"Open In","open recent/[translation hint:default icon alt text]":"Open Recent","opera/[translation hint:default icon alt text]":"Opera","orbit/[translation hint:default icon alt text]":"Orbit","organisations/[translation hint:default icon alt text]":"Organisations","organize/[translation hint:default icon alt text]":"Organize","outline path/[translation hint:default icon alt text]":"Outline Path","pdfchecked out/[translation hint:default icon alt text]":"PDF Checked Out","padding bottom/[translation hint:default icon alt text]":"Padding Bottom","padding left/[translation hint:default icon alt text]":"Padding Left","padding right/[translation hint:default icon alt text]":"Padding Right","padding top/[translation hint:default icon alt text]":"Padding Top","page break/[translation hint:default icon alt text]":"Page Break","page exclude/[translation hint:default icon alt text]":"Page Exclude","page gear/[translation hint:default icon alt text]":"Page Gear","page rule/[translation hint:default icon alt text]":"Page Rule","page share/[translation hint:default icon alt text]":"Page Share","page tag/[translation hint:default icon alt text]":"Page Tag","pages exclude/[translation hint:default icon alt text]":"Pages Exclude","pan/[translation hint:default icon alt text]":"Pan","panel/[translation hint:default icon alt text]":"Panel","paste/[translation hint:default icon alt text]":"Paste","paste html/[translation hint:default icon alt text]":"Paste HTML","paste list/[translation hint:default icon alt text]":"Paste List","paste text/[translation hint:default icon alt text]":"Paste Text","pattern/[translation hint:default icon alt text]":"Pattern","pause/[translation hint:default icon alt text]":"Pause","pause circle/[translation hint:default icon alt text]":"Pause","pawn/[translation hint:default icon alt text]":"Pawn","pending/[translation hint:default icon alt text]":"Pending","people group/[translation hint:default icon alt text]":"People Group","personalization field/[translation hint:default icon alt text]":"Personalization Field","perspective/[translation hint:default icon alt text]":"Perspective","phone gap/[translation hint:default icon alt text]":"PhoneGap","phone gap builder/[translation hint:default icon alt text]":"PhoneGap Builder","photoshop/[translation hint:default icon alt text]":"Photoshop","pin off/[translation hint:default icon alt text]":"Pin Off","pin on/[translation hint:default icon alt text]":"Pin On","pinterest/[translation hint:default icon alt text]":"Pinterest","pivot/[translation hint:default icon alt text]":"Pivot","platform data mapping/[translation hint:default icon alt text]":"Platform Data Mapping","play/[translation hint:default icon alt text]":"Play","play circle/[translation hint:default icon alt text]":"Play","plug/[translation hint:default icon alt text]":"Plug","polygon/[translation hint:default icon alt text]":"Polygon","polygon select/[translation hint:default icon alt text]":"Polygon Select","pop in/[translation hint:default icon alt text]":"Pop In","portrait/[translation hint:default icon alt text]":"Portrait","premiere pro/[translation hint:default icon alt text]":"Premiere Pro","preset/[translation hint:default icon alt text]":"Preset","preview/[translation hint:default icon alt text]":"Preview","print/[translation hint:default icon alt text]":"Print","print preview/[translation hint:default icon alt text]":"Print Preview","project/[translation hint:default icon alt text]":"Project","project add/[translation hint:default icon alt text]":"Project Add","project edit/[translation hint:default icon alt text]":"Project Edit","project name edit/[translation hint:default icon alt text]":"Project Name Edit","promote/[translation hint:default icon alt text]":"Promote","properties/[translation hint:default icon alt text]":"Properties","properties copy/[translation hint:default icon alt text]":"Properties Copy","public/[translation hint:default icon alt text]":"Public","publish check/[translation hint:default icon alt text]":"Publish Check","publish pending/[translation hint:default icon alt text]":"Publish Pending","publish reject/[translation hint:default icon alt text]":"Publish Reject","publish remove/[translation hint:default icon alt text]":"Publish Remove","publish schedule/[translation hint:default icon alt text]":"Publish Schedule","push notification/[translation hint:default icon alt text]":"Push Notification","question/[translation hint:default icon alt text]":"Question","quick select/[translation hint:default icon alt text]":"Quick Select","rss/[translation hint:default icon alt text]":"RSS","radial gradient/[translation hint:default icon alt text]":"Radial Gradient","rail/[translation hint:default icon alt text]":"Rail","rail bottom/[translation hint:default icon alt text]":"Rail Bottom","rail left/[translation hint:default icon alt text]":"Rail Left","rail right/[translation hint:default icon alt text]":"Rail Right","rail right close/[translation hint:default icon alt text]":"Close Rail Right","rail right open/[translation hint:default icon alt text]":"Open Rail Right","rail top/[translation hint:default icon alt text]":"Rail Top","range mask/[translation hint:default icon alt text]":"Range Mask","rect select/[translation hint:default icon alt text]":"Rect Select","rectangle/[translation hint:default icon alt text]":"Rectangle","redo/[translation hint:default icon alt text]":"Redo","refresh/[translation hint:default icon alt text]":"Refresh","region select/[translation hint:default icon alt text]":"Region Select","relevance/[translation hint:default icon alt text]":"Relevance","remove/[translation hint:default icon alt text]":"Remove","remove circle/[translation hint:default icon alt text]":"Remove","rename/[translation hint:default icon alt text]":"Rename","reorder/[translation hint:default icon alt text]":"Reorder","replay/[translation hint:default icon alt text]":"Replay","replies/[translation hint:default icon alt text]":"Replies","reply/[translation hint:default icon alt text]":"Reply","reply all/[translation hint:default icon alt text]":"Reply All","report/[translation hint:default icon alt text]":"Report","report add/[translation hint:default icon alt text]":"Report Add","resize/[translation hint:default icon alt text]":"Resize","retweet/[translation hint:default icon alt text]":"Retweet","reuse/[translation hint:default icon alt text]":"Reuse","revenue/[translation hint:default icon alt text]":"Revenue","revert/[translation hint:default icon alt text]":"Revert","rewind/[translation hint:default icon alt text]":"Rewind","rewind circle/[translation hint:default icon alt text]":"Rewind","ribbon/[translation hint:default icon alt text]":"Ribbon","rotate ccw/[translation hint:default icon alt text]":"Rotate CCW","rotate ccwbold/[translation hint:default icon alt text]":"Rotate CCW","rotate cw/[translation hint:default icon alt text]":"Rotate CW","rotate cwbold/[translation hint:default icon alt text]":"Rotate CW","rotate left/[translation hint:default icon alt text]":"Rotate Left","rotate right/[translation hint:default icon alt text]":"Rotate Right","sms/[translation hint:default icon alt text]":"SMS","smskey/[translation hint:default icon alt text]":"SMS Key","smslightning/[translation hint:default icon alt text]":"SMS Lightning","smsrefresh/[translation hint:default icon alt text]":"SMS Refresh","sqlquery/[translation hint:default icon alt text]":"SQL Query","safari/[translation hint:default icon alt text]":"Safari","sampler/[translation hint:default icon alt text]":"Sampler","save as floppy/[translation hint:default icon alt text]":"Save As Floppy","save floppy/[translation hint:default icon alt text]":"Save Floppy","save to/[translation hint:default icon alt text]":"Save To","scribble/[translation hint:default icon alt text]":"Scribble","search/[translation hint:default icon alt text]":"Search","seat/[translation hint:default icon alt text]":"Seat","seat add/[translation hint:default icon alt text]":"Seat Add","segments/[translation hint:default icon alt text]":"Segments","select/[translation hint:default icon alt text]":"Select","select add/[translation hint:default icon alt text]":"Select Add","select box/[translation hint:default icon alt text]":"Select Box","select box all/[translation hint:default icon alt text]":"Select Box All","select circular/[translation hint:default icon alt text]":"Select Circular","select container/[translation hint:default icon alt text]":"Select Container","select gear/[translation hint:default icon alt text]":"Select Gear","select intersect/[translation hint:default icon alt text]":"Select Intersect","select substract/[translation hint:default icon alt text]":"Select Substract","selection/[translation hint:default icon alt text]":"Selection","selection checked/[translation hint:default icon alt text]":"Selection Checked","selection move/[translation hint:default icon alt text]":"Selection Move","send/[translation hint:default icon alt text]":"Send","send for signature/[translation hint:default icon alt text]":"Send For Signature","sentiment negative/[translation hint:default icon alt text]":"Sentiment Negative","sentiment neutral/[translation hint:default icon alt text]":"Sentiment Neutral","sentiment positive/[translation hint:default icon alt text]":"Sentiment Positive","separator/[translation hint:default icon alt text]":"Separator","servers/[translation hint:default icon alt text]":"Servers","settings/[translation hint:default icon alt text]":"Settings","shapes/[translation hint:default icon alt text]":"Shapes","share/[translation hint:default icon alt text]":"Share","share android/[translation hint:default icon alt text]":"Share","share check/[translation hint:default icon alt text]":"Share Check","share windows/[translation hint:default icon alt text]":"Share","sharpen/[translation hint:default icon alt text]":"Sharpen","shield/[translation hint:default icon alt text]":"Shield","shopping cart/[translation hint:default icon alt text]":"Shopping Cart","show all layers/[translation hint:default icon alt text]":"Show All Layers","show menu/[translation hint:default icon alt text]":"Show Menu","show one layer/[translation hint:default icon alt text]":"Show One Layer","shuffle/[translation hint:default icon alt text]":"Shuffle","sina weibo/[translation hint:default icon alt text]":"Sina Weibo","slice/[translation hint:default icon alt text]":"Slice","slow/[translation hint:default icon alt text]":"Slow","small caps/[translation hint:default icon alt text]":"Small Caps","snapshot/[translation hint:default icon alt text]":"Snapshot","social network/[translation hint:default icon alt text]":"Social Network","sort order down/[translation hint:default icon alt text]":"Sort Order Down","sort order up/[translation hint:default icon alt text]":"Sort Order Up","spam/[translation hint:default icon alt text]":"Spam","spellcheck/[translation hint:default icon alt text]":"Spellcheck","spin/[translation hint:default icon alt text]":"Spin","split view/[translation hint:default icon alt text]":"Split View","spot heal/[translation hint:default icon alt text]":"Spot Heal","stage/[translation hint:default icon alt text]":"Stage","stamp/[translation hint:default icon alt text]":"Stamp","starburst/[translation hint:default icon alt text]":"Starburst","step backward/[translation hint:default icon alt text]":"Step Backward","step backward circle/[translation hint:default icon alt text]":"Step Backward","step forward/[translation hint:default icon alt text]":"Step Forward","step forward circle/[translation hint:default icon alt text]":"Step Forward","stock/[translation hint:default icon alt text]":"Stock","stop/[translation hint:default icon alt text]":"Stop","stop circle/[translation hint:default icon alt text]":"Stop","stopwatch/[translation hint:default icon alt text]":"Stopwatch","straighten/[translation hint:default icon alt text]":"Straighten","stroke width/[translation hint:default icon alt text]":"Stroke Width","subscribe/[translation hint:default icon alt text]":"Subscribe","substract back path/[translation hint:default icon alt text]":"Substract Back Path","substract from selection/[translation hint:default icon alt text]":"Substract From Selection","subtract front path/[translation hint:default icon alt text]":"Subtract Front Path","success metric/[translation hint:default icon alt text]":"Success Metric","summarize/[translation hint:default icon alt text]":"Summarize","survey/[translation hint:default icon alt text]":"Survey","switch/[translation hint:default icon alt text]":"Switch","sync/[translation hint:default icon alt text]":"Sync","sync remove/[translation hint:default icon alt text]":"Sync Remove","table/[translation hint:default icon alt text]":"Table","table add/[translation hint:default icon alt text]":"Table Add","table and chart/[translation hint:default icon alt text]":"Table And Chart","table column add left/[translation hint:default icon alt text]":"Table Column Add Left","table column add right/[translation hint:default icon alt text]":"Table Column Add Right","table column merge/[translation hint:default icon alt text]":"Table Column Merge","table column remove center/[translation hint:default icon alt text]":"Table Column Remove Center","table column split/[translation hint:default icon alt text]":"Table Column Split","table edit/[translation hint:default icon alt text]":"Table Edit","table histogram/[translation hint:default icon alt text]":"Table Histogram","table merge cells/[translation hint:default icon alt text]":"Table Merge Cells","table row add bottom/[translation hint:default icon alt text]":"Table Row Add Bottom","table row add top/[translation hint:default icon alt text]":"Table Row Add Top","table row merge/[translation hint:default icon alt text]":"Table Row Merge","table row remove center/[translation hint:default icon alt text]":"Table Row Remove Center","table row split/[translation hint:default icon alt text]":"Table Row Split","table select column/[translation hint:default icon alt text]":"Table Select Column","table select row/[translation hint:default icon alt text]":"Table Select Row","tableau/[translation hint:default icon alt text]":"Tableau","tag bold/[translation hint:default icon alt text]":"Tag Bold","tag italic/[translation hint:default icon alt text]":"Tag Italic","tag underline/[translation hint:default icon alt text]":"Tag Underline","target/[translation hint:default icon alt text]":"Target","targeted/[translation hint:default icon alt text]":"Targeted","task list/[translation hint:default icon alt text]":"Task List","teapot/[translation hint:default icon alt text]":"Teapot","temperature/[translation hint:default icon alt text]":"Temperature","test ab/[translation hint:default icon alt text]":"Test AB","test abedit/[translation hint:default icon alt text]":"Test AB Edit","test abgear/[translation hint:default icon alt text]":"Test AB Gear","test abremove/[translation hint:default icon alt text]":"Test AB Remove","test profile/[translation hint:default icon alt text]":"Test Profile","text/[translation hint:default icon alt text]":"Text","text add/[translation hint:default icon alt text]":"Text Add","text align center/[translation hint:default icon alt text]":"Text Align Center","text align justify/[translation hint:default icon alt text]":"Text Align Justify","text align left/[translation hint:default icon alt text]":"Text Align Left","text align right/[translation hint:default icon alt text]":"Text Align Right","text baseline shift/[translation hint:default icon alt text]":"Text Baseline Shift","text bold/[translation hint:default icon alt text]":"Text Bold","text bulleted/[translation hint:default icon alt text]":"Text Bulleted","text bulleted attach/[translation hint:default icon alt text]":"Text Bulleted Attach","text bulleted hierarchy/[translation hint:default icon alt text]":"Text Bulleted Hierarchy","text bulleted hierarchy exclude/[translation hint:default icon alt text]":"Text Bulleted Hierarchy Exclude","text decrease/[translation hint:default icon alt text]":"Text Decrease","text edit/[translation hint:default icon alt text]":"Text Edit","text exclude/[translation hint:default icon alt text]":"Text Exclude","text increase/[translation hint:default icon alt text]":"Text Increase","text indent decrease/[translation hint:default icon alt text]":"Text Indent Decrease","text indent increase/[translation hint:default icon alt text]":"Text Indent Increase","text italic/[translation hint:default icon alt text]":"Text Italic","text kerning/[translation hint:default icon alt text]":"Text Kerning","text lettered lower case/[translation hint:default icon alt text]":"Text Lettered Lower Case","text lettered upper case/[translation hint:default icon alt text]":"Text Lettered Upper Case","text numbered/[translation hint:default icon alt text]":"Text Numbered","text paragraph/[translation hint:default icon alt text]":"Text Paragraph","text roman lowercase/[translation hint:default icon alt text]":"Text Roman Lowercase","text roman uppercase/[translation hint:default icon alt text]":"Text Roman Uppercase","text size/[translation hint:default icon alt text]":"Text Size","text size add/[translation hint:default icon alt text]":"Text Size Add","text space after/[translation hint:default icon alt text]":"Text Space After","text space before/[translation hint:default icon alt text]":"Text Space Before","text strikethrough/[translation hint:default icon alt text]":"Text Strikethrough","text stroke/[translation hint:default icon alt text]":"Text Stroke","text style/[translation hint:default icon alt text]":"Text Style","text subscript/[translation hint:default icon alt text]":"Text Subscript","text superscript/[translation hint:default icon alt text]":"Text Superscript","text tracking/[translation hint:default icon alt text]":"Text Tracking","text underline/[translation hint:default icon alt text]":"Text Underline","thumb down/[translation hint:default icon alt text]":"Thumb Down","thumb up/[translation hint:default icon alt text]":"Thumb Up","tips/[translation hint:default icon alt text]":"Tips","transfer to platform/[translation hint:default icon alt text]":"Transfer To Platform","transparency/[translation hint:default icon alt text]":"Transparency","trap/[translation hint:default icon alt text]":"Trap","tree collapse/[translation hint:default icon alt text]":"Tree Collapse","tree collapse all/[translation hint:default icon alt text]":"Tree Collapse All","tree expand/[translation hint:default icon alt text]":"Tree Expand","tree expand all/[translation hint:default icon alt text]":"Tree Expand All","trend inspect/[translation hint:default icon alt text]":"Trend Inspect","trim path/[translation hint:default icon alt text]":"Trim Path","trophy/[translation hint:default icon alt text]":"Trophy","tumblr/[translation hint:default icon alt text]":"Tumblr","twitter/[translation hint:default icon alt text]":"Twitter","type/[translation hint:default icon alt text]":"Type","usa/[translation hint:default icon alt text]":"USA","underline/[translation hint:default icon alt text]":"Underline","undo/[translation hint:default icon alt text]":"Undo","ungroup/[translation hint:default icon alt text]":"Ungroup","unlink/[translation hint:default icon alt text]":"Unlink","unmerge/[translation hint:default icon alt text]":"Unmerge","upload to cloud/[translation hint:default icon alt text]":"Upload To Cloud","user/[translation hint:default icon alt text]":"User","user activity/[translation hint:default icon alt text]":"User Activity","user add/[translation hint:default icon alt text]":"User Add","user admin/[translation hint:default icon alt text]":"User Admin","user arrow/[translation hint:default icon alt text]":"User Arrow","user checked out/[translation hint:default icon alt text]":"User Checked Out","user edit/[translation hint:default icon alt text]":"User Edit","user exclude/[translation hint:default icon alt text]":"User Exclude","user group/[translation hint:default icon alt text]":"User Group","user lock/[translation hint:default icon alt text]":"User Lock","user share/[translation hint:default icon alt text]":"User Share","users add/[translation hint:default icon alt text]":"Users Add","users exclude/[translation hint:default icon alt text]":"Users Exclude","users lock/[translation hint:default icon alt text]":"Users Lock","users share/[translation hint:default icon alt text]":"Users Share","vk/[translation hint:default icon alt text]":"VK","variable/[translation hint:default icon alt text]":"Variable","vector draw/[translation hint:default icon alt text]":"Vector Draw","video checked out/[translation hint:default icon alt text]":"Video Checked Out","video/[translation hint:default icon alt text]":"Video","view all tags/[translation hint:default icon alt text]":"View All Tags","view bi week/[translation hint:default icon alt text]":"View Bi-Week","view card/[translation hint:default icon alt text]":"View Card","view column/[translation hint:default icon alt text]":"View Column","view day/[translation hint:default icon alt text]":"View Day","view detail/[translation hint:default icon alt text]":"View Detail","view grid/[translation hint:default icon alt text]":"View Grid","view list/[translation hint:default icon alt text]":"View List","view row/[translation hint:default icon alt text]":"View Row","view single/[translation hint:default icon alt text]":"View Single","view stack/[translation hint:default icon alt text]":"View Stack","view week/[translation hint:default icon alt text]":"View Week","viewed mark as/[translation hint:default icon alt text]":"Viewed Mark As","vignette/[translation hint:default icon alt text]":"Vignette","visibility/[translation hint:default icon alt text]":"Visibility","visibility off/[translation hint:default icon alt text]":"Visibility Off","visit/[translation hint:default icon alt text]":"Visit","visit share/[translation hint:default icon alt text]":"Visit Share","voice over/[translation hint:default icon alt text]":"Voice Over","volume mute/[translation hint:default icon alt text]":"Volume Mute","volume one/[translation hint:default icon alt text]":"Volume One","volume three/[translation hint:default icon alt text]":"Volume Three","volume two/[translation hint:default icon alt text]":"Volume Two","watch/[translation hint:default icon alt text]":"Watch","web page/[translation hint:default icon alt text]":"Web Page","web pages/[translation hint:default icon alt text]":"Web Pages","whats app/[translation hint:default icon alt text]":"Whats App","windows 7/[translation hint:default icon alt text]":"Windows 7","windows 8/[translation hint:default icon alt text]":"Windows 8","wordpress/[translation hint:default icon alt text]":"Wordpress","workflow/[translation hint:default icon alt text]":"Workflow","workflow add/[translation hint:default icon alt text]":"Workflow Add","wrench/[translation hint:default icon alt text]":"Wrench","xd/[translation hint:default icon alt text]":"XD","you tube/[translation hint:default icon alt text]":"YouTube","zoom in/[translation hint:default icon alt text]":"Zoom In","zoom out/[translation hint:default icon alt text]":"Zoom Out","adobe experience platform/[translation hint:default icon alt text]":"Adobe Experience Platform","calendar check/[translation hint:default icon alt text]":"Calendar Check","emotion admiration/[translation hint:default icon alt text]":"Emotion: Admiration","emotion anger/[translation hint:default icon alt text]":"Emotion: Anger","emotion anticipation/[translation hint:default icon alt text]":"Emotion: Anticipation","emotion disgust/[translation hint:default icon alt text]":"Emotion: Disgust","emotion fear/[translation hint:default icon alt text]":"Emotion: Fear","emotion joy/[translation hint:default icon alt text]":"Emotion: Joy","emotion sadness/[translation hint:default icon alt text]":"Emotion: Sadness","emotion surprise/[translation hint:default icon alt text]":"Emotion: Surprise","facebook circle/[translation hint:default icon alt text]":"Facebook","google plus circle/[translation hint:default icon alt text]":"Google Plus","instagram circle/[translation hint:default icon alt text]":"Instagram","linked in circle/[translation hint:default icon alt text]":"LinkedIn","mc marketo engage/[translation hint:default icon alt text]":"Marketo Engage","project camera/[translation hint:default icon alt text]":"Project Camera","project play/[translation hint:default icon alt text]":"Project Play","project refresh/[translation hint:default icon alt text]":"Project Refresh","sina weibo circle/[translation hint:default icon alt text]":"Sina Weibo","table cell merge/[translation hint:default icon alt text]":"Table Cell Merge","target check/[translation hint:default icon alt text]":"Target Check","twitter circle/[translation hint:default icon alt text]":"Twitter","user circle/[translation hint:default icon alt text]":"User","user group circle/[translation hint:default icon alt text]":"User Group","windows/[translation hint:default icon alt text]":"Windows","you tube circle/[translation hint:default icon alt text]":"YouTube"}};commons.extend(strings,{'coral-component-icon':translations});commons._define('coral-icon',Icon);var iconSize={};var excludedIconSizes=[Icon.size.LARGE,Icon.size.EXTRA_LARGE,Icon.size.EXTRA_EXTRA_LARGE];for(var key in Icon.size){if(excludedIconSizes.indexOf(Icon.size[key])===-1){iconSize[key]=Icon.size[key]}}var variant$1={CTA:'cta',PRIMARY:'primary',SECONDARY:'secondary',QUIET:'quiet',MINIMAL:'minimal',WARNING:'warning',ACTION:'action',QUIET_ACTION:'quietaction',QUIET_SECONDARY:'quietsecondary',QUIET_WARNING:'quietwarning',OVER_BACKGROUND:'overbackground',DEFAULT:'default',_CUSTOM:'_custom'};var CLASSNAME$2='_coral-Button';var ACTION_CLASSNAME='_coral-ActionButton';var ALL_VARIANT_CLASSES$1=["".concat(CLASSNAME$2,"--cta"),"".concat(CLASSNAME$2,"--primary"),"".concat(CLASSNAME$2,"--secondary"),"".concat(CLASSNAME$2,"--warning"),"".concat(CLASSNAME$2,"--quiet"),"".concat(ACTION_CLASSNAME,"--quiet"),"".concat(CLASSNAME$2,"--overBackground")];var VARIANT_MAP={cta:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[0]],primary:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[0]],secondary:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[2]],warning:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[3]],quiet:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[1],ALL_VARIANT_CLASSES$1[4]],minimal:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[2],ALL_VARIANT_CLASSES$1[4]],default:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[1]],action:[ACTION_CLASSNAME],quietaction:[ACTION_CLASSNAME,ALL_VARIANT_CLASSES$1[5]],quietsecondary:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[2],ALL_VARIANT_CLASSES$1[4]],quietwarning:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[3],ALL_VARIANT_CLASSES$1[4]],overbackground:[CLASSNAME$2,ALL_VARIANT_CLASSES$1[6]]};var size$1={MEDIUM:'M',LARGE:'L'};var iconPosition={RIGHT:'right',LEFT:'left'};var BaseButton=function BaseButton(superClass){return function(_BaseLabellable){_inherits(_class,_BaseLabellable);var _super=_createSuper(_class);function _class(){var _thisSuper,_this;_classCallCheck(this,_class);_this=_super.call(this);_this._elements={label:_this.querySelector(_this._contentZoneTagName)||document.createElement(_this._contentZoneTagName),icon:_this.querySelector('coral-icon')};_this._events={mousedown:'_onMouseDown',click:'_onClick'};_get((_thisSuper=_assertThisInitialized(_this),_getPrototypeOf(_class.prototype)),"_observeLabel",_thisSuper).call(_thisSuper);return _this}_createClass(_class,[{key:"_onClick",value:function _onClick(event){if(!this.disabled){this._trackEvent('click',this.getAttribute('is'),event)}}},{key:"_updateIcon",value:function _updateIcon(value){if(!this._updatedIcon&&this._elements.icon){return}this._updatedIcon=true;var iconSizeValue=this.iconSize;var iconAutoAriaLabelValue=this.iconAutoAriaLabel;var iconElement=this._getIconElement();iconElement.icon=value;iconElement.size=iconSizeValue;iconElement.autoAriaLabel=iconAutoAriaLabelValue;if(this.icon===''){iconElement.remove()}else if(!iconElement.parentNode||this._iconPosition){if(this.contains(this.label)){this.insertBefore(iconElement,this.iconPosition===iconPosition.LEFT?this.label:this.label.nextElementSibling)}}_get(_getPrototypeOf(_class.prototype),"_toggleIconAriaHidden",this).call(this)}},{key:"_getIconElement",value:function _getIconElement(){if(!this._elements.icon){this._elements.icon=new Icon();this._elements.icon.size=this.iconSize}return this._elements.icon}},{key:"_onMouseDown",value:function _onMouseDown(event){var target=event.matchedTarget;window.requestAnimationFrame(function(){if(target!==document.activeElement){target.focus()}})}},{key:"_updateLabel",value:function _updateLabel(label){label=label||this._elements.label;label.classList.remove("".concat(CLASSNAME$2,"-label"),"".concat(ACTION_CLASSNAME,"-label"));if(this._variant!==variant$1._CUSTOM){if(this._variant===variant$1.ACTION||this._variant===variant$1.QUIET_ACTION){label.classList.add("".concat(ACTION_CLASSNAME,"-label"))}else{label.classList.add("".concat(CLASSNAME$2,"-label"))}}}},{key:"render",value:function render(){_get(_getPrototypeOf(_class.prototype),"render",this).call(this);if(!this._variant){this.variant=variant$1.DEFAULT}if(!this._size){this.size=size$1.MEDIUM}var fragment=document.createDocumentFragment();var label=this._elements.label;var contentZoneProvided=label.parentNode;if(contentZoneProvided){this.removeChild(label)}var iconAdded=false;while(this.firstChild){var child=this.firstChild;if(child.nodeName==='CORAL-ICON'){if(iconAdded){this.removeChild(child)}else{this._elements.icon=child;fragment.appendChild(child);iconAdded=true }}else if(contentZoneProvided){fragment.appendChild(child)}else{label.appendChild(child)}}this.appendChild(fragment);this.label=label;this._updatedIcon=true;this._updateIcon(this.icon)}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:this._contentZoneTagName,insert:function insert(label){this._updateLabel(label);if(label.innerHTML.trim()===''){label.textContent=''}if(this.iconPosition===iconPosition.LEFT){this.appendChild(label)}else{this.insertBefore(label,this.firstChild)}}})}},{key:"iconPosition",get:function get(){return this._iconPosition||iconPosition.LEFT},set:function set(value){value=transform.string(value).toLowerCase();this._iconPosition=validate.enumeration(iconPosition)(value)&&value||iconPosition.LEFT;this._reflectAttribute('iconposition',this._iconPosition);this._updateIcon(this.icon)}},{key:"icon",get:function get(){if(this._elements.icon){return this._elements.icon.getAttribute('icon')||''}return this._icon||''},set:function set(value){this._icon=transform.string(value);this._updateIcon(value)}},{key:"iconSize",get:function get(){if(this._elements.icon){return this._elements.icon.getAttribute('size')||Icon.size.SMALL}return this._iconSize||Icon.size.SMALL},set:function set(value){value=transform.string(value).toUpperCase();this._iconSize=validate.enumeration(Icon.size)(value)&&value||Icon.size.SMALL;if(this._updatedIcon){this._getIconElement().setAttribute('size',value)}}},{key:"iconAutoAriaLabel",get:function get(){if(this._elements.icon){return this._elements.icon.getAttribute('autoarialabel')||Icon.autoAriaLabel.OFF}return this._iconAutoAriaLabel||Icon.autoAriaLabel.OFF},set:function set(value){value=transform.string(value).toLowerCase();this._iconAutoAriaLabel=validate.enumeration(Icon.autoAriaLabel)(value)&&value||Icon.autoAriaLabel.OFF;if(this._updatedIcon){this._getIconElement().setAttribute('autoarialabel',value)}}},{key:"size",get:function get(){return this._size||size$1.MEDIUM},set:function set(value){value=transform.string(value).toUpperCase();this._size=validate.enumeration(size$1)(value)&&value||size$1.MEDIUM;this._reflectAttribute('size',this._size)}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.classList.toggle('is-selected',this._selected);this.trigger('coral-button:_selectedchanged')}},{key:"value",get:function get(){return this.getAttribute('value')},set:function set(value){this._reflectAttribute('value',value);this.trigger('coral-button:_valuechanged')}},{key:"block",get:function get(){return this._block||false},set:function set(value){this._block=transform.booleanAttr(value);this._reflectAttribute('block',this._block);this.classList.toggle("".concat(CLASSNAME$2,"--block"),this._block)}},{key:"variant",get:function get(){return this._variant||variant$1.DEFAULT},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$1)(value)&&value||variant$1.DEFAULT;this._reflectAttribute('variant',this._variant);this.classList.remove(CLASSNAME$2,ACTION_CLASSNAME);(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$1);if(this._variant===variant$1._CUSTOM){this.classList.remove(CLASSNAME$2)}else{var _this$classList2;(_this$classList2=this.classList).add.apply(_this$classList2,_toConsumableArray(VARIANT_MAP[this._variant]));if(this._variant===variant$1.ACTION||this._variant===variant$1.QUIET_ACTION){this.classList.remove(CLASSNAME$2)}}this._updateLabel()}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?(this.label||this).textContent.replace(/\s{2,}/g,' ').trim()||this.icon:this._trackingElement},set:function set(value){_set(_getPrototypeOf(_class.prototype),"trackingElement",value,this,true)}},{key:"_contentZoneTagName",get:function get(){return Object.keys(this._contentZones)[0]}},{key:"_contentZones",get:function get(){return{'coral-button-label':'label'}}}],[{key:"size",get:function get(){return size$1}},{key:"variant",get:function get(){return variant$1}},{key:"iconPosition",get:function get(){return iconPosition}},{key:"iconSize",get:function get(){return iconSize}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(_class),"_attributePropertyMap",this),{iconposition:'iconPosition',iconsize:'iconSize',iconautoarialabel:'iconAutoAriaLabel'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['iconposition','iconsize','icon','iconautoarialabel','size','selected','block','variant','value'])}}]);return _class}(BaseLabellable(superClass))};var Button=function(_BaseButton){_inherits(Button,_BaseButton);var _super=_createSuper(Button);function Button(){var _this;_classCallCheck(this,Button);_this=_super.call(this);_this._delegateEvents(_this._events);return _this}return Button}(BaseButton(BaseComponent(HTMLButtonElement)));var ButtonLabel=(function(){return document.createElement('coral-button-label')});commons._define('coral-button',Button,{extends:'button'});Button.Label=ButtonLabel;var CLASSNAME$3='_coral-Textfield';var variant$2={DEFAULT:'default',QUIET:'quiet'};var ALL_VARIANT_CLASSES$2=[];for(var variantValue$1 in variant$2){ALL_VARIANT_CLASSES$2.push("".concat(CLASSNAME$3,"--").concat(variant$2[variantValue$1]))}var Textarea=function(_BaseFormField){_inherits(Textarea,_BaseFormField);var _super=_createSuper(Textarea);function Textarea(){var _this;_classCallCheck(this,Textarea);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{input:'_onInput'}));return _this}_createClass(Textarea,[{key:"reset",value:function reset(){this.value=this.textContent;this._onInput()}},{key:"_onInput",value:function _onInput(){var _this2=this;if(this.variant===variant$2.QUIET){requestAnimationFrame(function(){_this2.style.height='auto';_this2.style.height="".concat(_this2.scrollHeight,"px")})}}},{key:"render",value:function render(){_get(_getPrototypeOf(Textarea.prototype),"render",this).call(this);this.classList.add(CLASSNAME$3,"".concat(CLASSNAME$3,"--multiline"));if(!this._variant){this.variant=variant$2.DEFAULT}}},{key:"variant",get:function get(){return this._variant||variant$2.DEFAULT},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$2)(value)&&value||variant$2.DEFAULT;this._reflectAttribute('variant',this._variant);(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$2);if(this._variant!==variant$2.DEFAULT){this.classList.add("".concat(CLASSNAME$3,"--").concat(this._variant))}if(this._variant===variant$2.QUIET){this._defaultHeight=this._defaultHeight||this.style.height}else{this.style.height=this._defaultHeight;this._defaultHeight=undefined}this._onInput()}}],[{key:"variant",get:function get(){return variant$2}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Textarea),"_nativeObservedAttributes",this).concat(['variant'])}}]);return Textarea}(BaseFormField(BaseComponent(HTMLTextAreaElement)));commons._define('coral-textarea',Textarea,{extends:'textarea'});var translations$1={"en-US":{"Select":"Select","invalid":"invalid"},"fr-FR":{"Select":"Sélectionner","invalid":"Non valide"},"de-DE":{"Select":"Auswählen","invalid":"Ungültig"},"it-IT":{"Select":"Seleziona","invalid":"Non valido"},"es-ES":{"Select":"Seleccionar","invalid":"No válido"},"pt-BR":{"Select":"Selecionar","invalid":"Inválido"},"ja-JP":{"Select":"選択","invalid":"無効です"},"ko-KR":{"Select":"선택","invalid":"올바르지 않음"},"zh-CN":{"Select":"选择","invalid":"无效"},"zh-TW":{"Select":"選取","invalid":"無效"},"nl-NL":{"Select":"Selecteren","invalid":"Ongeldig"},"da-DK":{"Select":"Vælg","invalid":"Ugyldig"},"fi-FI":{"Select":"Valitse","invalid":"Virheellinen"},"nb-NO":{"Select":"Velg","invalid":"Ugyldig"},"sv-SE":{"Select":"Välj","invalid":"Ogiltig"},"cs-CZ":{"Select":"Vybrat","invalid":"Neplatný"},"pl-PL":{"Select":"Wybierz","invalid":"Nieprawidłowy"},"ru-RU":{"Select":"Выберите","invalid":"Недопустимый"},"tr-TR":{"Select":"Seç","invalid":"Geçersiz"}};function listToArray(list){var res=[];for(var i=0,listCount=res.length=list.length;i<listCount;i+=1){res[i]=list[i]}return res}var nextID$1=0;var COLLECTION_ID='coral-collection-id-';var SCOPE_SELECTOR=':scope > ';function getTagSelector(tag,nativeTag){return nativeTag?"".concat(nativeTag,"[is=\"").concat(tag,"\"]"):tag}function filterItem(item,filter){return typeof filter!=='function'||filter(item)}var Collection$1=function(){function Collection(options){_classCallCheck(this,Collection);options=options||{};this._id=nextID$1++;this._host=options.host;this._itemTagName=options.itemTagName;this._itemBaseTagName=options.itemBaseTagName;this._itemSelector=options.itemSelector||getTagSelector(this._itemTagName,this._itemBaseTagName);this._container=options.container||this._host;this._filter=options.filter;this._handleItems=false;if(this._itemSelector&&this._itemSelector.indexOf(SCOPE_SELECTOR)===0){this._container.id=this._container.id||COLLECTION_ID+this._id;this._allItemsSelector=this._itemSelector.replace(SCOPE_SELECTOR,"#".concat(this._container.id," > "));this._itemSelector=this._itemSelector.replace(SCOPE_SELECTOR,'');if(this._itemSelector===this._itemTagName){this._useItemTagName=this._itemSelector.toUpperCase()}}else{this._allItemsSelector=this._itemSelector;if(this._container&&this._allItemsSelector===this._itemTagName){this._liveCollection=true;this._useItemTagName=this._allItemsSelector.toUpperCase()}}this._onItemAdded=options.onItemAdded;this._onItemRemoved=options.onItemRemoved;this._onCollectionChange=options.onCollectionChange}_createClass(Collection,[{key:"add",value:function add(item,insertBefore){if(this._container&&this._itemTagName){if(!(item instanceof HTMLElement)){if(this._itemBaseTagName){item=document.createElement(this._itemBaseTagName,{is:this._itemTagName}).set(item,true)}else{item=document.createElement(this._itemTagName).set(item,true)}}this._container.insertBefore(item,insertBefore||null);if(!this._handleItems&&typeof this._onItemAdded==='function'&&this._host&&filterItem(item,this._filter)){this._onItemAdded.call(this._host,item)}return item}throw new Error('Please provide host and itemTagName or override add() to provide your own implementation.')}},{key:"clear",value:function clear(){var items=this.getAll();var removed=[];for(var i=items.length-1;i>-1;i-=1){removed.push(this.remove(items[i]))}return removed}},{key:"getAll",value:function getAll(){if(this._container&&this._allItemsSelector){var items=this._liveCollection?listToArray(this._container.getElementsByTagName(this._allItemsSelector)):listToArray(this._container.querySelectorAll(this._allItemsSelector));if(this._filter){items=items.filter(this._filter)}return items}throw new Error('Please provide host and itemTagName or override getAll() to provide your own implementation.')}},{key:"remove",value:function remove(item){if(item.parentNode){item.parentNode.removeChild(item);if(!this._handleItems&&typeof this._onItemRemoved==='function'&&this._host&&filterItem(item,this._filter)){this._onItemRemoved.call(this._host,item)}}return item}},{key:"first",value:function first(){return this.getAll()[0]||null}},{key:"last",value:function last(){var all=this.getAll();return all[all.length-1]||null}},{key:"_isPartOfCollection",value:function _isPartOfCollection(node){return node.nodeType===Node.ELEMENT_NODE&&filterItem(node,this._filter)&&(this._useItemTagName?this._useItemTagName===node.tagName:node.matches(this._itemSelector))}},{key:"_onItemAttached",value:function _onItemAttached(item){if(typeof this._onItemAdded==='function'){this._onItemAdded.call(this._host,item)}this._host.trigger('coral-collection:add',{item:item})}},{key:"_onItemDetached",value:function _onItemDetached(item){if(typeof this._onItemRemoved==='function'){this._onItemRemoved.call(this._host,item)}this._host.trigger('coral-collection:remove',{item:item})}},{key:"_startHandlingItems",value:function _startHandlingItems(skipInitialItems){if(this._host&&this._container){this._observer=this._observer||new MutationObserver(this._handleMutation.bind(this));this._handleItems=true;this._observer.observe(this._container,{childList:true,subtree:true});if(skipInitialItems!==true){var items;var itemCount=0;if(typeof this._onItemAdded==='function'||typeof this._onCollectionChange==='function'){items=this.getAll();itemCount=items.length}if(typeof this._onItemAdded==='function'){for(var i=0;i<itemCount;i+=1){this._onItemAdded.call(this._host,items[i])}}if(itemCount>0&&typeof this._onCollectionChange==='function'){this._onCollectionChange.call(this._host,items,[])}}}else{throw new Error('Please provide options.host and/or options.container to enable handling the items.')}}},{key:"_stopHandlingItems",value:function _stopHandlingItems(){if(this._observer){this._observer.disconnect()}}},{key:"_handleMutation",value:function _handleMutation(mutations){var mutation;var mutationsCount=mutations.length;var item;var addedNodes;var addedNodesCount;var removedNodes;var removedNodesCount;var validAddedNodes=[];var validRemovedNodes=[];var itemChanges=0;for(var i=0;i<mutationsCount;i+=1){mutation=mutations[i];addedNodes=mutation.addedNodes;addedNodesCount=addedNodes.length;for(var j=0;j<addedNodesCount;j+=1){item=addedNodes[j];if(this._isPartOfCollection(item)){itemChanges+=1;validAddedNodes.push(item);this._onItemAttached(item)}}removedNodes=mutation.removedNodes;removedNodesCount=removedNodes.length;for(var k=0;k<removedNodesCount;k+=1){item=removedNodes[k];if(this._isPartOfCollection(item)){itemChanges+=1;validRemovedNodes.push(item);this._onItemDetached(item)}}}if(itemChanges!==0&&typeof this._onCollectionChange==='function'&&this._host){this._onCollectionChange.call(this._host,validAddedNodes,validRemovedNodes)}}},{key:"length",get:function get(){return this.getAll().length}}]);return Collection}();var SelectableCollection=function(_Collection){_inherits(SelectableCollection,_Collection);var _super=_createSuper(SelectableCollection);function SelectableCollection(options){var _this;_classCallCheck(this,SelectableCollection);_this=_super.call(this,options);if(_this._filter){commons._log('warn','Coral.SelectableCollection does not support the options.filter')}_this._selectableItemSelector=_this._allItemsSelector.split(',').map(function(selector){return "".concat(selector,":not([disabled])")}).join(',');_this._selectedItemSelector=_this._allItemsSelector.split(',').map(function(selector){return "".concat(selector,"[selected]")}).join(',');_this._deselectAllExceptSelector=_this._selectedItemSelector;return _this}_createClass(SelectableCollection,[{key:"_getSelectableItems",value:function _getSelectableItems(){return listToArray(this._container.querySelectorAll(this._selectableItemSelector))}},{key:"_getFirstSelectable",value:function _getFirstSelectable(){return this._container.querySelector(this._selectableItemSelector)||null}},{key:"_getLastSelectable",value:function _getLastSelectable(){var items=this._container.querySelectorAll(this._selectableItemSelector);return items[items.length-1]||null}},{key:"_getPreviousSelectable",value:function _getPreviousSelectable(item){var sibling=item.previousElementSibling;while(sibling){if(sibling.matches(this._selectableItemSelector)){break}else{sibling=sibling.previousElementSibling}}return sibling||item}},{key:"_getNextSelectable",value:function _getNextSelectable(item){var sibling=item.nextElementSibling;while(sibling){if(sibling.matches(this._selectableItemSelector)){break}else{sibling=sibling.nextElementSibling}}return sibling||item}},{key:"_getFirstSelected",value:function _getFirstSelected(selectedAttribute){var selector=this._selectedItemSelector;if(typeof selectedAttribute==='string'){selector=selector.replace('[selected]',"[".concat(selectedAttribute,"]"))}return this._container.querySelector(selector)||null}},{key:"_getLastSelected",value:function _getLastSelected(selectedAttribute){var selector=this._selectedItemSelector;if(typeof selectedAttribute==='string'){selector=selector.replace('[selected]',"[".concat(selectedAttribute,"]"))}var items=this._container.querySelectorAll(selector);return items[items.length-1]||null}},{key:"_getAllSelected",value:function _getAllSelected(selectedAttribute){var selector=this._selectedItemSelector;if(typeof selectedAttribute==='string'){selector=selector.replace('[selected]',"[".concat(selectedAttribute,"]"))}return listToArray(this._container.querySelectorAll(selector))}},{key:"_deselectAllExceptFirst",value:function _deselectAllExceptFirst(selectedAttribute){var selector=this._deselectAllExceptSelector;var attributeToRemove=selectedAttribute||'selected';if(typeof selectedAttribute==='string'){selector=selector.replace('[selected]',"[".concat(selectedAttribute,"]"))}var items=this._container.querySelectorAll(selector);var itemsCount=items.length;for(var i=1;i<itemsCount;i+=1){items[i].removeAttribute(attributeToRemove)}}},{key:"_deselectAllExceptLast",value:function _deselectAllExceptLast(selectedAttribute){var selector=this._deselectAllExceptSelector;var attributeToRemove=selectedAttribute||'selected';if(typeof selectedAttribute==='string'){selector=selector.replace('[selected]',"[".concat(selectedAttribute,"]"))}var items=this._container.querySelectorAll(selector);var itemsCount=items.length-1;for(var i=0;i<itemsCount;i+=1){items[i].removeAttribute(attributeToRemove)}}},{key:"_deselectAllExcept",value:function _deselectAllExcept(itemOrSelectedAttribute,selectedAttribute){var selector=this._deselectAllExceptSelector;var item;var attributeToRemove;if(typeof itemOrSelectedAttribute==='string'){item=null;attributeToRemove=itemOrSelectedAttribute||'selected';selector=selector.replace('[selected]',"[".concat(attributeToRemove,"]"))}else{item=itemOrSelectedAttribute;attributeToRemove=selectedAttribute||'selected';if(typeof selectedAttribute==='string'){selector=selector.replace('[selected]',"[".concat(attributeToRemove,"]"))}}var items=this._container.querySelectorAll(selector);var itemsCount=items.length;for(var i=0;i<itemsCount;i+=1){if(item!==items[i]){items[i].removeAttribute(attributeToRemove)}}}}]);return SelectableCollection}(Collection$1);var translations$2={"en-US":{"Remove":"Remove"},"fr-FR":{"Remove":"Supprimer"},"de-DE":{"Remove":"Entfernen"},"it-IT":{"Remove":"Rimuovi"},"es-ES":{"Remove":"Eliminar"},"pt-BR":{"Remove":"Remover"},"ja-JP":{"Remove":"削除"},"ko-KR":{"Remove":"제거"},"zh-CN":{"Remove":"删除"},"zh-TW":{"Remove":"移除"},"nl-NL":{"Remove":"Verwijderen"},"da-DK":{"Remove":"Fjern"},"fi-FI":{"Remove":"Poista"},"nb-NO":{"Remove":"Fjern"},"sv-SE":{"Remove":"Ta bort"},"cs-CZ":{"Remove":"Odebrat"},"pl-PL":{"Remove":"Usuń"},"ru-RU":{"Remove":"Удалить"},"tr-TR":{"Remove":"Kaldır"}};var template=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["buttonCell"]=document.createElement("span");el0.setAttribute("handle","buttonCell");el0.setAttribute("hidden","");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["button"]=document.createElement("button","coral-button");el2.setAttribute("tracking","off");el2.setAttribute("handle","button");el2.setAttribute("is","coral-button");el2.setAttribute("type","button");el2.setAttribute("variant","_custom");el2.className+=" _coral-ClearButton _coral-ClearButton--small _coral-Tags-item-removeButton";el2.setAttribute("title",data_0["i18n"]["get"]('Remove'));el2.setAttribute("hidden","");el2.setAttribute("tabindex","-1");el2.setAttribute("coral-close","");var el3=document.createTextNode("\n    ");el2.appendChild(el3);var el4=this["buttonLabel"]=document.createElement("coral-button-label");el4.setAttribute("handle","buttonLabel");el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);el0.appendChild(el2);var el6=document.createTextNode("\n");el0.appendChild(el6);frag.appendChild(el0);var el7=document.createTextNode("\n");frag.appendChild(el7);data=data_0;this.button._elements.label=this.buttonLabel;this.button.insertAdjacentHTML('beforeend',data.Icon._renderSVG('spectrum-css-icon-CrossSmall',['_coral-UIIcon-CrossSmall']));data_0=data;var el9=document.createTextNode("\n");frag.appendChild(el9);return frag};var CLASSNAME$4='_coral-Tags-item';var LABEL_CLASSNAME='_coral-Label';var size$2={SMALL:'S',MEDIUM:'M',LARGE:'L'};var color={DEFAULT:'',GREY:'grey',BLUE:'blue',RED:'red',ORANGE:'orange',GREEN:'green',LIGHT_BLUE:'lightblue',PERIWINKLE:'periwinkle',PLUM:'plum',FUCHSIA:'fuchsia',MAGENTA:'magenta',TANGERINE:'tangerine',YELLOW:'yellow',CHARTREUSE:'chartreuse',KELLY_GREEN:'kellygreen',SEA_FOAM:'seafoam',CYAN:'cyan'};var colorMap={lightblue:'blue',periwinkle:'blue',cyan:'blue',plum:'red',magenta:'red',tangerine:'orange',chartreuse:'green',kelly_green:'green'};var swappedSize=commons.swapKeysAndValues(size$2);var ALL_COLOR_CLASSES=[];for(var colorValue in color){ALL_COLOR_CLASSES.push("".concat(LABEL_CLASSNAME,"--").concat(color[colorValue]))}var ALL_SIZE_CLASSES$1=[];for(var sizeValue$1 in Object.keys(size$2)){ALL_SIZE_CLASSES$1.push("".concat(LABEL_CLASSNAME,"--").concat(sizeValue$1))}var QUIET_CLASSNAME="".concat(CLASSNAME$4,"--quiet");var MULTILINE_CLASSNAME="".concat(CLASSNAME$4,"--multiline");var Tag=function(_BaseComponent){_inherits(Tag,_BaseComponent);var _super=_createSuper(Tag);function Tag(){var _this;_classCallCheck(this,Tag);_this=_super.call(this);_this._delegateEvents({'click [handle="button"]':'_onRemoveButtonClick','key:backspace':'_onRemoveButtonClick','key:delete':'_onRemoveButtonClick'});_this._elements={label:_this.querySelector('coral-tag-label')||document.createElement('coral-tag-label')};template.call(_this._elements,{i18n:i18n,Icon:Icon});return _this}_createClass(Tag,[{key:"_toggleTagVariant",value:function _toggleTagVariant(){var _this$classList,_this$classList2;var isColored=this.color!==color.DEFAULT;this.classList.toggle(CLASSNAME$4,!isColored);this.classList.toggle(LABEL_CLASSNAME,isColored);this.classList.toggle("".concat(CLASSNAME$4,"--deletable"),!isColored);this.classList.toggle(QUIET_CLASSNAME,!isColored&&this.quiet);(_this$classList=this.classList).remove.apply(_this$classList,ALL_SIZE_CLASSES$1);this.classList.toggle("".concat(LABEL_CLASSNAME,"--").concat(swappedSize[this.size].toLowerCase()),isColored);(_this$classList2=this.classList).remove.apply(_this$classList2,ALL_COLOR_CLASSES);this.classList.toggle("".concat(LABEL_CLASSNAME,"--").concat(this.color),isColored)}},{key:"_onRemoveButtonClick",value:function _onRemoveButtonClick(event){event.preventDefault();if(this.closable&&!this._elements.button.disabled){event.stopPropagation();this.focus();var host=this._host;this.remove();if(host){host._onTagButtonClicked(this,event)}}}},{key:"_updateAriaLabel",value:function _updateAriaLabel(){var button=this._elements.button;var buttonCell=this._elements.buttonCell;var label=this._elements.label;if(this.getAttribute('role')!=='row'){buttonCell.removeAttribute('role');label.removeAttribute('role');if(this.getAttribute('aria-labelledby')===label.id){this.removeAttribute('aria-labelledby')}return}buttonCell.setAttribute('role','gridcell');label.setAttribute('role',this._closable?'rowheader':'gridcell');var buttonAriaLabel=button.getAttribute('title');var labelTextContent=label.textContent;button.setAttribute('aria-label',"".concat(buttonAriaLabel,": ").concat(labelTextContent));if(!label.id){label.id=commons.getUID()}this.setAttribute('aria-labelledby',label.id)}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='disabled'){this._elements.button.disabled=value}else if(name==='role'){this._updateAriaLabel()}else{_get(_getPrototypeOf(Tag.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(Tag.prototype),"connectedCallback",this).call(this);this.trigger('coral-tag:_connected')}},{key:"render",value:function render(){_get(_getPrototypeOf(Tag.prototype),"render",this).call(this);if(!this._size){this.size=size$2.MEDIUM}if(!this._color){this.color=color.DEFAULT}var templateHandleNames=['input','button','buttonCell'];var label=this._elements.label;if(label.parentNode){this.removeChild(label)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||templateHandleNames.indexOf(child.getAttribute('handle'))===-1){label.appendChild(child)}else{this.removeChild(child)}}this.label=label}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(Tag.prototype),"disconnectedCallback",this).call(this);if(this._host){this._host._onItemDisconnected(this)}}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-tag-label',insert:function insert(label){label.classList.add("".concat(CLASSNAME$4,"Label"));this.insertBefore(label,this.firstChild);this._updateAriaLabel()}})}},{key:"closable",get:function get(){return this._closable||false},set:function set(value){this._closable=transform.booleanAttr(value);this._reflectAttribute('closable',this._closable);this._toggleTagVariant();if(this._closable&&!this.contains(this._elements.buttonCell)){this.appendChild(this._elements.buttonCell)}this._elements.button.hidden=!this._closable;this._elements.buttonCell.hidden=!this._closable;this._updateAriaLabel()}},{key:"value",get:function get(){return typeof this._value==='string'?this._value:this.textContent.replace(/\s{2,}/g,' ').trim()},set:function set(value){this._value=transform.string(value);this._reflectAttribute('value',this._value);this.trigger('coral-tag:_valuechanged')}},{key:"quiet",get:function get(){return this._quiet||false},set:function set(value){this._quiet=transform.booleanAttr(value);this._reflectAttribute('quiet',this._quiet);this._toggleTagVariant()}},{key:"multiline",get:function get(){return this._multiline||false},set:function set(value){this._multiline=transform.booleanAttr(value);this._reflectAttribute('multiline',this._multiline);this.classList.toggle(MULTILINE_CLASSNAME,this._multiline)}},{key:"size",get:function get(){return this._size||size$2.MEDIUM},set:function set(value){value=this._host?size$2.MEDIUM:transform.string(value).toUpperCase();this._size=validate.enumeration(size$2)(value)&&value||size$2.MEDIUM;this._reflectAttribute('size',this._size);this._toggleTagVariant()}},{key:"color",get:function get(){return this._color||color.DEFAULT},set:function set(value){value=this._host?color.DEFAULT:transform.string(value).toLowerCase();this._color=validate.enumeration(color)(value)&&value||color.DEFAULT;if(Object.keys(colorMap).indexOf(this._color)!==-1){this._color=colorMap[this._color]}this._reflectAttribute('color',this._color);this._toggleTagVariant()}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?this.value||(this.label||this).textContent.replace(/\s{2,}/g,' ').trim():this._trackingElement},set:function set(value){_set(_getPrototypeOf(Tag.prototype),"trackingElement",value,this,true)}},{key:"_contentZones",get:function get(){return{'coral-tag-label':'label'}}}],[{key:"size",get:function get(){return size$2}},{key:"color",get:function get(){return color}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Tag),"observedAttributes",this).concat(['closable','value','quiet','multiline','size','color','disabled','role'])}}]);return Tag}(BaseComponent(HTMLElement));var TagLabel=(function(){return document.createElement('coral-tag-label')});var CLASSNAME$5='_coral-Tags';var ITEM_TAGNAME='coral-tag';var itemValueFromDOM=function itemValueFromDOM(item){var attr=item.getAttribute('value');return attr!==null?attr:item.textContent.replace(/\s{2,}/g,' ').trim()};var TagList=function(_BaseFormField){_inherits(TagList,_BaseFormField);var _super=_createSuper(TagList);function TagList(){var _this;_classCallCheck(this,TagList);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'capture:focus coral-tag':'_onItemFocus','capture:blur coral-tag':'_onItemBlur','key:right coral-tag':'_onNextItemFocus','key:down coral-tag':'_onNextItemFocus','key:pagedown coral-tag':'_onNextItemFocus','key:left coral-tag':'_onPreviousItemFocus','key:up coral-tag':'_onPreviousItemFocus','key:pageup coral-tag':'_onPreviousItemFocus','key:home coral-tag':'_onFirstItemFocus','key:end coral-tag':'_onLastItemFocus','capture:focus coral-tag:not(.is-disabled)':'_onItemFocusIn','capture:blur coral-tag:not(.is-disabled)':'_onItemFocusOut','coral-tag:_valuechanged':'_onTagValueChanged','coral-tag:_connected':'_onTagConnected'}));_this._labellableElement=_assertThisInitialized(_this);_this._itemToFocusAfterDelete=null;return _this}_createClass(TagList,[{key:"_attachInputToItem",value:function _attachInputToItem(item){if(!item._input){item._input=document.createElement('input');item._input.type='hidden';item._input.setAttribute('handle','input')}var input=item._input;input.disabled=this.disabled;input.name=this.name;input.value=item.value;if(!item.contains(input)){item.appendChild(input)}}},{key:"_prepareItem",value:function _prepareItem(attachedItem){var items=this.items.getAll();var duplicate=items.some(function(tag){if(itemValueFromDOM(tag)===itemValueFromDOM(attachedItem)&&tag!==attachedItem){(items.indexOf(tag)<items.indexOf(attachedItem)?attachedItem:tag).remove();return true}return false});if(duplicate){return}this._attachInputToItem(attachedItem);attachedItem.setAttribute('color',Tag.color.DEFAULT);attachedItem.setAttribute('size',Tag.size.SMALL);attachedItem.setAttribute('role','row');attachedItem.setAttribute('tabindex','-1');attachedItem[this.readOnly?'removeAttribute':'setAttribute']('closable','');if(!this.querySelector("".concat(ITEM_TAGNAME,"[tabindex=\"0\"]"))){var first=items[0];if(first){first.setAttribute('tabindex','0')}}attachedItem._host=this;this.trigger('coral-collection:add',{item:attachedItem})}},{key:"_onItemDisconnected",value:function _onItemDisconnected(detachedItem){detachedItem.removeAttribute('role');detachedItem.removeAttribute('tabindex');detachedItem._host=undefined;if(this._itemToFocusAfterDelete){this._itemToFocusAfterDelete.focus()}this.trigger('coral-collection:remove',{item:detachedItem})}},{key:"_onItemFocus",value:function _onItemFocus(event){if(!this.disabled){this.setAttribute('aria-live','polite');var tag=event.matchedTarget;this.items.getAll().forEach(function(item){if(item!==tag){item.setAttribute('tabindex','-1')}});tag.setAttribute('tabindex','0');this._setItemToFocusOnDelete(tag)}}},{key:"_onItemBlur",value:function _onItemBlur(event){if(!this.disabled){this.setAttribute('aria-live','off');var tag=event.matchedTarget;this._setItemToFocusOnDelete(tag)}}},{key:"_onSiblingItemFocus",value:function _onSiblingItemFocus(event,sibling){if(!this.disabled){event.preventDefault();var item=event.target[sibling];while(item){if(item.tagName.toLowerCase()===ITEM_TAGNAME&&!item.hidden){item.focus();break}else{item=item[sibling]}}}}},{key:"_onNextItemFocus",value:function _onNextItemFocus(event){this._onSiblingItemFocus(event,'nextElementSibling')}},{key:"_onPreviousItemFocus",value:function _onPreviousItemFocus(event){this._onSiblingItemFocus(event,'previousElementSibling')}},{key:"_onFirstItemFocus",value:function _onFirstItemFocus(event){event.preventDefault();var length=this.items.length;if(length>0){this.items.getAll()[0].focus()}}},{key:"_onLastItemFocus",value:function _onLastItemFocus(event){event.preventDefault();var length=this.items.length;if(length>0){this.items.getAll()[length-1].focus()}}},{key:"_onItemFocusIn",value:function _onItemFocusIn(event){event.matchedTarget.classList.add('focus-ring')}},{key:"_onItemFocusOut",value:function _onItemFocusOut(event){event.matchedTarget.classList.remove('focus-ring')}},{key:"_onTagButtonClicked",value:function _onTagButtonClicked(item,event){this.trigger('change');this._trackEvent('remove','coral-tag',event,item)}},{key:"_onTagValueChanged",value:function _onTagValueChanged(event){event.stopImmediatePropagation();var tag=event.target;if(tag._input){tag._input.value=tag.value}}},{key:"_setItemToFocusOnDelete",value:function _setItemToFocusOnDelete(tag){var _this2=this;var itemToFocusAfterDelete=tag.nextElementSibling;while(itemToFocusAfterDelete){if(itemToFocusAfterDelete.tagName.toLowerCase()===ITEM_TAGNAME&&!itemToFocusAfterDelete.hidden){this._itemToFocusAfterDelete=itemToFocusAfterDelete;return}itemToFocusAfterDelete=itemToFocusAfterDelete.nextElementSibling}itemToFocusAfterDelete=tag.previousElementSibling;while(itemToFocusAfterDelete){if(itemToFocusAfterDelete.tagName.toLowerCase()===ITEM_TAGNAME&&!itemToFocusAfterDelete.hidden){this._itemToFocusAfterDelete=itemToFocusAfterDelete;break}else{itemToFocusAfterDelete=itemToFocusAfterDelete.previousElementSibling}}window.requestAnimationFrame(function(){if(tag.parentElement!==null&&!_this2.contains(document.activeElement)){itemToFocusAfterDelete=undefined}})}},{key:"_onTagConnected",value:function _onTagConnected(event){event.stopImmediatePropagation();var item=event.target;this._prepareItem(item)}},{key:"reset",value:function reset(){this.values=this._initialValues}},{key:"render",value:function render(){var _this3=this;_get(_getPrototypeOf(TagList.prototype),"render",this).call(this);this.classList.add(CLASSNAME$5);this.setAttribute('role','grid');this.setAttribute('aria-live','off');this.setAttribute('aria-atomic','false');this.setAttribute('aria-relevant','additions');if(this.hasAttribute('value')){this._initialValues=[this.getAttribute('value')]}else{this._initialValues=this.items.getAll().map(function(item){return itemValueFromDOM(item)})}this.items.getAll().forEach(function(item){_this3._prepareItem(item)})}},{key:"values",get:function get(){return this.items.getAll().map(function(item){return item.value})},set:function set(values){var _this4=this;if(Array.isArray(values)){this.items.clear();values.forEach(function(value){var item=new Tag().set({label:{innerHTML:value},value:value});_this4._attachInputToItem(item);_this4.items.add(item)})}}},{key:"items",get:function get(){if(!this._items){this._items=new Collection$1({host:this,itemTagName:ITEM_TAGNAME})}return this._items}},{key:"name",get:function get(){return this._name||''},set:function set(value){var _this5=this;this._name=transform.string(value);this._reflectAttribute('name',value);this.items.getAll().forEach(function(item){if(item._input){item._input.name=_this5._name}})}},{key:"value",get:function get(){var all=this.items.getAll();return all.length?all[0].value:''},set:function set(value){this.items.clear();if(value){var item=new Tag().set({label:{innerHTML:value},value:value});this._attachInputToItem(item);this.items.add(item)}}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){var _this6=this;this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.items.getAll().forEach(function(item){item.classList.toggle('is-disabled',_this6._disabled);if(item._input){item._input.disabled=_this6._disabled}});this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled)}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(TagList.prototype),"invalid",this)},set:function set(value){var _this7=this;_set(_getPrototypeOf(TagList.prototype),"invalid",value,this,true);this.items.getAll().forEach(function(item){item.classList.toggle('is-invalid',_this7._invalid)})}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){var _this8=this;this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this.items.getAll().forEach(function(item){item.closable=!_this8._readOnly})}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required)}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(TagList),"observedAttributes",this).concat(['closable','value','quiet','multiline','size','color'])}}]);return TagList}(BaseFormField(BaseComponent(HTMLElement)));commons.extend(strings,{'coral-component-taglist':translations$2});commons._define('coral-tag',Tag);commons._define('coral-taglist',TagList);Tag.Label=TagLabel;var translations$3={"en-US":{"List":"List"},"fr-FR":{"List":"Liste"},"de-DE":{"List":"Liste"},"it-IT":{"List":"Elenco"},"es-ES":{"List":"Mostrar"},"pt-BR":{"List":"Lista"},"ja-JP":{"List":"リスト"},"ko-KR":{"List":"목록"},"zh-CN":{"List":"列表"},"zh-TW":{"List":"清單"},"nl-NL":{"List":"Lijst"},"da-DK":{"List":"Liste"},"fi-FI":{"List":"Lista"},"nb-NO":{"List":"Liste"},"sv-SE":{"List":"Lista"},"cs-CZ":{"List":"Seznam"},"pl-PL":{"List":"Lista"},"ru-RU":{"List":"список"},"tr-TR":{"List":"Liste"}};var CLASSNAME$6='_coral-Menu';var interaction={ON:'on',OFF:'off'};var BaseList=function BaseList(superClass){return function(_superClass){_inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){var _this;_classCallCheck(this,_class);_this=_super.call(this);_this._events={'mouseenter':'_onMouseEnter','key:down [coral-list-item]':'_focusNextItem','key:right [coral-list-item]':'_focusNextItem','key:left [coral-list-item]':'_focusPreviousItem','key:up [coral-list-item]':'_focusPreviousItem','key:pageup [coral-list-item]':'_focusPreviousItem','key:pagedown [coral-list-item]':'_focusNextItem','key:home [coral-list-item]':'_focusFirstItem','key:end [coral-list-item]':'_focusLastItem'};return _this}_createClass(_class,[{key:"_eventIsAtTarget",value:function _eventIsAtTarget(event){var target=event.target;var listItem=event.matchedTarget;var isAtTarget=target===listItem;if(isAtTarget){event.preventDefault()}return isAtTarget}},{key:"_onMouseEnter",value:function _onMouseEnter(){if(this.contains(document.activeElement)){document.activeElement.blur()}}},{key:"_focusFirstItem",value:function _focusFirstItem(event){if(this.interaction===interaction.OFF||!this._eventIsAtTarget(event)){return}var items=this._getSelectableItems();items[0].focus()}},{key:"_focusLastItem",value:function _focusLastItem(event){if(this.interaction===interaction.OFF||!this._eventIsAtTarget(event)){return}var items=this._getSelectableItems();items[items.length-1].focus()}},{key:"_focusNextItem",value:function _focusNextItem(event){if(this.interaction===interaction.OFF||!this._eventIsAtTarget(event)){return}var target=event.matchedTarget;var items=this._getSelectableItems();var index=items.indexOf(target);if(index===-1){return}if(index<items.length-1){items[index+1].focus()}else{items[0].focus()}}},{key:"_focusPreviousItem",value:function _focusPreviousItem(event){if(this.interaction===interaction.OFF||!this._eventIsAtTarget(event)){return}var target=event.matchedTarget;var items=this._getSelectableItems();var index=items.indexOf(target);if(index===-1){return}if(index>0){items[index-1].focus()}else{items[items.length-1].focus()}}},{key:"_getSelectableItems",value:function _getSelectableItems(){return this.items._getSelectableItems().filter(function(item){return!item.hasAttribute('hidden')&&item.offsetParent})}},{key:"focus",value:function focus(){if(!this.contains(document.activeElement)){var items=this._getSelectableItems();if(items.length>0){items[0].focus()}}}},{key:"render",value:function render(){_get(_getPrototypeOf(_class.prototype),"render",this).call(this);this.classList.add(CLASSNAME$6);if(!this._interaction){this.interaction=interaction.ON}}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({itemTagName:this._itemTagName,itemBaseTagName:this._itemBaseTagName,itemSelector:'coral-list-item, button[is="coral-buttonlist-item"], a[is="coral-anchorlist-item"]',host:this})}return this._items}},{key:"_itemTagName",get:function get(){return 'coral-list-item'}},{key:"interaction",get:function get(){return this._interaction||interaction.ON},set:function set(value){value=transform.string(value).toLowerCase();this._interaction=validate.enumeration(interaction)(value)&&value||interaction.ON;this._reflectAttribute('interaction',this._interaction)}}],[{key:"interaction",get:function get(){return interaction}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['interaction'])}}]);return _class}(superClass)};var CLASSNAME$7='_coral-Menu-item';var BaseListItem=function BaseListItem(superClass){return function(_BaseLabellable){_inherits(_class,_BaseLabellable);var _super=_createSuper(_class);function _class(){var _thisSuper,_this;_classCallCheck(this,_class);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-list-item-content')||document.createElement('coral-list-item-content')};_get((_thisSuper=_assertThisInitialized(_this),_getPrototypeOf(_class.prototype)),"_observeLabel",_thisSuper).call(_thisSuper);return _this}_createClass(_class,[{key:"_getIconElement",value:function _getIconElement(){if(!this._elements.icon){this._elements.icon=this.querySelector('._coral-Menu-item-icon')||new Icon();this._elements.icon.size=Icon.size.SMALL;this._elements.icon.classList.add('_coral-Menu-item-icon')}return this._elements.icon}},{key:"render",value:function render(){_get(_getPrototypeOf(_class.prototype),"render",this).call(this);this.classList.add(CLASSNAME$7);this.setAttribute('coral-list-item','');var content=this._elements.content;if(!content.parentNode){while(this.firstChild){content.appendChild(this.firstChild)}}this.icon=this.icon;this.content=content}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){var _this2=this;this._setContentZone('content',value,{handle:'content',tagName:'coral-list-item-content',insert:function insert(content){content.classList.add("".concat(CLASSNAME$7,"Label"));_this2.appendChild(content);_get(_getPrototypeOf(_class.prototype),"_toggleIconAriaHidden",_this2).call(_this2)}})}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled)}},{key:"icon",get:function get(){var el=this._getIconElement();return el.icon},set:function set(value){var el=this._getIconElement();if(transform.string(value)===''){el.remove()}else{this.insertBefore(el,this.firstChild)}el.icon=value;_get(_getPrototypeOf(_class.prototype),"_toggleIconAriaHidden",this).call(this)}},{key:"_contentZones",get:function get(){return{'coral-list-item-content':'content'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['disabled','icon'])}}]);return _class}(BaseLabellable(superClass))};var List=function(_BaseList){_inherits(List,_BaseList);var _super=_createSuper(List);function List(){var _this;_classCallCheck(this,List);_this=_super.call(this);_this._delegateEvents(_this._events);return _this}return List}(BaseList(BaseComponent(HTMLElement)));var CLASSNAME$8='_coral-Menu-divider';var ListDivider=function(_BaseComponent){_inherits(ListDivider,_BaseComponent);var _super=_createSuper(ListDivider);function ListDivider(){_classCallCheck(this,ListDivider);return _super.apply(this,arguments)}_createClass(ListDivider,[{key:"render",value:function render(){_get(_getPrototypeOf(ListDivider.prototype),"render",this).call(this);this.classList.add(CLASSNAME$8);this.setAttribute('role','separator')}}]);return ListDivider}(BaseComponent(HTMLElement));var ListItem=function(_BaseListItem){_inherits(ListItem,_BaseListItem);var _super=_createSuper(ListItem);function ListItem(){var _this;_classCallCheck(this,ListItem);_this=_super.call(this);_this._delegateEvents(_this._events);return _this}return ListItem}(BaseListItem(BaseComponent(HTMLElement)));var ListItemContent=(function(){return document.createElement('coral-list-item-content')});var CLASSNAME$9='_coral-AnchorList';var AnchorList=function(_BaseList){_inherits(AnchorList,_BaseList);var _super=_createSuper(AnchorList);function AnchorList(){var _this;_classCallCheck(this,AnchorList);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'click [coral-list-item]':'_onItemClick'}));return _this}_createClass(AnchorList,[{key:"_onItemClick",value:function _onItemClick(event){this._trackEvent('click','coral-anchorlist-item',event,event.matchedTarget)}},{key:"render",value:function render(){_get(_getPrototypeOf(AnchorList.prototype),"render",this).call(this);this.classList.add(CLASSNAME$9)}},{key:"_itemTagName",get:function get(){return 'coral-anchorlist-item'}},{key:"_itemBaseTagName",get:function get(){return 'a'}}]);return AnchorList}(BaseList(BaseComponent(HTMLElement)));var CLASSNAME$a='_coral-AnchorList-item';var AnchorListItem=function(_BaseListItem){_inherits(AnchorListItem,_BaseListItem);var _super=_createSuper(AnchorListItem);function AnchorListItem(){var _this;_classCallCheck(this,AnchorListItem);_this=_super.call(this);_this._delegateEvents({click:'_onClick'});return _this}_createClass(AnchorListItem,[{key:"_onClick",value:function _onClick(event){if(this.disabled){event.preventDefault()}}},{key:"render",value:function render(){_get(_getPrototypeOf(AnchorListItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$a)}},{key:"disabled",get:function get(){return _get(_getPrototypeOf(AnchorListItem.prototype),"disabled",this)},set:function set(value){_set(_getPrototypeOf(AnchorListItem.prototype),"disabled",value,this,true);if(this.disabled){this.setAttribute('tabindex','-1')}else{this.setAttribute('tabindex','0')}}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?(this.content||this).textContent.replace(/\s{2,}/g,' ').trim():this._trackingElement},set:function set(value){_set(_getPrototypeOf(AnchorListItem.prototype),"trackingElement",value,this,true)}}]);return AnchorListItem}(BaseListItem(BaseComponent(HTMLAnchorElement)));var CLASSNAME$b='_coral-ButtonList';var ButtonList=function(_BaseList){_inherits(ButtonList,_BaseList);var _super=_createSuper(ButtonList);function ButtonList(){var _this;_classCallCheck(this,ButtonList);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'click [coral-list-item]':'_onItemClick'}));return _this}_createClass(ButtonList,[{key:"_onItemClick",value:function _onItemClick(event){this._trackEvent('click','coral-buttonlist-item',event,event.matchedTarget)}},{key:"render",value:function render(){_get(_getPrototypeOf(ButtonList.prototype),"render",this).call(this);this.classList.add(CLASSNAME$b)}},{key:"_itemTagName",get:function get(){return 'coral-buttonlist-item'}},{key:"_itemBaseTagName",get:function get(){return 'button'}}]);return ButtonList}(BaseList(BaseComponent(HTMLElement)));var CLASSNAME$c='_coral-ButtonList-item';var ButtonListItem=function(_BaseListItem){_inherits(ButtonListItem,_BaseListItem);var _super=_createSuper(ButtonListItem);function ButtonListItem(){_classCallCheck(this,ButtonListItem);return _super.apply(this,arguments)}_createClass(ButtonListItem,[{key:"render",value:function render(){_get(_getPrototypeOf(ButtonListItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$c)}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?(this.content||this).textContent.replace(/\s{2,}/g,' ').trim():this._trackingElement},set:function set(value){_set(_getPrototypeOf(ButtonListItem.prototype),"trackingElement",value,this,true)}}]);return ButtonListItem}(BaseListItem(BaseComponent(HTMLButtonElement)));var template$1=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["track"]=document.createElement("div");el0.setAttribute("handle","track");el0.className+=" _coral-CircleLoader-track";frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["fills"]=document.createElement("div");el2.setAttribute("handle","fills");el2.className+=" _coral-CircleLoader-fills";var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=document.createElement("div");el4.className+=" _coral-CircleLoader-fillMask1";var el5=document.createTextNode("\n    ");el4.appendChild(el5);var el6=this["subMask1"]=document.createElement("div");el6.setAttribute("handle","subMask1");el6.className+=" _coral-CircleLoader-fillSubMask1";var el7=document.createTextNode("\n      ");el6.appendChild(el7);var el8=document.createElement("div");el8.className+=" _coral-CircleLoader-fill";el6.appendChild(el8);var el9=document.createTextNode("\n    ");el6.appendChild(el9);el4.appendChild(el6);var el10=document.createTextNode("\n  ");el4.appendChild(el10);el2.appendChild(el4);var el11=document.createTextNode("\n  ");el2.appendChild(el11);var el12=document.createElement("div");el12.className+=" _coral-CircleLoader-fillMask2";var el13=document.createTextNode("\n    ");el12.appendChild(el13);var el14=this["subMask2"]=document.createElement("div");el14.setAttribute("handle","subMask2");el14.className+=" _coral-CircleLoader-fillSubMask2";var el15=document.createTextNode("\n      ");el14.appendChild(el15);var el16=document.createElement("div");el16.className+=" _coral-CircleLoader-fill";el14.appendChild(el16);var el17=document.createTextNode("\n    ");el14.appendChild(el17);el12.appendChild(el14);var el18=document.createTextNode("\n  ");el12.appendChild(el18);el2.appendChild(el12);var el19=document.createTextNode("\n");el2.appendChild(el19);frag.appendChild(el2);var el20=document.createTextNode("\n\n");frag.appendChild(el20);return frag};var variant$3={DEFAULT:'default',DOTS:'dots'};var size$3={SMALL:'S',MEDIUM:'M',LARGE:'L'};var CLASSNAME$d='_coral-CircleLoader';var Wait=function(_BaseComponent){_inherits(Wait,_BaseComponent);var _super=_createSuper(Wait);function Wait(){var _this;_classCallCheck(this,Wait);_this=_super.call(this);_this._elements={};template$1.call(_this._elements);return _this}_createClass(Wait,[{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='indeterminate'&&transform.booleanAttr(value)){this._oldValue=this._value||0}_get(_getPrototypeOf(Wait.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}},{key:"render",value:function render(){_get(_getPrototypeOf(Wait.prototype),"render",this).call(this);this.classList.add(CLASSNAME$d);this.setAttribute('role','progressbar');if(!this._size){this.size=size$3.MEDIUM}if(!this._variant){this.variant=variant$3.DEFAULT}if(!this._value){this.indeterminate=true}if(this.centered){this.centered=this.centered}var template=this.querySelectorAll('._coral-CircleLoader-track, ._coral-CircleLoader-fills');for(var i=0;i<template.length;i+=1){template[i].remove()}this.appendChild(this._elements.track);this.appendChild(this._elements.fills)}},{key:"size",get:function get(){return this._size||size$3.MEDIUM},set:function set(value){value=transform.string(value).toUpperCase();this._size=validate.enumeration(size$3)(value)&&value||size$3.MEDIUM;this._reflectAttribute('size',this._size);this.classList.toggle("".concat(CLASSNAME$d,"--large"),this._size===size$3.LARGE);this.classList.toggle("".concat(CLASSNAME$d,"--small"),this._size===size$3.SMALL)}},{key:"centered",get:function get(){return this._centered||false},set:function set(value){this._centered=transform.booleanAttr(value);this._reflectAttribute('centered',this._centered);this.classList.toggle("".concat(CLASSNAME$d,"--centered"),this._centered)}},{key:"variant",get:function get(){return this._variant||variant$3.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$3)(value)&&value||variant$3.DEFAULT;this._reflectAttribute('variant',this._variant)}},{key:"indeterminate",get:function get(){return this._indeterminate||false},set:function set(value){this._indeterminate=transform.booleanAttr(value);this._reflectAttribute('indeterminate',this._indeterminate);if(this._indeterminate){this.classList.add("".concat(CLASSNAME$d,"--indeterminate"));this.removeAttribute('aria-valuenow');this.removeAttribute('aria-valuemin');this.removeAttribute('aria-valuemax');this.value=0}else{this.classList.remove("".concat(CLASSNAME$d,"--indeterminate"));this.setAttribute('aria-valuemin','0');this.setAttribute('aria-valuemax','100');this.value=this._oldValue}}},{key:"value",get:function get(){return this.hasAttribute('indeterminate')?0:this._value||0},set:function set(value){value=transform.number(value)||0;if(value>100){value=100}else if(value<0){value=0}this._value=value;this._reflectAttribute('value',this._value);var subMask1=this._elements.subMask1;var subMask2=this._elements.subMask2;if(!this.hasAttribute('indeterminate')){var angle;if(value>0&&value<=50){angle=-180+value/50*180;subMask1.style.transform="rotate(".concat(angle,"deg)");subMask2.style.transform='rotate(-180deg)'}else if(value>50){angle=-180+(value-50)/50*180;subMask1.style.transform='rotate(0deg)';subMask2.style.transform="rotate(".concat(angle,"deg)")}else{subMask1.style.transform='';subMask2.style.transform=''}this.setAttribute('aria-valuenow',this._value);this.setAttribute('aria-valuemin','0');this.setAttribute('aria-valuemax','100')}else{subMask1.style.transform='';subMask2.style.transform=''}this.trigger('coral-wait:change')}}],[{key:"size",get:function get(){return size$3}},{key:"variant",get:function get(){return variant$3}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Wait),"observedAttributes",this).concat(['size','centered','variant','value','indeterminate'])}}]);return Wait}(BaseComponent(HTMLElement));commons._define('coral-wait',Wait);var template$2=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["loadIndicator"]=document.createElement("div");el0.setAttribute("handle","loadIndicator");el0.className+=" _coral-SelectList-loading";var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=document.createElement("coral-wait");el2.setAttribute("centered","");el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);return frag};var KEYPRESS_TIMEOUT_DURATION=1000;var SCROLL_BOTTOM_THRESHOLD=50;var SCROLL_DEBOUNCE=100;var ITEM_TAG_NAME='coral-selectlist-item';var GROUP_TAG_NAME='coral-selectlist-group';var CLASSNAME$e='_coral-Menu';var SelectList=function(_BaseComponent){_inherits(SelectList,_BaseComponent);var _super=_createSuper(SelectList);function SelectList(){var _this;_classCallCheck(this,SelectList);_this=_super.call(this);_this._delegateEvents({'scroll':'_onScroll','mouseenter':'_onMouseEnter','capture:blur':'_onBlur','click coral-selectlist-item':'_onItemClick','key:space coral-selectlist-item':'_onToggleItemKey','key:return coral-selectlist-item':'_onToggleItemKey','key:pageup coral-selectlist-item':'_focusPreviousItem','key:left coral-selectlist-item':'_focusPreviousItem','key:up coral-selectlist-item':'_focusPreviousItem','key:pagedown coral-selectlist-item':'_focusNextItem','key:right coral-selectlist-item':'_focusNextItem','key:down coral-selectlist-item':'_focusNextItem','key:home coral-selectlist-item':'_onHomeKey','key:end coral-selectlist-item':'_onEndKey','keypress coral-selectlist-item':'_onKeyPress','coral-selectlist-item:_selectedchanged':'_onItemSelectedChanged'});_this._keypressTimeoutDuration=KEYPRESS_TIMEOUT_DURATION;_this._elements={};template$2.call(_this._elements);_this._oldSelection=[];_this._keypressTimeoutID=null;_this._keypressSearchString='';_this._onDebouncedScroll=_this._onDebouncedScroll.bind(_assertThisInitialized(_this));_this.items._startHandlingItems(true);return _this}_createClass(SelectList,[{key:"_toggleItemSelection",value:function _toggleItemSelection(item){if(item){var beforeChangeEvent=this.trigger('coral-selectlist:beforechange',{item:item});if(!beforeChangeEvent.defaultPrevented){item[item.hasAttribute('selected')?'removeAttribute':'setAttribute']('selected','')}}}},{key:"_onBlur",value:function _onBlur(){this._resetTabTarget()}},{key:"_onItemClick",value:function _onItemClick(event){event.preventDefault();event.stopPropagation();var item=event.matchedTarget;this._toggleItemSelection(item);this._focusItem(item)}},{key:"_focusItem",value:function _focusItem(item){if(item){item.focus()}this._tabTarget=item}},{key:"_onToggleItemKey",value:function _onToggleItemKey(event){event.preventDefault();event.stopPropagation();var item=event.target;this._toggleItemSelection(item);this._focusItem(item)}},{key:"_focusPreviousItem",value:function _focusPreviousItem(event){event.preventDefault();this._focusItem(this.items._getPreviousSelectable(event.target))}},{key:"_focusNextItem",value:function _focusNextItem(event){event.preventDefault();this._focusItem(this.items._getNextSelectable(event.target))}},{key:"_focusFirstItem",value:function _focusFirstItem(){this._focusItem(this.items._getFirstSelectable())}},{key:"_focusLastItem",value:function _focusLastItem(){this._focusItem(this.items._getLastSelectable())}},{key:"_onHomeKey",value:function _onHomeKey(event){event.preventDefault();this._focusFirstItem()}},{key:"_onEndKey",value:function _onEndKey(event){event.preventDefault();this._focusLastItem()}},{key:"_onKeyPress",value:function _onKeyPress(event){var _this2=this;var newString=String.fromCharCode(event.which);window.clearTimeout(this._keypressTimeoutID);if(newString!==this._keypressSearchString){this._keypressSearchString+=newString}this._keypressTimeoutID=window.setTimeout(function(){_this2._keypressSearchString=''},this._keypressTimeoutDuration);var selectableItems=this.items._getSelectableItems();var currentIndex=selectableItems.indexOf(this._tabTarget);this._keypressSearchString=this._keypressSearchString.trim().toLowerCase();var start;if(currentIndex===-1){start=0}else if(this._keypressSearchString.length===1){start=currentIndex+1}else{start=currentIndex}var newFocusItem;var comparison;var item;for(var i=start;i<selectableItems.length;i+=1){item=selectableItems[i];comparison=item.textContent.trim().toLowerCase();if(comparison.indexOf(this._keypressSearchString)===0){newFocusItem=item;break}}if(!newFocusItem){for(var j=0;j<start;j+=1){item=selectableItems[j];comparison=item.textContent.trim().toLowerCase();if(comparison.indexOf(this._keypressSearchString)===0){newFocusItem=item;break}}}if(newFocusItem!==undefined){this._focusItem(newFocusItem);var focusedItem=this.querySelector('.focus-ring');if(focusedItem){focusedItem.classList.remove('focus-ring')}newFocusItem.classList.add('focus-ring')}}},{key:"_resetTabTarget",value:function _resetTabTarget(){var selectedItems=this.items._getAllSelected().filter(function(item){return!item.hasAttribute('hidden')});this._tabTarget=selectedItems.length?selectedItems[0]:this.items._getSelectableItems().filter(function(item){return!item.hasAttribute('hidden')})[0]}},{key:"_onScroll",value:function _onScroll(){window.clearTimeout(this._scrollTimeout);this._scrollTimeout=window.setTimeout(this._onDebouncedScroll,SCROLL_DEBOUNCE)}},{key:"_onMouseEnter",value:function _onMouseEnter(){if(this.contains(document.activeElement)){document.activeElement.blur()}}},{key:"_onDebouncedScroll",value:function _onDebouncedScroll(){if(this.scrollTop>=this.scrollHeight-this.clientHeight-SCROLL_BOTTOM_THRESHOLD){this.trigger('coral-selectlist:scrollbottom')}}},{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_validateSelection",value:function _validateSelection(item){var _this3=this;var selectedItems=this.selectedItems;if(!this.multiple){item=item||selectedItems[selectedItems.length-1];if(item&&item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this3._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}}this._resetTabTarget();this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItems=this.selectedItems;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&this._arraysAreDifferent(selectedItems,oldSelection)){if(this.multiple){this.trigger('coral-selectlist:change',{oldSelection:oldSelection,selection:selectedItems})}else{this.trigger('coral-selectlist:change',{oldSelection:oldSelection.length>1?oldSelection:oldSelection[0]||null,selection:selectedItems[0]||null})}this._oldSelection=selectedItems}}},{key:"_arraysAreDifferent",value:function _arraysAreDifferent(selection,oldSelection){var diff=[];if(oldSelection.length===selection.length){diff=oldSelection.filter(function(item){return selection.indexOf(item)===-1})}return oldSelection.length!==selection.length||diff.length!==0}},{key:"focus",value:function focus(){if(!this.contains(document.activeElement)){this._resetTabTarget();this._focusItem(this._tabTarget)}}},{key:"render",value:function render(){this.classList.add(CLASSNAME$e);if(!this.hasAttribute('role')){this.setAttribute('role','listbox')}if(!this.hasAttribute('aria-label')){this.setAttribute('aria-label',i18n.get('List'))}this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItems}},{key:"groups",get:function get(){if(!this._groups){this._groups=new SelectableCollection({host:this,itemTagName:GROUP_TAG_NAME,onItemAdded:this._validateSelection,onItemRemoved:this._validateSelection})}return this._groups}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:ITEM_TAG_NAME,onItemAdded:this._validateSelection,onItemRemoved:this._validateSelection})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getAllSelected()[0]||null}},{key:"selectedItems",get:function get(){return this.items._getAllSelected()}},{key:"multiple",get:function get(){return this._multiple||false},set:function set(value){this._multiple=transform.booleanAttr(value);this._reflectAttribute('multiple',this._multiple);this[this._multiple?'setAttribute':'removeAttribute']('aria-multiselectable',this._multiple);this._validateSelection()}},{key:"loading",get:function get(){return this._loading||false},set:function set(value){this._loading=transform.booleanAttr(value);this._reflectAttribute('loading',this._loading);var load=this._elements.loadIndicator;if(this.loading){var scrollToBottom=this.scrollTop>=this.scrollHeight-this.clientHeight;this.appendChild(load);if(scrollToBottom){this.scrollTop=this.scrollHeight}}else{load.remove()}}},{key:"_tabTarget",get:function get(){return this.__tabTarget||null},set:function set(value){this.__tabTarget=value;this.items.getAll().forEach(function(item){item.setAttribute('tabindex',item===value?0:-1)})}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(SelectList),"observedAttributes",this).concat(['loading','multiple'])}}]);return SelectList}(BaseComponent(HTMLElement));var CLASSNAME$f='_coral-SelectList-group';var SelectListGroup=function(_BaseComponent){_inherits(SelectListGroup,_BaseComponent);var _super=_createSuper(SelectListGroup);function SelectListGroup(){_classCallCheck(this,SelectListGroup);return _super.apply(this,arguments)}_createClass(SelectListGroup,[{key:"render",value:function render(){_get(_getPrototypeOf(SelectListGroup.prototype),"render",this).call(this);this.classList.add(CLASSNAME$f);this.setAttribute('role','group')}},{key:"label",get:function get(){return this._label||''},set:function set(value){this._label=transform.string(value);this._reflectAttribute('label',this._label);this.setAttribute('aria-label',this._label)}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-selectlist-item'})}return this._items}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(SelectListGroup),"observedAttributes",this).concat(['label'])}}]);return SelectListGroup}(BaseComponent(HTMLElement));var template$3=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["checkIcon"]=document.createElement("span");el0.className+=" _coral-SelectList-icon";el0.setAttribute("handle","checkIcon");el0.setAttribute("hidden","");var el1=document.createTextNode("\n  ");el0.appendChild(el1);data=data_0;this.checkIcon.innerHTML=data.Icon._renderSVG('spectrum-css-icon-CheckmarkMedium',['_coral-UIIcon-CheckmarkMedium','_coral-Menu-checkmark']);data_0=data;var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);return frag};var CLASSNAME$g='_coral-Menu-item';var VALID_ARIA_SELECTED_ROLES=['columnheader','gridcell','option','row','rowheader','tab','treeitem'];var VALID_ARIA_SELECTED_ROLES_REGEXP=new RegExp("^(".concat(VALID_ARIA_SELECTED_ROLES.join('|'),")$"));var SelectListItem=function(_BaseComponent){_inherits(SelectListItem,_BaseComponent);var _super=_createSuper(SelectListItem);function SelectListItem(){var _this;_classCallCheck(this,SelectListItem);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-selectlist-item-content')||document.createElement('coral-selectlist-item-content')};template$3.call(_this._elements,{Icon:Icon});return _this}_createClass(SelectListItem,[{key:"_getIconElement",value:function _getIconElement(){if(!this._elements.icon){this._elements.icon=this.querySelector('._coral-Menu-item-icon')||new Icon();this._elements.icon.size=Icon.size.SMALL;this._elements.icon.classList.add('_coral-Menu-item-icon')}return this._elements.icon}},{key:"render",value:function render(){_get(_getPrototypeOf(SelectListItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$g);if(!this.hasAttribute('role')){this.setAttribute('role','option')}var template=this.querySelector('._coral-SelectList-icon');if(template){template.remove()}var content=this._elements.content;if(!content.parentNode){while(this.firstChild){content.appendChild(this.firstChild)}}this.appendChild(this._elements.checkIcon);this.content=content}},{key:"value",get:function get(){return typeof this._value==='string'?this._value:this.textContent.replace(/\s{2,}/g,' ').trim()},set:function set(value){this._value=transform.string(value);this._reflectAttribute('value',this._value)}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-selectlist-item-content',insert:function insert(content){content.classList.add("".concat(CLASSNAME$g,"Label"));var checkIcon=this._elements.checkIcon;var contentIcon;if(navigator.userAgent.indexOf('MSIE')!==-1||navigator.appVersion.includes('Trident/')){var allContentIcons=Array.prototype.slice.call(content.querySelectorAll('coral-icon'));var allContentMenuIcons=Array.prototype.slice.call(content.querySelectorAll('coral-icon._coral-Menu-item-icon'));var contentIcons=allContentIcons.filter(function(icon){return allContentMenuIcons.indexOf(icon)===-1});contentIcon=contentIcons.length>0?contentIcons[0]:undefined}else{contentIcon=content.querySelector('coral-icon:not(._coral-Menu-item-icon)')}if(contentIcon&&contentIcon.icon){contentIcon.remove();this.icon=contentIcon.icon;var iconElement=this._getIconElement();if(contentIcon.alt||contentIcon.title){if(contentIcon.title){iconElement.title=contentIcon.title}if(contentIcon.alt){iconElement.alt=contentIcon.alt}}else{iconElement.alt=''}}this.insertBefore(content,this.contains(checkIcon)?checkIcon:null)}})}},{key:"icon",get:function get(){var el=this._getIconElement();return el.icon},set:function set(value){var el=this._getIconElement();if(transform.string(value)===''){el.remove()}else{this.insertBefore(el,this.firstChild)}el.icon=value}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this.disabled?false:this._selected);this.classList.toggle('is-selected',this._selected);if(this.hasAttribute('role')&&VALID_ARIA_SELECTED_ROLES_REGEXP.test(this.getAttribute('role'))){this.setAttribute('aria-selected',this._selected)}this._elements.checkIcon.hidden=!this._selected;this.trigger('coral-selectlist-item:_selectedchanged')}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.selected=this.selected}},{key:"_contentZones",get:function get(){return{'coral-selectlist-item-content':'content'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(SelectListItem),"observedAttributes",this).concat(['selected','disabled','value'])}}]);return SelectListItem}(BaseComponent(HTMLElement));var SelectListItemContent=(function(){return document.createElement('coral-selectlist-item-content')});commons.extend(strings,{'coral-component-selectlist':translations$3});commons._define('coral-anchorlist-item',AnchorListItem,{extends:'a'});commons._define('coral-anchorlist',AnchorList);commons._define('coral-buttonlist-item',ButtonListItem,{extends:'button'});commons._define('coral-buttonlist',ButtonList);commons._define('coral-selectlist-group',SelectListGroup);commons._define('coral-selectlist-item',SelectListItem);commons._define('coral-selectlist',SelectList);commons._define('coral-list-divider',ListDivider);commons._define('coral-list-item',ListItem);commons._define('coral-list',List);List.Divider=ListDivider;List.Item=ListItem;List.Item.Content=ListItemContent;AnchorList.Item=AnchorListItem;ButtonList.Item=ButtonListItem;SelectList.Group=SelectListGroup;SelectList.Item=SelectListItem;SelectList.Item.Content=SelectListItemContent;var translations$4={"en-US":{"Close":"Close"},"de-DE":{"Close":"Schließen"},"fr-FR":{"Close":"Fermer"},"it-IT":{"Close":"Chiudi"},"ja-JP":{"Close":"閉じる"},"es-ES":{"Close":"Cerrar"},"ko-KR":{"Close":"닫기"},"zh-CN":{"Close":"关闭"},"zh-TW":{"Close":"關閉"},"pt-BR":{"Close":"Fechar"},"nl-NL":{"Close":"Sluiten"},"da-DK":{"Close":"Luk"},"fi-FI":{"Close":"Sulje"},"nb-NO":{"Close":"Lukk"},"sv-SE":{"Close":"Stäng"},"cs-CZ":{"Close":"Zavřít"},"pl-PL":{"Close":"Zamknij"},"ru-RU":{"Close":"Закрыть"},"tr-TR":{"Close":"Kapat"}};var template$4=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["topTabCapture"]=document.createElement("div");el0.setAttribute("handle","topTabCapture");el0.setAttribute("coral-tabcapture","top");el0.setAttribute("tabindex","0");el0.setAttribute("role","presentation");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["intermediateTabCapture"]=document.createElement("div");el2.setAttribute("handle","intermediateTabCapture");el2.setAttribute("coral-tabcapture","intermediate");el2.setAttribute("tabindex","0");el2.setAttribute("role","presentation");frag.appendChild(el2);var el3=document.createTextNode("\n");frag.appendChild(el3);var el4=this["bottomTabCapture"]=document.createElement("div");el4.setAttribute("handle","bottomTabCapture");el4.setAttribute("coral-tabcapture","bottom");el4.setAttribute("tabindex","0");el4.setAttribute("role","presentation");frag.appendChild(el4);var el5=document.createTextNode("\n");frag.appendChild(el5);return frag};var trapFocus={ON:'on',OFF:'off'};var scrollOnFocus={ON:'on',OFF:'off'};var returnFocus={ON:'on',OFF:'off'};var focusOnShow={ON:'on',OFF:'off'};var FADETIME=350;var CLASSNAME$h='_coral-BaseOverlay';var COMPONENTS_WITH_OVERLAY="\n  coral-actionbar,\n  coral-autocomplete,\n  coral-colorinput,\n  coral-cyclebutton,\n  coral-datepicker,\n  coral-dialog,\n  coral-overlay,\n  coral-popover,\n  coral-quickactions,\n  coral-select,\n  coral-tooltip\n";var topTabCaptureEl;var bottomTabCaptureEl;var backdropEl;var startZIndex=10000;var TAB_KEY=9;var overlayStack=[];var OverlayManager={};function preventScroll(instance){return{preventScroll:instance.scrollOnFocus===scrollOnFocus.OFF}}var fadeTimeout;function cancelBackdropHide(){window.clearTimeout(fadeTimeout)}function hideEverythingBut(instance){var children=document.body.children;for(var i=0;i<children.length;i+=1){var child=children[i];if(child!==instance&&child.contains&&!child.contains(instance)){var currentAriaHidden=child.getAttribute('aria-hidden');if(currentAriaHidden){child._previousAriaHidden=child._previousAriaHidden||currentAriaHidden;if(currentAriaHidden==='true'){continue}}else{child._previousAriaHidden='false'}child.setAttribute('aria-hidden','true')}}instance.setAttribute('aria-hidden','false')}function doRepositionBackdrop(){var top=OverlayManager.top();if(top){for(var i=overlayStack.length-1;i>-1;i-=1){if(overlayStack[i].backdrop){backdropEl.style.zIndex=overlayStack[i].zIndex-1;break}}hideEverythingBut(top.instance)}}OverlayManager={pop:function pop(instance){var index=this.indexOf(instance);if(index===-1){return null}var overlay=overlayStack[index];overlayStack.splice(index,1);return overlay},push:function push(instance){var overlay=this.pop(instance)||{instance:instance};var zIndex=this.getHighestZIndex()+10;overlay.zIndex=zIndex;instance.style.zIndex=zIndex;overlayStack.push(overlay);if(overlay.backdrop){doRepositionBackdrop()}return overlay},indexOf:function indexOf(instance){for(var i=0;i<overlayStack.length;i+=1){if(overlayStack[i].instance===instance){return i}}return -1},get:function get(instance){var index=this.indexOf(instance);return index===-1?null:overlayStack[index]},top:function top(){var length=overlayStack.length;return length===0?null:overlayStack[length-1]},getHighestZIndex:function getHighestZIndex(){var overlay=this.top();return overlay?overlay.zIndex:startZIndex},some:function some(){return overlayStack.some.apply(overlayStack,arguments)},forEach:function forEach(){return overlayStack.forEach.apply(overlayStack,arguments)}};function createDocumentTabCaptureEls(){if(!topTabCaptureEl){topTabCaptureEl=document.createElement('div');topTabCaptureEl.setAttribute('coral-tabcapture','');topTabCaptureEl.setAttribute('role','presentation');topTabCaptureEl.tabIndex=0;document.body.insertBefore(topTabCaptureEl,document.body.firstChild);topTabCaptureEl.addEventListener('focus',function(){var top=OverlayManager.top();if(top&&top.instance.trapFocus===trapFocus.ON){Array.prototype.some.call(top.instance.querySelectorAll(commons.TABBABLE_ELEMENT_SELECTOR),function(item){if(item.offsetParent!==null&&!item.hasAttribute('coral-tabcapture')){item.focus(preventScroll(top));return true}return false})}});bottomTabCaptureEl=document.createElement('div');bottomTabCaptureEl.setAttribute('coral-tabcapture','');bottomTabCaptureEl.setAttribute('role','presentation');bottomTabCaptureEl.tabIndex=0;document.body.appendChild(bottomTabCaptureEl);bottomTabCaptureEl.addEventListener('focus',function(){var top=OverlayManager.top();if(top&&top.instance.trapFocus===trapFocus.ON){var tabbableElement=Array.prototype.filter.call(top.instance.querySelectorAll(commons.TABBABLE_ELEMENT_SELECTOR),function(item){return item.offsetParent!==null&&!item.hasAttribute('coral-tabcapture')}).pop();if(tabbableElement){tabbableElement.focus(preventScroll(top))}}})}else{if(document.body.firstElementChild!==topTabCaptureEl){document.body.insertBefore(topTabCaptureEl,document.body.firstChild)}if(document.body.lastElementChild!==bottomTabCaptureEl){document.body.appendChild(bottomTabCaptureEl)}}topTabCaptureEl.style.display='inline';bottomTabCaptureEl.style.display='inline'}function hideDocumentTabCaptureEls(){if(topTabCaptureEl){topTabCaptureEl.style.display='none';bottomTabCaptureEl.style.display='none'}}function showEverything(){var children=document.body.children;for(var i=0;i<children.length;i+=1){var child=children[i];child.setAttribute('aria-hidden',child._previousAriaHidden||'false')}}function doBackdropHide(){document.body.classList.remove('u-coral-noscroll');window.requestAnimationFrame(function(){backdropEl.classList.remove('is-open');cancelBackdropHide();fadeTimeout=window.setTimeout(function(){backdropEl.style.display='none'},FADETIME)});backdropEl._isOpen=false;showEverything()}function hideOrRepositionBackdrop(){if(!backdropEl||!backdropEl._isOpen){return}var keepBackdrop=OverlayManager.some(function(overlay){return!!overlay.backdrop});if(!keepBackdrop){doBackdropHide()}else{doRepositionBackdrop()}var top=OverlayManager.top();if(!top||!(top.instance.trapFocus===trapFocus.ON&&top.instance._requestedBackdrop)){hideDocumentTabCaptureEls()}else if(top&&top.instance.trapFocus===trapFocus.ON&&top.instance._requestedBackdrop){createDocumentTabCaptureEls()}}function handleBackdropClick(event){OverlayManager.forEach(function(overlay){if(typeof overlay.instance.backdropClickedCallback==='function'){overlay.instance.backdropClickedCallback(event)}})}function doBackdropShow(zIndex,instance){document.body.classList.add('u-coral-noscroll');if(!backdropEl){backdropEl=document.createElement('div');backdropEl.className='_coral-Underlay';document.body.appendChild(backdropEl);backdropEl.addEventListener('click',handleBackdropClick)}backdropEl.style.zIndex=zIndex-1;backdropEl._isOpen=true;backdropEl.style.display='';window.requestAnimationFrame(function(){backdropEl.classList.add('is-open');cancelBackdropHide()});hideEverythingBut(instance)}var BaseOverlay=function BaseOverlay(superClass){return function(_superClass){_inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){var _this;_classCallCheck(this,_class);_this=_super.call(this);_this._elements={};template$4.call(_this._elements);return _this}_createClass(_class,[{key:"_closeChildOverlays",value:function _closeChildOverlays(){var components=this.querySelectorAll(COMPONENTS_WITH_OVERLAY);for(var i=0;i<components.length;i+=1){var component=components[i];if(component.hasAttribute('open')){component.removeAttribute('open')}else if(component._elements&&component._elements.overlay&&component._elements.overlay.hasAttribute('open')){component._elements.overlay.removeAttribute('open')}}}},{key:"_debounce",value:function _debounce(f){window.clearTimeout(this._debounceId);this._debounceId=window.setTimeout(function(){f()},10)}},{key:"_isTopOverlay",value:function _isTopOverlay(){var top=OverlayManager.top();return top&&top.instance===this}},{key:"_pushOverlay",value:function _pushOverlay(){OverlayManager.push(this)}},{key:"_popOverlay",value:function _popOverlay(){OverlayManager.pop(this);hideOrRepositionBackdrop()}},{key:"_showBackdrop",value:function _showBackdrop(){var overlay=OverlayManager.get(this);if(overlay){overlay.backdrop=true;doBackdropShow(overlay.zIndex,this)}this._requestedBackdrop=true;if(!this.parentNode){this._showBackdropOnAttached=true}if(this.trapFocus===trapFocus.ON){createDocumentTabCaptureEls()}}},{key:"_hideBackdrop",value:function _hideBackdrop(){var overlay=OverlayManager.get(this);if(overlay){overlay.backdrop=false;hideOrRepositionBackdrop()}this._requestedBackdrop=false}},{key:"_handleRootKeypress",value:function _handleRootKeypress(event){if(event.target===this&&event.keyCode===TAB_KEY){this._focusOn('first');event.preventDefault()}}},{key:"_handleTabCaptureFocus",value:function _handleTabCaptureFocus(event){if(this._ignoreTabCapture){this._ignoreTabCapture=false;return}var target=event.target;var which=target===this._elements.intermediateTabCapture?'first':'last';this._focusOn(which)}},{key:"_handleFocus",value:function _handleFocus(){if(this.focusOnShow===focusOnShow.ON){this._focusOn('first')}else if(this.focusOnShow instanceof HTMLElement){this.focusOnShow.focus(preventScroll(this))}else if(typeof this.focusOnShow==='string'&&this.focusOnShow!==focusOnShow.OFF){var selectedElement=this.querySelector("".concat(this.focusOnShow,":not([coral-tabcapture])"));if(selectedElement){selectedElement.focus(preventScroll(this))}else{this._focusOn('first')}}}},{key:"_handleReturnFocus",value:function _handleReturnFocus(){if(this.returnFocus===returnFocus.ON&&this._elementToFocusWhenHidden){if(document.activeElement&&!this.contains(document.activeElement)){return}this._elementToFocusWhenHidden._ignoreTabCapture=true;this._elementToFocusWhenHidden.focus(preventScroll(this));this._elementToFocusWhenHidden._ignoreTabCapture=false;this._elementToFocusWhenHidden=null}}},{key:"_focusOn",value:function _focusOn(which){var focusableTarget=this._getFocusableElement(which);if(focusableTarget){focusableTarget.focus(preventScroll(this))}else{this.focus(preventScroll(this))}}},{key:"_getFocusableElements",value:function _getFocusableElements(){return Array.prototype.filter.call(this.querySelectorAll(commons.FOCUSABLE_ELEMENT_SELECTOR),function(item){return item.offsetParent!==null&&!item.hasAttribute('coral-tabcapture')})}},{key:"_getFocusableElement",value:function _getFocusableElement(which){var focusableTarget;if(which==='first'||which==='last'){var focusableElements=this._getFocusableElements();focusableTarget=focusableElements[which==='first'?'shift':'pop']()}return focusableTarget}},{key:"show",value:function show(){this.open=true;return this}},{key:"hide",value:function hide(){this.open=false;return this}},{key:"returnFocusTo",value:function returnFocusTo(element){if(this.returnFocus===returnFocus.OFF){this.returnFocus=returnFocus.ON}if(!element.matches(commons.FOCUSABLE_ELEMENT_SELECTOR)){element.setAttribute('tabindex',-1);var tempVent=new vent(element);tempVent.on('blur.afterFocus',function(event){window.requestAnimationFrame(function(){var top=OverlayManager.top();if(top&&top.instance.contains(document.activeElement)){return}tempVent.off('blur.afterFocus');event.matchedTarget.removeAttribute('tabindex')})},true)}this._returnFocusToElement=element;return this}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(_class.prototype),"connectedCallback",this).call(this);if(!this.hasAttribute('trapfocus')){this.trapFocus=this.trapFocus}if(!this.hasAttribute('returnfocus')){this.returnFocus=this.returnFocus}if(!this.hasAttribute('focusonshow')){this.focusOnShow=this.focusOnShow}if(!this.hasAttribute('scrollonfocus')){this.scrollOnFocus=this.scrollOnFocus}if(this.open){this._pushOverlay();if(this._showBackdropOnAttached){this._showBackdrop()}}}},{key:"render",value:function render(){_get(_getPrototypeOf(_class.prototype),"render",this).call(this);this.classList.add(CLASSNAME$h)}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(_class.prototype),"disconnectedCallback",this).call(this);if(this.open){this._popOverlay();if(this._requestedBackdrop){this._showBackdropOnAttached=true}}}},{key:"trapFocus",get:function get(){return this._trapFocus||trapFocus.OFF},set:function set(value){value=transform.string(value).toLowerCase();this._trapFocus=validate.enumeration(trapFocus)(value)&&value||trapFocus.OFF;if(this._trapFocus===trapFocus.ON){if(this.tabIndex<0){this.tabIndex=0}this.insertBefore(this._elements.topTabCapture,this.firstElementChild);this.appendChild(this._elements.intermediateTabCapture);this.appendChild(this._elements.bottomTabCapture);this._handleTabCaptureFocus=this._handleTabCaptureFocus.bind(this);this._handleRootKeypress=this._handleRootKeypress.bind(this);this._vent.on('keydown',this._handleRootKeypress);this._vent.on('focus','[coral-tabcapture]',this._handleTabCaptureFocus)}else if(this._trapFocus===trapFocus.OFF){this._elements.topTabCapture&&this._elements.topTabCapture.remove();this._elements.intermediateTabCapture&&this._elements.intermediateTabCapture.remove();this._elements.bottomTabCapture&&this._elements.bottomTabCapture.remove();this._vent.off('keydown',this._handleRootKeypress);this._vent.off('focus','[coral-tabcapture]',this._handleTabCaptureFocus)}}},{key:"returnFocus",get:function get(){return this._returnFocus||returnFocus.OFF},set:function set(value){value=transform.string(value).toLowerCase();this._returnFocus=validate.enumeration(returnFocus)(value)&&value||returnFocus.OFF}},{key:"scrollOnFocus",get:function get(){return this._scrollOnFocus||scrollOnFocus.ON},set:function set(value){value=transform.string(value).toLowerCase();this._scrollOnFocus=validate.enumeration(scrollOnFocus)(value)&&value||scrollOnFocus.ON}},{key:"focusOnShow",get:function get(){return this._focusOnShow||focusOnShow.ON},set:function set(value){if(typeof value==='string'||value instanceof HTMLElement){this._focusOnShow=value}}},{key:"open",get:function get(){return this._open||false},set:function set(value){var _this2=this;var silenced=this._silenced;value=transform.booleanAttr(value);this.trigger('coral-overlay:_animate');var beforeEvent=this.trigger(value?'coral-overlay:beforeopen':'coral-overlay:beforeclose');if(!beforeEvent.defaultPrevented){var open=this._open=value;this._reflectAttribute('open',open);if(open){this.removeAttribute('aria-hidden')}else{this.setAttribute('aria-hidden',!open)}if(this.parentNode){if(open){this._pushOverlay();if(this.returnFocus===returnFocus.ON){this._elementToFocusWhenHidden=this._elementToFocusWhenHidden||this._returnFocusToElement||(document.activeElement===document.body?null:document.activeElement)}}else{this._popOverlay()}}window.requestAnimationFrame(function(){_this2._silenced=silenced;if(open){if(_this2.trapFocus===trapFocus.ON){if(_this2._elements.topTabCapture!==_this2.firstElementChild||_this2._elements.bottomTabCapture!==_this2.lastElementChild||_this2._elements.bottomTabCapture.previousElementSibling!==_this2._elements.intermediateTabCapture){_this2.insertBefore(_this2._elements.intermediateTabCapture,_this2.firstElementChild);_this2.appendChild(_this2._elements.intermediateTabCapture);_this2.appendChild(_this2._elements.bottomTabCapture)}}_this2.style.visibility='';_this2.style.display='';window.requestAnimationFrame(function(){_this2.classList.add('is-open')});var openComplete=function openComplete(){if(_this2.open){_this2._debounce(function(){_this2._handleFocus();_this2.trigger('coral-overlay:open');_this2._silenced=false})}};if(_this2._overlayAnimationTime){commons.transitionEnd(_this2,openComplete)}else{openComplete()}}else{_this2.classList.remove('is-open');var closeComplete=function closeComplete(){if(!_this2.open){_this2.style.display='none';_this2.style.visibility='initial';_this2._handleReturnFocus();_this2._debounce(function(){_this2._closeChildOverlays();_this2.trigger('coral-overlay:close');_this2._silenced=false})}};if(_this2._overlayAnimationTime){commons.transitionEnd(_this2,closeComplete)}else{closeComplete()}}})}}}],[{key:"_OverlayManager",get:function get(){return OverlayManager}},{key:"trapFocus",get:function get(){return trapFocus}},{key:"returnFocus",get:function get(){return returnFocus}},{key:"scrollOnFocus",get:function get(){return scrollOnFocus}},{key:"focusOnShow",get:function get(){return focusOnShow}},{key:"FADETIME",get:function get(){return FADETIME}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(_class),"_attributePropertyMap",this),{trapfocus:'trapFocus',returnfocus:'returnFocus',focusonshow:'focusOnShow'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['trapfocus','returnfocus','focusonshow','open'])}}]);return _class}(superClass)};var isBrowser=typeof window!=='undefined'&&typeof document!=='undefined'&&typeof navigator!=='undefined';var timeoutDuration=function(){var longerTimeoutBrowsers=['Edge','Trident','Firefox'];for(var i=0;i<longerTimeoutBrowsers.length;i+=1){if(isBrowser&&navigator.userAgent.indexOf(longerTimeoutBrowsers[i])>=0){return 1}}return 0}();function microtaskDebounce(fn){var called=false;return function(){if(called){return}called=true;window.Promise.resolve().then(function(){called=false;fn()})}}function taskDebounce(fn){var scheduled=false;return function(){if(!scheduled){scheduled=true;setTimeout(function(){scheduled=false;fn()},timeoutDuration)}}}var supportsMicroTasks=isBrowser&&window.Promise;var debounce=supportsMicroTasks?microtaskDebounce:taskDebounce;function isFunction$1(functionToCheck){var getType={};return functionToCheck&&getType.toString.call(functionToCheck)==='[object Function]'}function getStyleComputedProperty(element,property){if(element.nodeType!==1){return[]}var window=element.ownerDocument.defaultView;var css=window.getComputedStyle(element,null);return property?css[property]:css}function getParentNode(element){if(element.nodeName==='HTML'){return element}return element.parentNode||element.host}function getScrollParent$1(element){if(!element){return document.body}switch(element.nodeName){case 'HTML':case 'BODY':return element.ownerDocument.body;case '#document':return element.body}var _getStyleComputedProp=getStyleComputedProperty(element),overflow=_getStyleComputedProp.overflow,overflowX=_getStyleComputedProp.overflowX,overflowY=_getStyleComputedProp.overflowY;if(/(auto|scroll|overlay)/.test(overflow+overflowY+overflowX)){return element}return getScrollParent$1(getParentNode(element))}function getReferenceNode(reference){return reference&&reference.referenceNode?reference.referenceNode:reference}var isIE11=isBrowser&&!!(window.MSInputMethodContext&&document.documentMode);var isIE10=isBrowser&&/MSIE 10/.test(navigator.userAgent);function isIE(version){if(version===11){return isIE11}if(version===10){return isIE10}return isIE11||isIE10}function getOffsetParent(element){if(!element){return document.documentElement}var noOffsetParent=isIE(10)?document.body:null;var offsetParent=element.offsetParent||null;while(offsetParent===noOffsetParent&&element.nextElementSibling){offsetParent=(element=element.nextElementSibling).offsetParent}var nodeName=offsetParent&&offsetParent.nodeName;if(!nodeName||nodeName==='BODY'||nodeName==='HTML'){return element?element.ownerDocument.documentElement:document.documentElement}if(['TH','TD','TABLE'].indexOf(offsetParent.nodeName)!==-1&&getStyleComputedProperty(offsetParent,'position')==='static'){return getOffsetParent(offsetParent)}return offsetParent}function isOffsetContainer(element){var nodeName=element.nodeName;if(nodeName==='BODY'){return false}return nodeName==='HTML'||getOffsetParent(element.firstElementChild)===element}function getRoot(node){if(node.parentNode!==null){return getRoot(node.parentNode)}return node}function findCommonOffsetParent(element1,element2){if(!element1||!element1.nodeType||!element2||!element2.nodeType){return document.documentElement}var order=element1.compareDocumentPosition(element2)&Node.DOCUMENT_POSITION_FOLLOWING;var start=order?element1:element2;var end=order?element2:element1;var range=document.createRange();range.setStart(start,0);range.setEnd(end,0);var commonAncestorContainer=range.commonAncestorContainer;if(element1!==commonAncestorContainer&&element2!==commonAncestorContainer||start.contains(end)){if(isOffsetContainer(commonAncestorContainer)){return commonAncestorContainer}return getOffsetParent(commonAncestorContainer)}var element1root=getRoot(element1);if(element1root.host){return findCommonOffsetParent(element1root.host,element2)}else{return findCommonOffsetParent(element1,getRoot(element2).host)}}function getScroll(element){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'top';var upperSide=side==='top'?'scrollTop':'scrollLeft';var nodeName=element.nodeName;if(nodeName==='BODY'||nodeName==='HTML'){var html=element.ownerDocument.documentElement;var scrollingElement=element.ownerDocument.scrollingElement||html;return scrollingElement[upperSide]}return element[upperSide]}function includeScroll(rect,element){var subtract=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var scrollTop=getScroll(element,'top');var scrollLeft=getScroll(element,'left');var modifier=subtract?-1:1;rect.top+=scrollTop*modifier;rect.bottom+=scrollTop*modifier;rect.left+=scrollLeft*modifier;rect.right+=scrollLeft*modifier;return rect}function getBordersSize(styles,axis){var sideA=axis==='x'?'Left':'Top';var sideB=sideA==='Left'?'Right':'Bottom';return parseFloat(styles['border'+sideA+'Width'])+parseFloat(styles['border'+sideB+'Width'])}function getSize(axis,body,html,computedStyle){return Math.max(body['offset'+axis],body['scroll'+axis],html['client'+axis],html['offset'+axis],html['scroll'+axis],isIE(10)?parseInt(html['offset'+axis])+parseInt(computedStyle['margin'+(axis==='Height'?'Top':'Left')])+parseInt(computedStyle['margin'+(axis==='Height'?'Bottom':'Right')]):0)}function getWindowSizes(document){var body=document.body;var html=document.documentElement;var computedStyle=isIE(10)&&getComputedStyle(html);return{height:getSize('Height',body,html,computedStyle),width:getSize('Width',body,html,computedStyle)}}var classCallCheck=function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i+=1){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor){descriptor.writable=true}Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps){defineProperties(Constructor.prototype,protoProps)}if(staticProps){defineProperties(Constructor,staticProps)}return Constructor}}();var defineProperty$2=function defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj};var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i+=1){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function getClientRect(offsets){return _extends({},offsets,{right:offsets.left+offsets.width,bottom:offsets.top+offsets.height})}function getBoundingClientRect(element){var rect={};try{if(isIE(10)){rect=element.getBoundingClientRect();var scrollTop=getScroll(element,'top');var scrollLeft=getScroll(element,'left');rect.top+=scrollTop;rect.left+=scrollLeft;rect.bottom+=scrollTop;rect.right+=scrollLeft}else{rect=element.getBoundingClientRect()}}catch(e){}var result={left:rect.left,top:rect.top,width:rect.right-rect.left,height:rect.bottom-rect.top};var sizes=element.nodeName==='HTML'?getWindowSizes(element.ownerDocument):{};var width=sizes.width||element.clientWidth||result.width;var height=sizes.height||element.clientHeight||result.height;var horizScrollbar=element.offsetWidth-width;var vertScrollbar=element.offsetHeight-height;if(horizScrollbar||vertScrollbar){var styles=getStyleComputedProperty(element);horizScrollbar-=getBordersSize(styles,'x');vertScrollbar-=getBordersSize(styles,'y');result.width-=horizScrollbar;result.height-=vertScrollbar}return getClientRect(result)}function getOffsetRectRelativeToArbitraryNode(children,parent){var fixedPosition=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var isIE10=isIE(10);var isHTML=parent.nodeName==='HTML';var childrenRect=getBoundingClientRect(children);var parentRect=getBoundingClientRect(parent);var scrollParent=getScrollParent$1(children);var styles=getStyleComputedProperty(parent);var borderTopWidth=parseFloat(styles.borderTopWidth);var borderLeftWidth=parseFloat(styles.borderLeftWidth);if(fixedPosition&&isHTML){parentRect.top=Math.max(parentRect.top,0);parentRect.left=Math.max(parentRect.left,0)}var offsets=getClientRect({top:childrenRect.top-parentRect.top-borderTopWidth,left:childrenRect.left-parentRect.left-borderLeftWidth,width:childrenRect.width,height:childrenRect.height});offsets.marginTop=0;offsets.marginLeft=0;if(!isIE10&&isHTML){var marginTop=parseFloat(styles.marginTop);var marginLeft=parseFloat(styles.marginLeft);offsets.top-=borderTopWidth-marginTop;offsets.bottom-=borderTopWidth-marginTop;offsets.left-=borderLeftWidth-marginLeft;offsets.right-=borderLeftWidth-marginLeft;offsets.marginTop=marginTop;offsets.marginLeft=marginLeft}if(isIE10&&!fixedPosition?parent.contains(scrollParent):parent===scrollParent&&scrollParent.nodeName!=='BODY'){offsets=includeScroll(offsets,parent)}return offsets}function getViewportOffsetRectRelativeToArtbitraryNode(element){var excludeScroll=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var html=element.ownerDocument.documentElement;var relativeOffset=getOffsetRectRelativeToArbitraryNode(element,html);var width=Math.max(html.clientWidth,window.innerWidth||0);var height=Math.max(html.clientHeight,window.innerHeight||0);var scrollTop=!excludeScroll?getScroll(html):0;var scrollLeft=!excludeScroll?getScroll(html,'left'):0;var offset={top:scrollTop-relativeOffset.top+relativeOffset.marginTop,left:scrollLeft-relativeOffset.left+relativeOffset.marginLeft,width:width,height:height};return getClientRect(offset)}function isFixed(element){var nodeName=element.nodeName;if(nodeName==='BODY'||nodeName==='HTML'){return false}if(getStyleComputedProperty(element,'position')==='fixed'){return true}var parentNode=getParentNode(element);if(!parentNode){return false}return isFixed(parentNode)}function getFixedPositionOffsetParent(element){if(!element||!element.parentElement||isIE()){return document.documentElement}var el=element.parentElement;while(el&&getStyleComputedProperty(el,'transform')==='none'){el=el.parentElement}return el||document.documentElement}function getBoundaries(popper,reference,padding,boundariesElement){var fixedPosition=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var boundaries={top:0,left:0};var offsetParent=fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,getReferenceNode(reference));if(boundariesElement==='viewport'){boundaries=getViewportOffsetRectRelativeToArtbitraryNode(offsetParent,fixedPosition)}else{var boundariesNode=void 0;if(boundariesElement==='scrollParent'){boundariesNode=getScrollParent$1(getParentNode(reference));if(boundariesNode.nodeName==='BODY'){boundariesNode=popper.ownerDocument.documentElement}}else if(boundariesElement==='window'){boundariesNode=popper.ownerDocument.documentElement}else{boundariesNode=boundariesElement}var offsets=getOffsetRectRelativeToArbitraryNode(boundariesNode,offsetParent,fixedPosition);if(boundariesNode.nodeName==='HTML'&&!isFixed(offsetParent)){var _getWindowSizes=getWindowSizes(popper.ownerDocument),height=_getWindowSizes.height,width=_getWindowSizes.width;boundaries.top+=offsets.top-offsets.marginTop;boundaries.bottom=height+offsets.top;boundaries.left+=offsets.left-offsets.marginLeft;boundaries.right=width+offsets.left}else{boundaries=offsets}}padding=padding||0;var isPaddingNumber=typeof padding==='number';boundaries.left+=isPaddingNumber?padding:padding.left||0;boundaries.top+=isPaddingNumber?padding:padding.top||0;boundaries.right-=isPaddingNumber?padding:padding.right||0;boundaries.bottom-=isPaddingNumber?padding:padding.bottom||0;return boundaries}function getArea(_ref){var width=_ref.width,height=_ref.height;return width*height}function computeAutoPlacement(placement,refRect,popper,reference,boundariesElement){var padding=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(placement.indexOf('auto')===-1){return placement}var boundaries=getBoundaries(popper,reference,padding,boundariesElement);var rects={top:{width:boundaries.width,height:refRect.top-boundaries.top},right:{width:boundaries.right-refRect.right,height:boundaries.height},bottom:{width:boundaries.width,height:boundaries.bottom-refRect.bottom},left:{width:refRect.left-boundaries.left,height:boundaries.height}};var sortedAreas=Object.keys(rects).map(function(key){return _extends({key:key},rects[key],{area:getArea(rects[key])})}).sort(function(a,b){return b.area-a.area});var filteredAreas=sortedAreas.filter(function(_ref2){var width=_ref2.width,height=_ref2.height;return width>=popper.clientWidth&&height>=popper.clientHeight});var computedPlacement=filteredAreas.length>0?filteredAreas[0].key:sortedAreas[0].key;var variation=placement.split('-')[1];return computedPlacement+(variation?'-'+variation:'')}function getReferenceOffsets(state,popper,reference){var fixedPosition=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var commonOffsetParent=fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,getReferenceNode(reference));return getOffsetRectRelativeToArbitraryNode(reference,commonOffsetParent,fixedPosition)}function getOuterSizes(element){var window=element.ownerDocument.defaultView;var styles=window.getComputedStyle(element);var x=parseFloat(styles.marginTop||0)+parseFloat(styles.marginBottom||0);var y=parseFloat(styles.marginLeft||0)+parseFloat(styles.marginRight||0);var result={width:element.offsetWidth+y,height:element.offsetHeight+x};return result}function getOppositePlacement(placement){var hash={left:'right',right:'left',bottom:'top',top:'bottom'};return placement.replace(/left|right|bottom|top/g,function(matched){return hash[matched]})}function getPopperOffsets(popper,referenceOffsets,placement){placement=placement.split('-')[0];var popperRect=getOuterSizes(popper);var popperOffsets={width:popperRect.width,height:popperRect.height};var isHoriz=['right','left'].indexOf(placement)!==-1;var mainSide=isHoriz?'top':'left';var secondarySide=isHoriz?'left':'top';var measurement=isHoriz?'height':'width';var secondaryMeasurement=!isHoriz?'height':'width';popperOffsets[mainSide]=referenceOffsets[mainSide]+referenceOffsets[measurement]/2-popperRect[measurement]/2;if(placement===secondarySide){popperOffsets[secondarySide]=referenceOffsets[secondarySide]-popperRect[secondaryMeasurement]}else{popperOffsets[secondarySide]=referenceOffsets[getOppositePlacement(secondarySide)]}return popperOffsets}function find(arr,check){if(Array.prototype.find){return arr.find(check)}return arr.filter(check)[0]}function findIndex(arr,prop,value){if(Array.prototype.findIndex){return arr.findIndex(function(cur){return cur[prop]===value})}var match=find(arr,function(obj){return obj[prop]===value});return arr.indexOf(match)}function runModifiers(modifiers,data,ends){var modifiersToRun=ends===undefined?modifiers:modifiers.slice(0,findIndex(modifiers,'name',ends));modifiersToRun.forEach(function(modifier){if(modifier['function']){console.warn('`modifier.function` is deprecated, use `modifier.fn`!')}var fn=modifier['function']||modifier.fn;if(modifier.enabled&&isFunction$1(fn)){data.offsets.popper=getClientRect(data.offsets.popper);data.offsets.reference=getClientRect(data.offsets.reference);data=fn(data,modifier)}});return data}function update(){if(this.state.isDestroyed){return}var data={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:false,offsets:{}};data.offsets.reference=getReferenceOffsets(this.state,this.popper,this.reference,this.options.positionFixed);data.placement=computeAutoPlacement(this.options.placement,data.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding);data.originalPlacement=data.placement;data.positionFixed=this.options.positionFixed;data.offsets.popper=getPopperOffsets(this.popper,data.offsets.reference,data.placement);data.offsets.popper.position=this.options.positionFixed?'fixed':'absolute';data=runModifiers(this.modifiers,data);if(!this.state.isCreated){this.state.isCreated=true;this.options.onCreate(data)}else{this.options.onUpdate(data)}}function isModifierEnabled(modifiers,modifierName){return modifiers.some(function(_ref){var name=_ref.name,enabled=_ref.enabled;return enabled&&name===modifierName})}function getSupportedPropertyName(property){var prefixes=[false,'ms','Webkit','Moz','O'];var upperProp=property.charAt(0).toUpperCase()+property.slice(1);for(var i=0;i<prefixes.length;i+=1){var prefix=prefixes[i];var toCheck=prefix?''+prefix+upperProp:property;if(typeof document.body.style[toCheck]!=='undefined'){return toCheck}}return null}function destroy(){this.state.isDestroyed=true;if(isModifierEnabled(this.modifiers,'applyStyle')){this.popper.removeAttribute('x-placement');this.popper.style.position='';this.popper.style.top='';this.popper.style.left='';this.popper.style.right='';this.popper.style.bottom='';this.popper.style.willChange='';this.popper.style[getSupportedPropertyName('transform')]=''}this.disableEventListeners();if(this.options.removeOnDestroy){this.popper.parentNode.removeChild(this.popper)}return this}function getWindow(element){var ownerDocument=element.ownerDocument;return ownerDocument?ownerDocument.defaultView:window}function attachToScrollParents(scrollParent,event,callback,scrollParents){var isBody=scrollParent.nodeName==='BODY';var target=isBody?scrollParent.ownerDocument.defaultView:scrollParent;target.addEventListener(event,callback,{passive:true});if(!isBody){attachToScrollParents(getScrollParent$1(target.parentNode),event,callback,scrollParents)}scrollParents.push(target)}function setupEventListeners(reference,options,state,updateBound){state.updateBound=updateBound;getWindow(reference).addEventListener('resize',state.updateBound,{passive:true});var scrollElement=getScrollParent$1(reference);attachToScrollParents(scrollElement,'scroll',state.updateBound,state.scrollParents);state.scrollElement=scrollElement;state.eventsEnabled=true;return state}function enableEventListeners(){if(!this.state.eventsEnabled){this.state=setupEventListeners(this.reference,this.options,this.state,this.scheduleUpdate)}}function removeEventListeners(reference,state){getWindow(reference).removeEventListener('resize',state.updateBound);state.scrollParents.forEach(function(target){target.removeEventListener('scroll',state.updateBound)});state.updateBound=null;state.scrollParents=[];state.scrollElement=null;state.eventsEnabled=false;return state}function disableEventListeners(){if(this.state.eventsEnabled){cancelAnimationFrame(this.scheduleUpdate);this.state=removeEventListeners(this.reference,this.state)}}function isNumeric(n){return n!==''&&!isNaN(parseFloat(n))&&isFinite(n)}function setStyles(element,styles){Object.keys(styles).forEach(function(prop){var unit='';if(['width','height','top','right','bottom','left'].indexOf(prop)!==-1&&isNumeric(styles[prop])){unit='px'}element.style[prop]=styles[prop]+unit})}function setAttributes(element,attributes){Object.keys(attributes).forEach(function(prop){var value=attributes[prop];if(value!==false){element.setAttribute(prop,attributes[prop])}else{element.removeAttribute(prop)}})}function applyStyle(data){setStyles(data.instance.popper,data.styles);setAttributes(data.instance.popper,data.attributes);if(data.arrowElement&&Object.keys(data.arrowStyles).length){setStyles(data.arrowElement,data.arrowStyles)}return data}function applyStyleOnLoad(reference,popper,options,modifierOptions,state){var referenceOffsets=getReferenceOffsets(state,popper,reference,options.positionFixed);var placement=computeAutoPlacement(options.placement,referenceOffsets,popper,reference,options.modifiers.flip.boundariesElement,options.modifiers.flip.padding);popper.setAttribute('x-placement',placement);setStyles(popper,{position:options.positionFixed?'fixed':'absolute'});return options}function getRoundedOffsets(data,shouldRound){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var round=Math.round,floor=Math.floor;var noRound=function noRound(v){return v};var referenceWidth=round(reference.width);var popperWidth=round(popper.width);var isVertical=['left','right'].indexOf(data.placement)!==-1;var isVariation=data.placement.indexOf('-')!==-1;var sameWidthParity=referenceWidth%2===popperWidth%2;var bothOddWidth=referenceWidth%2===1&&popperWidth%2===1;var horizontalToInteger=!shouldRound?noRound:isVertical||isVariation||sameWidthParity?round:floor;var verticalToInteger=!shouldRound?noRound:round;return{left:horizontalToInteger(bothOddWidth&&!isVariation&&shouldRound?popper.left-1:popper.left),top:verticalToInteger(popper.top),bottom:verticalToInteger(popper.bottom),right:horizontalToInteger(popper.right)}}var isFirefox=isBrowser&&/Firefox/i.test(navigator.userAgent);function computeStyle(data,options){var x=options.x,y=options.y;var popper=data.offsets.popper;var legacyGpuAccelerationOption=find(data.instance.modifiers,function(modifier){return modifier.name==='applyStyle'}).gpuAcceleration;if(legacyGpuAccelerationOption!==undefined){console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!')}var gpuAcceleration=legacyGpuAccelerationOption!==undefined?legacyGpuAccelerationOption:options.gpuAcceleration;var offsetParent=getOffsetParent(data.instance.popper);var offsetParentRect=getBoundingClientRect(offsetParent);var styles={position:popper.position};var offsets=getRoundedOffsets(data,window.devicePixelRatio<2||!isFirefox);var sideA=x==='bottom'?'top':'bottom';var sideB=y==='right'?'left':'right';var prefixedProperty=getSupportedPropertyName('transform');var left=void 0,top=void 0;if(sideA==='bottom'){if(offsetParent.nodeName==='HTML'){top= -offsetParent.clientHeight+offsets.bottom}else{top= -offsetParentRect.height+offsets.bottom}}else{top=offsets.top}if(sideB==='right'){if(offsetParent.nodeName==='HTML'){left= -offsetParent.clientWidth+offsets.right}else{left= -offsetParentRect.width+offsets.right}}else{left=offsets.left}if(gpuAcceleration&&prefixedProperty){styles[prefixedProperty]='translate3d('+left+'px, '+top+'px, 0)';styles[sideA]=0;styles[sideB]=0;styles.willChange='transform'}else{var invertTop=sideA==='bottom'?-1:1;var invertLeft=sideB==='right'?-1:1;styles[sideA]=top*invertTop;styles[sideB]=left*invertLeft;styles.willChange=sideA+', '+sideB}var attributes={'x-placement':data.placement};data.attributes=_extends({},attributes,data.attributes);data.styles=_extends({},styles,data.styles);data.arrowStyles=_extends({},data.offsets.arrow,data.arrowStyles);return data}function isModifierRequired(modifiers,requestingName,requestedName){var requesting=find(modifiers,function(_ref){var name=_ref.name;return name===requestingName});var isRequired=!!requesting&&modifiers.some(function(modifier){return modifier.name===requestedName&&modifier.enabled&&modifier.order<requesting.order});if(!isRequired){var _requesting='`'+requestingName+'`';var requested='`'+requestedName+'`';console.warn(requested+' modifier is required by '+_requesting+' modifier in order to work, be sure to include it before '+_requesting+'!')}return isRequired}function arrow(data,options){var _data$offsets$arrow;if(!isModifierRequired(data.instance.modifiers,'arrow','keepTogether')){return data}var arrowElement=options.element;if(typeof arrowElement==='string'){arrowElement=data.instance.popper.querySelector(arrowElement);if(!arrowElement){return data}}else{if(!data.instance.popper.contains(arrowElement)){console.warn('WARNING: `arrow.element` must be child of its popper element!');return data}}var placement=data.placement.split('-')[0];var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var isVertical=['left','right'].indexOf(placement)!==-1;var len=isVertical?'height':'width';var sideCapitalized=isVertical?'Top':'Left';var side=sideCapitalized.toLowerCase();var altSide=isVertical?'left':'top';var opSide=isVertical?'bottom':'right';var arrowElementSize=getOuterSizes(arrowElement)[len];if(reference[opSide]-arrowElementSize<popper[side]){data.offsets.popper[side]-=popper[side]-(reference[opSide]-arrowElementSize)}if(reference[side]+arrowElementSize>popper[opSide]){data.offsets.popper[side]+=reference[side]+arrowElementSize-popper[opSide]}data.offsets.popper=getClientRect(data.offsets.popper);var center=reference[side]+reference[len]/2-arrowElementSize/2;var css=getStyleComputedProperty(data.instance.popper);var popperMarginSide=parseFloat(css['margin'+sideCapitalized]);var popperBorderSide=parseFloat(css['border'+sideCapitalized+'Width']);var sideValue=center-data.offsets.popper[side]-popperMarginSide-popperBorderSide;sideValue=Math.max(Math.min(popper[len]-arrowElementSize,sideValue),0);data.arrowElement=arrowElement;data.offsets.arrow=(_data$offsets$arrow={},defineProperty$2(_data$offsets$arrow,side,Math.round(sideValue)),defineProperty$2(_data$offsets$arrow,altSide,''),_data$offsets$arrow);return data}function getOppositeVariation(variation){if(variation==='end'){return 'start'}else if(variation==='start'){return 'end'}return variation}var placements=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'];var validPlacements=placements.slice(3);function clockwise(placement){var counter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var index=validPlacements.indexOf(placement);var arr=validPlacements.slice(index+1).concat(validPlacements.slice(0,index));return counter?arr.reverse():arr}var BEHAVIORS={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'};function flip(data,options){if(isModifierEnabled(data.instance.modifiers,'inner')){return data}if(data.flipped&&data.placement===data.originalPlacement){return data}var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,options.boundariesElement,data.positionFixed);var placement=data.placement.split('-')[0];var placementOpposite=getOppositePlacement(placement);var variation=data.placement.split('-')[1]||'';var flipOrder=[];switch(options.behavior){case BEHAVIORS.FLIP:flipOrder=[placement,placementOpposite];break;case BEHAVIORS.CLOCKWISE:flipOrder=clockwise(placement);break;case BEHAVIORS.COUNTERCLOCKWISE:flipOrder=clockwise(placement,true);break;default:flipOrder=options.behavior}flipOrder.forEach(function(step,index){if(placement!==step||flipOrder.length===index+1){return data}placement=data.placement.split('-')[0];placementOpposite=getOppositePlacement(placement);var popperOffsets=data.offsets.popper;var refOffsets=data.offsets.reference;var floor=Math.floor;var overlapsRef=placement==='left'&&floor(popperOffsets.right)>floor(refOffsets.left)||placement==='right'&&floor(popperOffsets.left)<floor(refOffsets.right)||placement==='top'&&floor(popperOffsets.bottom)>floor(refOffsets.top)||placement==='bottom'&&floor(popperOffsets.top)<floor(refOffsets.bottom);var overflowsLeft=floor(popperOffsets.left)<floor(boundaries.left);var overflowsRight=floor(popperOffsets.right)>floor(boundaries.right);var overflowsTop=floor(popperOffsets.top)<floor(boundaries.top);var overflowsBottom=floor(popperOffsets.bottom)>floor(boundaries.bottom);var overflowsBoundaries=placement==='left'&&overflowsLeft||placement==='right'&&overflowsRight||placement==='top'&&overflowsTop||placement==='bottom'&&overflowsBottom;var isVertical=['top','bottom'].indexOf(placement)!==-1;var flippedVariationByRef=!!options.flipVariations&&(isVertical&&variation==='start'&&overflowsLeft||isVertical&&variation==='end'&&overflowsRight||!isVertical&&variation==='start'&&overflowsTop||!isVertical&&variation==='end'&&overflowsBottom);var flippedVariationByContent=!!options.flipVariationsByContent&&(isVertical&&variation==='start'&&overflowsRight||isVertical&&variation==='end'&&overflowsLeft||!isVertical&&variation==='start'&&overflowsBottom||!isVertical&&variation==='end'&&overflowsTop);var flippedVariation=flippedVariationByRef||flippedVariationByContent;if(overlapsRef||overflowsBoundaries||flippedVariation){data.flipped=true;if(overlapsRef||overflowsBoundaries){placement=flipOrder[index+1]}if(flippedVariation){variation=getOppositeVariation(variation)}data.placement=placement+(variation?'-'+variation:'');data.offsets.popper=_extends({},data.offsets.popper,getPopperOffsets(data.instance.popper,data.offsets.reference,data.placement));data=runModifiers(data.instance.modifiers,data,'flip')}});return data}function keepTogether(data){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var placement=data.placement.split('-')[0];var floor=Math.floor;var isVertical=['top','bottom'].indexOf(placement)!==-1;var side=isVertical?'right':'bottom';var opSide=isVertical?'left':'top';var measurement=isVertical?'width':'height';if(popper[side]<floor(reference[opSide])){data.offsets.popper[opSide]=floor(reference[opSide])-popper[measurement]}if(popper[opSide]>floor(reference[side])){data.offsets.popper[opSide]=floor(reference[side])}return data}function toValue(str,measurement,popperOffsets,referenceOffsets){var split=str.match(/((?:\-|\+)?\d*\.?\d*)(.*)/);var value= +split[1];var unit=split[2];if(!value){return str}if(unit.indexOf('%')===0){var element=void 0;switch(unit){case '%p':element=popperOffsets;break;case '%':case '%r':default:element=referenceOffsets}var rect=getClientRect(element);return rect[measurement]/100*value}else if(unit==='vh'||unit==='vw'){var size=void 0;if(unit==='vh'){size=Math.max(document.documentElement.clientHeight,window.innerHeight||0)}else{size=Math.max(document.documentElement.clientWidth,window.innerWidth||0)}return size/100*value}else{return value}}function parseOffset(offset,popperOffsets,referenceOffsets,basePlacement){var offsets=[0,0];var useHeight=['right','left'].indexOf(basePlacement)!==-1;var fragments=offset.split(/(\+|\-)/).map(function(frag){return frag.trim()});var divider=fragments.indexOf(find(fragments,function(frag){return frag.search(/,|\s/)!==-1}));if(fragments[divider]&&fragments[divider].indexOf(',')===-1){console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.')}var splitRegex=/\s*,\s*|\s+/;var ops=divider!==-1?[fragments.slice(0,divider).concat([fragments[divider].split(splitRegex)[0]]),[fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider+1))]:[fragments];ops=ops.map(function(op,index){var measurement=(index===1?!useHeight:useHeight)?'height':'width';var mergeWithPrevious=false;return op .reduce(function(a,b){if(a[a.length-1]===''&&['+','-'].indexOf(b)!==-1){a[a.length-1]=b;mergeWithPrevious=true;return a}else if(mergeWithPrevious){a[a.length-1]+=b;mergeWithPrevious=false;return a}else{return a.concat(b)}},[]).map(function(str){return toValue(str,measurement,popperOffsets,referenceOffsets)})});ops.forEach(function(op,index){op.forEach(function(frag,index2){if(isNumeric(frag)){offsets[index]+=frag*(op[index2-1]==='-'?-1:1)}})});return offsets}function offset(data,_ref){var offset=_ref.offset;var placement=data.placement,_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var basePlacement=placement.split('-')[0];var offsets=void 0;if(isNumeric(+offset)){offsets=[+offset,0]}else{offsets=parseOffset(offset,popper,reference,basePlacement)}if(basePlacement==='left'){popper.top+=offsets[0];popper.left-=offsets[1]}else if(basePlacement==='right'){popper.top+=offsets[0];popper.left+=offsets[1]}else if(basePlacement==='top'){popper.left+=offsets[0];popper.top-=offsets[1]}else if(basePlacement==='bottom'){popper.left+=offsets[0];popper.top+=offsets[1]}data.popper=popper;return data}function preventOverflow(data,options){var boundariesElement=options.boundariesElement||getOffsetParent(data.instance.popper);if(data.instance.reference===boundariesElement){boundariesElement=getOffsetParent(boundariesElement)}var transformProp=getSupportedPropertyName('transform');var popperStyles=data.instance.popper.style;var top=popperStyles.top,left=popperStyles.left,transform=popperStyles[transformProp];popperStyles.top='';popperStyles.left='';popperStyles[transformProp]='';var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,boundariesElement,data.positionFixed);popperStyles.top=top;popperStyles.left=left;popperStyles[transformProp]=transform;options.boundaries=boundaries;var order=options.priority;var popper=data.offsets.popper;var check={primary:function primary(placement){var value=popper[placement];if(popper[placement]<boundaries[placement]&&!options.escapeWithReference){value=Math.max(popper[placement],boundaries[placement])}return defineProperty$2({},placement,value)},secondary:function secondary(placement){var mainSide=placement==='right'?'left':'top';var value=popper[mainSide];if(popper[placement]>boundaries[placement]&&!options.escapeWithReference){value=Math.min(popper[mainSide],boundaries[placement]-(placement==='right'?popper.width:popper.height))}return defineProperty$2({},mainSide,value)}};order.forEach(function(placement){var side=['left','top'].indexOf(placement)!==-1?'primary':'secondary';popper=_extends({},popper,check[side](placement))});data.offsets.popper=popper;return data}function shift(data){var placement=data.placement;var basePlacement=placement.split('-')[0];var shiftvariation=placement.split('-')[1];if(shiftvariation){var _data$offsets=data.offsets,reference=_data$offsets.reference,popper=_data$offsets.popper;var isVertical=['bottom','top'].indexOf(basePlacement)!==-1;var side=isVertical?'left':'top';var measurement=isVertical?'width':'height';var shiftOffsets={start:defineProperty$2({},side,reference[side]),end:defineProperty$2({},side,reference[side]+reference[measurement]-popper[measurement])};data.offsets.popper=_extends({},popper,shiftOffsets[shiftvariation])}return data}function hide(data){if(!isModifierRequired(data.instance.modifiers,'hide','preventOverflow')){return data}var refRect=data.offsets.reference;var bound=find(data.instance.modifiers,function(modifier){return modifier.name==='preventOverflow'}).boundaries;if(refRect.bottom<bound.top||refRect.left>bound.right||refRect.top>bound.bottom||refRect.right<bound.left){if(data.hide===true){return data}data.hide=true;data.attributes['x-out-of-boundaries']=''}else{if(data.hide===false){return data}data.hide=false;data.attributes['x-out-of-boundaries']=false}return data}function inner(data){var placement=data.placement;var basePlacement=placement.split('-')[0];var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var isHoriz=['left','right'].indexOf(basePlacement)!==-1;var subtractLength=['top','left'].indexOf(basePlacement)===-1;popper[isHoriz?'left':'top']=reference[basePlacement]-(subtractLength?popper[isHoriz?'width':'height']:0);data.placement=getOppositePlacement(placement);data.offsets.popper=getClientRect(popper);return data}var modifiers={shift:{order:100,enabled:true,fn:shift},offset:{order:200,enabled:true,fn:offset,offset:0},preventOverflow:{order:300,enabled:true,fn:preventOverflow,priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:true,fn:keepTogether},arrow:{order:500,enabled:true,fn:arrow,element:'[x-arrow]'},flip:{order:600,enabled:true,fn:flip,behavior:'flip',padding:5,boundariesElement:'viewport',flipVariations:false,flipVariationsByContent:false},inner:{order:700,enabled:false,fn:inner},hide:{order:800,enabled:true,fn:hide},computeStyle:{order:850,enabled:true,fn:computeStyle,gpuAcceleration:true,x:'bottom',y:'right'},applyStyle:{order:900,enabled:true,fn:applyStyle,onLoad:applyStyleOnLoad,gpuAcceleration:undefined}};var Defaults={placement:'bottom',positionFixed:false,eventsEnabled:true,removeOnDestroy:false,onCreate:function onCreate(){},onUpdate:function onUpdate(){},modifiers:modifiers};var Popper=function(){function Popper(reference,popper){var _this=this;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};classCallCheck(this,Popper);this.scheduleUpdate=function(){return requestAnimationFrame(_this.update)};this.update=debounce(this.update.bind(this));this.options=_extends({},Popper.Defaults,options);this.state={isDestroyed:false,isCreated:false,scrollParents:[]};this.reference=reference&&reference.jquery?reference[0]:reference;this.popper=popper&&popper.jquery?popper[0]:popper;this.options.modifiers={};Object.keys(_extends({},Popper.Defaults.modifiers,options.modifiers)).forEach(function(name){_this.options.modifiers[name]=_extends({},Popper.Defaults.modifiers[name]||{},options.modifiers?options.modifiers[name]:{})});this.modifiers=Object.keys(this.options.modifiers).map(function(name){return _extends({name:name},_this.options.modifiers[name])}).sort(function(a,b){return a.order-b.order});this.modifiers.forEach(function(modifierOptions){if(modifierOptions.enabled&&isFunction$1(modifierOptions.onLoad)){modifierOptions.onLoad(_this.reference,_this.popper,_this.options,modifierOptions,_this.state)}});this.update();var eventsEnabled=this.options.eventsEnabled;if(eventsEnabled){this.enableEventListeners()}this.state.eventsEnabled=eventsEnabled}createClass(Popper,[{key:'update',value:function update$$1(){return update.call(this)}},{key:'destroy',value:function destroy$$1(){return destroy.call(this)}},{key:'enableEventListeners',value:function enableEventListeners$$1(){return enableEventListeners.call(this)}},{key:'disableEventListeners',value:function disableEventListeners$$1(){return disableEventListeners.call(this)}}]);return Popper}();Popper.Utils=(typeof window!=='undefined'?window:global).PopperUtils;Popper.placements=placements;Popper.Defaults=Defaults;var DEPRECATED_ALIGN='Coral.Overlay: alignAt and alignMy have been deprecated. Please use the offset, inner and placement properties instead.';var DEPRECATED_FLIP_FIT='Coral.Overlay.collision.FLIP_FIT has been deprecated. Please use Coral.Overlay.collision.FLIP instead.';var align={LEFT_TOP:'left top',LEFT_CENTER:'left center',LEFT_BOTTOM:'left bottom',CENTER_TOP:'center top',CENTER_CENTER:'center center',CENTER_BOTTOM:'center bottom',RIGHT_TOP:'right top',RIGHT_CENTER:'right center',RIGHT_BOTTOM:'right bottom'};var collision={FLIP:'flip',FIT:'fit',FLIP_FIT:'flipfit',NONE:'none'};var target={PREVIOUS:'_prev',NEXT:'_next'};var placement={LEFT:'left',RIGHT:'right',BOTTOM:'bottom',TOP:'top'};var interaction$1={ON:'on',OFF:'off'};var CLASSNAME$i='_coral-Overlay';var Overlay=function(_BaseOverlay){_inherits(Overlay,_BaseOverlay);var _super=_createSuper(Overlay);function Overlay(){var _this;_classCallCheck(this,Overlay);_this=_super.call(this);_this._overlayAnimationTime=0;_this._withinOffset=5;_this._delegateEvents({'global:key:escape':'_handleEscape','click [coral-close]':'_handleCloseClick'});return _this}_createClass(Overlay,[{key:"_toggleSmartBehavior",value:function _toggleSmartBehavior(toggle){var _this2=this;if(toggle){if(this.smart){this._validateParentOverflow()}this._togglePopperEventListener(true);window.requestAnimationFrame(function(){_this2.reposition()})}else{this._togglePopperEventListener(false)}}},{key:"_togglePopperEventListener",value:function _togglePopperEventListener(toggle){if(this._popper){this._popper[toggle?'enableEventListeners':'disableEventListeners']()}}},{key:"_validateParentOverflow",value:function _validateParentOverflow(){var reposition=false;var parent=this.parentElement;while(!reposition&&parent){if(parent!==document.body){var computedStyle=window.getComputedStyle(parent);if(computedStyle.overflow==='auto'||computedStyle.overflow==='hidden'||parent.clientHeight===0||parent.clientWidth===0){reposition=true}parent=parent.parentElement}else{parent=null}}if(reposition){this._ignoreConnectedCallback=true;this._repositioned=true;document.body.appendChild(this);this._ignoreConnectedCallback=false}}},{key:"_onUpdate",value:function _onUpdate(data){var _this3=this;if(!this._oldPosition){this._oldPosition=data.styles.transform;window.requestAnimationFrame(function(){_this3.trigger('coral-overlay:positioned',data)})}else{this._oldPosition=this._oldPosition||data.styles.transform;if(this._oldPosition!==data.styles.transform){this.trigger('coral-overlay:positioned',data)}this._oldPosition=data.styles.transform}}},{key:"_handleCloseClick",value:function _handleCloseClick(event){var dismissTarget=event.matchedTarget;var dismissValue=dismissTarget.getAttribute('coral-close');if(!dismissValue||this.matches(dismissValue)){this.hide();event.stopPropagation();this._trackEvent('close',this.tagName.toLowerCase(),event)}}},{key:"_handleEscape",value:function _handleEscape(event){if(this.interaction===interaction$1.ON&&this.open&&this._isTopOverlay()){event.stopPropagation();this.hide()}}},{key:"_getTarget",value:function _getTarget(targetValue){return this.constructor._getTarget(this,targetValue)}},{key:"reposition",value:function reposition(forceReposition){var _this4=this;if(this._popper){var targetElement=this._getTarget();if(targetElement){this._popper.reference=targetElement}this._popper.options.placement=this.placement;this._popper.modifiers.forEach(function(modifier){if(modifier.name==='offset'){modifier.offset="".concat(_this4.breadthOffset,", ").concat(_this4.lengthOffset)}else if(modifier.name==='flip'){modifier.enabled=_this4.collision!==collision.FIT&&_this4.collision!==collision.NONE}else if(modifier.name==='inner'){modifier.enabled=_this4.inner}else if(modifier.name==='preventOverflow'){modifier.enabled=_this4.collision!==collision.NONE;var within=_this4.within;var boundary;if(within instanceof HTMLElement||['scrollParent','window','viewport'].indexOf(within)!==-1){boundary=within}else if(typeof within==='string'){boundary=document.querySelector(within);if(!(boundary instanceof HTMLElement)){boundary='scrollParent'}}modifier.boundariesElement=boundary;modifier.padding=_this4.withinOffset}});if(this.open||forceReposition){this._popper.update()}}}},{key:"connectedCallback",value:function connectedCallback(){var _this5=this;if(this._ignoreConnectedCallback){return}_get(_getPrototypeOf(Overlay.prototype),"connectedCallback",this).call(this);this.target=this.target;window.requestAnimationFrame(function(){_this5.reposition(true);if(!_this5.open){_this5._togglePopperEventListener(false)}})}},{key:"render",value:function render(){this.classList.add(CLASSNAME$i);this.style.display='none'}},{key:"disconnectedCallback",value:function disconnectedCallback(){if(this._ignoreConnectedCallback){return}_get(_getPrototypeOf(Overlay.prototype),"disconnectedCallback",this).call(this)}},{key:"target",get:function get(){return this._target||null},set:function set(value){if(value===null||typeof value==='string'||value instanceof Node){this._target=value;var targetElement=this._getTarget();if(targetElement){if(this._returnFocus===this.constructor.returnFocus.ON){this.returnFocusTo(targetElement)}this._popper=this._popper||new Popper(targetElement,this,{onUpdate:this._onUpdate.bind(this)});this.reposition()}}}},{key:"alignMy",get:function get(){return this._alignMy||align.CENTER_CENTER},set:function set(value){commons._log('warn',DEPRECATED_ALIGN);value=transform.string(value).toLowerCase();this._alignMy=validate.enumeration(align)(value)&&value||align.CENTER_CENTER}},{key:"alignAt",get:function get(){return this._alignAt||align.CENTER_CENTER},set:function set(value){commons._log('warn',DEPRECATED_ALIGN);value=transform.string(value).toLowerCase();this._alignAt=validate.enumeration(align)(value)&&value||align.CENTER_CENTER}},{key:"offset",get:function get(){return transform.number(this.lengthOffset)},set:function set(value){value=transform.number(value);if(typeof value==='number'){this.lengthOffset="".concat(value,"px");this.breadthOffset='0px';this.reposition()}}},{key:"inner",get:function get(){return this._inner||false},set:function set(value){this._inner=transform.booleanAttr(value);this.reposition()}},{key:"lengthOffset",get:function get(){return this._lengthOffset||'0px'},set:function set(value){this._lengthOffset=transform.string(value)||'0px';this.reposition()}},{key:"breadthOffset",get:function get(){return this._breadthOffset||'0px'},set:function set(value){this._breadthOffset=transform.string(value)||'0px';this.reposition()}},{key:"placement",get:function get(){return this._placement||placement.RIGHT},set:function set(value){value=transform.string(value).toLowerCase();this._placement=validate.enumeration(placement)(value)&&value||placement.RIGHT;this.reposition()}},{key:"within",get:function get(){return this._within||'scrollParent'},set:function set(value){if(value instanceof HTMLElement||typeof value==='string'){this._within=value;this.reposition()}}},{key:"withinOffset",get:function get(){return this._withinOffset},set:function set(value){value=transform.number(value);if(typeof value==='number'){this._withinOffset=value;this.reposition()}}},{key:"collision",get:function get(){return this._collision||collision.FLIP},set:function set(value){value=transform.string(value).toLowerCase();this._collision=validate.enumeration(collision)(value)&&value||collision.FLIP;if(this._collision===collision.FLIP_FIT){commons._log('warn',DEPRECATED_FLIP_FIT)}this.reposition()}},{key:"interaction",get:function get(){return this._interaction||interaction$1.ON},set:function set(value){value=transform.string(value).toLowerCase();this._interaction=validate.enumeration(interaction$1)(value)&&value||interaction$1.ON}},{key:"smart",get:function get(){return this._smart||false},set:function set(value){this._smart=transform.booleanAttr(value);this._toggleSmartBehavior(this.open)}},{key:"open",get:function get(){return _get(_getPrototypeOf(Overlay.prototype),"open",this)},set:function set(value){_set(_getPrototypeOf(Overlay.prototype),"open",value,this,true);this._toggleSmartBehavior(this.open)}}],[{key:"_getTarget",value:function _getTarget(el,targetValue){targetValue=targetValue||el.target;if(targetValue instanceof Node){return targetValue}var newTarget=null;if(typeof targetValue==='string'){if(targetValue===target.PREVIOUS){newTarget=el.previousElementSibling}else if(targetValue===target.NEXT){newTarget=el.nextElementSibling}else{newTarget=document.querySelector(targetValue)}}return newTarget}},{key:"align",get:function get(){return align}},{key:"collision",get:function get(){return collision}},{key:"target",get:function get(){return target}},{key:"placement",get:function get(){return placement}},{key:"interaction",get:function get(){return interaction$1}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Overlay),"_attributePropertyMap",this),{alignmy:'alignMy',alignat:'alignAt',lengthoffset:'lengthOffset',breadthoffset:'breadthOffset',withinoffset:'withinOffset'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Overlay),"observedAttributes",this).concat(['alignmy','alignat','offset','lengthoffset','breadthoffset','placement','within','withinoffset','collision','interaction','target','inner','smart'])}}]);return Overlay}(BaseOverlay(BaseComponent(HTMLElement)));commons._define('coral-overlay',Overlay);var translations$5={"en-US":{"Close":"Close"},"de-DE":{"Close":"Schließen"},"fr-FR":{"Close":"Fermer"},"it-IT":{"Close":"Chiudi"},"ja-JP":{"Close":"閉じる"},"es-ES":{"Close":"Cerrar"},"ko-KR":{"Close":"닫기"},"zh-CN":{"Close":"关闭"},"zh-TW":{"Close":"關閉"},"pt-BR":{"Close":"Fechar"},"nl-NL":{"Close":"Sluiten"},"da-DK":{"Close":"Luk"},"fi-FI":{"Close":"Sulje"},"nb-NO":{"Close":"Lukk"},"sv-SE":{"Close":"Stäng"},"cs-CZ":{"Close":"Zavřít"},"pl-PL":{"Close":"Zamknij"},"ru-RU":{"Close":"Закрыть"},"tr-TR":{"Close":"Kapat"}};var DROP_ZONE_ATTRIBUTE='coral-dragaction-dropzone';var HANDLE_ATTRIBUTE='coral-dragaction-handle';var AXIS_ATTRIBUTE='coral-dragaction-axis';var SCROLL_ATTRIBUTE='coral-dragaction-scroll';var CONTAINMENT_ATTRIBUTE='coral-dragaction-containment';var OPEN_HAND_CLASS='u-coral-openHand';var CLOSE_HAND_CLASS='u-coral-closedHand';var IS_DRAGGING_CLASS='is-dragging';var DEFAULT_SCROLL_OFFSET=20;var DEFAULT_SCROLL_BY=10;var axis={FREE:'free',VERTICAL:'vertical',HORIZONTAL:'horizontal'};function getViewContainer(element){while(element){var p=element.parentNode;if(!p){return p}if(p.matches('body')){return p}var computedStyle=window.getComputedStyle(p);var overflow=computedStyle.overflow;var overflowX=computedStyle.overflowX;var overflowY=computedStyle.overflowY;if((overflow==='hidden'||overflow==='auto'||overflow==='scroll')&&overflow===overflowX&&overflow===overflowY){return p}element=p}}function transformToArray(el){if(typeof el==='string'){return Array.prototype.slice.call(document.querySelectorAll(el))}else if(el instanceof HTMLElement){return[el]}else if(Object.prototype.toString.call(el)==='[object NodeList]'){return Array.prototype.slice.call(el)}}function getPagePosition(event){var touch={};if(event.changedTouches&&event.changedTouches.length>0){touch=event.changedTouches[0]}else if(event.touches&&event.touches.length>0){touch=event.touches[0]}return{x:touch.pageX||event.pageX,y:touch.pageY||event.pageY}}function within(scrollingElement,a,b){var aBoundingClientRect=a.getBoundingClientRect();var bBoundingClientRect=b.getBoundingClientRect();var documentScrollTop=scrollingElement.scrollTop;var documentScrollLeft=scrollingElement.scrollLeft;var al=aBoundingClientRect.left+documentScrollLeft;var ar=al+aBoundingClientRect.width;var bl=bBoundingClientRect.left+documentScrollLeft;var br=bl+bBoundingClientRect.width;var at=aBoundingClientRect.top+documentScrollTop;var ab=at+aBoundingClientRect.height;var bt=bBoundingClientRect.top+documentScrollTop;var bb=bt+bBoundingClientRect.height;return!(bl>ar||br<al||bt>ab||bb<at)}function isOverDropZone(dragAction){var el=null;if(dragAction._dropZones&&dragAction._dropZones.length){dragAction._dropZones.some(function(dropZone){if(within(dragAction._scrollingElement,dragAction._dragElement,dropZone)){el=dropZone;return true}return false})}return el}var DragAction=function(){function DragAction(dragElement){_classCallCheck(this,DragAction);if(!dragElement){throw new Error('Coral.DragAction: dragElement is missing')}var el=null;if(dragElement instanceof HTMLElement){el=dragElement}else if(typeof dragElement==='string'){el=document.querySelector(dragElement);if(!el){throw new Error('Coral.DragAction: dragElement is null')}}this._id=commons.getUID();this._dragElementValue=dragElement;this._dragElement=el;if(this._dragElement.dragAction){this._dragElement.dragAction.destroy()}var computedStyle=window.getComputedStyle(this._dragElement);this._initialPosition={position:computedStyle.position,left:computedStyle.left,top:computedStyle.top};this._dragEvents=new vent(this._dragElement);this.handle=this._dragElement.getAttribute(HANDLE_ATTRIBUTE);this.dropZone=this._dragElement.getAttribute(DROP_ZONE_ATTRIBUTE);this.axis=this._dragElement.getAttribute(AXIS_ATTRIBUTE);this.scroll=this._dragElement.matches("[".concat(SCROLL_ATTRIBUTE,"]"));this.containment=this._dragElement.matches("[".concat(CONTAINMENT_ATTRIBUTE,"]"));this._drag=this._drag.bind(this);this._dragEnd=this._dragEnd.bind(this);events.on("touchmove.DragAction".concat(this._id),this._drag);events.on("mousemove.DragAction".concat(this._id),this._drag);events.on("touchend.DragAction".concat(this._id),this._dragEnd);events.on("mouseup.DragAction".concat(this._id),this._dragEnd);this._dragElement.dragAction=this}_createClass(DragAction,[{key:"_dragStart",value:function _dragStart(event){this._container=getViewContainer(this._dragElement)||document.body;if(event.target.tagName==='IMG'){event.preventDefault()}events.on('touchmove.DragAction',function(e){e.preventDefault()});document.body._overflow=window.getComputedStyle(document.body).overflow;document.body.style.overflow='hidden';if(!this._container.matches('body')){this._container._overflow=window.getComputedStyle(this._container).overflow;this._container.style.overflow=this.scroll?'scroll':'hidden'}var pagePosition=getPagePosition(event);var dragElementBoundingClientRect=this._dragElement.getBoundingClientRect();this._dragPosition=getPagePosition(event);this._dragPosition.y-=dragElementBoundingClientRect.top+this._scrollingElement.scrollTop;this._dragPosition.x-=dragElementBoundingClientRect.left+this._scrollingElement.scrollLeft;document.body.classList.add(CLOSE_HAND_CLASS);if(this._handles&&this._handles.length){this._handles.forEach(function(handle){handle.classList.remove(OPEN_HAND_CLASS)})}else{this._dragElement.classList.remove(OPEN_HAND_CLASS)}this._dragElement.classList.add(IS_DRAGGING_CLASS);if(window.getComputedStyle(this._dragElement).position==='static'){this._dragElement.style.position='relative'}this._dragEvents.dispatch('coral-dragaction:dragstart',{detail:{dragElement:this._dragElement,pageX:pagePosition.x,pageY:pagePosition.y}})}},{key:"_drag",value:function _drag(event){if(this._dragElement.classList.contains(IS_DRAGGING_CLASS)){var pagePosition=getPagePosition(event);var documentScrollTop=this._scrollingElement.scrollTop;var documentScrollLeft=this._scrollingElement.scrollLeft;var dragElementBoundingClientRect=this._dragElement.getBoundingClientRect();var dragElementHeight=dragElementBoundingClientRect.height;var dragElementWidth=dragElementBoundingClientRect.width;var dragElementPosition={top:dragElementBoundingClientRect.top+documentScrollTop,left:dragElementBoundingClientRect.left+documentScrollLeft};var dragElementComputedStyle=window.getComputedStyle(this._dragElement);var dragElementCSSPosition={top:parseFloat(dragElementComputedStyle.top)||0,left:parseFloat(dragElementComputedStyle.left)||0};var containerBoundingClientRect=this._container.getBoundingClientRect();var containerWidth=containerBoundingClientRect.width;var containerHeight=containerBoundingClientRect.height;var containerPosition={top:containerBoundingClientRect.top+documentScrollTop,left:containerBoundingClientRect.left+documentScrollLeft};this._dragEvents.dispatch('coral-dragaction:drag',{detail:{dragElement:this._dragElement,pageX:pagePosition.x,pageY:pagePosition.y}});if(document.selection){document.selection.empty()}else if(window.getSelection){if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}if(this.scroll){if(this._container===document.body){if(dragElementBoundingClientRect.top<DEFAULT_SCROLL_OFFSET){this._scrollingElement.scrollTop=documentScrollTop-DEFAULT_SCROLL_BY}else if(dragElementBoundingClientRect.top+dragElementBoundingClientRect.height>window.innerHeight-DEFAULT_SCROLL_OFFSET&&dragElementPosition.top+dragElementBoundingClientRect.height+DEFAULT_SCROLL_OFFSET<this._scrollingElement.scrollHeight){this._scrollingElement.scrollTop=documentScrollTop+DEFAULT_SCROLL_BY}if(dragElementBoundingClientRect.left<DEFAULT_SCROLL_OFFSET){this._scrollingElement.scrollLeft=documentScrollLeft-DEFAULT_SCROLL_BY}else if(dragElementBoundingClientRect.left+dragElementBoundingClientRect.width>window.innerWidth-DEFAULT_SCROLL_OFFSET&&dragElementPosition.left+dragElementBoundingClientRect.width+DEFAULT_SCROLL_OFFSET<this._scrollingElement.scrollWidth){this._scrollingElement.scrollLeft=documentScrollLeft+DEFAULT_SCROLL_BY }}else{if(dragElementBoundingClientRect.top-containerBoundingClientRect.top<DEFAULT_SCROLL_OFFSET){this._container.scrollTop=this._container.scrollTop-DEFAULT_SCROLL_BY}else if(dragElementBoundingClientRect.top-containerBoundingClientRect.top+dragElementBoundingClientRect.height>containerBoundingClientRect.height-DEFAULT_SCROLL_OFFSET&&dragElementBoundingClientRect.top-containerBoundingClientRect.top+dragElementBoundingClientRect.height<containerBoundingClientRect.height){this._container.scrollTop=this._container.scrollTop+DEFAULT_SCROLL_BY}if(dragElementBoundingClientRect.left-containerBoundingClientRect.left<DEFAULT_SCROLL_OFFSET){this._container.scrollLeft=this._container.scrollLeft-DEFAULT_SCROLL_BY}else if(dragElementBoundingClientRect.left-containerBoundingClientRect.left+dragElementBoundingClientRect.width>containerBoundingClientRect.width-DEFAULT_SCROLL_OFFSET&&dragElementBoundingClientRect.left-containerBoundingClientRect.left+dragElementBoundingClientRect.width<containerBoundingClientRect.width){this._container.scrollLeft=this._container.scrollLeft+DEFAULT_SCROLL_BY}}}var newPosition={};if(this.axis!=='horizontal'){var top=pagePosition.y-this._dragPosition.y;if(this.containment){if(top>=containerPosition.top&&top+dragElementHeight<=containerPosition.top+containerHeight){newPosition.top=top}else if(pagePosition.y<=containerPosition.top){newPosition.top=containerPosition.top}else if(pagePosition.y>=containerPosition.top+containerHeight){newPosition.top=containerPosition.top+containerHeight-dragElementHeight}}else{newPosition.top=top}}if(this.axis!=='vertical'){var left=pagePosition.x-this._dragPosition.x;if(this.containment){if(left>=containerPosition.left&&left+dragElementWidth<=containerPosition.left+containerWidth){newPosition.left=left}else if(pagePosition.x<=containerPosition.left){newPosition.left=containerPosition.left}else if(pagePosition.x>=containerPosition.left+containerWidth){newPosition.left=containerPosition.left+containerWidth-dragElementWidth}}else{newPosition.left=left}}this._dragElement.style.top="".concat(newPosition.top-dragElementPosition.top+dragElementCSSPosition.top,"px");this._dragElement.style.left="".concat(newPosition.left-dragElementPosition.left+dragElementCSSPosition.left,"px");var dropZone=isOverDropZone(this);if(dropZone){this._dropElement=dropZone;if(!this._dropZoneEntered){this._dropZoneEntered=true;this._dragEvents.dispatch('coral-dragaction:dragenter',{detail:{dragElement:this._dragElement,pageX:pagePosition.x,pageY:pagePosition.y,dropElement:this._dropElement}})}this._dragEvents.dispatch('coral-dragaction:dragover',{detail:{dragElement:this._dragElement,pageX:pagePosition.x,pageY:pagePosition.y,dropElement:this._dropElement}})}else if(this._dropZoneEntered){this._dragEvents.dispatch('coral-dragaction:dragleave',{detail:{dragElement:this._dragElement,pageX:pagePosition.x,pageY:pagePosition.y,dropElement:this._dropElement}});this._dropZoneEntered=false}}}},{key:"_dragEnd",value:function _dragEnd(event){if(this._dragElement.classList.contains(IS_DRAGGING_CLASS)){var pagePosition=getPagePosition(event);document.body.style.overflow=document.body._overflow;document.body._overflow=undefined;if(!this._container.matches('body')){this._container.style.overflow=this._container._overflow;this._container._overflow=undefined}document.body.classList.remove(CLOSE_HAND_CLASS);this._dragElement.classList.remove(IS_DRAGGING_CLASS);if(this._handles&&this._handles.length){this._handles.forEach(function(handle){handle.classList.add(OPEN_HAND_CLASS)})}else{this._dragElement.classList.add(OPEN_HAND_CLASS)}if(this._dropZoneEntered){var dropZone=isOverDropZone(this);if(dropZone){this._dropElement=dropZone;this._dragEvents.dispatch('coral-dragaction:drop',{detail:{dragElement:this._dragElement,pageX:pagePosition.x,pageY:pagePosition.y,dropElement:this._dropElement}})}}this._dragEvents.dispatch('coral-dragaction:dragend',{detail:{dragElement:this._dragElement,pageX:pagePosition.x,pageY:pagePosition.y}})}}},{key:"destroy",value:function destroy(restorePosition){document.body.classList.remove(CLOSE_HAND_CLASS);this._dragElement.classList.remove(IS_DRAGGING_CLASS);if(this._handles&&this._handles.length){this._handles.forEach(function(handle){handle._dragEvents.off('.DragAction');handle.classList.remove(OPEN_HAND_CLASS)})}else{this._dragEvents.off('.DragAction');this._dragElement.classList.remove(OPEN_HAND_CLASS)}events.off(".DragAction".concat(this._id));if(document.body._overflow){document.body.style.overflow=document.body._overflow;document.body._overflow=undefined}if(this._container){if(!this._container.matches('body')&&this._container._overflow){this._container.style.overflow=this._container._overflow;this._container._overflow=undefined}}if(restorePosition){this._dragElement.style.position=this._initialPosition.position;this._dragElement.style.top=this._initialPosition.top;this._dragElement.style.left=this._initialPosition.left}this._dragElement.dragAction=undefined}},{key:"dragElement",get:function get(){return this._dragElementValue}},{key:"handle",get:function get(){return this._handle},set:function set(value){var _this=this;this._handle=value;this._dragEvents.off('.DragAction');document.body.classList.remove(CLOSE_HAND_CLASS);this._dragElement.classList.remove(IS_DRAGGING_CLASS);if(this._handles&&this._handles.length){this._handles.forEach(function(handle){handle._dragEvents.off('.DragAction');handle.classList.remove(OPEN_HAND_CLASS)})}else{this._dragElement.classList.remove(OPEN_HAND_CLASS)}if(typeof value==='string'||value instanceof HTMLElement||Object.prototype.toString.call(value)==='[object NodeList]'){this._handles=transformToArray(value);if(this._handles&&this._handles.length){this._handles.forEach(function(handle){handle._dragEvents=handle._dragEvents||new vent(handle);handle._dragEvents.on('mousedown.DragAction',_this._dragStart.bind(_this));handle._dragEvents.on('touchstart.DragAction',_this._dragStart.bind(_this));handle.classList.add(OPEN_HAND_CLASS)})}else{this._dragEvents.on('touchstart.DragAction',this._dragStart.bind(this));this._dragEvents.on('mousedown.DragAction',this._dragStart.bind(this));this._dragElement.classList.add(OPEN_HAND_CLASS)}}else{this._handles=[];this._dragEvents.on('touchstart.DragAction',this._dragStart.bind(this));this._dragEvents.on('mousedown.DragAction',this._dragStart.bind(this));this._dragElement.classList.add(OPEN_HAND_CLASS)}}},{key:"dropZone",get:function get(){return this._dropZone},set:function set(value){this._dropZone=value;this._dropZoneEntered=false;if(typeof value==='string'||value instanceof HTMLElement||Object.prototype.toString.call(value)==='[object NodeList]'){this._dropZones=transformToArray(value)}else{this._dropZones=[]}}},{key:"axis",get:function get(){return this._axis},set:function set(value){value=transform.string(value);this._axis=validate.enumeration(axis)(value)&&value||axis.FREE}},{key:"scroll",get:function get(){return this._scroll},set:function set(value){this._scroll=transform.boolean(value)}},{key:"containment",get:function get(){return this._containment},set:function set(value){this._containment=transform.boolean(value)}},{key:"_scrollingElement",get:function get(){return document.scrollingElement||document.documentElement}}],[{key:"axis",get:function get(){return axis}}]);return DragAction}();document.addEventListener('DOMContentLoaded',function(){var elements=document.body.querySelectorAll('[coral-dragaction]');for(var i=0;i<elements.length;i+=1){new DragAction(elements[i])}});var template$5=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["headerWrapper"]=document.createElement("div");el0.className+=" _coral-Dialog-header";el0.setAttribute("handle","headerWrapper");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["dragZone"]=document.createElement("div");el2.className+=" _coral-Dialog-dragZone";el2.setAttribute("handle","dragZone");el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);var el5=this["wrapper"]=document.createElement("div");el5.setAttribute("handle","wrapper");var el6=document.createTextNode("\n  ");el5.appendChild(el6);var el7=this["closeButton"]=document.createElement("button","coral-button");el7.setAttribute("tracking","off");el7.setAttribute("handle","closeButton");el7.className+=" _coral-Dialog-closeButton";el7.setAttribute("type","button");el7.setAttribute("is","coral-button");el7.setAttribute("variant","quietaction");el7.setAttribute("title",data_0["i18n"]["get"]('Close'));el7.setAttribute("tabindex","-1");el7.setAttribute("coral-close","");el7.setAttribute("coral-tabcapture","");var el8=document.createTextNode("\n    ");el7.appendChild(el8);var el9=document.createElement("coral-icon");el9.setAttribute("icon","spectrum-css-icon-CrossLarge");el9.className+=" _coral-UIIcon-CrossLarge";el7.appendChild(el9);var el10=document.createTextNode("\n  ");el7.appendChild(el10);el5.appendChild(el7);var el11=document.createTextNode("\n");el5.appendChild(el11);frag.appendChild(el5);var el12=document.createTextNode("\n");frag.appendChild(el12);return frag};var closable={ON:'on',OFF:'off'};var interaction$2={ON:'on',OFF:'off'};var variant$4={DEFAULT:'default',ERROR:'error',WARNING:'warning',SUCCESS:'success',HELP:'help',INFO:'info'};var backdrop={NONE:'none',MODAL:'modal',STATIC:'static'};var capitalize$1=function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)};var CLASSNAME$j='_coral-Dialog';var FULLSCREEN_CLASSNAME="".concat(CLASSNAME$j,"--fullscreenTakeover");var ALL_VARIANT_CLASSES$3=[];for(var variantValue$2 in variant$4){ALL_VARIANT_CLASSES$3.push("".concat(CLASSNAME$j,"--").concat(variant$4[variantValue$2]))}var Dialog=function(_BaseOverlay){_inherits(Dialog,_BaseOverlay);var _super=_createSuper(Dialog);function Dialog(){var _this;_classCallCheck(this,Dialog);_this=_super.call(this);_this._elements=commons.extend(_this._elements,{header:_this.querySelector('coral-dialog-header')||document.createElement('coral-dialog-header'),content:_this.querySelector('coral-dialog-content')||document.createElement('coral-dialog-content'),footer:_this.querySelector('coral-dialog-footer')||document.createElement('coral-dialog-footer')});template$5.call(_this._elements,{i18n:i18n});_this._delegateEvents({'coral-overlay:open':'_handleOpen','click [coral-close]':'_handleCloseClick','click':'_handleClick','global:resize':'center','global:key:escape':'_handleEscape'});_this._trapFocus=_this.constructor.trapFocus.ON;_this._returnFocus=_this.constructor.returnFocus.ON;_this._overlayAnimationTime=_this.constructor.FADETIME;_this._headerObserver=new MutationObserver(_this._hideHeaderIfEmpty.bind(_assertThisInitialized(_this)));_this._observeHeader();return _this}_createClass(Dialog,[{key:"_observeHeader",value:function _observeHeader(){if(this._headerObserver){this._headerObserver.disconnect();if(this._elements.header){this._headerObserver.observe(this._elements.header,{childList:true,characterData:true,subtree:true})}}}},{key:"_hideHeaderIfEmpty",value:function _hideHeaderIfEmpty(){var header=this._elements.header;if(header){var headerWrapper=this._elements.headerWrapper;var hiddenValue=header.children.length===0&&header.textContent.replace(/\s*/g,'')==='';if(hiddenValue!==headerWrapper.hidden){headerWrapper.hidden=hiddenValue}this.variant=this.variant}}},{key:"_handleOpen",value:function _handleOpen(event){this._trackEvent('display','coral-dialog',event)}},{key:"_handleEscape",value:function _handleEscape(event){if(this.interaction===interaction$2.ON&&this.open&&this._isTopOverlay()){event.stopPropagation();this.open=false}}},{key:"_handleCloseClick",value:function _handleCloseClick(event){var dismissTarget=event.matchedTarget;var dismissValue=dismissTarget.getAttribute('coral-close');if(!dismissValue||this.matches(dismissValue)){this.open=false;event.stopPropagation();this._trackEvent('close','coral-dialog',event)}}},{key:"_handleClick",value:function _handleClick(event){if(event.target===this&&this.backdrop===backdrop.MODAL&&this._isTopOverlay()){this.open=false;this._trackEvent('close','coral-dialog',event)}}},{key:"_moveToDocumentBody",value:function _moveToDocumentBody(){if(!document.body.contains(this)){document.body.appendChild(this )}else if(this.parentNode!==document.body){this._ignoreConnectedCallback=true;this._repositioned=true;document.body.appendChild(this);this._ignoreConnectedCallback=false}}},{key:"_insertTypeIcon",value:function _insertTypeIcon(){if(this._elements.icon){this._elements.icon.remove()}var variantValue=this.variant;if(variantValue===variant$4.WARNING||variantValue===variant$4.ERROR){variantValue='alert'}if(variantValue!==variant$4.DEFAULT){var iconName=capitalize$1(variantValue);this._elements.headerWrapper.insertAdjacentHTML('beforeend',Icon._renderSVG("spectrum-css-icon-".concat(iconName,"Medium"),['_coral-Dialog-typeIcon',"_coral-UIIcon-".concat(iconName,"Medium")]));this._elements.icon=this._elements.headerWrapper.querySelector('._coral-Dialog-typeIcon')}}},{key:"backdropClickedCallback",value:function backdropClickedCallback(){if(this.backdrop===backdrop.MODAL&&this._isTopOverlay()){this.open=false}}},{key:"center",value:function center(){if(this.fullscreen){return}this.style.top='';this.style.left='';return this}},{key:"connectedCallback",value:function connectedCallback(){if(this._ignoreConnectedCallback){return}_get(_getPrototypeOf(Dialog.prototype),"connectedCallback",this).call(this)}},{key:"render",value:function render(){var _this2=this;_get(_getPrototypeOf(Dialog.prototype),"render",this).call(this);this.classList.add("".concat(CLASSNAME$j,"-wrapper"));if(!this._variant){this.variant=variant$4.DEFAULT}if(!this._backdrop){this.backdrop=backdrop.MODAL}if(!this._closable){this.closable=closable.OFF}if(!this._interaction){this.interaction=interaction$2.ON}var header=this._elements.header;var content=this._elements.content;var footer=this._elements.footer;var contentZoneProvided=this.contains(content)&&content||this.contains(footer)&&footer||this.contains(header)&&header;var wrapper=this.querySelector(".".concat(CLASSNAME$j));if(wrapper){Array.prototype.filter.call(this.children,function(child){return child.hasAttribute('coral-tabcapture')}).forEach(function(tabCapture){_this2.removeChild(tabCapture)});this._elements.headerWrapper=this.querySelector('._coral-Dialog-header');this._elements.closeButton=this.querySelector('._coral-Dialog-closeButton');this._elements.wrapper=wrapper}else{wrapper=this._elements.wrapper;var headerWrapper=this._elements.headerWrapper;if(contentZoneProvided){if(contentZoneProvided.parentNode===this){this._elements.wrapper=wrapper}else{this._elements.wrapper=contentZoneProvided.parentNode}while(this.firstChild){wrapper.appendChild(this.firstChild)}this._elements.wrapper.insertBefore(headerWrapper,content )}else{this._elements.wrapper=wrapper;while(this.firstChild){content.appendChild(this.firstChild)}wrapper.appendChild(headerWrapper);wrapper.appendChild(content);wrapper.appendChild(footer)}this.appendChild(wrapper)}this._elements.wrapper.classList.add(CLASSNAME$j);this._elements.wrapper.setAttribute('coral-dialog-size','');this._elements.wrapper.appendChild(this._elements.closeButton);if(this._elements.wrapper.parentNode!==this){var contentWrapper=this.querySelector('[handle="wrapper"]');Array.prototype.forEach.call(contentWrapper.classList,function(style){return _this2._elements.wrapper.classList.add(style)});contentWrapper.removeAttribute('class')}this.header=header;this.footer=footer;this.content=content}},{key:"disconnectedCallback",value:function disconnectedCallback(){if(this._ignoreConnectedCallback){return}_get(_getPrototypeOf(Dialog.prototype),"disconnectedCallback",this).call(this)}},{key:"interaction",get:function get(){return this._interaction||interaction$2.ON},set:function set(value){value=transform.string(value).toLowerCase();this._interaction=validate.enumeration(interaction$2)(value)&&value||interaction$2.ON}},{key:"header",get:function get(){return this._getContentZone(this._elements.header)},set:function set(value){this._setContentZone('header',value,{handle:'header',tagName:'coral-dialog-header',insert:function insert(header){header.classList.add("".concat(CLASSNAME$j,"-title"));this._elements.headerWrapper.insertBefore(header,this._elements.dragZone.nextElementSibling)},set:function set(){this._observeHeader();this._hideHeaderIfEmpty()}})}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-dialog-content',insert:function insert(content){content.classList.add("".concat(CLASSNAME$j,"-content"));var footer=this.footer;this._elements.wrapper.insertBefore(content,this.contains(footer)&&footer||null)}})}},{key:"footer",get:function get(){return this._getContentZone(this._elements.footer)},set:function set(value){this._setContentZone('footer',value,{handle:'footer',tagName:'coral-dialog-footer',insert:function insert(footer){footer.classList.add("".concat(CLASSNAME$j,"-footer"));this._elements.wrapper.appendChild(footer)}})}},{key:"backdrop",get:function get(){return this._backdrop||backdrop.MODAL},set:function set(value){value=transform.string(value).toLowerCase();this._backdrop=validate.enumeration(backdrop)(value)&&value||backdrop.MODAL;var showBackdrop=this._backdrop!==backdrop.NONE;this._elements.wrapper.classList.toggle("".concat(CLASSNAME$j,"--noBackdrop"),!showBackdrop);if(this.open&&showBackdrop){this._showBackdrop()}}},{key:"variant",get:function get(){return this._variant||variant$4.DEFAULT},set:function set(value){var _this$_elements$wrapp;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$4)(value)&&value||variant$4.DEFAULT;this._reflectAttribute('variant',this._variant);this._insertTypeIcon();(_this$_elements$wrapp=this._elements.wrapper.classList).remove.apply(_this$_elements$wrapp,ALL_VARIANT_CLASSES$3);if(this._variant===variant$4.DEFAULT){this.setAttribute('role','dialog')}else{this._elements.wrapper.classList.add("".concat(CLASSNAME$j,"--").concat(this._variant));this.setAttribute('role','alertdialog')}var hasHeader=this.header&&this.header.textContent!=='';if(hasHeader&&!(this.hasAttribute('aria-labelledby')||this.hasAttribute('aria-label'))){this.header.id=this.header.id||commons.getUID();this.setAttribute('aria-labelledby',this.header.id)}if(!this.content||this.content.textContent===''){return}this.content.id=this.content.id||commons.getUID();if(this._variant!==variant$4.DEFAULT){if(!hasHeader){this.setAttribute('aria-labelledby',this.content.id )}else if(!this.hasAttribute('aria-describedby')){this.setAttribute('aria-describedby',this.content.id)}}else if(this.getAttribute('aria-labelledby')===this.content.id){this.removeAttribute('aria-labelledby')}}},{key:"fullscreen",get:function get(){return this._fullscreen||false},set:function set(value){this._fullscreen=transform.booleanAttr(value);this._reflectAttribute('fullscreen',this._fullscreen);if(this._fullscreen){this.movable=false;this._elements.wrapper.classList.add(FULLSCREEN_CLASSNAME)}else{this._elements.wrapper.classList.remove(FULLSCREEN_CLASSNAME)}}},{key:"open",get:function get(){return _get(_getPrototypeOf(Dialog.prototype),"open",this)},set:function set(value){var _this3=this;_set(_getPrototypeOf(Dialog.prototype),"open",value,this,true);if(this.open){this._moveToDocumentBody();if(this.backdrop!==backdrop.NONE){this._showBackdrop()}}requestAnimationFrame(function(){_this3._elements.wrapper.classList.toggle('is-open',_this3.open);if(_this3.open){commons.transitionEnd(_this3._elements.wrapper,function(){_this3._handleFocus();_this3._elements.closeButton.tabIndex=0;_this3._elements.closeButton.removeAttribute('coral-tabcapture')})}else{_this3._elements.closeButton.tabIndex=-1;_this3._elements.closeButton.setAttribute('coral-tabcapture','')}})}},{key:"icon",get:function get(){return this._elements.icon},set:function set(value){this._elements.icon=value}},{key:"closable",get:function get(){return this._closable||closable.OFF},set:function set(value){value=transform.string(value).toLowerCase();this._closable=validate.enumeration(closable)(value)&&value||closable.OFF;this._reflectAttribute('closable',this._closable);this._elements.wrapper.classList.toggle("".concat(CLASSNAME$j,"--dismissible"),this._closable===closable.ON)}},{key:"movable",get:function get(){return this._movable||false},set:function set(value){this._movable=transform.booleanAttr(value);this._reflectAttribute('movable',this._movable);if(this._movable){this.fullscreen=false}if(this._movable){var dragAction=new DragAction(this);dragAction.handle=this._elements.headerWrapper}else{if(this.dragAction){this.dragAction.destroy()}this.center()}}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?this.header&&this.header.textContent&&this.header.textContent.replace(/\s{2,}/g,' ').trim()||'':this._trackingElement},set:function set(value){_set(_getPrototypeOf(Dialog.prototype),"trackingElement",value,this,true)}},{key:"_contentZones",get:function get(){return{'coral-dialog-header':'header','coral-dialog-content':'content','coral-dialog-footer':'footer'}}}],[{key:"variant",get:function get(){return variant$4}},{key:"backdrop",get:function get(){return backdrop}},{key:"closable",get:function get(){return closable}},{key:"interaction",get:function get(){return interaction$2}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Dialog),"observedAttributes",this).concat(['interaction','backdrop','variant','fullscreen','icon','closable','movable'])}}]);return Dialog}(BaseOverlay(BaseComponent(HTMLElement)));var DialogHeader=(function(){return document.createElement('coral-dialog-header')});var DialogContent=(function(){return document.createElement('coral-dialog-content')});var DialogFooter=(function(){return document.createElement('coral-dialog-footer')});commons.extend(strings,{'coral-component-dialog':translations$5});commons._define('coral-dialog',Dialog);Dialog.Header=DialogHeader;Dialog.Content=DialogContent;Dialog.Footer=DialogFooter;var template$6=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["headerWrapper"]=document.createElement("div");el0.className+=" _coral-Dialog-header";el0.setAttribute("handle","headerWrapper");el0.setAttribute("role","presentation");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["closeButton"]=document.createElement("button","coral-button");el2.setAttribute("tracking","off");el2.setAttribute("handle","closeButton");el2.className+=" _coral-Dialog-closeButton _coral-ClearButton";el2.setAttribute("type","button");el2.setAttribute("is","coral-button");el2.setAttribute("variant","_custom");el2.setAttribute("icon","close");el2.setAttribute("title",data_0["i18n"]["get"]('Close'));el2.setAttribute("tabindex","-1");el2.setAttribute("coral-close","");frag.appendChild(el2);var el3=document.createTextNode("\n");frag.appendChild(el3);var el4=this["tip"]=document.createElement("div");el4.className+=" _coral-Popover-tip";el4.setAttribute("handle","tip");frag.appendChild(el4);var el5=document.createTextNode("\n");frag.appendChild(el5);return frag};var CLASSNAME$k='_coral-Popover';var OFFSET=5;var capitalize$2=function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)};var _isEmpty=function _isEmpty(el){return!el||el.children.length===0&&el.textContent.replace(/\s*/g,'')===''};var closable$1={ON:'on',OFF:'off'};var variant$5={DEFAULT:'default',ERROR:'error',WARNING:'warning',SUCCESS:'success',HELP:'help',INFO:'info',_COACHMARK:'_coachmark'};var ALL_VARIANT_CLASSES$4=[];for(var variantValue$3 in variant$5){if(variantValue$3!=='COACHMARK'){ALL_VARIANT_CLASSES$4.push("_coral-Dialog--".concat(variant$5[variantValue$3]))}}var placement$1=Overlay.placement;var ALL_PLACEMENT_CLASSES=[];for(var placementKey in placement$1){ALL_PLACEMENT_CLASSES.push("".concat(CLASSNAME$k,"--").concat(placement$1[placementKey]))}var Popover=function(_Overlay){_inherits(Popover,_Overlay);var _super=_createSuper(Popover);function Popover(){var _this;_classCallCheck(this,Popover);_this=_super.call(this);_this._elements=commons.extend(_this._elements,{header:_this.querySelector('coral-popover-header')||document.createElement('coral-popover-header'),content:_this.querySelector('coral-popover-content')||document.createElement('coral-popover-content'),footer:_this.querySelector('coral-popover-footer')||document.createElement('coral-popover-footer')});template$6.call(_this._elements,{i18n:i18n});_this._delegateEvents({'global:capture:click':'_handleClick','coral-overlay:positioned':'_onPositioned','coral-overlay:_animate':'_onAnimate'});_this._focusOnShow=_this.constructor.focusOnShow.ON;_this._trapFocus=_this.constructor.trapFocus.ON;_this._returnFocus=_this.constructor.returnFocus.ON;_this._overlayAnimationTime=_this.constructor.FADETIME;_this._lengthOffset=OFFSET;['header','footer'].forEach(function(name){_this["_".concat(name,"Observer")]=new MutationObserver(function(){_this._hideContentZoneIfEmpty(name);_this._toggleFlyout()});_this._observeContentZone(name)});return _this}_createClass(Popover,[{key:"_setAriaExpandedOnTarget",value:function _setAriaExpandedOnTarget(){var _this2=this;var target=this._getTarget();if(target){var hasPopupAttribute=target.hasAttribute('aria-haspopup');if(hasPopupAttribute||target.querySelector('[aria-haspopup]')!==null){var targetElements=hasPopupAttribute?[target]:target.querySelectorAll('[aria-haspopup]');targetElements.forEach(function(targetElement){return targetElement.setAttribute('aria-expanded',_this2.open)})}}}},{key:"_onPositioned",value:function _onPositioned(event){if(this.open){var _this$classList;(_this$classList=this.classList).remove.apply(_this$classList,ALL_PLACEMENT_CLASSES);this.classList.add("".concat(CLASSNAME$k,"--").concat(event.detail.placement))}}},{key:"_onAnimate",value:function _onAnimate(){var popperPlacement=this.getAttribute('x-placement');if(popperPlacement==='left'){this.style.left='8px'}else if(popperPlacement==='top'){this.style.top='8px'}else if(popperPlacement==='right'){this.style.left='-8px'}else if(popperPlacement==='bottom'){this.style.top='-8px'}}},{key:"_insertTypeIcon",value:function _insertTypeIcon(){if(this._elements.icon){this._elements.icon.remove()}var variantValue=this.variant;if(variantValue===variant$5.WARNING||variantValue===variant$5.ERROR){variantValue='alert'}if(variantValue!==variant$5.DEFAULT&&variantValue!==variant$5._COACHMARK){var iconName=capitalize$2(variantValue);this._elements.headerWrapper.insertAdjacentHTML('beforeend',Icon._renderSVG("spectrum-css-icon-".concat(iconName,"Medium"),['_coral-Dialog-typeIcon',"_coral-UIIcon-".concat(iconName,"Medium")]));this._elements.icon=this.querySelector('._coral-Dialog-typeIcon')}}},{key:"_observeContentZone",value:function _observeContentZone(name){var observer=this["_".concat(name,"Observer")];if(observer){observer.disconnect();observer.observe(this._elements[name],{childList:true,characterData:true,subtree:true})}}},{key:"_hideContentZoneIfEmpty",value:function _hideContentZoneIfEmpty(name){var contentZone=this._elements[name];var target=name==='header'?this._elements.headerWrapper:contentZone;var hiddenValue=_isEmpty(contentZone);if(hiddenValue!==target.hidden){target.hidden=hiddenValue;this.reposition()}}},{key:"_toggleCoachMark",value:function _toggleCoachMark(isCoachMark){var _this3=this;this.classList.toggle('_coral-CoachMarkPopover',isCoachMark);this._elements.headerWrapper.classList.toggle('_coral-Dialog-header',!isCoachMark);this._elements.headerWrapper.classList.toggle('_coral-CoachMarkPopover-header',isCoachMark);['header','content','footer'].forEach(function(contentZone,i){var el=_this3[contentZone];var type=i===0?'title':contentZone;if(el){el.classList.toggle("_coral-Dialog-".concat(type),!isCoachMark);el.classList.toggle("_coral-CoachMarkPopover-".concat(type),isCoachMark)}})}},{key:"_toggleFlyout",value:function _toggleFlyout(){var isFlyout=this._variant===variant$5._COACHMARK||this._variant===variant$5.DEFAULT&&_isEmpty(this.header)&&_isEmpty(this.footer);this.classList.toggle("".concat(CLASSNAME$k,"--dialog"),!isFlyout);this._elements.tip.hidden=isFlyout}},{key:"_handleClick",value:function _handleClick(event){if(this.interaction===this.constructor.interaction.OFF){return}var eventTarget=event.target;var targetEl=this._getTarget();var eventIsWithinTarget=targetEl?targetEl.contains(eventTarget):false;if(eventIsWithinTarget){if(!this.open&&!targetEl.disabled){this.show();this._trackEvent('display','coral-popover',event)}else{this.hide();this._trackEvent('close','coral-popover',event)}}else if(this.open&&!this.contains(eventTarget)){var target=eventTarget.closest('._coral-Overlay');if(target&&this.contains(target._getTarget())){return}this.hide();this._trackEvent('close','coral-popover',event)}}},{key:"render",value:function render(){var _this4=this;_get(_getPrototypeOf(Popover.prototype),"render",this).call(this);this.classList.add(CLASSNAME$k);if(!this.hasAttribute('role')){this.setAttribute('role','dialog')}if(!this.hasAttribute('aria-live')){this.setAttribute('aria-live','assertive')}if(!this._variant){this.variant=variant$5.DEFAULT}if(!this._closable){this.closable=closable$1.OFF}var header=this._elements.header;var content=this._elements.content;var footer=this._elements.footer;var contentZoneProvided=this.contains(content)&&content||this.contains(footer)&&footer||this.contains(header)&&header;if(header.parentNode){header.remove()}if(content.parentNode){content.remove()}if(footer.parentNode){footer.remove()}Array.prototype.filter.call(this.children,function(child){return child.hasAttribute('coral-tabcapture')}).forEach(function(tabCapture){_this4.removeChild(tabCapture)});var template=this.querySelectorAll('._coral-Dialog-header, ._coral-Dialog-closeButton, ._coral-Popover-tip');for(var i=0;i<template.length;i+=1){template[i].remove()}if(!contentZoneProvided){while(this.firstChild){content.appendChild(this.firstChild)}}var frag=document.createDocumentFragment();frag.appendChild(this._elements.headerWrapper);frag.appendChild(this._elements.closeButton);frag.appendChild(this._elements.tip);this.appendChild(frag);this.header=header;this.content=content;this.footer=footer}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-popover-content',insert:function insert(content){content.classList.add('_coral-Dialog-content');var footer=this.footer;this.insertBefore(content,this.contains(footer)&&footer||null)}})}},{key:"header",get:function get(){return this._getContentZone(this._elements.header)},set:function set(value){this._setContentZone('header',value,{handle:'header',tagName:'coral-popover-header',insert:function insert(header){header.classList.add('_coral-Dialog-title');this._elements.headerWrapper.insertBefore(header,this._elements.headerWrapper.firstChild)},set:function set(){this._observeContentZone('header');this._hideContentZoneIfEmpty('header')}})}},{key:"footer",get:function get(){return this._getContentZone(this._elements.footer)},set:function set(value){this._setContentZone('footer',value,{handle:'footer',tagName:'coral-popover-footer',insert:function insert(footer){footer.classList.add('_coral-Dialog-footer');this.appendChild(footer)},set:function set(){this._observeContentZone('footer');this._hideContentZoneIfEmpty('footer')}})}},{key:"variant",get:function get(){return this._variant||variant$5.DEFAULT},set:function set(value){var _this$classList2;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$5)(value)&&value||variant$5.DEFAULT;this._reflectAttribute('variant',this._variant);this._insertTypeIcon();(_this$classList2=this.classList).remove.apply(_this$classList2,ALL_VARIANT_CLASSES$4);this._toggleFlyout();if(this._variant===variant$5._COACHMARK){this.setAttribute('role','dialog');this._toggleCoachMark(true)}else{this._toggleCoachMark(false);if(this._variant===variant$5.DEFAULT){if(!this.hasAttribute('role')){this.setAttribute('role','dialog')}}else{this.classList.add("_coral-Dialog--".concat(this._variant));this.setAttribute('role','alertdialog')}}}},{key:"closable",get:function get(){return this._closable||closable$1.OFF},set:function set(value){value=transform.string(value).toLowerCase();this._closable=validate.enumeration(closable$1)(value)&&value||closable$1.OFF;this._reflectAttribute('closable',this._closable);this._elements.closeButton.style.display=this._closable===closable$1.ON?'block':'none'}},{key:"target",get:function get(){return _get(_getPrototypeOf(Popover.prototype),"target",this)},set:function set(value){_set(_getPrototypeOf(Popover.prototype),"target",value,this,true);var target=this._getTarget();if(target&&target.tagName==='CORAL-COACHMARK'){this.setAttribute('variant',variant$5._COACHMARK)}this._setAriaExpandedOnTarget()}},{key:"open",get:function get(){return _get(_getPrototypeOf(Popover.prototype),"open",this)},set:function set(value){_set(_getPrototypeOf(Popover.prototype),"open",value,this,true);var target=this._getTarget();if(target){var is=target.getAttribute('is');if(is==='coral-button'||is==='coral-anchorbutton'){target.classList.toggle('is-selected',this.open)}this._setAriaExpandedOnTarget()}}},{key:"icon",get:function get(){return this._icon||''},set:function set(value){this._icon=transform.string(value)}},{key:"_contentZones",get:function get(){return{'coral-popover-header':'header','coral-popover-content':'content','coral-popover-footer':'footer'}}}],[{key:"variant",get:function get(){return variant$5}},{key:"closable",get:function get(){return closable$1}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Popover),"observedAttributes",this).concat(['closable','variant'])}}]);return Popover}(Overlay);var PopoverHeader=(function(){return document.createElement('coral-popover-header')});var PopoverContent=(function(){return document.createElement('coral-popover-content')});var PopoverFooter=(function(){return document.createElement('coral-popover-footer')});var CLASSNAMES=['coral-Rule','coral-Rule--subsection2'];var PopoverSeparator=function(_BaseComponent){_inherits(PopoverSeparator,_BaseComponent);var _super=_createSuper(PopoverSeparator);function PopoverSeparator(){_classCallCheck(this,PopoverSeparator);return _super.apply(this,arguments)}_createClass(PopoverSeparator,[{key:"connectedCallback",value:function connectedCallback(){var _this$classList;(_this$classList=this.classList).add.apply(_this$classList,CLASSNAMES)}}]);return PopoverSeparator}(BaseComponent(HTMLElement));commons.extend(strings,{'coral-component-popover':translations$4});commons._define('coral-popover-separator',PopoverSeparator);commons._define('coral-popover',Popover);Popover.Header=PopoverHeader;Popover.Content=PopoverContent;Popover.Footer=PopoverFooter;Popover.Separator=PopoverSeparator;var template$7=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;var buttonId=data.commons.getUID();var listId=data.commons.getUID();data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["button"]=document.createElement("button","coral-button");el2.setAttribute("tracking","off");el2.setAttribute("variant","_custom");el2.setAttribute("iconposition","right");el2.setAttribute("handle","button");el2.setAttribute("type","button");el2.setAttribute("is","coral-button");el2.setAttribute("aria-haspopup","listbox");el2.id=buttonId;el2.setAttribute("aria-controls",listId);el2.setAttribute("aria-expanded","false");el2.className+=" _coral-FieldButton _coral-Dropdown-trigger";var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=this["label"]=document.createElement("coral-button-label");el4.className+=" _coral-Dropdown-label";el4.setAttribute("handle","label");el4.id=data_0["commons"]["getUID"]();el4.textContent="​";el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);var el6=this["invalidIcon"]=document.createElement("coral-icon");el6.setAttribute("icon","alert");el6.setAttribute("hidden","");el6.setAttribute("handle","invalidIcon");el6.className+=" _coral-Dropdown-invalidIcon";el6.setAttribute("alt",data_0["i18n"]["get"]('invalid'));el6.id=data_0["commons"]["getUID"]();el2.appendChild(el6);var el7=document.createTextNode("\n");el2.appendChild(el7);frag.appendChild(el2);var el8=document.createTextNode("\n");frag.appendChild(el8);data=data_0;this.button._elements.label=this.label;this.button.insertAdjacentHTML('beforeend',data.Icon._renderSVG('spectrum-css-icon-ChevronDownMedium',['_coral-Dropdown-icon','_coral-UIIcon-ChevronDownMedium']));data_0=data;var el10=document.createTextNode("\n");frag.appendChild(el10);var el11=this["overlay"]=document.createElement("coral-popover");el11.setAttribute("withinoffset","0");el11.setAttribute("tracking","off");el11.className+=" _coral-Select-overlay";el11.setAttribute("smart","");el11.id=data_0["commons"]["getUID"]();el11.setAttribute("handle","overlay");el11.setAttribute("placement","bottom");el11.setAttribute("focusonshow","coral-selectlist");el11.setAttribute("role","presentation");var el12=document.createTextNode("\n  ");el11.appendChild(el12);data=data_0;var maxHeight='max-height:'+32*6+'px';data_0=data;var el14=document.createTextNode("\n  ");el11.appendChild(el14);var el15=this["list"]=document.createElement("coral-selectlist");el15.setAttribute("tracking","off");el15.setAttribute("style",maxHeight);el15.setAttribute("handle","list");el15.setAttribute("role","listbox");el15.id=listId;el11.appendChild(el15);var el16=document.createTextNode("\n");el11.appendChild(el16);frag.appendChild(el11);var el17=document.createTextNode("\n");frag.appendChild(el17);var el18=this["input"]=document.createElement("input");el18.setAttribute("handle","input");el18.setAttribute("type","hidden");frag.appendChild(el18);var el19=document.createTextNode("\n");frag.appendChild(el19);var el20=this["nativeSelect"]=document.createElement("select");el20.setAttribute("handle","nativeSelect");el20.className+=" _coral-Dropdown-select";el20.setAttribute("tabindex","-1");frag.appendChild(el20);var el21=document.createTextNode("\n");frag.appendChild(el21);var el22=this["taglist"]=document.createElement("coral-taglist");el22.setAttribute("tracking","off");el22.setAttribute("handle","taglist");el22.className+=" _coral-Dropdown-tagList";frag.appendChild(el22);var el23=document.createTextNode("\n");frag.appendChild(el23);return frag};var variant$6={DEFAULT:'default',QUIET:'quiet'};var CLASSNAME$l='_coral-Dropdown';var IS_MOBILE_DEVICE=navigator.userAgent.match(/iPhone|iPad|iPod|Android/i)!==null;var itemValueFromDOM$1=function itemValueFromDOM(item){var attr=item.getAttribute('value');return attr!==null?attr:item.textContent.replace(/\s{2,}/g,' ').trim()};var arrayDiff=function arrayDiff(a,b){return a.filter(function(item){return!b.some(function(item2){return item===item2})})};var Select=function(_BaseFormField){_inherits(Select,_BaseFormField);var _super=_createSuper(Select);function Select(){var _this;_classCallCheck(this,Select);_this=_super.call(this);_this._elements={};template$7.call(_this._elements,{commons:commons,Icon:Icon,i18n:i18n});var events={'global:click':'_onGlobalClick','global:touchstart':'_onGlobalClick','coral-collection:add coral-taglist':'_onInternalEvent','coral-collection:remove coral-taglist':'_onInternalEvent','coral-select-item:_valuechanged coral-select-item':'_onItemValueChange','coral-select-item:_contentchanged coral-select-item':'_onItemContentChange','coral-select-item:_disabledchanged coral-select-item':'_onItemDisabledChange','coral-select-item:_selectedchanged coral-select-item':'_onItemSelectedChange','change coral-taglist':'_onTagListChange','change select':'_onNativeSelectChange','click select':'_onNativeSelectClick','click > ._coral-Dropdown-trigger':'_onButtonClick','key:space > ._coral-Dropdown-trigger':'_onSpaceKey','key:enter > ._coral-Dropdown-trigger':'_onSpaceKey','key:return > ._coral-Dropdown-trigger':'_onSpaceKey','key:down > ._coral-Dropdown-trigger':'_onSpaceKey'};var overlayId=_this._elements.overlay.id;events["global:capture:coral-collection:add #".concat(overlayId," coral-selectlist")]='_onSelectListItemAdd';events["global:capture:coral-collection:remove #".concat(overlayId," coral-selectlist")]='_onInternalEvent';events["global:capture:coral-selectlist:beforechange #".concat(overlayId)]='_onSelectListBeforeChange';events["global:capture:coral-selectlist:change #".concat(overlayId)]='_onSelectListChange';events["global:capture:coral-selectlist:scrollbottom #".concat(overlayId)]='_onSelectListScrollBottom';events["global:capture:coral-overlay:close #".concat(overlayId)]='_onOverlayToggle';events["global:capture:coral-overlay:open #".concat(overlayId)]='_onOverlayToggle';events["global:capture:coral-overlay:positioned #".concat(overlayId)]='_onOverlayPositioned';events["global:capture:coral-overlay:beforeopen #".concat(overlayId)]='_onBeforeOpen';events["global:capture:coral-overlay:beforeclose #".concat(overlayId)]='_onInternalEvent';events["global:keypress #".concat(overlayId)]='_onOverlayKeyPress';_this._delegateEvents(commons.extend(_this._events,events));_this._labellableElement=_this._elements.button;_this._bulkSelectionChange=false;_this._useNativeInput=IS_MOBILE_DEVICE;_this._elements.taglist.reset=function(){};_this._initialValues=[];_this.items._startHandlingItems();return _this}_createClass(Select,[{key:"_setName",value:function _setName(value){if(this.multiple){this._elements.input.name='';this._elements.taglist.setAttribute('name',value)}else{this._elements.taglist.setAttribute('name','');this._elements.input.name=value}}},{key:"_showOptions",value:function _showOptions(checkAvailableSpace){var _this2=this;if(checkAvailableSpace){var ITEM_SIZE_THRESHOLD=30;var scrollHeight=this._elements.list.scrollHeight;var viewportHeight=this._elements.list.clientHeight;var scrollTop=this._elements.list.scrollTop;var loadIndicator=this._elements.list._elements.loadIndicator;if(loadIndicator&&loadIndicator.parentNode){var outerHeight=function outerHeight(el){var height=el.offsetHeight;var style=getComputedStyle(el);height+=parseInt(style.marginTop,10)+parseInt(style.marginBottom,10);return height};scrollHeight-=outerHeight(loadIndicator)}if(scrollTop+viewportHeight<scrollHeight-ITEM_SIZE_THRESHOLD){return}}if(!this._useNativeInput){if(!this._elements.overlay.open){this._elements.overlay.open=true}requestAnimationFrame(function(){_this2._elements.overlay._onAnimate();_this2._elements.overlay.reposition()})}var event=this.trigger('coral-select:showitems',{start:this.items.length});if(!this._useNativeInput){this._elements.list.loading=event.defaultPrevented}this._elements.button.setAttribute('aria-expanded',true)}},{key:"_hideOptions",value:function _hideOptions(){if(!this.multiple){this._elements.overlay.open=false;this.trigger('coral-select:hideitems')}this._elements.button.setAttribute('aria-expanded',false)}},{key:"_onGlobalClick",value:function _onGlobalClick(event){if(!this._elements.overlay.open){return}var eventTargetWithinOverlayTarget=this._elements.button.contains(event.target);var eventTargetWithinItself=this._elements.overlay.contains(event.target);if(!eventTargetWithinOverlayTarget&&!eventTargetWithinItself){this._hideOptions()}}},{key:"_onSelectListItemAdd",value:function _onSelectListItemAdd(event){event.stopImmediatePropagation();this.loading=false;this._elements.list.style.height='';var style=window.getComputedStyle(this._elements.list);var height=parseInt(style.height,10);var maxHeight=parseInt(style.maxHeight,10);if(height<maxHeight){this._elements.list.style.height="".concat(height-1,"px")}}},{key:"_onBeforeOpen",value:function _onBeforeOpen(event){event.stopImmediatePropagation();if(this.readOnly){event.preventDefault()}}},{key:"_onInternalEvent",value:function _onInternalEvent(event){event.stopImmediatePropagation()}},{key:"_onItemAdded",value:function _onItemAdded(item){var selectListItemParent=this._elements.list;var selectListItem=item._selectListItem||new SelectList.Item();selectListItemParent.appendChild(selectListItem);selectListItem.set({value:item.value,content:{innerHTML:item.innerHTML},disabled:item.disabled,selected:item.selected,trackingElement:item.trackingElement},true);var nativeOption=item._nativeOption||new Option();this._elements.nativeSelect.appendChild(nativeOption);if(this._initialValues.indexOf(item.value)!==-1){nativeOption.setAttribute('selected','selected')}nativeOption.selected=item.selected;nativeOption.value=item.value;nativeOption.disabled=item.disabled;nativeOption.innerHTML=item.innerHTML;if(this.multiple){if(item.selected){this._addTagToTagList(item)}}else if(item.selected){this._elements.input.value=item.value}item._selectListItem=selectListItem;item._nativeOption=nativeOption;selectListItem._selectItem=item;nativeOption._selectItem=item}},{key:"_onItemRemoved",value:function _onItemRemoved(item){if(item._selectListItem){item._selectListItem.remove();item._selectListItem._selectItem=undefined;item._selectListItem=undefined}if(item._nativeOption){this._elements.nativeSelect.removeChild(item._nativeOption);item._nativeOption._selectItem=undefined;item._nativeOption=undefined}this._removeTagFromTagList(item,true)}},{key:"_onItemSelected",value:function _onItemSelected(item){if(!item._selectListItem||!item._selectListItem.parentNode){this._onItemAdded(item)}item._selectListItem.selected=true;item._nativeOption.selected=true;if(this.multiple){this._addTagToTagList(item);}else{this._elements.input.value=item.value}}},{key:"_onItemDeselected",value:function _onItemDeselected(item){if(!item._selectListItem||!item._selectListItem.parentNode){this._onItemAdded(item)}item._selectListItem.selected=false;item._nativeOption.selected=false;if(this.multiple){this._removeTagFromTagList(item)}}},{key:"_onSelectListBeforeChange",value:function _onSelectListBeforeChange(event){event.stopImmediatePropagation();if(!this.multiple&&event.detail.item.selected){event.preventDefault();this._elements.overlay.open=false}}},{key:"_onSelectListChange",value:function _onSelectListChange(event){event.stopImmediatePropagation();if(this._bulkSelectionChange){return}var oldSelection=event.detail.oldSelection||[];oldSelection=!Array.isArray(oldSelection)?[oldSelection]:oldSelection;var selection=event.detail.selection||[];selection=!Array.isArray(selection)?[selection]:selection;if(event.detail.oldSelection!==event.detail.selection){this._bulkSelectionChange=true;var removedSelection=arrayDiff(oldSelection,selection);removedSelection.forEach(function(listItem){if(listItem._selectItem){listItem._selectItem.removeAttribute('selected')}});var newSelection=arrayDiff(selection,oldSelection);newSelection.forEach(function(listItem){if(listItem._selectItem){listItem._selectItem.setAttribute('selected','')}});this._bulkSelectionChange=false;if(this._elements.overlay.open){this._hideOptions();if(newSelection.length||removedSelection.length){this.trigger('change');}}}else if(this._elements.overlay.open){this._hideOptions()}if(!this.multiple){this._trackEvent('change','coral-select-item',event,this.selectedItem)}}},{key:"_onTagListChange",value:function _onTagListChange(event){event.stopImmediatePropagation();if(this._bulkSelectionChange){return}this._bulkSelectionChange=true;var values=event.target.values;var itemValue;this.items._getAllSelected().forEach(function(item){itemValue=itemValueFromDOM$1(item);item[values.indexOf(itemValue)!==-1?'setAttribute':'removeAttribute']('selected','')});this._bulkSelectionChange=false;if(!values.length){this._elements.button.focus()}this.trigger('change')}},{key:"_addTagToTagList",value:function _addTagToTagList(item){item._tag=item._tag||new Tag();item._tag.set({value:item.value,label:{innerHTML:item.innerHTML}},true);this._elements.taglist.items.add(item._tag)}},{key:"_removeTagFromTagList",value:function _removeTagFromTagList(item,destroy){if(item._tag){item._tag.remove();item._tag=destroy?undefined:item._tag}}},{key:"_onSelectListScrollBottom",value:function _onSelectListScrollBottom(event){event.stopImmediatePropagation();if(this._elements.overlay.open){this._showOptions()}}},{key:"_onButtonClick",value:function _onButtonClick(event){event.preventDefault();if(this.disabled||this.readOnly){return}if(!this._useNativeInput){if(this._elements.overlay.classList.contains('is-open')){this._hideOptions()}else{this._showOptions(true)}}}},{key:"_onNativeSelectClick",value:function _onNativeSelectClick(){this._showOptions(false)}},{key:"_onOverlayKeyPress",value:function _onOverlayKeyPress(event){this._elements.list._onKeyPress(event)}},{key:"_onSpaceKey",value:function _onSpaceKey(event){if(this.disabled||this.readOnly){return}event.preventDefault();if(this._useNativeInput){this._elements.nativeSelect.dispatchEvent(new MouseEvent('mousedown'))}else if(!this._elements.overlay.open||event.keyCode===Keys.keyToCode('space')){this._elements.button.click()}}},{key:"_onOverlayToggle",value:function _onOverlayToggle(event){event.stopImmediatePropagation();var type=event.type.split(':').pop();this.trigger("coral-select:_overlay".concat(type));this._elements.button.classList.toggle('is-selected',event.target.open);this._elements.button.setAttribute('aria-expanded',event.target.open);if(!event.target.open){this.classList.remove('is-openAbove','is-openBelow')}}},{key:"_onOverlayPositioned",value:function _onOverlayPositioned(event){event.stopImmediatePropagation();if(this._elements.overlay.open){this._elements.overlay.style.width="".concat(this.offsetWidth,"px")}}},{key:"_onNativeSelectChange",value:function _onNativeSelectChange(event){event.stopImmediatePropagation();if(this._bulkSelectionChange){return}this._bulkSelectionChange=true;var oldSelectedOptions=this.selectedItems.map(function(element){return element._nativeOption});var selectedOptions=Array.prototype.slice.call(event.target.querySelectorAll(':checked'));var diff=arrayDiff(oldSelectedOptions,selectedOptions);diff.forEach(function(item){item._selectItem.selected=false});var newSelection=arrayDiff(selectedOptions,oldSelectedOptions);newSelection.forEach(function(item){item._selectItem.selected=true});this._bulkSelectionChange=false;if(!this.multiple){this._elements.button.focus();this.trigger('coral-select:hideitems')}this.trigger('change')}},{key:"_onItemContentChange",value:function _onItemContentChange(event){event.stopImmediatePropagation();var item=event.target;if(item._selectListItem){var content=new SelectList.Item.Content();content.innerHTML=item.innerHTML;item._selectListItem.content=content}if(item._nativeOption){item._nativeOption.innerHTML=item.innerHTML}if(item._tag&&item._tag.label){item._tag.label.innerHTML=item.innerHTML}this._syncSelectedItemPlaceholder()}},{key:"_syncSelectedItemPlaceholder",value:function _syncSelectedItemPlaceholder(){this.placeholder=this.getAttribute('placeholder');if(this.selectedItem&&!this.multiple){this._elements.label.classList.remove('is-placeholder');this._elements.label.innerHTML=this.selectedItem.innerHTML}}},{key:"_onItemValueChange",value:function _onItemValueChange(event){event.stopImmediatePropagation();var item=event.target;if(item._selectListItem){item._selectListItem.value=item.value}if(item._nativeOption){item._nativeOption.value=item.value}if(item._tag){item._tag.value=item.value}}},{key:"_onItemDisabledChange",value:function _onItemDisabledChange(event){event.stopImmediatePropagation();var item=event.target;if(item._selectListItem){item._selectListItem.disabled=item.disabled}if(item._nativeOption){item._nativeOption.disabled=item.disabled}}},{key:"_validateInitialState",value:function _validateInitialState(nodes){var item;var index;for(var i=0,nodeCount=nodes.length;i<nodeCount;i+=1){item=nodes[i];index=this._initialValues.indexOf(item.value);if(index!==-1){this._initialValues.splice(index,1)}}}},{key:"_onCollectionChange",value:function _onCollectionChange(addedNodes,removedNodes){this._validateInitialState(removedNodes);this._setStateFromDOM()}},{key:"_updateLabel",value:function _updateLabel(){this._syncSelectedItemPlaceholder()}},{key:"_setStateFromDOM",value:function _setStateFromDOM(){if(!this.hasAttribute('multiple')){this.items._deselectAllExceptLast();var selectedItem=this.items._getFirstSelected();if(!selectedItem){this._elements.input.value='';if(transform.string(this.getAttribute('placeholder'))===''){var selectable=this.items._getFirstSelectable();if(selectable){selectable.setAttribute('selected','');this._elements.input.value=itemValueFromDOM$1(selectable)}}}else{this._elements.input.value=itemValueFromDOM$1(selectedItem)}}this._updateLabel()}},{key:"_onItemSelectedChange",value:function _onItemSelectedChange(event){event.stopImmediatePropagation();var item=event.target;this._bulkSelectionChange=true;if(item.selected){this._onItemSelected(item);if(this.multiple){this._trackEvent('select','coral-select-item',event,item)}if(!this.hasAttribute('multiple')){this.items._deselectAllExcept(item)}}else{this._onItemDeselected(item);if(this.multiple){this._trackEvent('deselect','coral-select-item',event,item)}}this._bulkSelectionChange=false;this._updateLabel()}},{key:"clear",value:function clear(){this.value=''}},{key:"focus",value:function focus(){if(!this.contains(document.activeElement)){this._elements.button.focus()}}},{key:"reset",value:function reset(){this.values=this._initialValues}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(Select.prototype),"connectedCallback",this).call(this);var overlay=this._elements.overlay;overlay.removeAttribute('open');if(overlay._parent){overlay._parent.appendChild(overlay)}}},{key:"render",value:function render(){var _this3=this;_get(_getPrototypeOf(Select.prototype),"render",this).call(this);this.classList.add(CLASSNAME$l);if(!this._variant){this.variant=variant$6.DEFAULT}this.classList.toggle("".concat(CLASSNAME$l,"--native"),this._useNativeInput);if(!this._useNativeInput&&this.contains(this._elements.nativeSelect)){this.removeChild(this._elements.nativeSelect)}this._setStateFromDOM();this.selectedItems.forEach(function(item){_this3._initialValues.push(itemValueFromDOM$1(item))});var templateElements=this.querySelectorAll('[handle]');for(var i=0;i<templateElements.length;i+=1){var currentElement=templateElements[i];if(currentElement.parentNode===this){this.removeChild(currentElement)}}var frag=document.createDocumentFragment();frag.appendChild(this._elements.button);frag.appendChild(this._elements.input);frag.appendChild(this._elements.nativeSelect);frag.appendChild(this._elements.taglist);frag.appendChild(this._elements.overlay);this._elements.overlay.target=this._elements.button;this._elements.overlay.returnFocusTo(this._elements.button);this.appendChild(frag)}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(Select.prototype),"disconnectedCallback",this).call(this);var overlay=this._elements.overlay;if(!this.contains(overlay)){overlay._parent=overlay._repositioned?document.body:this;overlay.remove()}}},{key:"overlay",get:function get(){return this._elements.overlay}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-select-item',onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved,onCollectionChange:this._onCollectionChange})}return this._items}},{key:"multiple",get:function get(){return this._multiple||false},set:function set(value){var _this4=this;this._multiple=transform.booleanAttr(value);this._reflectAttribute('multiple',this._multiple);if(!this._multiple){this.removeChild(this._elements.taglist)}else{this.appendChild(this._elements.taglist)}if(this._nativeInput){this.removeChild(this._elements.nativeSelect)}this._elements.nativeSelect.multiple=this._multiple;this._elements.nativeSelect.selectedIndex=-1;if(this._nativeInput){if(this._multiple){if(this._elements.nativeSelect.parentNode){this.insertBefore(this._elements.nativeSelect,this._elements.taglist)}}else{this.appendChild(this._elements.nativeSelect)}}this._elements.list.multiple=this._multiple;this._setName(this.getAttribute('name')||'');this._setStateFromDOM();this.items.getAll().forEach(function(item){if(_this4._multiple&&item.hasAttribute('selected')){_this4._addTagToTagList(item)}else{_this4._removeTagFromTagList(item);if(item.hasAttribute('selected')){_this4._elements.input.value=itemValueFromDOM$1(item)}}})}},{key:"placeholder",get:function get(){return this._placeholder||''},set:function set(value){this._placeholder=transform.string(value);this._reflectAttribute('placeholder',this._placeholder);if(this._placeholder&&(this.hasAttribute('multiple')||!this.selectedItem)){this._elements.label.classList.add('is-placeholder');this._elements.label.textContent=this._placeholder}else if(this.hasAttribute('multiple')){this._elements.label.classList.add('is-placeholder');this._elements.label.textContent=i18n.get('Select')}else if(!this.selectedItem){this._elements.input.value='';var placeholderItem=this.items._getFirstSelectable();this._elements.label.classList.remove('is-placeholder');if(placeholderItem){placeholderItem.setAttribute('selected','');this._elements.label.innerHTML=placeholderItem.innerHTML}else{this._elements.label.textContent=''}}}},{key:"name",get:function get(){return this.multiple?this._elements.taglist.name:this._elements.input.name},set:function set(value){this._setName(value);this._reflectAttribute('name',this.name)}},{key:"value",get:function get(){return this.multiple?this._elements.taglist.value:this._elements.input.value},set:function set(value){this.values=[value]}},{key:"values",get:function get(){if(this.multiple){return this._elements.taglist.values}return this.selectedItem?[this._elements.input.value]:[]},set:function set(values){if(Array.isArray(values)){if(!this.multiple&&values.length>1){values=[values[0]]}var items=this.items.getAll();var itemValue;if(this.multiple){items.forEach(function(item){itemValue=itemValueFromDOM$1(item);item[values.indexOf(itemValue)!==-1?'setAttribute':'removeAttribute']('selected','')})}else{var targetItem;var value=values[0]||'';items.forEach(function(item){if(!targetItem){itemValue=itemValueFromDOM$1(item);if(itemValue===value){item.setAttribute('selected','');targetItem=item;return}}item.removeAttribute('selected')});if(!targetItem){this._setStateFromDOM()}}}}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.button.disabled=this._disabled;this._elements.input.disabled=this._disabled;this._elements.taglist.disabled=this._disabled}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(Select.prototype),"invalid",this)},set:function set(value){_set(_getPrototypeOf(Select.prototype),"invalid",value,this,true);this.classList.toggle('is-invalid',this.invalid);this._elements.button.classList.toggle('is-invalid',this.invalid);this._elements.invalidIcon.hidden=!this.invalid}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.input.required=this._required;this._elements.taglist.required=this._required}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.input.readOnly=this._readOnly;this._elements.taglist.readOnly=this._readOnly;this._elements.taglist.disabled=this._readOnly}},{key:"labelled",get:function get(){return _get(_getPrototypeOf(Select.prototype),"labelled",this)},set:function set(value){_set(_getPrototypeOf(Select.prototype),"labelled",value,this,true);if(this.labelled){if(!this.labelledBy){this._elements.button.setAttribute('aria-labelledby',"".concat(this._elements.button.id," ").concat(this._elements.label.id," ").concat(this.invalid?this._elements.invalidIcon.id:''))}this._elements.nativeSelect.setAttribute('aria-label',value)}else{this._elements.button.removeAttribute('aria-label');this._elements.nativeSelect.removeAttribute('aria-label');if(!this.labelledBy){this._elements.button.removeAttribute('aria-labelledby')}}this._elements.taglist.labelled=value}},{key:"labelledBy",get:function get(){return this._labelledBy},set:function set(value){_set(_getPrototypeOf(Select.prototype),"labelledBy",value,this,true);this._labelledBy=_get(_getPrototypeOf(Select.prototype),"labelledBy",this);if(this._labelledBy){this._elements.button.setAttribute('aria-labelledby',"".concat(this._labelledBy," ").concat(this._elements.label.id," ").concat(this.invalid?this._elements.invalidIcon.id:''));this._elements.nativeSelect.setAttribute('aria-labelledby',this._labelledBy)}else{this._elements.nativeSelect.removeAttribute('aria-labelledby');if(this.labelled){this.labelled=this.labelled}}this._elements.taglist.labelledBy=this._labelledBy}},{key:"selectedItem",get:function get(){return this.hasAttribute('multiple')?this.items._getFirstSelected():this.items._getLastSelected()}},{key:"selectedItems",get:function get(){if(this.hasAttribute('multiple')){return this.items._getAllSelected()}var item=this.selectedItem;return item?[item]:[]}},{key:"loading",get:function get(){return this._elements.list.loading},set:function set(value){this._elements.list.loading=value}},{key:"variant",get:function get(){return this._variant||variant$6.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$6)(value)&&value||variant$6.DEFAULT;this._reflectAttribute('variant',this._variant);this._elements.button.classList.toggle('_coral-FieldButton--quiet',this._variant===variant$6.QUIET)}}],[{key:"variant",get:function get(){return variant$6}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Select),"observedAttributes",this).concat(['variant','multiple','placeholder','loading'])}}]);return Select}(BaseFormField(BaseComponent(HTMLElement)));var SelectItem=function(_BaseComponent){_inherits(SelectItem,_BaseComponent);var _super=_createSuper(SelectItem);function SelectItem(){var _this;_classCallCheck(this,SelectItem);_this=_super.call(this);_this._observer=new MutationObserver(_this._handleMutation.bind(_assertThisInitialized(_this)));_this._observer.observe(_assertThisInitialized(_this),{characterData:true,childList:true,subtree:true});return _this}_createClass(SelectItem,[{key:"_handleMutation",value:function _handleMutation(){this.trigger('coral-select-item:_contentchanged',{content:this.textContent})}},{key:"content",get:function get(){return this},set:function set(value){if(_typeof(value)==='object'){for(var prop in value){this[prop]=value[prop]}}}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.trigger('coral-select-item:_disabledchanged')}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.trigger('coral-select-item:_selectedchanged')}},{key:"value",get:function get(){var val=this._value;if(typeof this._value==='undefined'){if(this.getAttribute('value')===null){val=this.textContent.replace(/\s{2,}/g,' ').trim()}else{val=this.getAttribute('value')}}return val},set:function set(value){this._value=transform.string(value);this._reflectAttribute('value',this._value);this.trigger('coral-select-item:_valuechanged')}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?this.value||this.textContent.replace(/\s{2,}/g,' ').trim():this._trackingElement},set:function set(value){_set(_getPrototypeOf(SelectItem.prototype),"trackingElement",value,this,true)}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(SelectItem),"observedAttributes",this).concat(['selected','disabled','value'])}}]);return SelectItem}(BaseComponent(HTMLElement));commons.extend(strings,{'coral-component-select':translations$1});commons._define('coral-select-item',SelectItem);commons._define('coral-select',Select);Select.Item=SelectItem;var translations$6={"en-US":{"Select":"Select"},"fr-FR":{"Select":"Sélectionner"},"de-DE":{"Select":"Auswählen"},"it-IT":{"Select":"Seleziona"},"es-ES":{"Select":"Seleccionar"},"pt-BR":{"Select":"Selecionar"},"ja-JP":{"Select":"選択"},"ko-KR":{"Select":"선택"},"zh-CN":{"Select":"选择"},"zh-TW":{"Select":"選取"},"nl-NL":{"Select":"Selecteren"},"da-DK":{"Select":"Vælg"},"fi-FI":{"Select":"Valitse"},"nb-NO":{"Select":"Velg"},"sv-SE":{"Select":"Välj"},"cs-CZ":{"Select":"Vybrat"},"pl-PL":{"Select":"Wybierz"},"ru-RU":{"Select":"Выберите"},"tr-TR":{"Select":"Seç"}};var template$8=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["input"]=document.createElement("input");el0.setAttribute("type","radio");el0.setAttribute("handle","input");el0.className+=" _coral-Radio-input";el0.id=data_0["commons"]["getUID"]();frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["checkmark"]=document.createElement("span");el2.className+=" _coral-Radio-button";el2.setAttribute("handle","checkmark");frag.appendChild(el2);var el3=document.createTextNode("\n");frag.appendChild(el3);var el4=this["labelWrapper"]=document.createElement("label");el4.className+=" _coral-Radio-label";el4.setAttribute("handle","labelWrapper");el4.setAttribute("for",this["input"]["id"]);var el5=document.createTextNode("\n  ");el4.appendChild(el5);var el6=this["screenReaderOnly"]=document.createElement("span");el6.className+=" u-coral-screenReaderOnly";el6.setAttribute("handle","screenReaderOnly");el6.textContent=data_0["i18n"]["get"]('Select');el4.appendChild(el6);var el7=document.createTextNode("\n");el4.appendChild(el7);frag.appendChild(el4);var el8=document.createTextNode("\n");frag.appendChild(el8);return frag};var CLASSNAME$m='_coral-Radio';var Radio=function(_BaseFormField){_inherits(Radio,_BaseFormField);var _super=_createSuper(Radio);function Radio(){var _this;_classCallCheck(this,Radio);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{click:'_onClick',mousedown:'_onMouseDown'}));_this._elements={label:_this.querySelector('coral-radio-label')||document.createElement('coral-radio-label')};template$8.call(_this._elements,{commons:commons,i18n:i18n});_this._labellableElement=_this._elements.input;_this._observer=new MutationObserver(_this._hideLabelIfEmpty.bind(_assertThisInitialized(_this)));_this._observer.observe(_this._elements.labelWrapper,{childList:true,characterData:true,subtree:true});return _this}_createClass(Radio,[{key:"_syncRelatedRadios",value:function _syncRelatedRadios(){if(this.parentNode!==null&&this.name&&this.checked){var items=document.querySelectorAll("".concat(this.tagName,"[name=").concat(JSON.stringify(this.name),"]"));var itemCount=items.length;for(var i=0;i<itemCount;i+=1){if(items[i]!==this){items[i].removeAttribute('checked')}}}}},{key:"_hideLabelIfEmpty",value:function _hideLabelIfEmpty(){var label=this._elements.label;var hiddenValue=!(label.children.length===0&&label.textContent.replace(/\s*/g,'')==='');this._elements.labelWrapper.style.margin=!hiddenValue?'0':'';this._elements.screenReaderOnly.hidden=hiddenValue||this.labelled}},{key:"_onClick",value:function _onClick(event){if(!this.checked){if(event.target===this){this.checked=true;this.trigger('change')}this._trackEvent('checked','coral-radio',event)}}},{key:"_onMouseDown",value:function _onMouseDown(){var target=this._elements.input;requestAnimationFrame(function(){if(target!==document.activeElement){target.focus()}})}},{key:"clear",value:function clear(){this.checked=false}},{key:"reset",value:function reset(){this.checked=this._initialCheckedState}},{key:"render",value:function render(){_get(_getPrototypeOf(Radio.prototype),"render",this).call(this);this.classList.add(CLASSNAME$m);var frag=document.createDocumentFragment();var templateHandleNames=['input','checkmark','labelWrapper'];frag.appendChild(this._elements.input);frag.appendChild(this._elements.checkmark);frag.appendChild(this._elements.labelWrapper);var label=this._elements.label;if(label&&label.parentNode){label.parentNode.removeChild(label)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){label.appendChild(child)}else{this.removeChild(child)}}this.appendChild(frag);this.label=label;this._initialCheckedState=this.checked;this._syncRelatedRadios();this._hideLabelIfEmpty()}},{key:"checked",get:function get(){return this._checked||false},set:function set(value){this._checked=transform.booleanAttr(value);this._reflectAttribute('checked',this._checked);this._elements.input.checked=this._checked;this._syncRelatedRadios()}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-radio-label',insert:function insert(label){this._elements.labelWrapper.appendChild(label)}})}},{key:"name",get:function get(){return this._elements.input.name},set:function set(value){this._reflectAttribute('name',value);this._elements.input.name=value}},{key:"value",get:function get(){return this._elements.input.value||'on'},set:function set(value){this._elements.input.value=value}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.input.disabled=this._disabled}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.input.required=this._required}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this.classList.toggle('is-readOnly',this._readOnly);this._elements.input.tabIndex=this._readOnly?-1:0}},{key:"labelled",get:function get(){return _get(_getPrototypeOf(Radio.prototype),"labelled",this)},set:function set(value){_set(_getPrototypeOf(Radio.prototype),"labelled",value,this,true);this._hideLabelIfEmpty()}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?(this.name?"".concat(this.name,"=").concat(this.value):'')||(this.label||this).textContent.replace(/\s{2,}/g,' ').trim():this._trackingElement},set:function set(value){_set(_getPrototypeOf(Radio.prototype),"trackingElement",value,this,true)}},{key:"_componentTargetProperty",get:function get(){return 'checked'}},{key:"_eventTargetProperty",get:function get(){return 'checked'}},{key:"_contentZones",get:function get(){return{'coral-radio-label':'label'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Radio),"observedAttributes",this).concat(['checked'])}}]);return Radio}(BaseFormField(BaseComponent(HTMLElement)));var RadioLabel=(function(){return document.createElement('coral-radio-label')});commons.extend(strings,{'coral-component-radio':translations$6});commons._define('coral-radio',Radio);Radio.Label=RadioLabel;var CLASSNAME$n='coral-RadioGroup';var orientation={HORIZONTAL:'horizontal',VERTICAL:'vertical'};var BaseFieldGroup=function BaseFieldGroup(superClass){return function(_superClass){_inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){_classCallCheck(this,_class);return _super.apply(this,arguments)}_createClass(_class,[{key:"render",value:function render(){_get(_getPrototypeOf(_class.prototype),"render",this).call(this);this.classList.add(CLASSNAME$n);this.setAttribute('role','group');if(!this._orientation){this.orientation=orientation.HORIZONTAL}}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({itemTagName:this._itemTagName,host:this})}return this._items}},{key:"orientation",get:function get(){return this._orientation||orientation.HORIZONTAL},set:function set(value){value=transform.string(value).toLowerCase();this._orientation=validate.enumeration(this.constructor.orientation)(value)&&value||orientation.HORIZONTAL;this._reflectAttribute('orientation',this._orientation);this.classList.toggle("".concat(CLASSNAME$n,"--vertical"),this._orientation===orientation.VERTICAL)}},{key:"selectedItem",get:function get(){return this.items._getFirstSelected('checked')}},{key:"_itemTagName",get:function get(){return 'coral-fieldgroup-item'}}],[{key:"orientation",get:function get(){return orientation}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['orientation'])}}]);return _class}(superClass)};var orientation$1={HORIZONTAL:'horizontal',VERTICAL:'vertical',LABELS_BELOW:'labelsbelow'};var RadioGroup=function(_BaseFieldGroup){_inherits(RadioGroup,_BaseFieldGroup);var _super=_createSuper(RadioGroup);function RadioGroup(){_classCallCheck(this,RadioGroup);return _super.apply(this,arguments)}_createClass(RadioGroup,[{key:"orientation",get:function get(){return _get(_getPrototypeOf(RadioGroup.prototype),"orientation",this)},set:function set(value){_set(_getPrototypeOf(RadioGroup.prototype),"orientation",value,this,true);this.classList.toggle("coral-RadioGroup--labelsBelow",this._orientation===orientation$1.LABELS_BELOW)}},{key:"_itemTagName",get:function get(){return 'coral-radio'}}],[{key:"orientation",get:function get(){return orientation$1}}]);return RadioGroup}(BaseFieldGroup(BaseComponent(HTMLElement)));commons._define('coral-radiogroup',RadioGroup);var translations$7={"en-US":{"Decrement":"Decrement","Increment":"Increment"},"fr-FR":{"Decrement":"Décrémenter","Increment":"Incrémenter"},"de-DE":{"Decrement":"Reduzieren","Increment":"Erhöhen"},"it-IT":{"Decrement":"Decrementare","Increment":"Incrementare"},"es-ES":{"Decrement":"Reducir","Increment":"Aumentar"},"pt-BR":{"Decrement":"Decrementar","Increment":"Incrementar"},"ja-JP":{"Decrement":"減らす","Increment":"増やす"},"ko-KR":{"Decrement":"감소","Increment":"증가"},"zh-CN":{"Decrement":"减量","Increment":"增量"},"zh-TW":{"Decrement":"減量","Increment":"增量"},"nl-NL":{"Decrement":"Verlagen","Increment":"Verhogen"},"da-DK":{"Decrement":"Reduktion","Increment":"Dataændring"},"fi-FI":{"Decrement":"Vähennys","Increment":"Lisäys"},"nb-NO":{"Decrement":"Reduser","Increment":"Øk"},"sv-SE":{"Decrement":"Minskning","Increment":"Ökning"},"cs-CZ":{"Decrement":"Odpočet","Increment":"Přírůstek"},"pl-PL":{"Decrement":"Zmniejsz","Increment":"Zwiększ"},"ru-RU":{"Decrement":"Снижение","Increment":"Прирост"},"tr-TR":{"Decrement":"Azaltma","Increment":"Artırma"}};var template$9=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;data.uid=data.commons.getUID();data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["input"]=document.createElement("input","coral-textfield");el2.setAttribute("is","coral-textfield");el2.setAttribute("handle","input");el2.setAttribute("type","number");el2.className+=" _coral-Stepper-input";el2.id=data_0["uid"];el2.setAttribute("step","1");frag.appendChild(el2);var el3=document.createTextNode("\n");frag.appendChild(el3);var el4=this["presentation"]=document.createElement("span");el4.className+=" _coral-Stepper-buttons";el4.setAttribute("role","presentation");el4.setAttribute("handle","presentation");var el5=document.createTextNode("\n  ");el4.appendChild(el5);var el6=this["stepUp"]=document.createElement("button","coral-button");el6.setAttribute("variant","action");el6.className+=" _coral-Stepper-stepUp";el6.setAttribute("type","button");el6.setAttribute("is","coral-button");el6.setAttribute("handle","stepUp");el6.setAttribute("title",data_0["i18n"]["get"]('Increment'));el6.setAttribute("aria-label",data_0["i18n"]["get"]('Increment'));el6.setAttribute("tabindex","-1");el6.setAttribute("aria-controls",data_0["uid"]);var el7=document.createTextNode("\n    ");el6.appendChild(el7);data=data_0;this.stepUp.innerHTML=data.Icon._renderSVG('spectrum-css-icon-ChevronUpSmall',['_coral-Stepper-stepUpIcon','_coral-UIIcon-ChevronUpSmall']);data_0=data;var el9=document.createTextNode("\n  ");el6.appendChild(el9);el4.appendChild(el6);var el10=document.createTextNode("\n  ");el4.appendChild(el10);var el11=this["stepDown"]=document.createElement("button","coral-button");el11.setAttribute("variant","action");el11.className+=" _coral-Stepper-stepDown";el11.setAttribute("type","button");el11.setAttribute("is","coral-button");el11.setAttribute("handle","stepDown");el11.setAttribute("title",data_0["i18n"]["get"]('Decrement'));el11.setAttribute("aria-label",data_0["i18n"]["get"]('Decrement'));el11.setAttribute("tabindex","-1");el11.setAttribute("aria-controls",data_0["uid"]);var el12=document.createTextNode("\n    ");el11.appendChild(el12);data=data_0;this.stepDown.innerHTML=data.Icon._renderSVG('spectrum-css-icon-ChevronDownSmall',['_coral-Stepper-stepDownIcon','_coral-UIIcon-ChevronDownSmall']);data_0=data;var el14=document.createTextNode("\n  ");el11.appendChild(el14);el4.appendChild(el11);var el15=document.createTextNode("\n  ");el4.appendChild(el15);var el16=this["liveregion"]=document.createElement("span");el16.setAttribute("role","presentation");el16.setAttribute("handle","liveregion");el16.setAttribute("aria-live","assertive");el16.setAttribute("aria-atomic","true");el16.setAttribute("aria-relevant","additions text");el16.className+=" u-coral-screenReaderOnly";el16.setAttribute("hidden","");el4.appendChild(el16);var el17=document.createTextNode("\n");el4.appendChild(el17);frag.appendChild(el4);var el18=document.createTextNode("\n");frag.appendChild(el18);return frag};var CLASSNAME$o='_coral-Stepper';var clearLiveRegionTimeout;var LIVEREGION_TIMEOUT_DELAY=3000;var MSPOINTER_TYPE_MOUSE=0x00000004;var flagTouchStart=false;var flagStepButtonClick=false;var exponentialToDecimalString=function exponentialToDecimalString(value){var notation=value.toString();if(notation.indexOf('e')!==-1){var negative=notation.indexOf('-')===0;var exponent=parseInt(notation.split('-')[negative?2:1],10);return value.toFixed(exponent).toString()}return value.toString()};var handleDecimalOperation=function handleDecimalOperation(operator,value1,value2){var result;var operation=function operation(operator,value1,value2){if(operator==='+'){return value1+value2}else if(operator==='-'){return value1-value2}else if(operator==='%'){return value1%value2}};if(value1%1!==0||value2%1!==0){var value1Decimal=exponentialToDecimalString(value1).split('.');var value2Decimal=exponentialToDecimalString(value2).split('.');var value1DecimalLength=value1Decimal[1]&&value1Decimal[1].length||0;var value2DecimalLength=value2Decimal[1]&&value2Decimal[1].length||0;var multiplier=Math.pow(10,Math.max(value1DecimalLength,value2DecimalLength));value1=Math.round(value1*multiplier);value2=Math.round(value2*multiplier);result=operation(operator,value1,value2);result/=multiplier}else{result=operation(operator,value1,value2)}return result};var NumberInput=function(_BaseFormField){_inherits(NumberInput,_BaseFormField);var _super=_createSuper(NumberInput);function NumberInput(){var _this;_classCallCheck(this,NumberInput);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'key:up':'_onKeyUp','key:pageup':'_onKeyUp','key:down':'_onKeyDown','key:pagedown':'_onKeyDown','key:home':'_onKeyHome','key:end':'_onKeyEnd','touchstart [handle=stepUp], [handle=stepDown]':'_onTouchStart','pointerdown [handle=stepUp], [handle=stepDown]':'_onTouchStart','MSPointerDown [handle=stepUp], [handle=stepUp]':'_onTouchStart','MSPointerDown [handle=stepDown], [handle=stepDown]':'_onTouchStart','click [handle=stepUp]':'_onStepUpButtonClick','click [handle=stepDown]':'_onStepDownButtonClick','mousewheel [handle="input"]':'_onInputMouseWheel','DOMMouseScroll [handle="input"]':'_onInputMouseWheel','capture:focus':'_onFocus','capture:blur':'_onBlur'}));_this._elements={};template$9.call(_this._elements,{i18n:i18n,commons:commons,Icon:Icon});_this._labellableElement=_this._elements.input;_this._min=_this._max=null;return _this}_createClass(NumberInput,[{key:"reset",value:function reset(){this._elements.input.reset()}},{key:"clear",value:function clear(){this._elements.input.clear()}},{key:"stepUp",value:function stepUp(){var value=this.valueAsNumber;var step=this._getActualStep();if(isNaN(value)){this.value=this.max!==null?Math.min(step,this.max):step}else{var newValue=handleDecimalOperation('+',value,step);this.value=this.max!==null?Math.min(newValue,this.max):newValue}}},{key:"stepDown",value:function stepDown(){var value=this.valueAsNumber;var step=this._getActualStep();if(isNaN(value)){this.value=this.min!==null?Math.max(-step,this.min): -step}else{var newValue=handleDecimalOperation('-',value,step);this.value=this.min!==null?Math.max(newValue,this.min):newValue}}},{key:"_getActualStep",value:function _getActualStep(){return this.step==='any'?1:this.step}},{key:"_validateInputValue",value:function _validateInputValue(){this.invalid=this.value!==''&&(isNaN(Number(this.value))||this.max!==null&&this.value>this.max||this.min!==null&&this.value<this.min||this.step!=='any'&&handleDecimalOperation('%',Number(this.value),this._getActualStep())!==0)}},{key:"_setButtonState",value:function _setButtonState(){this._elements.stepUp.disabled=this.disabled||this.max!==null&&this.value>=this.max||this.readOnly;this._elements.stepDown.disabled=this.disabled||this.min!==null&&this.value<=this.min||this.readOnly}},{key:"_triggerChange",value:function _triggerChange(newValue,oldValue){if(newValue!==oldValue){this.trigger('change')}}},{key:"_onTouchStart",value:function _onTouchStart(event){if(event.type==='touchstart'||event.pointerType!=='mouse'&&event.pointerType!==MSPOINTER_TYPE_MOUSE){flagTouchStart=true}}},{key:"_setFocusToInput",value:function _setFocusToInput(){if(!flagTouchStart&&document.activeElement!==this._elements.input){this._elements.input.focus()}flagTouchStart=false}},{key:"_onStepUpButtonClick",value:function _onStepUpButtonClick(event){event.preventDefault();var oldValue=this.value;flagStepButtonClick=event.type==='click';this._setFocusToInput();this.stepUp();this._validateInputValue();this._triggerChange(this.value,oldValue)}},{key:"_onStepDownButtonClick",value:function _onStepDownButtonClick(event){event.preventDefault();var oldValue=this.value;flagStepButtonClick=event.type==='click';this._setFocusToInput();this.stepDown();this._validateInputValue();this._triggerChange(this.value,oldValue)}},{key:"_onKeyHome",value:function _onKeyHome(event){event.preventDefault();if(this.disabled||this.readOnly){return}if(this.max!==null){var oldValue=this.value;flagStepButtonClick=true;this.value=this.max;this._triggerChange(this.value,oldValue)}this._setFocusToInput()}},{key:"_onKeyEnd",value:function _onKeyEnd(event){event.preventDefault();if(this.disabled||this.readOnly){return}if(this.min!==null){var oldValue=this.value;flagStepButtonClick=true;this.value=this.min;this._triggerChange(this.value,oldValue)}this._setFocusToInput()}},{key:"_onKeyUp",value:function _onKeyUp(event){event.preventDefault();if(this.disabled||this.readOnly){return}this._onStepUpButtonClick(event)}},{key:"_onKeyDown",value:function _onKeyDown(event){event.preventDefault();if(this.disabled||this.readOnly){return}this._onStepDownButtonClick(event)}},{key:"_onInputMouseWheel",value:function _onInputMouseWheel(event){if(this.disabled||this.readOnly||this._elements.input!==document.activeElement){return}event.preventDefault();var oldValue=this.value;var delta=Math.max(-1,Math.min(1,event.wheelDelta|| -event.detail||event.deltaY));if(delta<0){this.stepDown()}else{this.stepUp()}this._triggerChange(this.value,oldValue)}},{key:"_onInputChange",value:function _onInputChange(event){event.stopPropagation();this._validateInputValue();this.value=this.value;this.invalid=this.invalid;this.disabled=this.disabled;this.trigger('change')}},{key:"_onFocus",value:function _onFocus(){this.classList.add('is-focused');this._elements.input.classList.add('is-focused');this._elements.liveregion.removeAttribute('role');this._elements.liveregion.removeAttribute('aria-hidden')}},{key:"_onBlur",value:function _onBlur(){this.classList.remove('is-focused');this._elements.input.classList.remove('is-focused');this._elements.liveregion.setAttribute('role','presentation');this._elements.liveregion.setAttribute('aria-hidden',true);this._clearLiveRegion()}},{key:"_clearLiveRegion",value:function _clearLiveRegion(){var liveregion=this._elements.liveregion;if(liveregion.firstChild){liveregion.removeChild(liveregion.firstChild)}}},{key:"_updateLiveRegion",value:function _updateLiveRegion(value){var _this2=this;var textNode;clearTimeout(clearLiveRegionTimeout);this._clearLiveRegion();if(value&&value!==''){textNode=document.createTextNode(value);window.requestAnimationFrame(function(){_this2._elements.liveregion.appendChild(textNode);clearLiveRegionTimeout=window.setTimeout(function(){_this2._clearLiveRegion()},LIVEREGION_TIMEOUT_DELAY)})}}},{key:"render",value:function render(){_get(_getPrototypeOf(NumberInput.prototype),"render",this).call(this);this.classList.add(CLASSNAME$o);if(!this._step){this.step=1}this.setAttribute('role','group');if(this._elements.input.type==='text'){this._elements.input.setAttribute('role','spinbutton')}var frag=document.createDocumentFragment();var templateHandleNames=['presentation','input'];frag.appendChild(this._elements.input);frag.appendChild(this._elements.presentation);while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){frag.appendChild(child)}else{this.removeChild(child)}}this.appendChild(frag)}},{key:"value",get:function get(){return this._elements.input.value},set:function set(value){value=isNaN(value)?'':String(value);this._elements.input.value=value;var valueAttribute=this.getAttribute('value');this._elements.input[valueAttribute?'setAttribute':'removeAttribute']('value',valueAttribute);if(this.value){this._elements.input.setAttribute('aria-valuenow',this.value);this._elements.input.setAttribute('aria-valuetext',this.value)}else{this._elements.input.removeAttribute('aria-valuenow');this._elements.input.removeAttribute('aria-valuetext')}if(flagStepButtonClick||!!window.chrome){this._updateLiveRegion(this.value);}else{this._updateLiveRegion()}flagStepButtonClick=false;this.invalid=this.hasAttribute('invalid');this.disabled=this.hasAttribute('disabled')}},{key:"valueAsNumber",get:function get(){var valueAsNumber=this._valueAsNumber;if(typeof valueAsNumber!=='undefined'&&valueAsNumber!==null){return valueAsNumber}valueAsNumber=transform.number(this.value);if(valueAsNumber!==null){return valueAsNumber}return NaN},set:function set(value){this._valueAsNumber=transform.number(value);this.value=this._valueAsNumber;this.invalid=this.hasAttribute('invalid');this.disabled=this.hasAttribute('disabled')}},{key:"min",get:function get(){return this._min},set:function set(value){value=transform.number(value);this._min=isNaN(value)?null:value;if(this._min===null){this._reflectAttribute('min',false);this._elements.input.removeAttribute('aria-valuemin');this._elements.input.removeAttribute('min')}else{this._reflectAttribute('min',this._min);this._elements.input.setAttribute('aria-valuemin',this._min);this._elements.input.min=this._min}this.invalid=this.hasAttribute('invalid');this.disabled=this.hasAttribute('disabled')}},{key:"max",get:function get(){return this._max},set:function set(value){value=transform.number(value);this._max=isNaN(value)?null:value;if(this.max===null){this._reflectAttribute('max',false);this._elements.input.removeAttribute('aria-valuemax');this._elements.input.removeAttribute('max')}else{this._reflectAttribute('max',this._max);this._elements.input.setAttribute('aria-valuemax',this._max);this._elements.input.max=this._max}this.invalid=this.hasAttribute('invalid');this.disabled=this.hasAttribute('disabled')}},{key:"step",get:function get(){return this._step||1},set:function set(value){if(value!==null&&(value>0||value==='any')){this._step=value==='any'?value:transform.number(value);this._reflectAttribute('step',this._step);this._elements.input.step=this._step}}},{key:"name",get:function get(){return this._elements.input.name},set:function set(value){this._reflectAttribute('name',value);this._elements.input.name=value}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.input.disabled=this._disabled;this._setButtonState()}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.input.required=this._required}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.input.readOnly=this._readOnly;this._setButtonState()}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(NumberInput.prototype),"invalid",this)},set:function set(value){_set(_getPrototypeOf(NumberInput.prototype),"invalid",value,this,true);this._elements.input.invalid=this._invalid}},{key:"labelledBy",get:function get(){return _get(_getPrototypeOf(NumberInput.prototype),"labelledBy",this)},set:function set(value){_set(_getPrototypeOf(NumberInput.prototype),"labelledBy",value,this,true);this[this.labelledBy?'setAttribute':'removeAttribute']('aria-labelledby',this.labelledBy)}},{key:"placeholder",get:function get(){return this._elements.input.placeholder||''},set:function set(value){value=transform.string(value);this._reflectAttribute('placeholder',value);this._elements.input.placeholder=value}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(NumberInput),"observedAttributes",this).concat(['min','max','step','placeholder'])}}]);return NumberInput}(BaseFormField(BaseComponent(HTMLElement)));commons.extend(strings,{'coral-component-numberinput':translations$7});commons._define('coral-numberinput',NumberInput);var template$a=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["tip"]=document.createElement("span");el0.className+=" _coral-Tooltip-tip";el0.setAttribute("handle","tip");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var arrowMap={left:'left',right:'right',top:'top',bottom:'bottom'};var CLASSNAME$p='_coral-Tooltip';var OFFSET$1=5;var variant$7={DEFAULT:'default',INFO:'info',SUCCESS:'success',ERROR:'error',WARNING:'warning',INSPECT:'inspect'};var ALL_VARIANT_CLASSES$5=[];for(var variantName in variant$7){ALL_VARIANT_CLASSES$5.push("".concat(CLASSNAME$p,"--").concat(variant$7[variantName]))}var ALL_PLACEMENT_CLASSES$1=[];var placementClassMap={};for(var key$1 in Overlay.placement){var direction=Overlay.placement[key$1];var placementClass="".concat(CLASSNAME$p,"--").concat(arrowMap[direction]);placementClassMap[direction]=placementClass;ALL_PLACEMENT_CLASSES$1.push(placementClass)}var Tooltip=function(_Overlay){_inherits(Tooltip,_Overlay);var _super=_createSuper(Tooltip);function Tooltip(){var _this;_classCallCheck(this,Tooltip);_this=_super.call(this);_this._lengthOffset=OFFSET$1;_this._overlayAnimationTime=Overlay.FADETIME;_this._focusOnShow=Overlay.focusOnShow.OFF;_this._elements=commons.extend(_this._elements,{content:_this.querySelector('coral-tooltip-content')||document.createElement('coral-tooltip-content')});template$a.call(_this._elements);_this._id=commons.getUID();_this._delegateEvents({'coral-overlay:positioned':'_onPositioned','coral-overlay:_animate':'_onAnimate'});return _this}_createClass(Tooltip,[{key:"_onPositioned",value:function _onPositioned(event){var _this$classList;(_this$classList=this.classList).remove.apply(_this$classList,ALL_PLACEMENT_CLASSES$1);this.classList.add(placementClassMap[event.detail.placement])}},{key:"_onAnimate",value:function _onAnimate(){var popperPlacement=this.getAttribute('x-placement');if(popperPlacement==='left'){this.style.left='8px'}else if(popperPlacement==='top'){this.style.top='8px'}else if(popperPlacement==='right'){this.style.left='-8px'}else if(popperPlacement==='bottom'){this.style.top='-8px'}}},{key:"_handleFocusOut",value:function _handleFocusOut(){var _this2=this;window.requestAnimationFrame(function(){var targetIsFocused=document.activeElement===_this2._getTarget();if(!targetIsFocused){_this2._cancelShow();_this2.open=false}})}},{key:"_cancelShow",value:function _cancelShow(){window.clearTimeout(this._showTimeout)}},{key:"_cancelHide",value:function _cancelHide(){window.clearTimeout(this._hideTimeout)}},{key:"_startHide",value:function _startHide(){var _this3=this;if(this.delay===0){this._handleFocusOut()}else{this._hideTimeout=window.setTimeout(function(){_this3._handleFocusOut()},this.delay)}}},{key:"_addTargetListeners",value:function _addTargetListeners(target){var _this4=this;if(target["_hasTooltipListeners".concat(this._id)]){return}target["_hasTooltipListeners".concat(this._id)]=true;if(this._oldTarget){var oldTarget=this._getTarget(this._oldTarget);if(oldTarget){this._removeTargetListeners(oldTarget)}}this._oldTarget=target;this._targetEvents=new vent(target);var handleEventToShow=function handleEventToShow(){_this4._cancelHide();if(!_this4.open){_this4._cancelShow();if(_this4.delay===0){_this4.show()}else{_this4._showTimeout=window.setTimeout(function(){_this4.show()},_this4.delay)}}};this._targetEvents.on("mouseenter.Tooltip".concat(this._id),handleEventToShow);this._targetEvents.on("focusin.Tooltip".concat(this._id),handleEventToShow);this._targetEvents.on("mouseenter.Tooltip".concat(this._id),this._handleOpenTooltip.bind(this));this._targetEvents.on("focusin.Tooltip".concat(this._id),this._handleOpenTooltip.bind(this));this._targetEvents.on("mouseleave.Tooltip".concat(this._id),function(){if(_this4.interaction===_this4.constructor.interaction.ON){_this4._startHide()}});this._targetEvents.on("focusout.Tooltip".concat(this._id),function(){if(_this4.interaction===_this4.constructor.interaction.ON){_this4._handleFocusOut()}})}},{key:"_handleOpenTooltip",value:function _handleOpenTooltip(){var _this5=this;this._cancelHide();if(!this.open){this._cancelShow();if(this.delay===0){this.show()}else{this._showTimeout=window.setTimeout(function(){_this5.show()},this.delay)}}}},{key:"_removeTargetListeners",value:function _removeTargetListeners(target){if(this._targetEvents){this._targetEvents.off(".Tooltip".concat(this._id))}target["_hasTooltipListeners".concat(this._id)]=false}},{key:"render",value:function render(){_get(_getPrototypeOf(Tooltip.prototype),"render",this).call(this);this.classList.add(CLASSNAME$p);this.setAttribute('role','tooltip');this.setAttribute('tabindex','-1');if(!this._variant){this.variant=variant$7.DEFAULT}var tip=this.querySelector('._coral-Tooltip-tip');if(tip){tip.remove()}var content=this._elements.content;if(!content.parentNode){while(this.firstChild){content.appendChild(this.firstChild)}}this.appendChild(this._elements.tip);this.content=content}},{key:"variant",get:function get(){return this._variant||variant$7.DEFAULT},set:function set(value){var _this$classList2;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$7)(value)&&value||variant$7.DEFAULT;this._reflectAttribute('variant',this._variant);(_this$classList2=this.classList).remove.apply(_this$classList2,ALL_VARIANT_CLASSES$5);this.classList.add("".concat(CLASSNAME$p,"--").concat(this._variant))}},{key:"delay",get:function get(){return typeof this._delay==='number'?this._delay:500},set:function set(value){this._delay=transform.number(value)}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-tooltip-content',insert:function insert(content){content.classList.add("".concat(CLASSNAME$p,"-label"));this.appendChild(content)}})}},{key:"open",get:function get(){return _get(_getPrototypeOf(Tooltip.prototype),"open",this)},set:function set(value){_set(_getPrototypeOf(Tooltip.prototype),"open",value,this,true);if(!this.open){this._cancelShow()}}},{key:"target",get:function get(){return _get(_getPrototypeOf(Tooltip.prototype),"target",this)},set:function set(value){_set(_getPrototypeOf(Tooltip.prototype),"target",value,this,true);var target=this._getTarget(value);if(target){this._elements.tip.hidden=false;if(this.interaction===this.constructor.interaction.ON){this._addTargetListeners(target)}}else{this._elements.tip.hidden=true}}},{key:"interaction",get:function get(){return _get(_getPrototypeOf(Tooltip.prototype),"interaction",this)},set:function set(value){_set(_getPrototypeOf(Tooltip.prototype),"interaction",value,this,true);var target=this._getTarget();if(target){if(value===this.constructor.interaction.ON){this._addTargetListeners(target)}else{this._removeTargetListeners(target)}}}},{key:"_contentZones",get:function get(){return{'coral-tooltip-content':'content'}}}],[{key:"variant",get:function get(){return variant$7}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Tooltip),"observedAttributes",this).concat(['variant','delay'])}}]);return Tooltip}(Overlay);var TooltipContent=(function(){return document.createElement('coral-tooltip-content')});commons._define('coral-tooltip',Tooltip);Tooltip.Content=TooltipContent;var translations$8={"en-US":{"Select":"Select"},"fr-FR":{"Select":"Sélectionner"},"de-DE":{"Select":"Auswählen"},"it-IT":{"Select":"Seleziona"},"es-ES":{"Select":"Seleccionar"},"pt-BR":{"Select":"Selecionar"},"ja-JP":{"Select":"選択"},"ko-KR":{"Select":"선택"},"zh-CN":{"Select":"选择"},"zh-TW":{"Select":"選取"},"nl-NL":{"Select":"Selecteren"},"da-DK":{"Select":"Vælg"},"fi-FI":{"Select":"Valitse"},"nb-NO":{"Select":"Velg"},"sv-SE":{"Select":"Välj"},"cs-CZ":{"Select":"Vybrat"},"pl-PL":{"Select":"Wybierz"},"ru-RU":{"Select":"Выберите"},"tr-TR":{"Select":"Seç"}};var template$b=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["input"]=document.createElement("input");el0.setAttribute("type","checkbox");el0.setAttribute("handle","input");el0.className+=" _coral-Checkbox-input";el0.id=data_0["commons"]["getUID"]();frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["checkbox"]=document.createElement("span");el2.className+=" _coral-Checkbox-box";el2.setAttribute("handle","checkbox");var el3=document.createTextNode("\n  ");el2.appendChild(el3);data=data_0;this.checkbox.innerHTML=data.Icon._renderSVG('spectrum-css-icon-CheckmarkSmall',['_coral-Checkbox-checkmark','_coral-UIIcon-CheckmarkSmall']);this.checkbox.innerHTML+=data.Icon._renderSVG('spectrum-css-icon-DashSmall',['_coral-Checkbox-partialCheckmark','_coral-UIIcon-DashSmall']);data_0=data;var el5=document.createTextNode("\n");el2.appendChild(el5);frag.appendChild(el2);var el6=document.createTextNode("\n");frag.appendChild(el6);var el7=this["labelWrapper"]=document.createElement("label");el7.className+=" _coral-Checkbox-label";el7.setAttribute("handle","labelWrapper");el7.setAttribute("for",this["input"]["id"]);var el8=document.createTextNode("\n  ");el7.appendChild(el8);var el9=this["screenReaderOnly"]=document.createElement("span");el9.className+=" u-coral-screenReaderOnly";el9.setAttribute("handle","screenReaderOnly");el9.textContent=data_0["i18n"]["get"]('Select');el7.appendChild(el9);var el10=document.createTextNode("\n");el7.appendChild(el10);frag.appendChild(el7);var el11=document.createTextNode("\n");frag.appendChild(el11);return frag};var IS_IE_OR_EDGE=navigator.userAgent.indexOf('MSIE')!==-1||navigator.appVersion.indexOf('Trident/')>0||window.navigator.userAgent.indexOf('Edge')!==-1;var CLASSNAME$q='_coral-Checkbox';var Checkbox=function(_BaseFormField){_inherits(Checkbox,_BaseFormField);var _super=_createSuper(Checkbox);function Checkbox(){var _this;_classCallCheck(this,Checkbox);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{click:'_onClick',mousedown:'_onMouseDown'}));_this._elements={label:_this.querySelector('coral-checkbox-label')||document.createElement('coral-checkbox-label')};template$b.call(_this._elements,{commons:commons,i18n:i18n,Icon:Icon});_this._labellableElement=_this._elements.input;_this._observer=new MutationObserver(_this._hideLabelIfEmpty.bind(_assertThisInitialized(_this)));_this._observer.observe(_this._elements.labelWrapper,{childList:true,characterData:true,subtree:true});return _this}_createClass(Checkbox,[{key:"_onInputChange",value:function _onInputChange(event){var _this2=this;event.stopPropagation();this[this._componentTargetProperty]=event.target[this._eventTargetProperty];this.indeterminate=false;if(this._triggerChangeEvent){if(IS_IE_OR_EDGE){window.requestAnimationFrame(function(){_this2.trigger('change')})}else{this.trigger('change')}}}},{key:"_onClick",value:function _onClick(event){if(IS_IE_OR_EDGE&&this.indeterminate){this.checked=!this.checked;this._onInputChange(event )}else if(event.target===this){this.indeterminate=false;this.checked=!this.checked;this.trigger('change')}this._trackEvent(this.checked?'checked':'unchecked','coral-checkbox',event)}},{key:"_onMouseDown",value:function _onMouseDown(){var target=this._elements.input;window.requestAnimationFrame(function(){if(target!==document.activeElement){target.focus()}})}},{key:"_hideLabelIfEmpty",value:function _hideLabelIfEmpty(){var label=this._elements.label;var hiddenValue=!(label.children.length===0&&label.textContent.replace(/\s*/g,'')==='');this._elements.labelWrapper.style.margin=!hiddenValue?'0':'';this._elements.screenReaderOnly.hidden=!!hiddenValue||!!this.labelledBy||!!this.labelled}},{key:"clear",value:function clear(){this.checked=false}},{key:"reset",value:function reset(){this.checked=this._initialCheckedState}},{key:"render",value:function render(){_get(_getPrototypeOf(Checkbox.prototype),"render",this).call(this);this.classList.add(CLASSNAME$q);var frag=document.createDocumentFragment();var templateHandleNames=['input','checkbox','labelWrapper'];frag.appendChild(this._elements.input);frag.appendChild(this._elements.checkbox);frag.appendChild(this._elements.labelWrapper);var label=this._elements.label;if(label.parentNode){label.parentNode.removeChild(label)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){label.appendChild(child)}else{this.removeChild(child)}}this.appendChild(frag);this.label=label;this._initialCheckedState=this.checked;this._hideLabelIfEmpty()}},{key:"checked",get:function get(){return this._checked||false},set:function set(value){this._checked=transform.booleanAttr(value);this._reflectAttribute('checked',this._checked);this._elements.input.checked=this._checked}},{key:"indeterminate",get:function get(){return this._indeterminate||false},set:function set(value){this._indeterminate=transform.booleanAttr(value);this._reflectAttribute('indeterminate',this._indeterminate);this.classList.toggle('is-indeterminate',this._indeterminate);this._elements.input.indeterminate=this._indeterminate;this._elements.input[this._indeterminate?'setAttribute':'removeAttribute']('aria-checked','mixed')}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-checkbox-label',insert:function insert(label){this._elements.labelWrapper.appendChild(label)}})}},{key:"name",get:function get(){return this._elements.input.name},set:function set(value){this._reflectAttribute('name',value);this._elements.input.name=value}},{key:"value",get:function get(){return this._elements.input.value||'on'},set:function set(value){this._elements.input.value=value}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.input.disabled=this._disabled}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.input.required=this._required}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this.classList.toggle('is-readOnly',this._readOnly);this._elements.input.tabIndex=this._readOnly?-1:0}},{key:"labelled",get:function get(){return _get(_getPrototypeOf(Checkbox.prototype),"labelled",this)},set:function set(value){_set(_getPrototypeOf(Checkbox.prototype),"labelled",value,this,true);this._hideLabelIfEmpty()}},{key:"labelledBy",get:function get(){return _get(_getPrototypeOf(Checkbox.prototype),"labelledBy",this)},set:function set(value){_set(_getPrototypeOf(Checkbox.prototype),"labelledBy",value,this,true);this._hideLabelIfEmpty()}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?(this.name?"".concat(this.name,"=").concat(this.value):'')||(this.label||this).textContent.replace(/\s{2,}/g,' ').trim():this._trackingElement},set:function set(value){_set(_getPrototypeOf(Checkbox.prototype),"trackingElement",value,this,true)}},{key:"_componentTargetProperty",get:function get(){return 'checked'}},{key:"_eventTargetProperty",get:function get(){return 'checked'}},{key:"_contentZones",get:function get(){return{'coral-checkbox-label':'label'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Checkbox),"observedAttributes",this).concat(['indeterminate','checked'])}}]);return Checkbox}(BaseFormField(BaseComponent(HTMLElement)));var CheckboxLabel=(function(){return document.createElement('coral-checkbox-label')});commons.extend(strings,{'coral-component-checkbox':translations$8});commons._define('coral-checkbox',Checkbox);Checkbox.Label=CheckboxLabel;var CheckboxGroup=function(_BaseFieldGroup){_inherits(CheckboxGroup,_BaseFieldGroup);var _super=_createSuper(CheckboxGroup);function CheckboxGroup(){_classCallCheck(this,CheckboxGroup);return _super.apply(this,arguments)}_createClass(CheckboxGroup,[{key:"_itemTagName",get:function get(){return 'coral-checkbox'}},{key:"selectedItems",get:function get(){return this.items._getAllSelected('checked')}}]);return CheckboxGroup}(BaseFieldGroup(BaseComponent(HTMLElement)));commons._define('coral-checkboxgroup',CheckboxGroup);var dateTimeFormats={};var DEFAULT_FORMAT='YYYY-MM-DD';var transform2digit=function transform2digit(value){var s=value.toString();return s.length===1?"0".concat(s):s};var globalLocale=document.documentElement.lang||window.navigator.language||'en-US';var formatDate=function formatDate(date,locale,options){var formattedDateString='';try{var key="".concat(JSON.stringify(locale)).concat(JSON.stringify(options));var dateTimeFormat=dateTimeFormats[key];if(!dateTimeFormat){dateTimeFormats[key]=new window.Intl.DateTimeFormat(locale,options)}formattedDateString=dateTimeFormats[key].format(date)}catch(e){console.warn(e.message)}return formattedDateString};var DateTime=function(){function DateTime(value){_classCallCheck(this,DateTime);if(value instanceof this.constructor){this._locale=value._locale;this._value=value._value;this._date=value._date}else{this._locale=globalLocale;this._value=value;if(Array.isArray(value)){this._date=value.length?new Date(value[0],value[1]||0,value[2]||1):new Date()}else if(typeof value==='string'){var isTime=value.indexOf(':')===2;if(isTime){var time=value.split(':');var hours=parseInt(time[0],10);var minutes=parseInt(time[1],10);if(hours>=0&&hours<=23&&minutes>=0&&minutes<=59){this._date=new Date();this._date.setHours(time[0]);this._date.setMinutes(time[1])}else{this._date=new Date('Invalid Date')}}else{this._date=new Date(this._value.replace(/-/g,'/').replace(/T.+/,''))}}else if(this._value===null){this._date=new Date('Invalid Date')}else{this._date=this._value?new Date(this._value):new Date()}}}_createClass(DateTime,[{key:"locale",value:function locale(value){if(value){this._locale=value}return this._locale}},{key:"toDate",value:function toDate(){return this._date}},{key:"clone",value:function clone(){var clone=new this.constructor(this._value);clone._date=this._date;return clone}},{key:"format",value:function format(_format){var formattedDateString='';if(!_format){_format=DEFAULT_FORMAT}if(_format===DEFAULT_FORMAT){formattedDateString+=this._date.getFullYear();formattedDateString+='-';formattedDateString+=transform2digit(this._date.getMonth()+1);formattedDateString+='-';formattedDateString+=transform2digit(this._date.getDate())}else if(_format==='MMMM YYYY'){formattedDateString+=formatDate(this._date,this._locale,{month:'long'});formattedDateString+=' ';formattedDateString+=this._date.getFullYear()}else if(_format==='LL'){formattedDateString+=formatDate(this._date,this._locale,{month:'long',year:'numeric',day:'2-digit'})}else if(_format==='dd'){formattedDateString+=formatDate(this._date,this._locale,{weekday:'short'})}else if(_format==='dddd'){formattedDateString+=formatDate(this._date,this._locale,{weekday:'long'})}else if(_format==='HH:mm'){formattedDateString+=transform2digit(this._date.getHours());formattedDateString+=':';formattedDateString+=transform2digit(this._date.getMinutes())}else if(_format==='HH'){formattedDateString+=transform2digit(this._date.getHours())}else if(_format==='mm'){formattedDateString+=transform2digit(this._date.getMinutes())}else if(_format==='YYYY-MM-DD[T]HH:mmZ'){formattedDateString+=this._date.getFullYear();formattedDateString+='-';formattedDateString+=transform2digit(this._date.getMonth()+1);formattedDateString+='-';formattedDateString+=transform2digit(this._date.getDate());formattedDateString+='T';formattedDateString+=transform2digit(this._date.getHours());formattedDateString+=':';formattedDateString+=transform2digit(this._date.getMinutes());var timezone=-1*(this._date.getTimezoneOffset()/60);var abs=Math.abs(timezone);abs=abs<10?"0".concat(abs):abs.toString();formattedDateString+=timezone<0?"-".concat(abs,":00"):"+".concat(abs,":00")}else{_format=_typeof(_format)==='object'?_format:{};formattedDateString=formatDate(this._date,this._locale,_format)}return formattedDateString}},{key:"year",value:function year(){return this._date.getFullYear()}},{key:"month",value:function month(){return this._date.getMonth()}},{key:"week",value:function week(){var date=new Date(Date.UTC(this._date.getFullYear(),this._date.getMonth(),this._date.getDate()));var dayNum=date.getUTCDay()||7;date.setUTCDate(date.getUTCDate()+4-dayNum);var yearStart=new Date(Date.UTC(date.getUTCFullYear(),0,1));return Math.ceil(((date-yearStart)/86400000+1)/7)}},{key:"day",value:function day(_day){if(typeof _day==='number'){this._date.setDate(this._date.getDate()-(this._date.getDay()||7)+_day);return this}return this._date.getDay()}},{key:"hours",value:function hours(_hours){if(typeof _hours==='number'){this._date.setHours(_hours);return this}return this._date.getHours()}},{key:"minutes",value:function minutes(_minutes){if(typeof _minutes==='number'){this._date.setMinutes(_minutes);return this}return this._date.getMinutes()}},{key:"date",value:function date(){return this._date.getDate()}},{key:"add",value:function add(value,type){if(type.indexOf('month')===0){this._date.setMonth(this._date.getMonth()+value)}else if(type.indexOf('day')===0){this._date.setDate(this._date.getDate()+value)}return this}},{key:"subtract",value:function subtract(value,type){if(type.indexOf('month')===0){this._date.setMonth(this._date.getMonth()-value)}else if(type.indexOf('day')===0){this._date.setDate(this._date.getDate()-value)}return this}},{key:"diff",value:function diff(obj){var diff=this._date.getTime()-obj._date.getTime();return diff/86400000}},{key:"startOf",value:function startOf(value){if(value==='day'){this._date=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())}else if(value==='month'){this._date=new Date(this._date.getFullYear(),this._date.getMonth(),1)}else if(value==='year'){this._date=new Date(new Date().getFullYear(),0,1)}return this}},{key:"isBefore",value:function isBefore(coralDate,unit){if(coralDate&&coralDate._date){return unit?coralDate[unit]()>this[unit]():coralDate._date>this._date}return false}},{key:"isAfter",value:function isAfter(coralDate,unit){if(coralDate&&coralDate._date){return unit?coralDate[unit]()<this[unit]():coralDate._date<this._date}return false}},{key:"isSame",value:function isSame(obj,type){if(type==='hour'){return obj&&obj.clone()._date.getHours()===this.clone()._date.getHours()}else if(type==='minute'){return obj&&obj.clone()._date.getMinutes()===this.clone()._date.getMinutes()}else if(type==='day'){return obj&&obj.clone().startOf('day')._date.getTime()===this.clone().startOf('day')._date.getTime()}return obj&&obj.clone()._date.getTime()===this.clone()._date.getTime()}},{key:"isValid",value:function isValid(){return this._date.toString()!=='Invalid Date'}}],[{key:"localeData",value:function localeData(){return{}}},{key:"locale",value:function locale(value){if(value){globalLocale=value}return globalLocale}},{key:"isMoment",value:function isMoment(obj){return obj instanceof this}},{key:"Moment",get:function get(){return window.moment||this}}]);return DateTime}();if(typeof window.moment!=='undefined'){window.moment.locale(document.documentElement.lang||window.navigator.language||'en')}var PAGE_UP=33;var PAGE_DOWN=34;var LEFT_ARROW=37;var UP_ARROW=38;var variant$8={DEFAULT:'default',QUIET:'quiet',LARGE:'large'};var CLASSNAME$r='_coral-Accordion';var Accordion=function(_BaseComponent){_inherits(Accordion,_BaseComponent);var _super=_createSuper(Accordion);function Accordion(){var _this;_classCallCheck(this,Accordion);_this=_super.call(this);_this._delegateEvents({'click coral-accordion-item:not([disabled]) ._coral-Accordion-itemHeader':'_onItemClick','key:space ._coral-Accordion-itemHeader':'_onToggleItemKey','key:return ._coral-Accordion-itemHeader':'_onToggleItemKey','key:pageup ._coral-Accordion-itemHeader':'_focusPreviousItem','key:left ._coral-Accordion-itemHeader':'_focusPreviousItem','key:up ._coral-Accordion-itemHeader':'_focusPreviousItem','key:pagedown ._coral-Accordion-itemHeader':'_focusNextItem','key:right ._coral-Accordion-itemHeader':'_focusNextItem','key:down ._coral-Accordion-itemHeader':'_focusNextItem','key:home ._coral-Accordion-itemHeader':'_onHomeKey','key:end ._coral-Accordion-itemHeader':'_onEndKey','keydown ._coral-Accordion-itemHeader':'_onItemContentKeyDown','coral-accordion-item:_selectedchanged':'_onItemSelectedChanged'});_this._oldSelection=[];_this.items._startHandlingItems(true);return _this}_createClass(Accordion,[{key:"_onHomeKey",value:function _onHomeKey(event){event.preventDefault();event.stopPropagation();this._focusItem(this.items._getFirstSelectable())}},{key:"_onEndKey",value:function _onEndKey(event){event.preventDefault();event.stopPropagation();this._focusItem(this.items._getLastSelectable())}},{key:"_onItemContentKeyDown",value:function _onItemContentKeyDown(event){var key=parseFloat(event.keyCode);var item=event.matchedTarget.parentNode;switch(key){case UP_ARROW:case LEFT_ARROW:if((event.metaKey||event.ctrlKey)&&Keys.filterInputs(event)){event.preventDefault();event.stopPropagation();this._focusItem(item)}break;case PAGE_UP:if(event.metaKey||event.ctrlKey){event.preventDefault();event.stopPropagation();var prevItem=this.items._getPreviousSelectable(item);this._toggleItemSelection(prevItem);this._focusItem(prevItem)}break;case PAGE_DOWN:if(event.metaKey||event.ctrlKey){event.preventDefault();event.stopPropagation();var nextItem=this.items._getNextSelectable(item);this._toggleItemSelection(nextItem);this._focusItem(nextItem)}break}}},{key:"_focusPreviousItem",value:function _focusPreviousItem(event){event.preventDefault();event.stopPropagation();this._focusItem(this.items._getPreviousSelectable(event.target.closest('coral-accordion-item')))}},{key:"_focusNextItem",value:function _focusNextItem(event){event.preventDefault();event.stopPropagation();this._focusItem(this.items._getNextSelectable(event.target.closest('coral-accordion-item')))}},{key:"_onItemClick",value:function _onItemClick(event){if(event.target.hasAttribute('coral-interactive')||event.target.closest('[coral-interactive]')){return}var item=event.target.closest('coral-accordion-item');if(item){event.preventDefault();event.stopPropagation();this._toggleItemSelection(item);this._focusItem(item)}}},{key:"_onToggleItemKey",value:function _onToggleItemKey(event){event.preventDefault();event.stopPropagation();var item=event.target.closest('coral-accordion-item');this._toggleItemSelection(item);this._focusItem(item)}},{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_validateSelection",value:function _validateSelection(item){var _this2=this;var selectedItems=this.selectedItems;if(!this.multiple){item=item||selectedItems[selectedItems.length-1];if(item&&item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}}if(item&&item.getAttribute('level')!==this.level){item.setAttribute('level',this.level)}this._resetTabTarget();this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItems=this.selectedItems;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&this._arraysAreDifferent(selectedItems,oldSelection)){if(this.multiple){this.trigger('coral-accordion:change',{oldSelection:oldSelection,selection:selectedItems})}else{this.trigger('coral-accordion:change',{oldSelection:oldSelection.length>1?oldSelection:oldSelection[0]||null,selection:selectedItems[0]||null})}this._oldSelection=selectedItems}}},{key:"_arraysAreDifferent",value:function _arraysAreDifferent(selection,oldSelection){var diff=[];if(oldSelection.length===selection.length){diff=oldSelection.filter(function(item){return selection.indexOf(item)===-1})}return oldSelection.length!==selection.length||diff.length!==0}},{key:"_resetTabTarget",value:function _resetTabTarget(){var _this3=this;if(!this._resetTabTargetScheduled){this._resetTabTargetScheduled=true;window.requestAnimationFrame(function(){_this3._resetTabTargetScheduled=false;var selectedItems=_this3.items._getAllSelected();_this3._tabTarget=selectedItems.length?selectedItems[0]:_this3.items._getFirstSelectable()})}}},{key:"_toggleItemSelection",value:function _toggleItemSelection(item){if(item){item[item.hasAttribute('selected')?'removeAttribute':'setAttribute']('selected','')}}},{key:"_focusItem",value:function _focusItem(item){if(item){item._elements.button.focus()}this._tabTarget=item}},{key:"render",value:function render(){var _this4=this;_get(_getPrototypeOf(Accordion.prototype),"render",this).call(this);this.classList.add(CLASSNAME$r);if(!this._variant){this.variant=variant$8.DEFAULT}this.setAttribute('role','region');this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItems;window.requestAnimationFrame(function(){_this4.classList.add("".concat(CLASSNAME$r,"--animated"))})}},{key:"variant",get:function get(){return this._variant||variant$8.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$8)(value)&&value||variant$8.DEFAULT;this._reflectAttribute('variant',this._variant)}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-accordion-item',itemSelector:':scope > coral-accordion-item',onItemAdded:this._validateSelection,onItemRemoved:this._validateSelection})}return this._items}},{key:"multiple",get:function get(){return this._multiple||false},set:function set(value){this._multiple=transform.booleanAttr(value);this._reflectAttribute('multiple',this._multiple);this._validateSelection()}},{key:"selectedItems",get:function get(){return this.items._getAllSelected()}},{key:"selectedItem",get:function get(){return this.items._getFirstSelected()}},{key:"level",get:function get(){return this._level||3},set:function set(value){var _this5=this;value=transform.number(value);if(validate.valueMustChange(value,this._level)&&value>0&&value<7){this._level=value;this._reflectAttribute('level',this._level);this.items.getAll().forEach(function(item){return item.setAttribute('level',_this5._level)})}}},{key:"_tabTarget",get:function get(){return this.__tabTarget||null},set:function set(value){this.__tabTarget=value;this.items.getAll().forEach(function(item){item._isTabTarget=item===value})}}],[{key:"variant",get:function get(){return variant$8}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Accordion),"observedAttributes",this).concat(['variant','multiple','level'])}}]);return Accordion}(BaseComponent(HTMLElement));var template$c=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["heading"]=document.createElement("h3");el0.setAttribute("handle","heading");el0.className+=" _coral-Accordion-itemHeading";var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["button"]=document.createElement("button");el2.setAttribute("handle","button");el2.className+=" _coral-Accordion-itemHeader";el2.setAttribute("type","button");el0.appendChild(el2);var el3=document.createTextNode("\n  ");el0.appendChild(el3);data=data_0;var iconId='spectrum-css-icon-ChevronRightMedium';var classes=['_coral-Accordion-itemIndicator','_coral-UIIcon-ChevronRightMedium'];this.button.insertAdjacentHTML('afterend',data.Icon._renderSVG(iconId,classes));data_0=data;var el5=document.createTextNode("\n");el0.appendChild(el5);frag.appendChild(el0);var el6=document.createTextNode("\n");frag.appendChild(el6);return frag};var CLASSNAME$s='_coral-Accordion-item';var AccordionItem=function(_BaseComponent){_inherits(AccordionItem,_BaseComponent);var _super=_createSuper(AccordionItem);function AccordionItem(){var _this;_classCallCheck(this,AccordionItem);_this=_super.call(this);_this._elements={label:_this.querySelector('coral-accordion-item-label')||document.createElement('coral-accordion-item-label'),content:_this.querySelector('coral-accordion-item-content')||document.createElement('coral-accordion-item-content')};template$c.call(_this._elements,{Icon:Icon});return _this}_createClass(AccordionItem,[{key:"_setAria",value:function _setAria(button,content){button.id=button.id||commons.getUID();content.id=content.id||commons.getUID();button.setAttribute('aria-controls',content.id);content.setAttribute('aria-labelledby',button.id)}},{key:"focus",value:function focus(){this._elements.label.focus()}},{key:"render",value:function render(){_get(_getPrototypeOf(AccordionItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$s);this.setAttribute('role','presentation');var template=this.querySelector('._coral-Accordion-itemHeading');if(template){template.remove()}if(!this._elements.content.parentNode){while(this.firstChild){this._elements.content.appendChild(this.firstChild)}}this.appendChild(this._elements.heading);this.label=this._elements.label;this.content=this._elements.content;this.selected=this.selected}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-accordion-item-label',insert:function insert(label){this._setAria(this._elements.button,this._elements.content);this._elements.button.appendChild(label)}})}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-accordion-item-content',insert:function insert(content){content.classList.add("".concat(CLASSNAME$s,"Content"));content.setAttribute('role','region');this._setAria(this._elements.button,content);this.appendChild(content)}})}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){var _this2=this;this._selected=this.hasAttribute('disabled')?false:transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);var scrollHeight=this._elements.content.scrollHeight;this.classList.toggle('is-open',this._selected);this._elements.button.setAttribute('aria-expanded',this._selected);if(!this._selected){this._elements.content.style.height="".concat(scrollHeight,"px");var offsetHeight=this._elements.content.offsetHeight}this._elements.content.style.height=this._selected?"".concat(scrollHeight,"px"):'0';if(this._selected){commons.transitionEnd(this._elements.content,function(){_this2._elements.content.style.height=''})}this.trigger('coral-accordion-item:_selectedchanged')}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.button[this._disabled?'setAttribute':'removeAttribute']('disabled','');this.selected=this.selected}},{key:"level",get:function get(){return this._level||3},set:function set(value){value=transform.number(value);if(!validate.valueMustChange(value,this._level)){return}if(value>0){this._level=value;this._reflectAttribute('level',this._level);if(value!==3){this._elements.heading.setAttribute('aria-level',this._level);return}}this._elements.heading.removeAttribute('aria-level')}},{key:"_isTabTarget",get:function get(){return this.__isTabTarget||false},set:function set(value){this.__isTabTarget=value;if(this.disabled){this._elements.button.removeAttribute('tabindex')}else{this._elements.button.setAttribute('tabindex',this.__isTabTarget?'0':'-1')}}},{key:"_contentZones",get:function get(){return{'coral-accordion-item-label':'label','coral-accordion-item-content':'content'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(AccordionItem),"observedAttributes",this).concat(['selected','disabled','level'])}}]);return AccordionItem}(BaseComponent(HTMLElement));var AccordionItemLabel=(function(){return document.createElement('coral-accordion-item-label')});var AccordionItemContent=(function(){return document.createElement('coral-accordion-item-content')});commons._define('coral-accordion-item',AccordionItem);commons._define('coral-accordion',Accordion);Accordion.Item=AccordionItem;Accordion.Item.Label=AccordionItemLabel;Accordion.Item.Content=AccordionItemContent;var translations$9={"en-US":{"More":"More"},"de-DE":{"More":"Mehr"},"fr-FR":{"More":"Plus"},"it-IT":{"More":"Altro"},"ja-JP":{"More":"その他"},"es-ES":{"More":"Más"},"ko-KR":{"More":"자세히"},"zh-CN":{"More":"更多"},"zh-TW":{"More":"更多"},"pt-BR":{"More":"Mais"},"nl-NL":{"More":"Meer"},"da-DK":{"More":"Mere"},"fi-FI":{"More":"Lisää"},"nb-NO":{"More":"Mer"},"sv-SE":{"More":"Mer"},"cs-CZ":{"More":"Více"},"pl-PL":{"More":"Więcej"},"ru-RU":{"More":"Дополнительно"},"tr-TR":{"More":"Daha Fazla"}};function getFirstSelectableWrappedItem(wrapperItem){if(!wrapperItem){return null}if(wrapperItem.hasAttribute('coral-actionbar-more')){return wrapperItem}var child=null;for(var i=0;i<wrapperItem.children.length;i+=1){child=wrapperItem.children[i];if(child.offsetParent&&(child.matches(commons.FOCUSABLE_ELEMENT_SELECTOR)||child.matches('a:not([href])'))){return child}}for(var _i=0;_i<wrapperItem.children.length;_i+=1){child=wrapperItem.children[_i];for(var j=0;j<child.children.length;j+=1){var subChild=child.children[j];if(subChild.offsetParent&&(subChild.matches(commons.FOCUSABLE_ELEMENT_SELECTOR)||child.matches('a:not([href])'))){return subChild}}}return null}var CLASSNAME$t='_coral-ActionBar';var ActionBar=function(_BaseComponent){_inherits(ActionBar,_BaseComponent);var _super=_createSuper(ActionBar);function ActionBar(){var _this;_classCallCheck(this,ActionBar);_this=_super.call(this);_this._delegateEvents({'key:up':'_onFocusPreviousItem','key:left':'_onFocusPreviousItem','key:down':'_onFocusNextItem','key:right':'_onFocusNextItem','global:resize':'_onResizeWindow'});_this._elements={primary:_this.querySelector('coral-actionbar-primary')||document.createElement('coral-actionbar-primary'),secondary:_this.querySelector('coral-actionbar-secondary')||document.createElement('coral-actionbar-secondary')};_this._items=_this.getElementsByTagName('coral-actionbar-item');_this._wait=50;_this._onLayout=_this._onLayout.bind(_assertThisInitialized(_this));_this._debounceOnLayout=_this._debounceOnLayout.bind(_assertThisInitialized(_this));_this._recalculateLayoutOnMutation();return _this}_createClass(ActionBar,[{key:"_recalculateLayoutOnMutation",value:function _recalculateLayoutOnMutation(){var _this2=this;this._observer=new MutationObserver(function(){_this2._debounceOnLayout()});this._observer.observe(this,{attributes:true,childList:true,characterData:true,subtree:true})}},{key:"_onFocusPreviousItem",value:function _onFocusPreviousItem(event){event.preventDefault();var previousItem=this._getPreviousSelectableWrappedItem(event.target);if(previousItem!==null){previousItem.focus()}}},{key:"_onFocusNextItem",value:function _onFocusNextItem(event){event.preventDefault();var nextWrappedItem=this._getNextSelectableWrappedItem(event.target);if(nextWrappedItem!==null){nextWrappedItem.focus()}}},{key:"_onResizeWindow",value:function _onResizeWindow(){var popovers=this.getElementsByTagName('coral-popover');for(var i=0;i<popovers.length;i+=1){popovers[i].removeAttribute('open')}this._debounceOnLayout()}},{key:"_onLayout",value:function _onLayout(){if(!this.primary||!this.primary._elements||!this.primary._elements.overlay||!this.secondary||!this.secondary._elements||!this.secondary._elements.overlay){return}if(this.primary._elements.overlay.open===true||this.secondary._elements.overlay.open===true){return}var ERROR_MARGIN=78;var primaryMore=this.primary._elements.moreButton;var secondaryMore=this.secondary._elements.moreButton;var leftItems=this.primary.items.getAll();var rightItems=this.secondary.items.getAll().reverse();var itemLeft=null;var itemRight=null;var widthCache=this._newWidthCache();var leftMoreButtonWidth=leftItems.length>0?widthCache.getOuterWidth(primaryMore):0;var rightMoreButtonWidth=rightItems.length>0?widthCache.getOuterWidth(secondaryMore):0;var borderWidthLeftContainer=this.primary.offsetWidth-this.primary.getBoundingClientRect().width;var borderWidthRightContainer=this.secondary.offsetWidth-this.secondary.getBoundingClientRect().width;var primaryLeftOffset=this.primary.offsetLeft;var secondaryRightOffset=this.offsetWidth-(this.secondary.offsetLeft+this.secondary.offsetWidth);var availableWidth=this.offsetWidth-primaryLeftOffset-secondaryRightOffset-leftMoreButtonWidth-rightMoreButtonWidth-borderWidthLeftContainer-borderWidthRightContainer-ERROR_MARGIN;var currentUsedWidth=0;var leftVisibleItems=0;var rightVisibleItems=0;var moreButtonLeftVisible=false;var moreButtonRightVisible=false;var showItem=false;var itemWidth=0;for(var i=0;i<leftItems.length||i<rightItems.length;i+=1){itemLeft=i<leftItems.length?leftItems[i]:null;itemRight=i<rightItems.length?rightItems[i]:null;showItem=false;if(itemLeft!==null){if(itemLeft.hidden||itemLeft.style.display==='none'){this._moveToScreen(itemLeft)}else{if(!moreButtonLeftVisible&&(this.primary.threshold<=0||leftVisibleItems<this.primary.threshold)){itemWidth=widthCache.getOuterWidth(itemLeft);if(currentUsedWidth+itemWidth<availableWidth){showItem=true}else if(leftVisibleItems===leftItems.length-1&&currentUsedWidth+itemWidth<availableWidth+leftMoreButtonWidth){showItem=true}}if(showItem){leftVisibleItems+=1;currentUsedWidth+=itemWidth;this._moveToScreen(itemLeft)}else{this._hideItem(itemLeft);moreButtonLeftVisible=true}if(leftVisibleItems===leftItems.length){availableWidth+=leftMoreButtonWidth;moreButtonLeftVisible=false}}}showItem=false;if(itemRight!==null){if(itemRight.hidden||itemRight.style.display==='none'){this._moveToScreen(itemRight)}else{if(!moreButtonRightVisible&&(this.secondary.threshold<=0||rightVisibleItems<this.secondary.threshold)){itemWidth=widthCache.getOuterWidth(itemRight);if(currentUsedWidth+itemWidth<availableWidth){showItem=true}else if(rightVisibleItems===rightItems.length-1&&currentUsedWidth+itemWidth<availableWidth+rightMoreButtonWidth){showItem=true}}if(showItem){rightVisibleItems+=1;currentUsedWidth+=itemWidth;this._moveToScreen(itemRight)}else{this._hideItem(itemRight);moreButtonRightVisible=true}if(rightVisibleItems===rightItems.length){availableWidth+=rightMoreButtonWidth;moreButtonRightVisible=false}}}}var primarySelectable=this.primary.items._getAllSelectable();var secondarySelectable=this.secondary.items._getAllSelectable();for(var _i=0;_i<this._items.length;_i+=1){this._toggleItemTabbable(this._items[_i],false)}if(moreButtonLeftVisible){this._moveToScreen(primaryMore,true);if(primarySelectable.length===0){this._toggleItemTabbable(primaryMore,true)}else{this._toggleItemTabbable(primaryMore,false);this._toggleItemTabbable(primarySelectable[0],true)}}else{this._moveToScreen(primaryMore,false);this._toggleItemTabbable(primaryMore,false);this._toggleItemTabbable(primarySelectable[0],true)}if(moreButtonRightVisible){this._moveToScreen(secondaryMore,true);if(secondarySelectable.length===0){this._toggleItemTabbable(secondaryMore,true)}else{this._toggleItemTabbable(secondaryMore,false);this._toggleItemTabbable(secondarySelectable[0],true)}}else{this._moveToScreen(secondaryMore,false);this._toggleItemTabbable(secondaryMore,false);var tabbableItem=this.secondary.items._getAllSelectable()[0];if(tabbableItem){this._toggleItemTabbable(tabbableItem,true)}}if(!this._resizeListenerAttached){commons.addResizeListener(this,this._debounceOnLayout);commons.addResizeListener(this.primary,this._debounceOnLayout);commons.addResizeListener(this.secondary,this._debounceOnLayout);this._resizeListenerAttached=true}}},{key:"_getNextSelectableWrappedItem",value:function _getNextSelectableWrappedItem(currentItem){if(currentItem.parentNode.tagName==='CORAL-ACTIONBAR-ITEM'){currentItem=currentItem.parentNode}var selectableItems=this._getAllSelectableItems(currentItem);var length=selectableItems.length;var index=selectableItems.indexOf(currentItem);if(index>=0&&length>index+1){return getFirstSelectableWrappedItem(selectableItems[index+1])}else{for(var i=0;i<length;i+=1){if(selectableItems[i].contains(currentItem)&&length>i+1){return getFirstSelectableWrappedItem(selectableItems[i+1])}}}return null}},{key:"_getPreviousSelectableWrappedItem",value:function _getPreviousSelectableWrappedItem(currentItem){if(currentItem.parentNode.tagName==='CORAL-ACTIONBAR-ITEM'){currentItem=currentItem.parentNode}var selectableItems=this._getAllSelectableItems(currentItem);var index=selectableItems.indexOf(currentItem);if(index>0){return getFirstSelectableWrappedItem(selectableItems[index-1])}else{for(var i=1;i<selectableItems.length;i+=1){if(selectableItems[i].contains(currentItem)){return getFirstSelectableWrappedItem(selectableItems[i-1])}}}return null}},{key:"_getAllSelectableItems",value:function _getAllSelectableItems(currentItem){var selectableItems=[];if(this.primary._elements.overlay.open===true||this.secondary._elements.overlay.open===true){var popoverItems=this.primary._elements.overlay.open===true?this.primary._itemsInPopover:this.secondary._itemsInPopover;var item=null;for(var i=0;i<popoverItems.length;i+=1){item=popoverItems[i];if(!item.hasAttribute('disabled')&&!item.hasAttribute('hidden')&&item.style.display!=='none'&&getFirstSelectableWrappedItem(item)){selectableItems.push(item)}}}else{var leftSelectableItems=this.primary.items._getAllSelectable();var rightSelectableItems=this.secondary.items._getAllSelectable();if(currentItem){if(this.primary.contains(currentItem)){selectableItems=leftSelectableItems}else if(this.secondary.contains(currentItem)){selectableItems=rightSelectableItems}}else{selectableItems=leftSelectableItems.concat(rightSelectableItems)}}return selectableItems}},{key:"_newWidthCache",value:function _newWidthCache(){return{_items:[],_outerWidth:[],getOuterWidth:function getOuterWidth(item){var index=this._items.indexOf(item);if(index<0){this._items.push(item);var width=item.offsetWidth;this._outerWidth.push(width);index=this._outerWidth.length-1}return this._outerWidth[index]}}}},{key:"_forceWebkitRedraw",value:function _forceWebkitRedraw(el){var isWebkit=('WebkitAppearance'in document.documentElement.style);if(isWebkit&&el.style.display!=='none'){el.style.display='none';this._cachedOffsetHeight=el.offsetHeight;el.style.display=''}}},{key:"_hideItem",value:function _hideItem(item,hide){if(hide===false){this._moveToScreen(item)}else if(!item.hasAttribute('coral-actionbar-offscreen')){item.setAttribute('coral-actionbar-offscreen','');item.style.visibility='hidden';this._forceWebkitRedraw(item)}}},{key:"_moveToScreen",value:function _moveToScreen(item,show){if(show===false){this._hideItem(item)}else if(item.hasAttribute('coral-actionbar-offscreen')){item.removeAttribute('coral-actionbar-offscreen');item.style.visibility='';this._forceWebkitRedraw(item)}}},{key:"_toggleItemTabbable",value:function _toggleItemTabbable(item,tabbable){this._ignoreLayout=true;item=getFirstSelectableWrappedItem(item);if(item!==null){item.setAttribute('tabindex',tabbable?0:-1)}}},{key:"_debounceOnLayout",value:function _debounceOnLayout(){var _this3=this;if(this._ignoreLayout){this._ignoreLayout=false;return}if(this._timeout!==null){window.clearTimeout(this._timeout)}this._timeout=window.setTimeout(function(){_this3._timeout=null;_this3._onLayout()},this._wait)}},{key:"_moveDirectItemChildren",value:function _moveDirectItemChildren(){var items=Array.prototype.filter.call(this.children,function(child){return child.nodeName==='CORAL-ACTIONBAR-ITEM'});var frag=document.createDocumentFragment();items.forEach(function(item){frag.appendChild(item)});this._elements.primary.appendChild(frag)}},{key:"render",value:function render(){_get(_getPrototypeOf(ActionBar.prototype),"render",this).call(this);this.classList.add(CLASSNAME$t);this._moveDirectItemChildren();var resizeHelpers=this.querySelectorAll('object');for(var i=0;i<resizeHelpers.length;i+=1){var resizeElement=resizeHelpers[i];if(resizeElement.parentNode===this){this.removeChild(resizeElement)}}var primary=this._elements.primary;var secondary=this._elements.secondary;if(!primary.getAttribute('role')){primary.setAttribute('role','toolbar')}if(!secondary.getAttribute('role')){secondary.setAttribute('role','toolbar')}var primaryProvided=primary.parentNode===this;var containers=Array.prototype.slice.call(this.getElementsByTagName('coral-actionbar-container'));var legacyContainer;var targetContainer;for(var j=0,containersCount=containers.length;j<containersCount;j+=1){legacyContainer=containers[j];if(j===0){targetContainer=primary;primaryProvided=true}else if(j===1){targetContainer=secondary}if(targetContainer){if(legacyContainer.hasAttribute('threshold')){targetContainer.setAttribute('threshold',legacyContainer.getAttribute('threshold'))}if(legacyContainer.hasAttribute('morebuttontext')){targetContainer.setAttribute('morebuttontext',legacyContainer.getAttribute('morebuttontext'))}while(legacyContainer.firstChild){targetContainer.appendChild(legacyContainer.firstChild)}}this.removeChild(legacyContainer)}if(!primaryProvided){while(this.firstChild){primary.appendChild(this.firstChild)}}this.primary=this._elements.primary;this.secondary=this._elements.secondary;this._onLayout()}},{key:"primary",get:function get(){return this._getContentZone(this._elements.primary)},set:function set(value){this._setContentZone('primary',value,{handle:'primary',tagName:'coral-actionbar-primary',insert:function insert(content){this.insertBefore(content,this.secondary)}})}},{key:"secondary",get:function get(){return this._getContentZone(this._elements.secondary)},set:function set(value){this._setContentZone('secondary',value,{handle:'secondary',tagName:'coral-actionbar-secondary',insert:function insert(content){this.appendChild(content)}})}},{key:"_contentZones",get:function get(){return{'coral-actionbar-primary':'primary','coral-actionbar-secondary':'secondary'}}}]);return ActionBar}(BaseComponent(HTMLElement));var CLASSNAME$u='_coral-ActionBar-item';var ActionBarItem=function(_BaseComponent){_inherits(ActionBarItem,_BaseComponent);var _super=_createSuper(ActionBarItem);function ActionBarItem(){_classCallCheck(this,ActionBarItem);return _super.apply(this,arguments)}_createClass(ActionBarItem,[{key:"render",value:function render(){_get(_getPrototypeOf(ActionBarItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$u)}},{key:"content",get:function get(){return this},set:function set(value){if(_typeof(value)==='object'){for(var prop in value){this[prop]=value[prop]}}}}]);return ActionBarItem}(BaseComponent(HTMLElement));var ActionBarContainerCollection=function(_SelectableCollection){_inherits(ActionBarContainerCollection,_SelectableCollection);var _super=_createSuper(ActionBarContainerCollection);function ActionBarContainerCollection(){_classCallCheck(this,ActionBarContainerCollection);return _super.apply(this,arguments)}_createClass(ActionBarContainerCollection,[{key:"add",value:function add(item,before){if(!before&&this._host.tagName==='CORAL-ACTIONBAR-PRIMARY'){var moreButton=this._host._elements.moreButton;before=this._host.contains(moreButton)?moreButton:null}return _get(_getPrototypeOf(ActionBarContainerCollection.prototype),"add",this).call(this,item,before)}},{key:"clear",value:function clear(){var items=_get(_getPrototypeOf(ActionBarContainerCollection.prototype),"clear",this).call(this);this._host._itemsInPopover=[];return items}},{key:"_getAllSelectable",value:function _getAllSelectable(){var selectableItems=[];var child=null;for(var i=0;i<this._host.children.length;i+=1){child=this._host.children[i];if(!child.hasAttribute('disabled')&&!child.hasAttribute('hidden')&&!child.hasAttribute('coral-actionbar-offscreen')&&child!==this._host._elements.overlay&&getFirstSelectableWrappedItem(child)){selectableItems.push(child)}}return selectableItems}},{key:"_getAllOffScreen",value:function _getAllOffScreen(){return Array.prototype.slice.call(this._host.querySelectorAll("".concat(this._itemTagName,"[coral-actionbar-offscreen]")))}}]);return ActionBarContainerCollection}(SelectableCollection);var SPACE=32;var AnchorButton=function(_BaseButton){_inherits(AnchorButton,_BaseButton);var _super=_createSuper(AnchorButton);function AnchorButton(){var _this;_classCallCheck(this,AnchorButton);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{keydown:'_onKeyDown',keyup:'_onKeyUp'}));_this.addEventListener('click',_this._onDisabledClick.bind(_assertThisInitialized(_this)));return _this}_createClass(AnchorButton,[{key:"_onKeyDown",value:function _onKeyDown(event){if(event.keyCode===SPACE){event.preventDefault();this.click();this.classList.add('is-selected')}}},{key:"_onKeyUp",value:function _onKeyUp(event){if(event.keyCode===SPACE){event.preventDefault();this.classList.remove('is-selected')}}},{key:"_onDisabledClick",value:function _onDisabledClick(event){if(this.disabled){event.preventDefault()}}},{key:"render",value:function render(){_get(_getPrototypeOf(AnchorButton.prototype),"render",this).call(this);this.setAttribute('role','button');if(!this.disabled){this.setAttribute('tabindex','0');this.removeAttribute('aria-disabled')}}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this.setAttribute('tabindex',this._disabled?'-1':'0');this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled)}},{key:"_contentZones",get:function get(){return{'coral-anchorbutton-label':'label'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(AnchorButton),"observedAttributes",this).concat(['disabled'])}}]);return AnchorButton}(BaseButton(BaseComponent(HTMLAnchorElement)));var AnchorButtonLabel=(function(){return document.createElement('coral-anchorbutton-label')});commons._define('coral-anchorbutton',AnchorButton,{extends:'a'});AnchorButton.Label=AnchorButtonLabel;var template$d=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["overlay"]=document.createElement("coral-popover");el0.setAttribute("smart","");el0.id=data_0["commons"]["getUID"]();el0.setAttribute("handle","overlay");el0.setAttribute("placement","bottom");el0.setAttribute("breadthoffset","-50%r + 50%p");el0.setAttribute("coral-actionbar-popover","");el0.setAttribute("tabindex","-1");el0.setAttribute("role","presentation");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var template$e=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["moreButton"]=document.createElement("button","coral-button");el0.setAttribute("is","coral-button");el0.setAttribute("handle","moreButton");el0.setAttribute("type","button");el0.setAttribute("variant","quietaction");el0.className+=" _coral-ActionBar-button";el0.setAttribute("icon","more");el0.setAttribute("coral-actionbar-more","");el0.setAttribute("aria-expanded","false");el0.setAttribute("aria-haspopup","true");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["moreButtonLabel"]=document.createElement("coral-button-label");el2.setAttribute("handle","moreButtonLabel");el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);return frag};var template$f=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;var copyAttributes=data.copyAttributes;data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);if(data_0["items"]["isButtonList"]){var el3=document.createTextNode("\n  ");frag.appendChild(el3);var el4=this["buttonList"]=document.createElement("coral-buttonlist");el4.className+=" _coral-ActionBar-buttonList";el4.setAttribute("tabindex","0");el4.setAttribute("role","menu");el4.setAttribute("coral-actionbar-offscreen","");el4.setAttribute("handle","buttonList");var el5=document.createTextNode("\n    ");el4.appendChild(el5);var iterated_1=data_0["items"];for(var i1=0,ni1=iterated_1.length;i1<ni1;i1+=1){var data_1=data=iterated_1[i1];var el7=document.createTextNode("\n      ");el4.appendChild(el7);var el8=this["buttonListItem"]=document.createElement("button","coral-buttonlist-item");el8.setAttribute("is","coral-buttonlist-item");el8.setAttribute("role","menuitem");el8.setAttribute("handle","buttonListItem");var el9=document.createTextNode("\n        ");el8.appendChild(el9);data=data_1;copyAttributes(data._button,this.buttonListItem);data_1=data;var el11=document.createTextNode("\n        ");el8.appendChild(el11);var el12=document.createElement("coral-list-item-content");var el13=document.createTextNode("\n          ");el12.appendChild(el13);var el14=this["buttonListItemContent"]=document.createElement("coral-action-bar-item");el14.setAttribute("coral-actionbar-offscreen","");el14.setAttribute("handle","buttonListItemContent");el12.appendChild(el14);var el15=document.createTextNode("\n        ");el12.appendChild(el15);el8.appendChild(el12);var el16=document.createTextNode("\n        ");el8.appendChild(el16);data=data_1;this.buttonListItemContent.innerHTML=data._button.label.innerHTML;data_1=data;var el18=document.createTextNode("\n      ");el8.appendChild(el18);el4.appendChild(el8);var el19=document.createTextNode("\n      ");el4.appendChild(el19);if(data_1["_popover"]){var el21=document.createTextNode("\n        ");el4.appendChild(el21);data=data_1;var popover=data._popover.cloneNode(true);data._popover.removeAttribute('id');if(popover.target){popover.removeAttribute('target');popover.target=this.buttonListItem}this.buttonList.items.add(popover);data_1=data;var el23=document.createTextNode("\n      ");el4.appendChild(el23)}var el24=document.createTextNode("\n    ");el4.appendChild(el24)}var el25=document.createTextNode("\n  ");el4.appendChild(el25);frag.appendChild(el4);var el26=document.createTextNode("\n  ");frag.appendChild(el26);var el27=document.createTextNode("\n");frag.appendChild(el27)}else{var el28=document.createTextNode("\n    ");frag.appendChild(el28);if(data_0["items"]["isAnchorList"]){var el30=document.createTextNode("\n      ");frag.appendChild(el30);var el31=this["anchorList"]=document.createElement("coral-anchorlist");el31.setAttribute("tabindex","0");el31.setAttribute("role","menu");el31.setAttribute("coral-actionbar-offscreen","");el31.setAttribute("handle","anchorList");var el32=document.createTextNode("\n        ");el31.appendChild(el32);var iterated_1=data_0["items"];for(var i1=0,ni1=iterated_1.length;i1<ni1;i1+=1){var data_1=data=iterated_1[i1];var el34=document.createTextNode("\n          ");el31.appendChild(el34);var el35=this["anchorListItem"]=document.createElement("a","coral-anchorlist-item");el35.setAttribute("is","coral-anchorlist-item");el35.setAttribute("role","menuitem");el35.setAttribute("handle","anchorListItem");var el36=document.createTextNode("\n            ");el35.appendChild(el36);data=data_1;copyAttributes(data._button,this.anchorListItem);data_1=data;var el38=document.createTextNode("\n            ");el35.appendChild(el38);var el39=document.createElement("coral-list-item-content");var el40=document.createTextNode("\n              ");el39.appendChild(el40);var el41=this["anchorListItemContent"]=document.createElement("coral-action-bar-item");el41.setAttribute("coral-actionbar-offscreen","");el41.setAttribute("handle","anchorListItemContent");el39.appendChild(el41);var el42=document.createTextNode("\n            ");el39.appendChild(el42);el35.appendChild(el39);var el43=document.createTextNode("\n            ");el35.appendChild(el43);data=data_1;this.anchorListItemContent.innerHTML=data._button.label.innerHTML;data_1=data;var el45=document.createTextNode("\n          ");el35.appendChild(el45);el31.appendChild(el35);var el46=document.createTextNode("\n          ");el31.appendChild(el46);if(data_1["_popover"]){var el48=document.createTextNode("\n            ");el31.appendChild(el48);data=data_1;var popover=data._popover.cloneNode(true);data._popover.removeAttribute('id');if(popover.target){popover.removeAttribute('target');popover.target=this.anchorListItem}this.anchorList.items.add(popover);data_1=data;var el50=document.createTextNode("\n          ");el31.appendChild(el50)}var el51=document.createTextNode("\n        ");el31.appendChild(el51)}var el52=document.createTextNode("\n      ");el31.appendChild(el52);frag.appendChild(el31);var el53=document.createTextNode("\n      ");frag.appendChild(el53);var el54=document.createTextNode("\n    ");frag.appendChild(el54)}else{var el55=document.createTextNode("\n        ");frag.appendChild(el55);var el56=document.createElement("ul");el56.className+=" _coral-ActionBar-list";var el57=document.createTextNode("\n          ");el56.appendChild(el57);var iterated_1=data_0["items"];for(var i1=0,ni1=iterated_1.length;i1<ni1;i1+=1){var data_1=data=iterated_1[i1];var el59=document.createTextNode("\n            ");el56.appendChild(el59);var el60=document.createElement("li");el60.className+=" _coral-ActionBar-list-item";var el61=document.createTextNode("\n              ");el60.appendChild(el61);el60.appendChild(data_1);var el63=document.createTextNode("\n            ");el60.appendChild(el63);el56.appendChild(el60);var el64=document.createTextNode("\n          ");el56.appendChild(el64)}var el65=document.createTextNode("\n        ");el56.appendChild(el65);frag.appendChild(el56);var el66=document.createTextNode("\n      ");frag.appendChild(el66)}var el67=document.createTextNode("\n  ");frag.appendChild(el67)}var el68=document.createTextNode("\n\n\n");frag.appendChild(el68);return frag};var REG_EXP=/_coral([^\s]+)/g;var copyAttributes=function copyAttributes(from,to){var excludedAttributes=['is','id','variant','size'];for(var i=0;i<from.attributes.length;i+=1){var attr=from.attributes[i];if(excludedAttributes.indexOf(attr.nodeName)===-1){if(attr.nodeName==='class'){to.setAttribute(attr.nodeName,"".concat(to.className," ").concat(attr.nodeValue.replace(REG_EXP,'')))}else{to.setAttribute(attr.nodeName,attr.nodeValue)}}}to.addEventListener('click',function(){return from.click()})};var BaseActionBarContainer=function BaseActionBarContainer(superClass){return function(_superClass){_inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){var _this;_classCallCheck(this,_class);_this=_super.call(this);_this._elements={};_this._itemsInPopover=[];template$e.call(_this._elements);template$d.call(_this._elements,{commons:commons});template$f.call(_this._elements,{items:_this._itemsInPopover,copyAttributes:copyAttributes});_this._elements.overlay.focusOnShow=_this._elements.overlay;var overlayId=_this._elements.overlay.id;var events={};events["global:capture:coral-overlay:beforeopen #".concat(overlayId)]='_onOverlayBeforeOpen';events["global:capture:coral-overlay:beforeclose #".concat(overlayId)]='_onOverlayBeforeClose';events["global:key:down #".concat(overlayId)]='_onOverlayKeyDown';events["global:key:up #".concat(overlayId)]='_onOverlayKeyUp';_this._delegateEvents(events);_this.items._startHandlingItems(true);return _this}_createClass(_class,[{key:"_styleItem",value:function _styleItem(item){var button=item.querySelector('button[is="coral-button"]')||item.querySelector('a[is="coral-anchorbutton"]');if(button){button.classList.add('_coral-ActionBar-button');var oldVariant=button.getAttribute('variant');if(oldVariant===Button.variant.ACTION||oldVariant===Button.variant.QUIET_ACTION){return}button.setAttribute('variant',oldVariant===Button.variant.QUIET?Button.variant.QUIET_ACTION:Button.variant.ACTION)}}},{key:"_onOverlayBeforeOpen",value:function _onOverlayBeforeOpen(event){if(event.target!==this._elements.overlay){return}this._itemsInPopover=this.items._getAllOffScreen();if(this._itemsInPopover.length<1){return}this._elements.overlay.focusOnShow='on';this._itemsInPopover.forEach(function(item){item.style.visibility='';item._button=item.querySelector('button[is="coral-button"]')||item.querySelector('a[is="coral-anchorbutton"]');item._popover=item.querySelector('coral-popover');if(item._popover){item._popoverId=item._popover.id}});this._itemsInPopover.isButtonList=this._itemsInPopover.every(function(item){return item._button&&item._button.tagName==='BUTTON'});this._itemsInPopover.isAnchorList=this._itemsInPopover.every(function(item){return item._button&&item._button.tagName==='A'});this._elements.overlay.hidden=false;var popover=this._elements.overlay;popover.content.innerHTML='';popover.content.appendChild(template$f.call(this._elements,{items:this._itemsInPopover,copyAttributes:copyAttributes}))}},{key:"_onOverlayBeforeClose",value:function _onOverlayBeforeClose(event){if(event.target!==this._elements.overlay){return}var focusedItem=document.activeElement.parentNode;this._elements.overlay.hidden=true;this._elements.overlay.focusOnShow=this._elements.overlay;var childPopovers=this._elements.overlay.getElementsByTagName('coral-popover');for(var i=0;i<childPopovers.length;i+=1){childPopovers[i].open=false}this._returnElementsFromPopover();this._itemsInPopover=[];this._elements.overlay.content.innerHTML='';var isFocusedItemInsideActionBar=this.parentNode.contains(focusedItem);var isFocusedItemOffscreen=focusedItem.hasAttribute&&focusedItem.hasAttribute('coral-actionbar-offscreen');if(isFocusedItemInsideActionBar&&isFocusedItemOffscreen){this._elements.moreButton.focus()}}},{key:"_onOverlayKeyDown",value:function _onOverlayKeyDown(event){event.preventDefault();this._elements.anchorList&&this._elements.anchorList._focusFirstItem(event);this._elements.buttonList&&this._elements.buttonList._focusFirstItem(event)}},{key:"_onOverlayKeyUp",value:function _onOverlayKeyUp(event){event.preventDefault();this._elements.anchorList&&this._elements.anchorList._focusLastItem(event);this._elements.buttonList&&this._elements.buttonList._focusLastItem(event)}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(_class.prototype),"connectedCallback",this).call(this);var overlay=this._elements.overlay;overlay.removeAttribute('open');if(overlay._parent){overlay._parent.appendChild(overlay)}}},{key:"render",value:function render(){var _this2=this;_get(_getPrototypeOf(_class.prototype),"render",this).call(this);var resizeHelpers=this.getElementsByTagName('object');for(var i=0;i<resizeHelpers.length;i+=1){var resizeElement=resizeHelpers[i];if(resizeElement.parentNode===this){this.removeChild(resizeElement)}}var more=this.querySelector('[coral-actionbar-more]');if(more){this.removeChild(more)}var popover=this.querySelector('[coral-actionbar-popover]');if(popover){this.removeChild(popover)}this._elements.moreButton.label.textContent=this.moreButtonText;this._elements.overlay.target=this._elements.moreButton;var frag=document.createDocumentFragment();frag.appendChild(this._elements.moreButton);frag.appendChild(this._elements.overlay);this.appendChild(frag);this.items.getAll().forEach(function(item){return _this2._styleItem(item)})}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(_class.prototype),"disconnectedCallback",this).call(this);var overlay=this._elements.overlay;if(!this.contains(overlay)){overlay._parent=overlay._repositioned?document.body:this;overlay.remove()}}},{key:"overlay",get:function get(){return this._elements.overlay}},{key:"items",get:function get(){if(!this._items){this._items=new ActionBarContainerCollection({host:this,itemTagName:'coral-actionbar-item',onItemAdded:this._styleItem})}return this._items}},{key:"threshold",get:function get(){return typeof this._threshold==='number'?this._threshold:-1},set:function set(value){this._threshold=transform.number(value);this._reflectAttribute('threshold',this._threshold)}},{key:"moreButtonText",get:function get(){return this._moreButtonText||''},set:function set(value){this._moreButtonText=transform.string(value);if(this._elements.moreButton){this._elements.moreButtonLabel.innerHTML=this._moreButtonText;this._elements.moreButton[this._moreButtonText.trim()===''?'setAttribute':'removeAttribute']('title',i18n.get('More'))}}}],[{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(_class),"_attributePropertyMap",this),{morebuttontext:'moreButtonText'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['morebuttontext','threshold'])}}]);return _class}(superClass)};var CLASSNAME$v='_coral-ActionBar-primary';var ActionBarPrimary=function(_ActionBarContainer){_inherits(ActionBarPrimary,_ActionBarContainer);var _super=_createSuper(ActionBarPrimary);function ActionBarPrimary(){_classCallCheck(this,ActionBarPrimary);return _super.apply(this,arguments)}_createClass(ActionBarPrimary,[{key:"_returnElementsFromPopover",value:function _returnElementsFromPopover(){var item=null;var wrappedItem=null;for(var i=0;i<this._itemsInPopover.length;i+=1){item=this._itemsInPopover[i];item.style.visibility='hidden';wrappedItem=getFirstSelectableWrappedItem(item);if(wrappedItem&&wrappedItem.hasAttribute('tabindex')){wrappedItem.setAttribute('tabindex',-1)}this.insertBefore(item,this._elements.moreButton);if(item._button&&item._popover){item._popover.id=item._popoverId;if(item._popover.target){item._popover.target=item._button}}}}},{key:"_attachMoreButtonToContainer",value:function _attachMoreButtonToContainer(){this.appendChild(this._elements.moreButton)}},{key:"render",value:function render(){_get(_getPrototypeOf(ActionBarPrimary.prototype),"render",this).call(this);this.classList.add(CLASSNAME$v);this._attachMoreButtonToContainer()}}]);return ActionBarPrimary}(BaseActionBarContainer(BaseComponent(HTMLElement)));var CLASSNAME$w='_coral-ActionBar-secondary';var ActionBarSecondary=function(_ActionBarContainer){_inherits(ActionBarSecondary,_ActionBarContainer);var _super=_createSuper(ActionBarSecondary);function ActionBarSecondary(){_classCallCheck(this,ActionBarSecondary);return _super.apply(this,arguments)}_createClass(ActionBarSecondary,[{key:"_returnElementsFromPopover",value:function _returnElementsFromPopover(){var item=null;var wrappedItem=null;for(var i=0;i<this._itemsInPopover.length;i+=1){item=this._itemsInPopover[i];item.style.visibility='hidden';wrappedItem=getFirstSelectableWrappedItem(item);if(wrappedItem&&wrappedItem.hasAttribute('tabindex')){wrappedItem.setAttribute('tabindex',-1)}this.insertBefore(item,this.firstChild.nextSibling);if(item._button&&item._popover){item._popover.id=item._popoverId;if(item._popover.target){item._popover.target=item._button}}}}},{key:"_attachMoreButtonToContainer",value:function _attachMoreButtonToContainer(){this.insertBefore(this._elements.moreButton,this.firstChild)}},{key:"render",value:function render(){_get(_getPrototypeOf(ActionBarSecondary.prototype),"render",this).call(this);this.classList.add(CLASSNAME$w);this._attachMoreButtonToContainer()}}]);return ActionBarSecondary}(BaseActionBarContainer(BaseComponent(HTMLElement)));var CLASSNAME$x='_coral-ActionBar-container';var position={PRIMARY:'primary',SECONDARY:'secondary',INVALID:'invalid'};var ActionBarContainer=function(_BaseActionBarContain){_inherits(ActionBarContainer,_BaseActionBarContain);var _super=_createSuper(ActionBarContainer);function ActionBarContainer(){var _this;_classCallCheck(this,ActionBarContainer);_this=_super.call(this);commons._log('warn',"Coral.ActionBar.Container: coral-actionbar-container has been deprecated.\n    Please use coral-actionbar-primary and coral-actionbar-secondary instead");return _this}_createClass(ActionBarContainer,[{key:"_attachMoreButtonToContainer",value:function _attachMoreButtonToContainer(){if(this.parentNode&&this.parentNode.secondary===this){this.insertBefore(this._elements.moreButton,this.firstChild)}else{this.appendChild(this._elements.moreButton)}}},{key:"render",value:function render(){_get(_getPrototypeOf(ActionBarContainer.prototype),"render",this).call(this);this.classList.add(CLASSNAME$x);var resizeHelpers=this.getElementsByTagName('object');for(var i=0;i<resizeHelpers.length;i+=1){var resizeElement=resizeHelpers[i];if(resizeElement.parentNode===this){this.removeChild(resizeElement)}}this._elements.moreButton=this.querySelector('[coral-actionbar-more]');if(this._elements.moreButton){this.removeChild(this._elements.moreButton)}this._elements.overlay=this.querySelector('[coral-actionbar-popover]');if(this._elements.overlay){this.removeChild(this._elements.overlay)}this._elements.moreButton.label.textContent=this.moreButtonText;this.appendChild(this._elements.moreButton);this._elements.overlay.target=this._elements.moreButton;this.insertBefore(this._elements.overlay,this.firstChild);this._attachMoreButtonToContainer()}},{key:"_position",get:function get(){if(this.parentNode){var containers=this.parentNode.getElementsByTagName('coral-actionbar-container');if(containers.length>0&&containers[0]===this){return position.PRIMARY}else if(containers.length>1&&containers[1]===this){return position.SECONDARY}}return position.INVALID}}],[{key:"position",get:function get(){return position}}]);return ActionBarContainer}(BaseActionBarContainer(BaseComponent(HTMLElement)));commons.extend(strings,{'coral-component-actionbar':translations$9});commons._define('coral-actionbar-item',ActionBarItem);commons._define('coral-actionbar-primary',ActionBarPrimary);commons._define('coral-actionbar-secondary',ActionBarSecondary);commons._define('coral-actionbar-container',ActionBarContainer);commons._define('coral-actionbar',ActionBar);ActionBar.Item=ActionBarItem;ActionBar.Primary=ActionBarPrimary;ActionBar.Secondary=ActionBarSecondary;ActionBar.Container=ActionBarContainer;var variant$9={ERROR:'error',WARNING:'warning',SUCCESS:'success',HELP:'help',INFO:'info'};var size$4={SMALL:'S',LARGE:'L'};var CLASSNAME$y='_coral-Alert';var ALL_VARIANT_CLASSES$6=[];for(var variantValue$4 in variant$9){ALL_VARIANT_CLASSES$6.push("".concat(CLASSNAME$y,"--").concat(variant$9[variantValue$4]))}var capitalize$3=function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)};var Alert=function(_BaseComponent){_inherits(Alert,_BaseComponent);var _super=_createSuper(Alert);function Alert(){var _this;_classCallCheck(this,Alert);_this=_super.call(this);_this._elements={header:_this.querySelector('coral-alert-header')||document.createElement('coral-alert-header'),content:_this.querySelector('coral-alert-content')||document.createElement('coral-alert-content'),footer:_this.querySelector('coral-alert-footer')||document.createElement('coral-alert-footer')};_this._delegateEvents({'click [coral-close]':'_onCloseClick'});return _this}_createClass(Alert,[{key:"_onCloseClick",value:function _onCloseClick(event){var dismissTarget=event.matchedTarget;var dismissValue=dismissTarget.getAttribute('coral-close');if(!dismissValue||this.matches(dismissValue)){this.hidden=true;event.stopPropagation()}this._trackEvent('close','coral-alert',event)}},{key:"_insertTemplate",value:function _insertTemplate(){if(this._elements.icon){this._elements.icon.remove()}var variantValue=this.variant;if(variantValue===variant$9.WARNING||variantValue===variant$9.ERROR){variantValue='alert'}var iconName=capitalize$3(variantValue);this.insertAdjacentHTML('afterbegin',Icon._renderSVG("spectrum-css-icon-".concat(iconName,"Medium"),['_coral-Alert-icon',"_coral-UIIcon-".concat(iconName,"Medium")]));this._elements.icon=this.querySelector('._coral-Alert-icon')}},{key:"render",value:function render(){_get(_getPrototypeOf(Alert.prototype),"render",this).call(this);this.classList.add(CLASSNAME$y);this.setAttribute('role','alert');if(!this._variant){this.variant=variant$9.INFO}if(!this._size){this.size=size$4.SMALL}for(var contentZone in this._contentZones){var element=this._elements[this._contentZones[contentZone]];if(element.parentNode){element.parentNode.removeChild(element)}}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&!child.classList.contains('_coral-Alert-icon')){this._elements.content.appendChild(child)}else{this.removeChild(child)}}this._insertTemplate();for(var _contentZone in this._contentZones){var contentZoneName=this._contentZones[_contentZone];this[contentZoneName]=this._elements[contentZoneName]}}},{key:"variant",get:function get(){return this._variant||variant$9.INFO},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$9)(value)&&value||variant$9.INFO;this._reflectAttribute('variant',this._variant);this._insertTemplate();(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$6);this.classList.add("".concat(CLASSNAME$y,"--").concat(this._variant))}},{key:"size",get:function get(){return this._size||size$4.SMALL},set:function set(value){value=transform.string(value).toUpperCase();this._size=validate.enumeration(size$4)(value)&&value||size$4.SMALL;this._reflectAttribute('size',this._size)}},{key:"header",get:function get(){return this._getContentZone(this._elements.header)},set:function set(value){this._setContentZone('header',value,{handle:'header',tagName:'coral-alert-header',insert:function insert(header){header.classList.add("".concat(CLASSNAME$y,"-header"));this.insertBefore(header,this.firstChild)}})}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-alert-content',insert:function insert(content){content.classList.add("".concat(CLASSNAME$y,"-content"));this.insertBefore(content,this.header.nextElementSibling)}})}},{key:"footer",get:function get(){return this._getContentZone(this._elements.footer)},set:function set(value){this._setContentZone('footer',value,{handle:'footer',tagName:'coral-alert-footer',insert:function insert(footer){footer.classList.add("".concat(CLASSNAME$y,"-footer"));this.insertBefore(footer,this.content.nextElementSibling)}})}},{key:"_contentZones",get:function get(){return{'coral-alert-header':'header','coral-alert-content':'content','coral-alert-footer':'footer'}}}],[{key:"variant",get:function get(){return variant$9}},{key:"size",get:function get(){return size$4}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Alert),"observedAttributes",this).concat(['variant','size'])}}]);return Alert}(BaseComponent(HTMLElement));var AlertHeader=(function(){return document.createElement('coral-alert-header')});var AlertContent=(function(){return document.createElement('coral-alert-content')});var AlertFooter=(function(){return document.createElement('coral-alert-footer')});commons._define('coral-alert',Alert);Alert.Header=AlertHeader;Alert.Content=AlertContent;Alert.Footer=AlertFooter;var translations$a={"en-US":{"No matching results&period;":"No matching results.","Show suggestion":"Show suggestion","Show {0} suggestions":"Show {0} suggestions","Show suggestions":"Show suggestions"},"de-DE":{"No matching results&period;":"Keine passenden Ergebnisse.","Show suggestion":"Vorschlag anzeigen","Show {0} suggestions":"{0} Vorschläge anzeigen","Show suggestions":"Vorschläge anzeigen"},"es-ES":{"No matching results&period;":"No hay resultados coincidentes.","Show suggestion":"Mostrar sugerencia","Show {0} suggestions":"Mostrar {0} sugerencias","Show suggestions":"Mostrar sugerencias"},"ko-KR":{"No matching results&period;":"일치하는 결과가 없습니다.","Show suggestion":"제안 사항 표시","Show {0} suggestions":"{0}제안 사항 표시","Show suggestions":"제안 사항 표시"},"fr-FR":{"No matching results&period;":"Aucun résultat correspondant.","Show suggestion":"Afficher la suggestion","Show {0} suggestions":"Afficher {0} suggestions","Show suggestions":"Afficher les suggestions"},"ja-JP":{"No matching results&period;":"一致する結果がありません。","Show suggestion":"入力候補を表示","Show {0} suggestions":"{0}入力候補を表示","Show suggestions":"入力候補を表示"},"zh-CN":{"No matching results&period;":"无匹配的结果。","Show suggestion":"显示建议","Show {0} suggestions":"显示 {0} 个建议","Show suggestions":"显示建议"},"zh-TW":{"No matching results&period;":"沒有相符的結果。","Show suggestion":"顯示建議","Show {0} suggestions":"顯示 {0} 個建議","Show suggestions":"顯示建議"},"pt-BR":{"No matching results&period;":"Nenhum resultado correspondente.","Show suggestion":"Mostrar sugestão","Show {0} suggestions":"Mostrar {0} sugestões","Show suggestions":"Mostrar sugestões"},"it-IT":{"No matching results&period;":"Nessun risultato corrispondente.","Show suggestion":"Mostra suggerimento","Show {0} suggestions":"Mostra {0} suggerimenti","Show suggestions":"Mostra suggerimenti"},"nl-NL":{"No matching results&period;":"Geen overeenkomende resultaten.","Show suggestion":"Voorstel tonen","Show {0} suggestions":"{0} voorstellen tonen","Show suggestions":"Voorstellen tonen"},"da-DK":{"No matching results&period;":"Ingen matchende resultater.","Show suggestion":"Vis forslag","Show {0} suggestions":"Vis  {0} forslag","Show suggestions":"Vis forslag"},"fi-FI":{"No matching results&period;":"Vastaavia tuloksia ei ole.","Show suggestion":"Näytä ehdotus","Show {0} suggestions":"Näytä {0} ehdotusta","Show suggestions":"Näytä ehdotukset"},"nb-NO":{"No matching results&period;":"Ingen tilsvarende resultater.","Show suggestion":"Vis forslag","Show {0} suggestions":"Vis {0} forslag","Show suggestions":"Vis forslag"},"sv-SE":{"No matching results&period;":"Inga matchande resultat.","Show suggestion":"Visa förslag","Show {0} suggestions":"Visa {0} förslag","Show suggestions":"Visa förslag"},"cs-CZ":{"No matching results&period;":"Neodpovídají žádné výsledky.","Show suggestion":"Zobrazit doporučení","Show {0} suggestions":"Zobrazit následující počet návrhů: {0}","Show suggestions":"Zobrazit doporučení"},"pl-PL":{"No matching results&period;":"Brak pasujących wyników.","Show suggestion":"Pokaż sugestię","Show {0} suggestions":"Wyświetl {0} sugestii","Show suggestions":"Pokaż sugestie"},"ru-RU":{"No matching results&period;":"Нет соответствующих результатов.","Show suggestion":"Показать предложение","Show {0} suggestions":"Показать предложения ({0})","Show suggestions":"Показать предложения"},"tr-TR":{"No matching results&period;":"Eşleşen sonuç yok.","Show suggestion":"Öneriyi göster","Show {0} suggestions":"{0} önerilerini göster","Show suggestions":"Önerileri göster"}};var AutocompleteItem=function(_BaseComponent){_inherits(AutocompleteItem,_BaseComponent);var _super=_createSuper(AutocompleteItem);function AutocompleteItem(){var _this;_classCallCheck(this,AutocompleteItem);_this=_super.call(this);_this._observer=new MutationObserver(_this._handleMutation.bind(_assertThisInitialized(_this)));_this._observer.observe(_assertThisInitialized(_this),{characterData:true,childList:true,subtree:true});return _this}_createClass(AutocompleteItem,[{key:"_handleMutation",value:function _handleMutation(){this.trigger('coral-autocomplete-item:_contentchanged',{content:this.textContent})}},{key:"value",get:function get(){return typeof this._value==='undefined'?this.getAttribute('value')||this.textContent.replace(/\s{2,}/g,' ').trim():this._value},set:function set(value){this._value=transform.string(value);this._reflectAttribute('value',this._value);this.trigger('coral-autocomplete-item:_valuechanged')}},{key:"content",get:function get(){return this},set:function set(value){if(_typeof(value)==='object'){for(var prop in value){this[prop]=value[prop]}}}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.trigger('coral-autocomplete-item:_selectedchanged')}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled)}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(AutocompleteItem),"observedAttributes",this).concat(['selected','disabled','value'])}}]);return AutocompleteItem}(BaseComponent(HTMLElement));var template$g=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["overlay"]=document.createElement("coral-popover");el0.setAttribute("withinoffset","0");el0.setAttribute("smart","");el0.id=data_0["commons"]["getUID"]();el0.className+=" _coral-Autocomplete-overlay";el0.setAttribute("focusonshow","off");el0.setAttribute("returnfocus","off");el0.setAttribute("placement","bottom");el0.setAttribute("handle","overlay");el0.setAttribute("role","presentation");el0.setAttribute("breadthoffset","50%r - 50%p");var el1=document.createTextNode("\n  ");el0.appendChild(el1);data=data_0;var maxHeight='max-height:'+32*6+'px';data_0=data;var el3=document.createTextNode("\n  ");el0.appendChild(el3);var el4=this["selectList"]=document.createElement("coral-buttonlist");el4.setAttribute("style",maxHeight);el4.id=data_0["commons"]["getUID"]();el4.className+=" _coral-Autocomplete-selectList";el4.setAttribute("handle","selectList");el4.setAttribute("role","listbox");el4.setAttribute("interaction","off");el0.appendChild(el4);var el5=document.createTextNode("\n");el0.appendChild(el5);frag.appendChild(el0);var el6=document.createTextNode("\n");frag.appendChild(el6);var el7=this["field"]=document.createElement("input");el7.setAttribute("type","hidden");el7.setAttribute("handle","field");frag.appendChild(el7);var el8=document.createTextNode("\n");frag.appendChild(el8);var el9=this["inputGroup"]=document.createElement("div");el9.className+=" _coral-InputGroup _coral-Autocomplete-inputGroup";el9.setAttribute("handle","inputGroup");el9.setAttribute("role","presentation");var el10=document.createTextNode("\n  ");el9.appendChild(el10);var el11=this["input"]=document.createElement("input","coral-textfield");el11.className+=" _coral-InputGroup-field _coral-Autocomplete-input";el11.setAttribute("type","text");el11.setAttribute("autocomplete","off");el11.setAttribute("handle","input");el11.setAttribute("role","combobox");el11.setAttribute("is","coral-textfield");el9.appendChild(el11);var el12=document.createTextNode("\n  ");el9.appendChild(el12);var el13=this["trigger"]=document.createElement("button","coral-button");el13.setAttribute("type","button");el13.className+=" _coral-FieldButton _coral-InputGroup-button _coral-Autocomplete-trigger";el13.setAttribute("is","coral-button");el13.setAttribute("variant","_custom");el13.setAttribute("handle","trigger");el13.setAttribute("aria-label",data_0["i18n"]["get"]('Show suggestions'));el13.setAttribute("title",data_0["i18n"]["get"]('Show suggestions'));var el14=document.createTextNode("\n    ");el13.appendChild(el14);var el15=this["label"]=document.createElement("coral-button-label");el15.setAttribute("handle","label");el13.appendChild(el15);var el16=document.createTextNode("\n    ");el13.appendChild(el16);data=data_0;this.trigger._elements.label=this.label;this.trigger.insertAdjacentHTML('beforeend',data.Icon._renderSVG('spectrum-css-icon-ChevronDownMedium',['_coral-InputGroup-icon','_coral-UIIcon-ChevronDownMedium']));data_0=data;var el18=document.createTextNode("\n  ");el13.appendChild(el18);el9.appendChild(el13);var el19=document.createTextNode("\n");el9.appendChild(el19);frag.appendChild(el9);var el20=document.createTextNode("\n");frag.appendChild(el20);var el21=this["tagList"]=document.createElement("coral-taglist");el21.className+=" _coral-Autocomplete-tagList";el21.setAttribute("handle","tagList");frag.appendChild(el21);var el22=document.createTextNode("\n");frag.appendChild(el22);return frag};var template$h=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["loadIndicator"]=document.createElement("div");el0.className+=" _coral-SelectList-loading";el0.setAttribute("handle","loadIndicator");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=document.createElement("coral-wait");el2.setAttribute("centered","");el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);return frag};var CLASSNAME$z='_coral-Autocomplete';var SCROLL_BOTTOM_THRESHOLD$1=50;var SCROLL_DEBOUNCE$1=100;var variant$a={DEFAULT:'default',QUIET:'quiet'};var match$1={STARTSWITH:'startswith',CONTAINS:'contains'};var Autocomplete=function(_BaseFormField){_inherits(Autocomplete,_BaseFormField);var _super=_createSuper(Autocomplete);function Autocomplete(){var _this;_classCallCheck(this,Autocomplete);_this=_super.call(this);_this._elements={};template$g.call(_this._elements,{Icon:Icon,commons:commons,i18n:i18n});_this._elements.tagList.reset=function(){};_this._labellableElement=_this._elements.input;var overlayId=_this._elements.overlay.id;var events={'key:up [handle="input"]':'_handleInputUpKeypress','key:alt+up [handle="input"]':'_handleInputUpKeypress','key:down [handle="input"]':'_handleInputDownKeypress','key:alt+down [handle="input"]':'_handleInputDownKeypress','key:tab [handle="input"]':'_handleInputTabKeypress','key:shift+tab [handle="input"]':'_handleListFocusShift','capture:change [handle="input"]':'_handleInput','input [handle="input"]':'_handleInputEvent','keydown':'_handleInputKeypressEnter','click [handle="trigger"]':'_handleTriggerClick','mousedown [handle="trigger"]':'_handleTriggerMousedown','capture:blur':'_handleFocusOut','global:click':'_onGlobalClick','global:touchstart':'_onGlobalClick','coral-collection:add [handle="tagList"]':'_handleTagAdded','coral-collection:remove [handle="tagList"]':'_handleTagRemoved','change [handle="tagList"]':'_preventTagListChangeEvent','coral-autocomplete-item:_valuechanged':'_handleItemValueChange','coral-autocomplete-item:_selectedchanged':'_handleItemSelectedChange','coral-autocomplete-item:_contentchanged':'_handleItemContentChange'};events["global:key:shift+tab #".concat(overlayId," [is=\"coral-buttonlist-item\"]")]='_handleListFocusShift';events["global:key:esc"]='_handleListFocusShift';events["global:capture:coral-overlay:positioned #".concat(overlayId)]='_onOverlayPositioned';events["global:capture:coral-overlay:open #".concat(overlayId)]='_onOverlayOpenOrClose';events["global:capture:coral-overlay:close #".concat(overlayId)]='_onOverlayOpenOrClose';events["global:key:enter #".concat(overlayId," button[is=\"coral-buttonlist-item\"]")]='_handleSelect';events["global:capture:mousedown #".concat(overlayId," button[is=\"coral-buttonlist-item\"]")]='_handleSelect';events["global:capture:scroll #".concat(overlayId," [handle=\"selectList\"]")]='_onScroll';events["global:capture:mousewheel #".concat(overlayId," [handle=\"selectList\"]")]='_onMouseWheel';events["global:capture:mousedown #".concat(overlayId," [handle=\"selectList\"]")]='_onMouseDown';_this._delegateEvents(events);_this._tagMap={};_this._values=[];_this._options=[];_this._optionsMap={};_this._initialSelectedValues=[];_this._handleScrollBottom=_this._handleScrollBottom.bind(_assertThisInitialized(_this));_this._observer=new MutationObserver(_this._handleMutation.bind(_assertThisInitialized(_this)));_this._startObserving();return _this}_createClass(Autocomplete,[{key:"_getName",value:function _getName(){if(this.multiple){return this._elements.tagList.name}return this._elements.field.name}},{key:"_setName",value:function _setName(value){if(this.multiple){this._elements.tagList.name=value;this._elements.field.name=''}else{this._elements.field.name=value;this._elements.tagList.name=''}}},{key:"_startObserving",value:function _startObserving(){this._observer.observe(this,{childList:true})}},{key:"_stopObserving",value:function _stopObserving(){this._observer.disconnect()}},{key:"_onInputChange",value:function _onInputChange(event){event.stopPropagation();if(!this.multiple){var inputText=this._elements.input.value.toLowerCase();if(this.forceSelection||inputText===''){var items=this.items.getAll();for(var i=0;i<items.length;i+=1){if(items[i].value.toLowerCase()!==inputText){items[i].selected=false}}}}}},{key:"_handleMutation",value:function _handleMutation(mutations){for(var i=0;i<mutations.length;i+=1){var mutation=mutations[i];var target=mutation.target;if(mutation.type==='childList'&&target===this){this._setStateFromDOM();return}}}},{key:"_setStateFromDOM",value:function _setStateFromDOM(){this._createOptionsFromDOM();this._setSelectedFromDOM()}},{key:"_createOptionsFromDOM",value:function _createOptionsFromDOM(){var _this2=this;this._options.length=0;this._optionsMap={};this.items.getAll().forEach(function(item){var itemObj={value:item.getAttribute('value'),icon:item.getAttribute('icon'),disabled:item.hasAttribute('disabled'),content:item.innerHTML.replace(/\s{2,}/g,' ').trim(),text:item.innerText};_this2._options.push(itemObj);_this2._optionsMap[itemObj.value]=itemObj});}},{key:"_setInputValues",value:function _setInputValues(value,content){this._elements.field.value=value;if(this.multiple||content!==''){this._elements.input.value=content.trim()}}},{key:"_reflectCurrentValue",value:function _reflectCurrentValue(){var value=this._values.length>0?this._values[0]:'';this._elements.field.value=value;var content='';if(value!==''){var itemObj=this._optionsMap[value];if(itemObj){content=itemObj.content}else{content=value}}this._setInputValues(value,content)}},{key:"_setSelectedFromDOM",value:function _setSelectedFromDOM(){var selectedItems=this.selectedItems;if(selectedItems.length){if(this.hasAttribute('multiple')){this._resetValues();for(var i=0;i<selectedItems.length;i+=1){var value=selectedItems[i].getAttribute('value');var content=selectedItems[i].innerHTML;this._addValue(value,content,true)}}else{var last=selectedItems[selectedItems.length-1];this._deselectExcept(last,selectedItems);this.value=last.getAttribute('value')}}else if(!this.hasAttribute('value')){if(this.hasAttribute('multiple')){this._resetValues()}else{this.value=''}}}},{key:"_deselectExcept",value:function _deselectExcept(exceptItem,items){var selectedItems=items||this.selectedItems;this._stopObserving();for(var i=0;i<selectedItems.length;i+=1){if(selectedItems[i]!==exceptItem){selectedItems[i].removeAttribute('selected')}}this._startObserving()}},{key:"_addValue",value:function _addValue(value,content,asHTML){if(!content){var itemObj=this._optionsMap[value];if(itemObj){content=itemObj.content}else{content=value}}var index=this._values.indexOf(value);if(index===-1){this._values.push(value)}var labelContent={};if(asHTML){labelContent.innerHTML=content}else{labelContent.textContent=content}var tag=new Tag().set({label:labelContent,value:value});this._tagMap[value]=tag;this._elements.tagList.items.add(tag);this._setInputValues('','')}},{key:"_removeValue",value:function _removeValue(value){var index=this._values.indexOf(value);if(index===-1){return}this._values.splice(index,1);var item=this.querySelector("coral-autocomplete-item[value=".concat(JSON.stringify(value),"]"));if(item){if(item.hasAttribute('selected')){this._stopObserving();item.removeAttribute('selected');this._startObserving()}}var tag=this._tagMap[value];if(tag){this._tagMap[value]=null;this._elements.tagList.items.remove(tag)}if(index!==-1){this.trigger('change')}}},{key:"_clearValues",value:function _clearValues(){this._resetValues();this._stopObserving();var items=this.querySelectorAll('coral-autocomplete-item[selected]');for(var i=0;i<items.length;i+=1){items[i].removeAttribute('selected')}this._startObserving()}},{key:"_resetValues",value:function _resetValues(){this._values=[];this._tagMap={};this._elements.tagList.items.clear()}},{key:"_focusNextItem",value:function _focusNextItem(){var _this3=this;var selectList=this._elements.selectList;var currentItem=selectList.querySelector('.is-focused');var input=this._elements.input;var items=selectList._getSelectableItems();var index;var item;if(currentItem){index=items.indexOf(currentItem);if(index<items.length-1){item=items[index+1]}}else if(items&&items.length>0){item=items[0]}window.requestAnimationFrame(function(){if(item){if(currentItem){currentItem.classList.remove('is-focused')}_this3._scrollItemIntoView(item);item.classList.add('is-focused');input.setAttribute('aria-activedescendant',item.id)}if(!selectList.querySelector('.is-focused')){input.removeAttribute('aria-activedescendant')}})}},{key:"_focusPreviousItem",value:function _focusPreviousItem(){var _this4=this;var selectList=this._elements.selectList;var currentItem=selectList.querySelector('.is-focused');var input=this._elements.input;var items=selectList._getSelectableItems();var index;var item;if(currentItem){index=items.indexOf(currentItem);if(index>0){item=items[index-1]}currentItem.classList.remove('is-focused')}else if(items&&items.length>0){item=items[items.length-1]}window.requestAnimationFrame(function(){if(item){_this4._scrollItemIntoView(item);item.classList.add('is-focused');input.setAttribute('aria-activedescendant',item.id)}if(!selectList.querySelector('.is-focused')){input.removeAttribute('aria-activedescendant')}})}},{key:"_showSuggestions",value:function _showSuggestions(){var inputValue=this._elements.input.value.toLowerCase().trim();this.clearSuggestions();var event=this.trigger('coral-autocomplete:showsuggestions',{value:inputValue,start:0});this._showSuggestionsCalled=true;if(event.defaultPrevented){this.loading=true;this.showSuggestions()}else{this.addSuggestions(this._getMatches(inputValue,this._optionContainsValue));this.showSuggestions()}}},{key:"_onOverlayPositioned",value:function _onOverlayPositioned(event){event.stopImmediatePropagation();if(this._elements.overlay.open){this._elements.overlay.style.width="".concat(this.offsetWidth,"px")}}},{key:"_onGlobalClick",value:function _onGlobalClick(event){if(!this._elements.overlay.open){return}var eventTargetWithinOverlayTarget=this._elements.inputGroup.contains(event.target);var eventTargetWithinItself=this._elements.overlay.contains(event.target);if(!eventTargetWithinOverlayTarget&&!eventTargetWithinItself){this.hideSuggestions()}}},{key:"_onScroll",value:function _onScroll(){this._isOverlayScrolling=true;window.clearTimeout(this._scrollTimeout);this._scrollTimeout=window.setTimeout(this._handleScrollBottom,SCROLL_DEBOUNCE$1)}},{key:"_onMouseWheel",value:function _onMouseWheel(event){var selectList=this._elements.selectList;if(event.deltaY<0&&selectList.scrollTop===0||event.deltaY>0&&selectList.scrollTop>=selectList.scrollHeight-selectList.clientHeight){event.preventDefault()}}},{key:"_onMouseDown",value:function _onMouseDown(event){this._isOverlayScrollBarClicked=event.matchedTarget.clientWidth<=event.offsetX}},{key:"_handleScrollBottom",value:function _handleScrollBottom(){var selectList=this._elements.selectList;if(selectList.scrollTop>=selectList.scrollHeight-selectList.clientHeight-SCROLL_BOTTOM_THRESHOLD$1){var inputValue=this._elements.input.value;var event=this.trigger('coral-autocomplete:showsuggestions',{value:inputValue,start:selectList.items.length});if(event.defaultPrevented){this.loading=true}}}},{key:"_handleFocusOut",value:function _handleFocusOut(event){var _this5=this;var selectList=this._elements.selectList;var target=event.target;var inputBlur=target===this._elements.input;if(this._blurTimeout){clearTimeout(this._blurTimeout)}this._blurTimeout=window.setTimeout(function(){var relatedTarget=document.activeElement;var focusOutside=!_this5.contains(relatedTarget)&&!_this5._elements.overlay.contains(relatedTarget);if(inputBlur&&focusOutside&&!_this5.multiple){_this5._handleInput(event )}else if(!relatedTarget||(inputBlur||relatedTarget!==document.body)&&focusOutside||selectList.contains(target)&&!selectList.contains(relatedTarget)){_this5.hideSuggestions()}},0)}},{key:"_handleListFocusShift",value:function _handleListFocusShift(event){if(this._elements.overlay.open){event.preventDefault();event.stopImmediatePropagation();this._hideSuggestionsAndFocus()}}},{key:"_hideSuggestionsAndFocus",value:function _hideSuggestionsAndFocus(){this.hideSuggestions();this._elements.input.focus()}},{key:"_handleTriggerClick",value:function _handleTriggerClick(){if(this._elements.overlay.classList.contains('is-open')){this._hideSuggestionsAndFocus()}else{this._showSuggestions();this._elements.input.focus()}}},{key:"_handleTriggerMousedown",value:function _handleTriggerMousedown(){this._elements.trigger.focus()}},{key:"_handleListItemFocus",value:function _handleListItemFocus(event){var item=event.matchedTarget;var selectList=this._elements.selectList;var currentItem=selectList.querySelector('.is-focused');var input=this._elements.input;if(currentItem){currentItem.classList.remove('is-focused');input.removeAttribute('aria-activedescendant')}if(!item.disabled){this._scrollItemIntoView(item);item.classList.add('is-focused');input.setAttribute('aria-activedescendant',item.id)}}},{key:"_scrollItemIntoView",value:function _scrollItemIntoView(item){var itemRect=item.getBoundingClientRect();var selectListRect=this._elements.selectList.getBoundingClientRect();if(itemRect.top<selectListRect.top){item.scrollIntoView()}else if(itemRect.bottom>selectListRect.bottom){item.scrollIntoView(false)}}},{key:"_getMatches",value:function _getMatches(value,optionMatchesValue){optionMatchesValue=optionMatchesValue||this._matchFunction;var matches=[];for(var i=0;i<this._options.length;i+=1){if(optionMatchesValue(this._options[i],value)){matches.push(this._options[i])}}if(!matches.length){var buttons=this._elements.selectList.items.getAll();for(var _i=0;_i<buttons.length;_i+=1){var option={value:buttons[_i].value,content:buttons[_i].textContent.trim()};if(optionMatchesValue(option,value)){matches.push(option)}}}return matches}},{key:"_handleInputKeypressEnter",value:function _handleInputKeypressEnter(event){if(event.which===13){this._handleInput(event)}}},{key:"_handleInputEvent",value:function _handleInputEvent(){this.invalid=false;if(this.delay){window.clearTimeout(this._timeout);this._timeout=window.setTimeout(this._showSuggestions.bind(this),this.delay)}else{this._showSuggestions()}}},{key:"_handleInput",value:function _handleInput(event){if(this._isOverlayScrolling||this._isOverlayScrollBarClicked){this._isOverlayScrolling=false;this._isOverlayScrollBarClicked=false;return}event.preventDefault();var focusedItemValue;if(this._elements.overlay.open&&this._elements.input.getAttribute('aria-activedescendant')){var focusedItem=this._elements.selectList.querySelector('.is-focused');if(focusedItem){focusedItemValue=focusedItem.textContent.trim()}}var value=focusedItemValue||this._elements.input.value;var isChange=false;var exactMatches=this._getMatches(value,this._optionEqualsValue);if(exactMatches.length){var exactMatch=exactMatches.filter(function(option){return option.content===value})[0]||exactMatches[0];isChange=this.value!==exactMatch.value;this._selectItem(exactMatch.value,exactMatch.content,false);if(this.multiple){if(value.trim()){this._addValue(exactMatch.value,exactMatch.content,false)}}else{this.value=exactMatch.value}if(this.forceSelection){this.invalid=false}this.hideSuggestions();if(isChange===true){this.trigger('change')}}else if(this.forceSelection){if(this.multiple){this.invalid=value!==''||this.values.length===1&&this.values[0]===''||this.values.length===0}else{this.invalid=true}}else{isChange=this.value!==value;if(this.multiple){if(value.trim()){this._addValue(value,null,false)}}else{this.value=value}this.hideSuggestions();if(isChange===true){this.trigger('change')}}this._updateButtonAccessibilityLabel()}},{key:"_selectItem",value:function _selectItem(value,content,asHTML){this._stopObserving();var item=this.querySelector("coral-autocomplete-item[value=".concat(JSON.stringify(value),"]"));if(item){item.setAttribute('selected','')}else{var labelContent={};content=typeof content==='undefined'?value:content;if(asHTML){labelContent.innerHTML=content}else{labelContent.textContent=content}this.items.add(new AutocompleteItem().set({value:value,content:labelContent,selected:true}))}this._startObserving()}},{key:"_handleInputUpKeypress",value:function _handleInputUpKeypress(event){event.preventDefault();if(this._elements.overlay.open){if(event.altKey){this.hideSuggestions()}else{this._focusPreviousItem()}}else{this._showSuggestions()}}},{key:"_handleInputDownKeypress",value:function _handleInputDownKeypress(event){event.preventDefault();if(this._elements.overlay.open){this._focusNextItem()}else{this._showSuggestions()}}},{key:"_handleInputTabKeypress",value:function _handleInputTabKeypress(event){if(this._elements.overlay.open&&this._elements.input.getAttribute('aria-activedescendant')){event.preventDefault()}}},{key:"_handleSelect",value:function _handleSelect(event){var _this6=this;var selectListItem=event.matchedTarget;if(!selectListItem||selectListItem.disabled){return}this._selectItem(selectListItem.value,selectListItem.content.innerHTML,true);if(!this.multiple){this.value=selectListItem.value;this._setInputValues(this.value,selectListItem.content.textContent,false)}else{this._addValue(selectListItem.value,selectListItem.content.innerHTML,true)}window.requestAnimationFrame(function(){_this6._elements.input.focus()});this.hideSuggestions();this.trigger('change')}},{key:"_preventTagListChangeEvent",value:function _preventTagListChangeEvent(event){event.stopImmediatePropagation()}},{key:"_handleTagAdded",value:function _handleTagAdded(){this._elements.tagList.style.width="".concat(this.offsetWidth,"px")}},{key:"_handleTagRemoved",value:function _handleTagRemoved(event){var tagValue=event.detail.item.value;var removeValue=true;var tags=this._elements.tagList.items.getAll();for(var i=0;i<tags.length;i+=1){if(tags[i].value===tagValue){removeValue=false;break}}if(removeValue){this._removeValue(tagValue)}if(this.selectedItems.length===0){this._elements.input.focus()}this._updateButtonAccessibilityLabel()}},{key:"_handleItemValueChange",value:function _handleItemValueChange(event){event.stopImmediatePropagation();this._createOptionsFromDOM()}},{key:"_handleItemContentChange",value:function _handleItemContentChange(event){event.stopImmediatePropagation();this._createOptionsFromDOM()}},{key:"_handleItemSelectedChange",value:function _handleItemSelectedChange(event){event.stopImmediatePropagation();var target=event.target;var selected=target.hasAttribute('selected');if(this.multiple){this[selected?'_addValue':'_removeValue'](target.value,target.content.innerHTML,true)}else if(selected){this._elements.input.value=target.content.textContent.replace(/\s{2,}/g,' ').trim();this.value=target.value;this.invalid=false;this._deselectExcept(target )}else if(this.value===target.value){this.value='';this.trigger('change')}}},{key:"_optionContainsValue",value:function _optionContainsValue(option,value){value=(typeof value==='string'?value:'').toLowerCase();return(option.text||option.content).toLowerCase().indexOf(value)!==-1}},{key:"_optionStartsWithValue",value:function _optionStartsWithValue(option,value){value=(typeof value==='string'?value:'').toLowerCase();return option.content.toLowerCase().trim().indexOf(value)===0}},{key:"_optionEqualsValue",value:function _optionEqualsValue(option,value){value=(typeof value==='string'?value:'').toLowerCase();return option.content.toLowerCase().trim()===value}},{key:"_updateButtonAccessibilityLabel",value:function _updateButtonAccessibilityLabel(num){var str=i18n.get('Show suggestions');if(num===1){str=i18n.get('Show suggestion')}else if(num>1){str=i18n.get('Show {0} suggestions',num)}this._elements.trigger.setAttribute('aria-label',str);this._elements.trigger.setAttribute('title',str)}},{key:"clear",value:function clear(){this.value='';this._elements.input.clear();if(this.multiple){this._clearValues()}}},{key:"clearSuggestions",value:function clearSuggestions(){this._elements.selectList.items.clear();this._updateButtonAccessibilityLabel()}},{key:"addSuggestions",value:function addSuggestions(suggestions,clear){this.loading=false;if(clear){this.clearSuggestions()}for(var i=0;i<suggestions.length;i+=1){var value=suggestions[i].value;var content=suggestions[i].content;var icon=suggestions[i].icon;var disabled=!!suggestions[i].disabled;if(!this.multiple||this.values.indexOf(value)===-1){this._elements.selectList.items.add({value:value,type:'button',icon:icon,disabled:disabled,id:commons.getUID(),tabIndex:-1,content:{innerHTML:content}});this._elements.selectList.items.last().setAttribute('role','option')}}if(!suggestions.length&&!this._elements.selectList.items.length){this._elements.selectList.items.add({type:'button',content:{innerHTML:"<em>".concat(i18n.get('No matching results.'),"</em>")},disabled:true});this._elements.selectList.items.last().setAttribute('role','status');this._elements.selectList.items.last().setAttribute('aria-live','polite');this._elements.input.removeAttribute('aria-activedescendant');this._updateButtonAccessibilityLabel()}else{this._updateButtonAccessibilityLabel(this._elements.selectList.items.length)}}},{key:"showSuggestions",value:function showSuggestions(){var _this7=this;if(!this._showSuggestionsCalled){this._showSuggestions()}else{this._showSuggestionsCalled=false}this._elements.overlay.open=true;requestAnimationFrame(function(){_this7._elements.overlay._onAnimate();_this7._elements.overlay.reposition()});this._elements.input.setAttribute('aria-expanded','true');this._elements.trigger.setAttribute('aria-expanded','true')}},{key:"hideSuggestions",value:function hideSuggestions(){this._elements.overlay.open=false;this._elements.input.setAttribute('aria-expanded','false');this._elements.trigger.setAttribute('aria-expanded','false');this._elements.input.removeAttribute('aria-activedescendant');window.clearTimeout(this._timeout);this.trigger('coral-autocomplete:hidesuggestions')}},{key:"_onOverlayOpenOrClose",value:function _onOverlayOpenOrClose(event){if(this._elements.overlay.open){this._elements.input.setAttribute('aria-expanded','true');this._elements.trigger.setAttribute('aria-expanded','true')}else{this._elements.input.setAttribute('aria-expanded','false');this._elements.trigger.setAttribute('aria-expanded','false');this._elements.input.removeAttribute('aria-activedescendant')}}},{key:"reset",value:function reset(){this.values=this._initialSelectedValues}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(Autocomplete.prototype),"connectedCallback",this).call(this);var overlay=this._elements.overlay;overlay.removeAttribute('open');if(overlay._parent){overlay._parent.appendChild(overlay)}}},{key:"render",value:function render(){_get(_getPrototypeOf(Autocomplete.prototype),"render",this).call(this);this.classList.add(CLASSNAME$z);this.setAttribute('role','group');this._elements.input.setAttribute('role','combobox');this._elements.input.setAttribute('aria-autocomplete','list');this._elements.input.setAttribute('aria-haspopup','listbox');this._elements.input.setAttribute('aria-expanded','false');this._elements.input.setAttribute('aria-controls',this._elements.selectList.id);this._elements.trigger.setAttribute('aria-haspopup','listbox');this._elements.trigger.setAttribute('aria-expanded','false');this._elements.trigger.setAttribute('aria-controls',this._elements.selectList.id);if(!this._variant){this.variant=variant$a.DEFAULT}var frag=document.createDocumentFragment();frag.appendChild(this._elements.field);frag.appendChild(this._elements.inputGroup);frag.appendChild(this._elements.tagList);frag.appendChild(this._elements.overlay);this._elements.overlay.target=this._elements.trigger;while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.hasAttribute&&!child.hasAttribute('handle')){frag.appendChild(child)}else{this.removeChild(child)}}this.appendChild(frag);this._setStateFromDOM();this._initialSelectedValues=this.values.slice(0)}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(Autocomplete.prototype),"disconnectedCallback",this).call(this);var overlay=this._elements.overlay;if(!this.contains(overlay)){overlay._parent=overlay._repositioned?document.body:this;overlay.remove()}}},{key:"overlay",get:function get(){return this._elements.overlay}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({itemTagName:'coral-autocomplete-item',host:this})}return this._items}},{key:"multiple",get:function get(){return this._multiple||false},set:function set(value){this._multiple=transform.booleanAttr(value);this._reflectAttribute('multiple',this._multiple);this._setName(this.name);if(this._multiple){this._elements.tagList.hidden=false}else{this._elements.tagList.hidden=true;this._elements.tagList.items.clear()}this.labelledBy=this.labelledBy}},{key:"delay",get:function get(){return typeof this._delay==='number'?this._delay:200},set:function set(value){value=transform.number(value);if(typeof value==='number'&&value>=0){this._delay=transform.number(value)}}},{key:"forceSelection",get:function get(){return this._forceSelection||false},set:function set(value){this._forceSelection=transform.booleanAttr(value);this._reflectAttribute('forceselection',this._forceSelection)}},{key:"placeholder",get:function get(){return this._elements.input.placeholder},set:function set(value){this._elements.input.placeholder=value;this._reflectAttribute('placeholder',this.placeholder)}},{key:"maxLength",get:function get(){return this._elements.input.maxLength},set:function set(value){this._elements.input.maxLength=value;this._reflectAttribute('maxlength',this._elements.input.maxLength)}},{key:"variant",get:function get(){return this._variant||variant$a.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$a)(value)&&value||variant$a.DEFAULT;this._reflectAttribute('variant',this._variant);if(this._variant===variant$a.QUIET){this._elements.inputGroup.classList.add('_coral-InputGroup--quiet');this._elements.input.variant=Textfield.variant.QUIET;this._elements.trigger.classList.add('_coral-FieldButton--quiet')}else{this._elements.inputGroup.classList.remove('_coral-InputGroup--quiet');this._elements.input.variant=Textfield.variant.DEFAULT;this._elements.trigger.classList.remove('_coral-FieldButton--quiet')}}},{key:"match",get:function get(){return this._match||match$1.CONTAINS},set:function set(value){if(typeof value==='function'){this._match=value;this._matchFunction=value}else{value=transform.string(value).toLowerCase();this._match=validate.enumeration(match$1)(value)&&value||match$1.CONTAINS;if(this._match===match$1.STARTSWITH){this._matchFunction=this._optionStartsWithValue}else if(this._match===match$1.CONTAINS){this._matchFunction=this._optionContainsValue}}}},{key:"loading",get:function get(){return this._loading||false},set:function set(value){this._loading=transform.booleanAttr(value);if(this._loading){var overlay=this._elements.overlay;var scrollToBottom=overlay.scrollTop>=overlay.scrollHeight-overlay.clientHeight;if(!this._elements.loadIndicator){template$h.call(this._elements)}this._elements.selectList.appendChild(this._elements.loadIndicator);if(scrollToBottom){overlay.scrollTop=overlay.scrollHeight}}else if(this._elements.loadIndicator){this._elements.loadIndicator.remove()}}},{key:"selectedItems",get:function get(){return this.items._getAllSelected()}},{key:"selectedItem",get:function get(){return this.items._getAllSelected()[0]||null}},{key:"value",get:function get(){var values=this.values;return values&&values.length>0?values[0]:''},set:function set(value){this.values=[transform.string(value)]}},{key:"values",get:function get(){return this._values},set:function set(values){if(values===undefined||values===null){values=[]}if(Array.isArray(values)){if(values.length===1&&values[0]===''){values=[]}var i;var value;var selectedValues=[];if(this.forceSelection){for(i=0;i<values.length;i+=1){value=values[i];if(this._optionsMap[value]!==undefined){selectedValues.push(value);}}}else{for(i=0;i<values.length;i+=1){value=values[i];selectedValues.push(value)}}if(this.multiple){this._clearValues();for(i=0;i<selectedValues.length;i+=1){value=selectedValues[i];this._selectItem(value);this._addValue(value,null,true)}}else{this._values=selectedValues.length>0?[selectedValues[0]]:[];this._reflectCurrentValue()}}}},{key:"name",get:function get(){return this._getName()},set:function set(value){this._reflectAttribute('name',value);this._setName(value)}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(Autocomplete.prototype),"invalid",this)},set:function set(value){_set(_getPrototypeOf(Autocomplete.prototype),"invalid",value,this,true);this._elements.inputGroup.classList.toggle('is-invalid',this.invalid);this._elements.trigger.classList.toggle('is-invalid',this.invalid);this._elements.input.invalid=this.invalid}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this._elements.inputGroup.classList.toggle('is-disabled',this._disabled);this._elements.input.disabled=this._disabled;var disabledOrReadOnly=this._disabled||this.readOnly;this._elements.trigger.disabled=disabledOrReadOnly;this._elements.tagList.disabled=disabledOrReadOnly;this._elements.inputGroup.disabled=disabledOrReadOnly}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.input.readOnly=this._readOnly;var readOnlyOrDisabled=this._readOnly||this.disabled;this._elements.trigger.readOnly=readOnlyOrDisabled;this._elements.tagList.readOnly=readOnlyOrDisabled;this._elements.inputGroup.disabled=readOnlyOrDisabled}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.input.required=this._required}},{key:"labelled",get:function get(){return _get(_getPrototypeOf(Autocomplete.prototype),"labelled",this)},set:function set(value){_set(_getPrototypeOf(Autocomplete.prototype),"labelled",value,this,true);this[this.labelled?'setAttribute':'removeAttribute']('aria-label',this.labelled);this._elements.selectList[this.labelled?'setAttribute':'removeAttribute']('aria-label',this.labelled);if(this.labelled&&this.multiple){this._elements.tagList.setAttribute('aria-label',this.labelled)}else{this._elements.tagList.removeAttribute('aria-label')}}},{key:"labelledBy",get:function get(){return _get(_getPrototypeOf(Autocomplete.prototype),"labelledBy",this)},set:function set(value){_set(_getPrototypeOf(Autocomplete.prototype),"labelledBy",value,this,true);this[this.labelledBy?'setAttribute':'removeAttribute']('aria-labelledby',this.labelledBy);this._elements.selectList[this.labelledBy?'setAttribute':'removeAttribute']('aria-labelledby',this.labelledBy);if(this.labelledBy&&this.multiple){this._elements.tagList.setAttribute('aria-labelledby',this.labelledBy)}else{this._elements.tagList.removeAttribute('aria-labelledby')}}},{key:"icon",get:function get(){return this._icon||''},set:function set(value){this._icon=transform.string(value);this._reflectAttribute('icon',this._icon)}}],[{key:"match",get:function get(){return match$1}},{key:"variant",get:function get(){return variant$a}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Autocomplete),"_attributePropertyMap",this),{forceselection:'forceSelection',maxlength:'maxLength'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Autocomplete),"observedAttributes",this).concat(['multiple','delay','forceselection','placeholder','maxlength','icon','match','loading','variant'])}}]);return Autocomplete}(BaseFormField(BaseComponent(HTMLElement)));commons.extend(strings,{'coral-component-autocomplete':translations$a});commons._define('coral-autocomplete-item',AutocompleteItem);commons._define('coral-autocomplete',Autocomplete);Autocomplete.Item=AutocompleteItem;var CLASSNAME$A='_coral-Banner';var variant$b={ERROR:'error',WARNING:'warning',INFO:'info'};var ALL_VARIANT_CLASSES$7=[];for(var variantValue$5 in variant$b){ALL_VARIANT_CLASSES$7.push("".concat(CLASSNAME$A,"--").concat(variant$b[variantValue$5]))}var Banner=function(_BaseComponent){_inherits(Banner,_BaseComponent);var _super=_createSuper(Banner);function Banner(){var _this;_classCallCheck(this,Banner);_this=_super.call(this);_this._elements={header:_this.querySelector('coral-banner-header')||document.createElement('coral-banner-header'),content:_this.querySelector('coral-banner-content')||document.createElement('coral-banner-content')};return _this}_createClass(Banner,[{key:"render",value:function render(){_get(_getPrototypeOf(Banner.prototype),"render",this).call(this);this.classList.add(CLASSNAME$A);if(!this._variant){this.variant=variant$b.INFO}var header=this._elements.header;var content=this._elements.content;if(!content.parentNode){while(this.firstChild){var child=this.firstChild;if(child===header){child.remove()}else{content.appendChild(this.firstChild)}}}this.header=this._elements.header;this.content=this._elements.content}},{key:"variant",get:function get(){return this._variant||variant$b.INFO},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$b)(value)&&value||variant$b.INFO;this._reflectAttribute('variant',this._variant);(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$7);this.classList.add("".concat(CLASSNAME$A,"--").concat(this._variant))}},{key:"header",get:function get(){return this._getContentZone(this._elements.header)},set:function set(value){this._setContentZone('header',value,{handle:'header',tagName:'coral-banner-header',insert:function insert(header){header.classList.add("".concat(CLASSNAME$A,"-header"));this.insertBefore(header,this.firstChild)}})}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-banner-content',insert:function insert(content){content.classList.add("".concat(CLASSNAME$A,"-content"));this.appendChild(content)}})}},{key:"_contentZones",get:function get(){return{'coral-banner-header':'header','coral-banner-content':'content'}}}],[{key:"variant",get:function get(){return variant$b}},{key:"observedAttributes",get:function get(){return['variant']}}]);return Banner}(BaseComponent(HTMLElement));var BannerHeader=(function(){return document.createElement('coral-banner-header')});var BannerContent=(function(){return document.createElement('coral-banner-content')});commons._define('coral-banner',Banner);Banner.Header=BannerHeader;Banner.Content=BannerContent;var template$i=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["nativeSelect"]=document.createElement("select");el0.className+=" _coral-ButtonGroup-select";el0.setAttribute("tabindex","-1");el0.setAttribute("handle","nativeSelect");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var selectionMode={NONE:'none',SINGLE:'single',MULTIPLE:'multiple'};var ITEM_SELECTOR='button[is="coral-button"]';var itemValueFromDOM$2=function itemValueFromDOM(item){var attr=item.getAttribute('value');return attr!==null?attr:item.textContent.replace(/\s{2,}/g,' ').trim()};var CLASSNAME$B='_coral-ButtonGroup';var ButtonGroup=function(_BaseFormField){_inherits(ButtonGroup,_BaseFormField);var _super=_createSuper(ButtonGroup);function ButtonGroup(){var _this;_classCallCheck(this,ButtonGroup);_this=_super.call(this);_this._elements={};template$i.call(_this._elements);_this._labellableElement=_assertThisInitialized(_this);_this._initalSelectedValues=[];_this._delegateEvents(commons.extend(_this._events,{'click button[is="coral-button"]':'_onButtonClick','capture:focus button[is="coral-button"]':'_onButtonFocus','capture:blur button[is="coral-button"]':'_onButtonBlur','key:up button[is="coral-button"]':'_onButtonKeyUpLeft','key:left button[is="coral-button"]':'_onButtonKeyUpLeft','key:down button[is="coral-button"]':'_onButtonKeyDownRight','key:right button[is="coral-button"]':'_onButtonKeyDownRight','key:home button[is="coral-button"]':'_onButtonKeyHome','key:end button[is="coral-button"]':'_onButtonKeyEnd','coral-button:_valuechanged button[is="coral-button"]':'_onButtonValueChanged','coral-button:_selectedchanged button[is="coral-button"]':'_onButtonSelectedChanged'}));_this.items._startHandlingItems(true);return _this}_createClass(ButtonGroup,[{key:"reset",value:function reset(){this.values=this._initalSelectedValues}},{key:"_onButtonClick",value:function _onButtonClick(event){var item=event.matchedTarget;this._onButtonFocus(event);if(this.readOnly){event.preventDefault();event.stopImmediatePropagation();return}if(this.selectionMode===selectionMode.SINGLE){event.preventDefault();var selectedItems=this.items._getAllSelected();if(selectedItems.length!==0&&selectedItems[0]!==item){this._toggleItemSelection(selectedItems[0],false)}this._toggleItemSelection(item,true);if(selectedItems[0]!==item){this.trigger('change')}}else if(this.selectionMode===selectionMode.MULTIPLE){event.preventDefault();this._toggleItemSelection(item);this.trigger('change')}}},{key:"_onButtonFocus",value:function _onButtonFocus(event){var item=event.matchedTarget;var buttons=this.items.getAll();var buttonsCount=buttons.length;var button;for(var i=0;i<buttonsCount;i+=1){button=buttons[i];button.setAttribute('tabindex',button===item?0:-1)}}},{key:"_onButtonBlur",value:function _onButtonBlur(event){var item=event.matchedTarget;var buttons=this.items.getAll();var buttonsCount=buttons.length;var button;var tabindex;var selectedItemsLength=this.selectedItems.length;var firstSelectable=this.items._getFirstSelectable();var isSelected=false;for(var i=0;i<buttonsCount;i+=1){button=buttons[i];isSelected=button.hasAttribute('selected');if(this.selectionMode===selectionMode.SINGLE){tabindex=isSelected?0:-1}else if(this.selectionMode===selectionMode.MULTIPLE){tabindex=!selectedItemsLength&&i===0||isSelected&&button===item||!item.hasAttribute('selected')&&button===(this.selectedItems[selectedItemsLength-1]||firstSelectable)?0:-1}else{tabindex=button===firstSelectable?0:-1}button.setAttribute('tabindex',tabindex)}}},{key:"_onButtonKeyUpLeft",value:function _onButtonKeyUpLeft(event){event.preventDefault();var item=event.matchedTarget;var button=item.previousElementSibling;while(!button||button.disabled||button.nodeName!=='BUTTON'){if(!button){button=this.items._getLastSelectable()}else{button=button.previousElementSibling}}if(button!==item){if(this.selectionMode===selectionMode.SINGLE){button.click()}this._setFocusToButton(button)}}},{key:"_onButtonKeyDownRight",value:function _onButtonKeyDownRight(event){event.preventDefault();var item=event.matchedTarget;var button=item.nextElementSibling;while(!button||button.disabled||button.nodeName!=='BUTTON'){if(!button){button=this.items._getFirstSelectable()}else{button=button.nextElementSibling}}if(button!==item){if(this.selectionMode===selectionMode.SINGLE){button.click()}this._setFocusToButton(button)}}},{key:"_onButtonKeyHome",value:function _onButtonKeyHome(event){event.preventDefault();var item=event.matchedTarget;var button=this.items._getFirstSelectable();if(button!==item){if(this.selectionMode===selectionMode.SINGLE){button.click()}this._setFocusToButton(button)}}},{key:"_onButtonKeyEnd",value:function _onButtonKeyEnd(event){event.preventDefault();var item=event.matchedTarget;var button=this.items._getLastSelectable();if(button!==item){if(this.selectionMode===selectionMode.SINGLE){button.click()}this._setFocusToButton(button)}}},{key:"_setFocusToButton",value:function _setFocusToButton(button){if(button){button.focus()}}},{key:"_onItemAdded",value:function _onItemAdded(item){item._initialVariant=item._initialVariant||item.variant;if(!(item.variant===Button.variant.ACTION||item.variant===Button.variant.QUIET_ACTION)){item.variant=item.variant===Button.variant.QUIET?Button.variant.QUIET_ACTION:Button.variant.ACTION}if(this.selectionMode!==selectionMode.NONE){if(this.selectionMode===selectionMode.SINGLE){item.setAttribute('role','radio');item.setAttribute('tabindex',item.hasAttribute('selected')?0:-1)}else{item.setAttribute('role','checkbox')}item.setAttribute('aria-checked',item.hasAttribute('selected'))}else{item.removeAttribute('role')}item.disabled=this.disabled||this.readOnly&&!item.hasAttribute('selected');item[this.readOnly?'setAttribute':'removeAttribute']('aria-disabled',true);this._addItemOption(item);if(this.selectionMode===selectionMode.SINGLE){var selectedItems=this.items._getAllSelected();if(selectedItems.length>1&&item.hasAttribute('selected')){item.removeAttribute('selected')}}}},{key:"_onItemRemoved",value:function _onItemRemoved(item){item.variant=item._initialVariant;item._initialVariant=undefined;item.removeAttribute('role');if(!item.parentNode){var index=this._initalSelectedValues.indexOf(item.value);if(index!==-1){this._initalSelectedValues.splice(index,1)}}if(item.option){item.option.parentNode.removeChild(item.option);item.option=undefined}}},{key:"_onCollectionChange",value:function _onCollectionChange(){this._validateSelection()}},{key:"_onButtonSelectedChanged",value:function _onButtonSelectedChanged(event){event.stopImmediatePropagation();var button=event.target;var isSelected=button.hasAttribute('selected');if(this.selectionMode===selectionMode.SINGLE){this._validateSelection(isSelected?button:null)}else{this._toggleItemSelection(button,isSelected)}}},{key:"_onButtonValueChanged",value:function _onButtonValueChanged(event){event.stopImmediatePropagation();var button=event.target;if(this.selectionMode!==selectionMode.NONE){button.option.value=itemValueFromDOM$2(button)}}},{key:"_toggleItemSelection",value:function _toggleItemSelection(item,selected){var ariaCheckedAttr=item.getAttribute('aria-checked');var tabIndexAttr=item.getAttribute('tabindex');selected=typeof selected!=='undefined'?selected:!item.hasAttribute('selected');if(selected){if(!item.hasAttribute('selected')){item.setAttribute('selected','')}if(ariaCheckedAttr!=='true'){item.setAttribute('aria-checked',true)}if(this.selectionMode===selectionMode.SINGLE&&tabIndexAttr!=='0'){item.setAttribute('tabindex',0)}}else if(!selected){if(item.hasAttribute('selected')){item.removeAttribute('selected')}if(this.selectionMode!==selectionMode.NONE){if(ariaCheckedAttr!=='false'){item.setAttribute('aria-checked',false)}if(this.selectionMode===selectionMode.SINGLE&&tabIndexAttr!=='-1'){item.setAttribute('tabindex',-1)}}else{item.removeAttribute('aria-checked');item.removeAttribute('tabindex')}}if(item.option){item.option.selected=selected}}},{key:"_selectItemByValue",value:function _selectItemByValue(values){var buttons=this.items.getAll();var item;for(var i=0,buttonsCount=buttons.length;i<buttonsCount;i+=1){item=buttons[i];this._toggleItemSelection(item,values.indexOf(itemValueFromDOM$2(item))!==-1)}}},{key:"_setInitialValues",value:function _setInitialValues(){if(this.selectionMode!==selectionMode.NONE){var selectedItems=this.selectedItems;for(var i=0,selectedItemsCount=selectedItems.length;i<selectedItemsCount;i+=1){this._initalSelectedValues.push(selectedItems[i].value);this._addItemOption(selectedItems[i])}}}},{key:"_addItemOption",value:function _addItemOption(item){if(this.selectionMode===selectionMode.NONE){return}if(item.option){return}var option=document.createElement('option');option.value=itemValueFromDOM$2(item);if(item.hasAttribute('selected')){option.setAttribute('selected','')}item.option=option;this._elements.nativeSelect.add(option);this._toggleItemSelection(item,item.hasAttribute('selected'))}},{key:"_removeItemOptions",value:function _removeItemOptions(){var buttons=this.items.getAll();var item;for(var i=0,buttonsCount=buttons.length;i<buttonsCount;i+=1){item=buttons[i];item.removeAttribute('role');item.removeAttribute('aria-checked');if(item.hasAttribute('selected')){this._toggleItemSelection(item,false)}if(item.option){item.option.parentNode.removeChild(item.option);delete item.option}}}},{key:"_syncItemOptions",value:function _syncItemOptions(){var buttons=this.items.getAll();var buttonsCount=buttons.length;var i=0;var role=null;if(this.selectionMode===selectionMode.SINGLE){role='radio'}else if(this.selectionMode===selectionMode.MULTIPLE){role='checkbox'}var button;var isSelected=false;for(i;i<buttonsCount;i+=1){this._addItemOption(buttons[i])}for(i=buttonsCount-1;i>=0;i-=1){button=buttons[i];isSelected=button.hasAttribute('selected');button.option.selected=isSelected;button.setAttribute('aria-checked',isSelected);if(role){button.setAttribute('role',role)}else{button.removeAttribute('role')}}}},{key:"_validateSelection",value:function _validateSelection(item){if(this.selectionMode===selectionMode.SINGLE){var selection=this.items._getAllSelected();var selectionCount=selection.length;if(selectionCount===0){var selectable=this.items._getFirstSelectable();if(selectable){this._toggleItemSelection(selectable,true)}}else if(selectionCount>1){item=item||selection[0];this._toggleItemSelection(item,true);for(var i=0;i<selectionCount;i+=1){if(selection[i]!==item){this._toggleItemSelection(selection[i],false)}}}}}},{key:"render",value:function render(){_get(_getPrototypeOf(ButtonGroup.prototype),"render",this).call(this);_get(_getPrototypeOf(ButtonGroup.prototype),"connectedCallback",this).call(this);this.classList.add(CLASSNAME$B);if(!this._selectionMode){this.selectionMode=selectionMode.NONE}var frag=document.createDocumentFragment();frag.appendChild(this._elements.nativeSelect);while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.getAttribute('handle')!=='nativeSelect'){frag.appendChild(child)}else{this.removeChild(child)}}this.appendChild(frag);this._setInitialValues();this.items._startHandlingItems()}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemBaseTagName:'button',itemTagName:'coral-button',itemSelector:ITEM_SELECTOR,onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved,onCollectionChange:this._onCollectionChange})}return this._items}},{key:"selectionMode",get:function get(){return this._selectionMode||selectionMode.NONE},set:function set(value){value=transform.string(value).toLowerCase();this._selectionMode=validate.enumeration(selectionMode)(value)&&value||selectionMode.NONE;this._reflectAttribute('selectionmode',this._selectionMode);this._elements.nativeSelect.multiple=this._selectionMode===selectionMode.MULTIPLE;if(this._selectionMode===selectionMode.SINGLE){this.setAttribute('role','radiogroup');this._syncItemOptions();this._validateSelection()}else if(this._selectionMode===selectionMode.MULTIPLE){this.setAttribute('role','group');this._syncItemOptions()}else{this.setAttribute('role','group');this._removeItemOptions()}}},{key:"name",get:function get(){return this._elements.nativeSelect.name},set:function set(value){this._reflectAttribute('name',value);this._elements.nativeSelect.name=value}},{key:"value",get:function get(){return this._elements.nativeSelect.value},set:function set(value){if(this.selectionMode===selectionMode.NONE){return}this._selectItemByValue([value])}},{key:"selectedItems",get:function get(){if(this.selectionMode===selectionMode.MULTIPLE){return this.items._getAllSelected()}var item=this.selectedItem;return item?[item]:[]}},{key:"selectedItem",get:function get(){return this.selectionMode===selectionMode.MULTIPLE?this.items._getFirstSelected():this.items._getLastSelected()}},{key:"values",get:function get(){var values=[];var selectedOptions=this._elements.nativeSelect.querySelectorAll(':checked');for(var i=0,selectedOptionsCount=selectedOptions.length;i<selectedOptionsCount;i+=1){values.push(selectedOptions[i].value)}return values},set:function set(values){if(Array.isArray(values)&&this.selectionMode!==selectionMode.NONE){if(this.selectionMode!==selectionMode.MULTIPLE&&values.length>1){values=[values[0]]}this._selectItemByValue(values)}}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);var isDisabled=this.disabled||this.readOnly;this._elements.nativeSelect.disabled=isDisabled;this.items.getAll().forEach(function(item){item.disabled=isDisabled});this[isDisabled?'setAttribute':'removeAttribute']('aria-disabled',isDisabled)}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){var _this2=this;this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.nativeSelect.disabled=this.readOnly||this.disabled;this.items.getAll().forEach(function(item){item.disabled=_this2.disabled||_this2.readOnly&&!item.hasAttribute('selected');item[_this2.readOnly?'setAttribute':'removeAttribute']('aria-disabled',true)});this.removeAttribute('aria-readonly')}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.nativeSelect.required=this.required;if(this.selectionMode!==selectionMode.SINGLE){this.removeAttribute('aria-required')}}},{key:"labelledBy",get:function get(){return _get(_getPrototypeOf(ButtonGroup.prototype),"labelledBy",this)},set:function set(value){_set(_getPrototypeOf(ButtonGroup.prototype),"labelledBy",value,this,true);this._elements.nativeSelect.setAttribute('aria-labelledby',this.labelledBy)}}],[{key:"selectionMode",get:function get(){return selectionMode}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(ButtonGroup),"_attributePropertyMap",this),{selectionmode:'selectionMode'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ButtonGroup),"observedAttributes",this).concat(['selectionmode','selectionMode'])}}]);return ButtonGroup}(BaseFormField(BaseComponent(HTMLElement)));commons._define('coral-buttongroup',ButtonGroup);var translations$b={"en-US":{"Previous":"Previous","Next":"Next","Today, {0} selected/[translation hint:date]":"Today, {0} selected","Today, {0}/[translation hint:date]":"Today, {0}","{0} selected/[translation hint:date]":"{0} selected","Previous Month":"Previous Month","Next Month":"Next Month"},"fr-FR":{"Previous":"Précédent","Next":"Suivant","Today, {0} selected/[translation hint:date]":"Aujourd’hui, sélection de {0}","Today, {0}/[translation hint:date]":"Aujourd’hui, {0}","{0} selected/[translation hint:date]":"Sélection de {0}","Previous Month":"Mois précédent","Next Month":"Mois suivant"},"de-DE":{"Previous":"Zurück","Next":"Weiter","Today, {0} selected/[translation hint:date]":"Heute, {0} ausgewählt","Today, {0}/[translation hint:date]":"Heute, {0}","{0} selected/[translation hint:date]":"{0} ausgewählt","Previous Month":"Vorheriger Monat","Next Month":"Nächster Monat"},"it-IT":{"Previous":"Precedente","Next":"Successivo","Today, {0} selected/[translation hint:date]":"Oggi, {0} selezionati","Today, {0}/[translation hint:date]":"Oggi, {0}","{0} selected/[translation hint:date]":"{0} selezionati","Previous Month":"Mese precedente","Next Month":"Mese successivo"},"es-ES":{"Previous":"Anterior","Next":"Siguiente","Today, {0} selected/[translation hint:date]":"Hoy, {0} seleccionados","Today, {0}/[translation hint:date]":"Hoy, {0}","{0} selected/[translation hint:date]":"{0} seleccionados","Previous Month":"Mes anterior","Next Month":"Mes siguiente"},"pt-BR":{"Previous":"Anterior","Next":"Próximo","Today, {0} selected/[translation hint:date]":"Hoje, {0} selecionados","Today, {0}/[translation hint:date]":"Hoje, {0}","{0} selected/[translation hint:date]":"{0} selecionados","Previous Month":"Mês Anterior","Next Month":"Mês Seguinte"},"ja-JP":{"Previous":"前へ","Next":"次へ","Today, {0} selected/[translation hint:date]":"今日、{0} が選択されました","Today, {0}/[translation hint:date]":"今日、{0}","{0} selected/[translation hint:date]":"{0} が選択されました","Previous Month":"前月","Next Month":"翌月"},"ko-KR":{"Previous":"이전으로","Next":"다음","Today, {0} selected/[translation hint:date]":"현재 {0}이(가) 선택됨","Today, {0}/[translation hint:date]":"현재 {0}","{0} selected/[translation hint:date]":"{0}이(가) 선택됨","Previous Month":"지난 달","Next Month":"다음 달"},"zh-CN":{"Previous":"上一步","Next":"下一步","Today, {0} selected/[translation hint:date]":"已选定今天 {0}","Today, {0}/[translation hint:date]":"今天 {0}","{0} selected/[translation hint:date]":"已选定 {0}","Previous Month":"上个月","Next Month":"下个月"},"zh-TW":{"Previous":"上一頁","Next":"下一頁","Today, {0} selected/[translation hint:date]":"今天，已選取 {0}","Today, {0}/[translation hint:date]":"今天，{0}","{0} selected/[translation hint:date]":"已選取 {0} ","Previous Month":"上個月","Next Month":"下個月"},"nl-NL":{"Previous":"Vorige","Next":"Volgende","Today, {0} selected/[translation hint:date]":"Vandaag {0} geselecteerd","Today, {0}/[translation hint:date]":"Vandaag {0} ","{0} selected/[translation hint:date]":"{0} geselecteerd","Previous Month":"Vorige maand","Next Month":"Volgende maand"},"da-DK":{"Previous":"Foregående","Next":"Næste","Today, {0} selected/[translation hint:date]":"I dag, {0} valgt","Today, {0}/[translation hint:date]":"I dag, {0} ","{0} selected/[translation hint:date]":"{0} valgt","Previous Month":"Sidste måned","Next Month":"Næste måned"},"fi-FI":{"Previous":"Edellinen","Next":"Seuraava","Today, {0} selected/[translation hint:date]":"Tänään, {0} valittu","Today, {0}/[translation hint:date]":"Tänään, {0}","{0} selected/[translation hint:date]":"{0} valittu","Previous Month":"Edellinen kuukausi","Next Month":"Seuraava kuukausi"},"nb-NO":{"Previous":"Forrige","Next":"Neste","Today, {0} selected/[translation hint:date]":"I dag, {0} valgt","Today, {0}/[translation hint:date]":"I dag, {0}","{0} selected/[translation hint:date]":"{0} valgt","Previous Month":"Forrige måned","Next Month":"Neste måned"},"sv-SE":{"Previous":"Föregående","Next":"Nästa","Today, {0} selected/[translation hint:date]":"Idag, {0} vald","Today, {0}/[translation hint:date]":"Idag, {0}","{0} selected/[translation hint:date]":"{0} vald","Previous Month":"Föregående månad","Next Month":"Nästa månad"},"cs-CZ":{"Previous":"Předchozí","Next":"Další","Today, {0} selected/[translation hint:date]":"Dnes je vybráno: {0}","Today, {0}/[translation hint:date]":"Dnes, {0}","{0} selected/[translation hint:date]":"Vybráno: {0}","Previous Month":"Předchozí měsíc","Next Month":"Příští měsíc"},"pl-PL":{"Previous":"Wstecz","Next":"Dalej","Today, {0} selected/[translation hint:date]":"Dziś, wybrano {0}","Today, {0}/[translation hint:date]":"Dziś, {0}","{0} selected/[translation hint:date]":"wybrano {0}","Previous Month":"Poprzedni miesiąc","Next Month":"Następny miesiąc"},"ru-RU":{"Previous":"Предыдущий","Next":"Следующий","Today, {0} selected/[translation hint:date]":"Сегодня, {0}, выбрано","Today, {0}/[translation hint:date]":"Сегодня, {0}","{0} selected/[translation hint:date]":"{0} выбрано","Previous Month":"Предыдущий месяц","Next Month":"Следующий месяц"},"tr-TR":{"Previous":"Önceki","Next":"İleri","Today, {0} selected/[translation hint:date]":"Bugün, {0} seçildi","Today, {0}/[translation hint:date]":"Bugün, {0}","{0} selected/[translation hint:date]":"{0} seçildi","Previous Month":"Önceki Ay","Next Month":"Gelecek Ay"}};var template$j=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["input"]=document.createElement("input");el0.setAttribute("handle","input");el0.setAttribute("type","hidden");el0.setAttribute("name","");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["header"]=document.createElement("div");el2.setAttribute("handle","header");el2.className+=" _coral-Calendar-header";var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=this["heading"]=document.createElement("div");el4.setAttribute("handle","heading");el4.className+=" _coral-Calendar-title";el4.setAttribute("role","heading");el4.setAttribute("aria-live","assertive");el4.setAttribute("aria-atomic","true");el4.setAttribute("aria-level","2");el4.id=data_0["commons"]["getUID"]();el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);var el6=this["prev"]=document.createElement("button","coral-button");el6.setAttribute("type","button");el6.setAttribute("handle","prev");el6.className+=" _coral-Calendar-prevMonth";el6.setAttribute("is","coral-button");el6.setAttribute("variant","quietaction");el6.setAttribute("aria-label",data_0["i18n"]["get"]('Previous Month'));el6.setAttribute("title",data_0["i18n"]["get"]('Previous Month'));var el7=document.createTextNode("\n    ");el6.appendChild(el7);var el8=this["prevLabel"]=document.createElement("coral-button-label");el8.setAttribute("handle","prevLabel");el6.appendChild(el8);var el9=document.createTextNode("\n  ");el6.appendChild(el9);el2.appendChild(el6);var el10=document.createTextNode("\n  ");el2.appendChild(el10);var el11=this["next"]=document.createElement("button","coral-button");el11.setAttribute("type","button");el11.setAttribute("handle","next");el11.className+=" _coral-Calendar-nextMonth";el11.setAttribute("is","coral-button");el11.setAttribute("variant","quietaction");el11.setAttribute("aria-label",data_0["i18n"]["get"]('Next Month'));el11.setAttribute("title",data_0["i18n"]["get"]('Next Month'));var el12=document.createTextNode("\n    ");el11.appendChild(el12);var el13=this["nextLabel"]=document.createElement("coral-button-label");el13.setAttribute("handle","nextLabel");el11.appendChild(el13);var el14=document.createTextNode("\n  ");el11.appendChild(el14);el2.appendChild(el11);var el15=document.createTextNode("\n  ");el2.appendChild(el15);data=data_0;this.prev._elements.label=this.prevLabel;this.next._elements.label=this.nextLabel;this.prev.insertAdjacentHTML('beforeend',data.Icon._renderSVG('spectrum-css-icon-ChevronLeftLarge',['_coral-UIIcon-ChevronLeftLarge']));this.next.insertAdjacentHTML('beforeend',data.Icon._renderSVG('spectrum-css-icon-ChevronRightLarge',['_coral-UIIcon-ChevronRightLarge']));data_0=data;var el17=document.createTextNode("\n");el2.appendChild(el17);frag.appendChild(el2);var el18=document.createTextNode("\n");frag.appendChild(el18);var el19=this["body"]=document.createElement("div");el19.className+=" _coral-Calendar-body";el19.setAttribute("handle","body");el19.setAttribute("role","grid");el19.setAttribute("tabindex","0");el19.setAttribute("aria-readonly","true");el19.setAttribute("aria-labelledby",this["heading"]["id"]);frag.appendChild(el19);var el20=document.createTextNode("\n");frag.appendChild(el20);return frag};var template$k=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["container"]=document.createElement("div");el0.className+=" _coral-DatePicker-calendarSlidingContainer";el0.setAttribute("handle","container");el0.setAttribute("style","width: "+data_0["width"]+"px; height: "+data_0["height"]+"px;");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var template$l=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;this.i18n=data.i18n;this.commons=data.commons;data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["table"]=document.createElement("table");el2.setAttribute("handle","table");el2.className+=" _coral-Calendar-table";el2.setAttribute("role","presentation");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=document.createElement("thead");el4.setAttribute("role","presentation");var el5=document.createTextNode("\n    ");el4.appendChild(el5);var el6=document.createElement("tr");el6.setAttribute("role","row");var el7=document.createTextNode("\n      ");el6.appendChild(el7);var iterated_1=data_0["dayNames"];for(var i1=0,ni1=iterated_1.length;i1<ni1;i1+=1){var data_1=data=iterated_1[i1];var el9=document.createTextNode("\n        ");el6.appendChild(el9);var el10=document.createElement("th");el10.setAttribute("role","columnheader");el10.setAttribute("scope","col");el10.className+=" _coral-Calendar-tableCell";var el11=document.createTextNode("\n          ");el10.appendChild(el11);var el12=document.createElement("abbr");el12.className+=" _coral-Calendar-dayOfWeek";el12.setAttribute("title",data_1["dayFullName"]);el12.textContent=data_1["dayAbbr"];el10.appendChild(el12);var el13=document.createTextNode("\n        ");el10.appendChild(el13);el6.appendChild(el10);var el14=document.createTextNode("\n      ");el6.appendChild(el14)}var el15=document.createTextNode("\n    ");el6.appendChild(el15);el4.appendChild(el6);var el16=document.createTextNode("\n  ");el4.appendChild(el16);el2.appendChild(el4);var el17=document.createTextNode("\n  ");el2.appendChild(el17);var el18=document.createElement("tbody");el18.setAttribute("role","presentation");var el19=document.createTextNode("\n    ");el18.appendChild(el19);var iterated_1=data_0["weeks"];for(var i1=0,ni1=iterated_1.length;i1<ni1;i1+=1){var data_1=data=iterated_1[i1];var el21=document.createTextNode("\n      ");el18.appendChild(el21);var el22=document.createElement("tr");el22.setAttribute("role","row");var el23=document.createTextNode("\n        ");el22.appendChild(el23);var iterated_2=data_1;for(var i2=0,ni2=iterated_2.length;i2<ni2;i2+=1){var data_2=data=iterated_2[i2];var el25=document.createTextNode("\n          ");el22.appendChild(el25);data=data_2;var calendarTitle;var calendarDate=data.dateLabel+', '+data.formattedDate;if(data.isToday){if(data.ariaSelected){calendarTitle=this.i18n.get('Today, {0} selected',calendarDate,'date')}else{calendarTitle=this.i18n.get('Today, {0}',calendarDate,'date')}}else{if(data.ariaSelected){calendarTitle=this.i18n.get('{0} selected',calendarDate,'date')}else{calendarTitle=calendarTitle=calendarDate}}data_2=data;var el27=document.createTextNode("\n          ");el22.appendChild(el27);var el28=this["cell"]=document.createElement("td");el28.setAttribute("handle","cell");el28.setAttribute("role","gridcell");el28.id=this["commons"]["getUID"]()+"-row"+i1+"-col"+i2;el28.className+=" _coral-Calendar-tableCell";el28.setAttribute("aria-selected",data_2["ariaSelected"]);if(data_2["isDisabled"]){el28.setAttribute("aria-disabled","true")}if(data_2["ariaInvalid"]){el28.setAttribute("aria-invalid","true")}if(data_2["formattedDate"]){el28.setAttribute("title",calendarTitle)}var el29=document.createTextNode("\n            ");el28.appendChild(el29);data=data_2;if(data.cssClass.indexOf('is-outsideMonth')!==-1){this.cell.classList.add('is-outsideMonth')}data_2=data;var el31=document.createTextNode("\n            ");el28.appendChild(el31);if(data_2["dateAttr"]){var el33=document.createTextNode("\n                ");el28.appendChild(el33);var el34=document.createElement("a");el34.setAttribute("role","presentation");el34.className+=" _coral-Calendar-date "+data_2["cssClass"];el34.setAttribute("data-date",data_2["dateAttr"]);el34.textContent=data_2["dateText"];el28.appendChild(el34);var el35=document.createTextNode("\n              ");el28.appendChild(el35);var el36=document.createTextNode("\n            ");el28.appendChild(el36)}else{var el37=document.createTextNode("\n                ");el28.appendChild(el37);var el38=document.createElement("span");el38.setAttribute("role","presentation");el38.className+=" _coral-Calendar-date "+data_2["cssClass"];el38.textContent=data_2["dateText"];el28.appendChild(el38);var el39=document.createTextNode("\n              ");el28.appendChild(el39)}var el40=document.createTextNode("\n          ");el28.appendChild(el40);el22.appendChild(el28);var el41=document.createTextNode("\n        ");el22.appendChild(el41)}var el42=document.createTextNode("\n      ");el22.appendChild(el42);el18.appendChild(el22);var el43=document.createTextNode("\n    ");el18.appendChild(el43)}var el44=document.createTextNode("\n  ");el18.appendChild(el44);el2.appendChild(el18);var el45=document.createTextNode("\n  ");el2.appendChild(el45);var el46=document.createElement("caption");el46.className+=" u-coral-screenReaderOnly";el46.setAttribute("aria-live","assertive");el46.setAttribute("aria-atomic","true");el2.appendChild(el46);var el47=document.createTextNode("\n");el2.appendChild(el47);frag.appendChild(el2);var el48=document.createTextNode("\n");frag.appendChild(el48);return frag};function isDateInRange(date,startDate,endDate){if(!date){return false}if(startDate===null&&endDate===null){return true}else if(startDate===null){return date.toDate()<=endDate}else if(endDate===null){return date.toDate()>=startDate}return startDate<=date.toDate()&&date.toDate()<=endDate}function toMoment(value,format){if(value==='today'){return new DateTime.Moment().startOf('day')}else if(DateTime.Moment.isMoment(value)){return value.isValid()?value.clone():null}var result=new DateTime.Moment(value,value instanceof Date?null:format);return result.isValid()?result.startOf('day'):null}function validateAsChangedAndValidMoment(newValue,oldValue){newValue=newValue||null;oldValue=oldValue||null;if(newValue!==oldValue&&!new DateTime.Moment(newValue).isSame(oldValue,'day')){return newValue===null||newValue.isValid()}return false}function TableAnimator(host){var _this=this;this.host=host;this._addContainerIfNotPresent=function(width,height){if(!_this.container){template$k.call(_this,{width:width,height:height});_this.host.appendChild(_this.container)}};this._removeContainerIfEmpty=function(){if(_this.container&&_this.container.children.length===0){_this.host.removeChild(_this.container);_this.container=null}};this.slide=function(newTable,direction){var replace=direction===undefined;var isLeft=direction==='left';var oldTable=_this.oldTable;if(replace||!oldTable){if(oldTable){oldTable.parentNode.removeChild(oldTable)}_this.host.insertBefore(newTable,_this.host.firstChild);_this.oldTable=newTable;return}var boundingClientRect=oldTable.getBoundingClientRect();var width=boundingClientRect.width;var height=boundingClientRect.height;_this._addContainerIfNotPresent(width,height);_this.container.appendChild(oldTable);_this.container.appendChild(newTable);oldTable.classList.add('_coral-Calendar-table--transit');commons.transitionEnd(oldTable,function(){oldTable.parentNode.removeChild(oldTable);_this._removeContainerIfEmpty()});newTable.classList.add('_coral-Calendar-table--transit');newTable.style.left="".concat(isLeft?width: -width,"px");commons.transitionEnd(newTable,function(){newTable.classList.remove('_coral-Calendar-table--transit');_this.host.appendChild(newTable);_this._removeContainerIfEmpty()});height=_this.container.offsetWidth;oldTable.style.left="".concat(isLeft? -width:width,"px");newTable.style.left=0;_this.oldTable=newTable}}var ARRAYOF6=[0,0,0,0,0,0];var ARRAYOF7=[0,0,0,0,0,0,0];var INTERNAL_FORMAT='YYYY-MM-DD';var timeUnit={YEAR:'year',MONTH:'month',WEEK:'week',DAY:'day'};var CLASSNAME$C='_coral-Calendar';var Calendar=function(_BaseFormField){_inherits(Calendar,_BaseFormField);var _super=_createSuper(Calendar);function Calendar(){var _this2;_classCallCheck(this,Calendar);_this2=_super.call(this);_this2._value=null;_this2._delegateEvents(commons.extend(_this2._events,{'click ._coral-Calendar-nextMonth,._coral-Calendar-prevMonth':'_onNextOrPreviousMonthClick','click ._coral-Calendar-body ._coral-Calendar-date':'_onDayClick','mousedown ._coral-Calendar-body ._coral-Calendar-date':'_onDayMouseDown','key:up ._coral-Calendar-body':'_onUpKey','key:right ._coral-Calendar-body':'_onRightKey','key:down ._coral-Calendar-body':'_onDownKey','key:left ._coral-Calendar-body':'_onLeftKey','key:home ._coral-Calendar-body':'_onHomeOrEndKey','key:end ._coral-Calendar-body':'_onHomeOrEndKey','key:pageup':'_onPageUpKey','key:pagedown':'_onPageDownKey','key:meta+pageup':'_onCtrlPageUpKey','key:meta+pagedown':'_onCtrlPageDownKey','key:ctrl+pageup':'_onCtrlPageUpKey','key:ctrl+pagedown':'_onCtrlPageDownKey','key:enter ._coral-Calendar-body':'_onEnterKey','key:return ._coral-Calendar-body':'_onEnterKey','key:space ._coral-Calendar-body':'_onEnterKey'}));_this2._elements={};template$j.call(_this2._elements,{commons:commons,i18n:i18n,Icon:Icon});_this2._labellableElement=_assertThisInitialized(_this2);_this2._cursor=null;_this2._activeDescendant=null;_this2._animator=new TableAnimator(_this2._elements.body);return _this2}_createClass(Calendar,[{key:"_renderCalendar",value:function _renderCalendar(slide){var _this3=this;var cursor=this._requireCursor();var displayYear=cursor.year();var displayMonth=cursor.month();var oldTable=this._animator.oldTable;this._elements.heading.innerHTML=new DateTime.Moment([displayYear,displayMonth,1]).format(this.headerFormat);var newTable=this._renderTable(displayYear,displayMonth+1);if(oldTable){commons.transitionEnd(newTable,function(){_this3._setActiveDescendant()})}this._animator.slide(newTable,slide);var el=this._elements.body.querySelector('.is-selected');this._activeDescendant=el?el.id:null;this._setActiveDescendant()}},{key:"_isBeforeMin",value:function _isBeforeMin(currentMoment,unit){var min=this.min?new DateTime.Moment(this.min):null;return min&&currentMoment.isBefore(min,unit)}},{key:"_isAfterMax",value:function _isAfterMax(currentMoment,unit){var max=this.max?new DateTime.Moment(this.max):null;return max&&currentMoment.isAfter(max,unit)}},{key:"_isInRange",value:function _isInRange(currentMoment,unit){return!(this._isBeforeMin(currentMoment,unit)||this._isAfterMax(currentMoment,unit))}},{key:"_setActiveDescendant",value:function _setActiveDescendant(){var el;if(!this._activeDescendant||!this._elements.body.querySelector("#".concat(this._activeDescendant," [data-date]"))){this._activeDescendant=null;el=this._elements.body.querySelector('.is-selected');this._activeDescendant=el&&el.id;if(!this._activeDescendant||!this._elements.body.querySelector("#".concat(this._activeDescendant," [data-date]"))){var currentMoment=this._value;if(currentMoment){var dates=this._elements.body.querySelectorAll('[data-date]');if(dates.length){if(this._isBeforeMin(currentMoment)){el=dates[0]}else if(this._isAfterMax(currentMoment)){el=dates[dates.length-1]}}}else{el=this._elements.body.querySelector('.is-focused')||this._elements.body.querySelector('.is-today')}if(el){this._activeDescendant=el.parentElement.id}}}el=this._elements.body.querySelector('.is-focused');if(el){el.classList.remove('is-focused')}this._elements.body[this._activeDescendant?'setAttribute':'removeAttribute']('aria-activedescendant',this._activeDescendant);this._updateTableCaption();if(!this._activeDescendant){return}el=document.getElementById(this._activeDescendant);var newTable=this.querySelector('._coral-Calendar-table--transit');var isTransitioning=newTable!==null;if(el){if(isTransitioning){window.requestAnimationFrame(function(){el.querySelector('._coral-Calendar-date').classList.add('is-focused')})}else{el.querySelector('._coral-Calendar-date').classList.add('is-focused')}}}},{key:"_updateTableCaption",value:function _updateTableCaption(){var caption=this._elements.body.querySelector('caption');if(!caption){return}if(caption.firstChild){caption.removeChild(caption.firstChild)}if(this._activeDescendant){var activeDescendant=this._elements.body.querySelector("#".concat(this._activeDescendant));var captionText=document.createTextNode(activeDescendant.getAttribute('title'));caption.appendChild(captionText)}}},{key:"_renderTable",value:function _renderTable(year,month){var _this4=this;var firstDate=new DateTime.Moment([year,month-1,1]);var monthStartsAt=(firstDate.day()-this.startDay)%7;var dateLocal=this._value?this._value.clone().startOf('day'):null;if(monthStartsAt<0){monthStartsAt+=7}var data={i18n:i18n,commons:commons,dayNames:ARRAYOF7.map(function(currentIndex,index){var dayMoment=new DateTime.Moment().day((index+_this4.startDay)%7);return{dayAbbr:dayMoment.format('dd'),dayFullName:dayMoment.format('dddd')}},this),weeks:ARRAYOF6.map(function(currentWeekIndex,weekIndex){return ARRAYOF7.map(function(currentDayIndex,dayIndex){var result={};var cssClass=_this4.disabled?['is-disabled']:[];var ariaSelected=false;var ariaInvalid=false;var day=weekIndex*7+dayIndex-monthStartsAt;var cursor=new DateTime.Moment([year,month-1]);cursor.add(day,'days');var isCurrentMonth=cursor.month()+1===parseFloat(month);var dayOfWeek=new DateTime.Moment().day((dayIndex+_this4.startDay)%7).format('dddd');var isToday=cursor.isSame(new DateTime.Moment(),'day');var cursorLocal=cursor.clone().startOf('day');if(isToday){cssClass.push('is-today')}if(dateLocal&&cursorLocal.isSame(dateLocal,'day')){ariaSelected=true;cssClass.push('is-selected');if(_this4.invalid){ariaInvalid=true;cssClass.push('is-invalid')}}if(isCurrentMonth){cssClass.push('is-currentMonth');if(!_this4.disabled&&isDateInRange(cursor,_this4.min,_this4.max)){result.dateAttr=cursorLocal.format(INTERNAL_FORMAT);result.weekIndex=cursor.week();result.formattedDate=cursor.format('LL')}else{cssClass.push('is-disabled')}}else{cssClass.push('is-outsideMonth')}result.isDisabled=_this4.disabled||!result.dateAttr;result.dateText=cursor.date();result.cssClass=cssClass.join(' ');result.isToday=isToday;result.ariaSelected=ariaSelected;result.ariaInvalid=ariaInvalid;result.dateLabel=dayOfWeek;result.weekIndex=cursor.week();return result},_this4)},this)};var handles={};template$l.call(handles,data);return handles.table}},{key:"_requireCursor",value:function _requireCursor(){var cursor=this._cursor;if(!cursor||!cursor.isValid()){cursor=(this._value?this._value.clone().startOf('day'):new DateTime.Moment()).startOf('month');this._cursor=cursor}return cursor}},{key:"_gotoPreviousOrNextTimeUnit",value:function _gotoPreviousOrNextTimeUnit(unit,isNext){var direction=isNext?'left':'right';var operator=isNext?'add':'subtract';var el=this._elements.body.querySelector('._coral-Calendar-date.is-focused');var currentActive;var currentMoment;var newMoment;var difference;if(el){currentActive=el.dataset.date;currentMoment=new DateTime.Moment(currentActive);newMoment=currentMoment[operator](1,unit);if(this._isInRange(newMoment,unit)){difference=Math.abs(new DateTime.Moment(currentActive).diff(newMoment,'days'));this._getToNewMoment(direction,operator,difference);this._setActiveDescendant()}}else{this._requireCursor();if(!this._isInRange(this._cursor,unit)){if(this._isBeforeMin(this._cursor)){newMoment=this.min}else if(this._isAfterMax(this._cursor)){newMoment=this.max}newMoment=new DateTime.Moment(newMoment);difference=Math.abs(this._cursor.diff(newMoment,'days'));this._getToNewMoment(direction,operator,difference);this._setActiveDescendant();return}this._cursor[operator](1,unit);this._renderCalendar(direction)}}},{key:"_validateCalendar",value:function _validateCalendar(){var isInvalid=!(this._value===null||isDateInRange(this._value,this.min,this.max));if(this.invalid!==isInvalid){this.invalid=isInvalid}}},{key:"_onNextOrPreviousMonthClick",value:function _onNextOrPreviousMonthClick(event){event.preventDefault();this._gotoPreviousOrNextTimeUnit(timeUnit.MONTH,this._elements.next===event.matchedTarget);event.matchedTarget.focus();this._validateCalendar()}},{key:"_getToNewMoment",value:function _getToNewMoment(direction,operator,difference){var el=this._elements.body.querySelector('._coral-Calendar-date.is-focused');var currentActive;if(el){currentActive=el.dataset.date}else{this._requireCursor();currentActive=this._cursor.format(INTERNAL_FORMAT)}var currentMoment=new DateTime.Moment(currentActive);var currentMonth=currentMoment.month();var currentYear=currentMoment.year();var newMoment=currentMoment[operator](difference,'days');var newMonth=newMoment.month();var newYear=newMoment.year();var newMomentValue=newMoment.format(INTERNAL_FORMAT);if(newMonth!==currentMonth){this._requireCursor();this._cursor[operator](1,'months');this._renderCalendar(direction)}else if(newMonth===currentMonth&&newYear!==currentYear){this._requireCursor();this._cursor[operator](1,'years');this._renderCalendar(direction)}var dateQuery="._coral-Calendar-date[data-date^=".concat(JSON.stringify(newMomentValue),"]");var newDescendant=this._elements.body.querySelector(dateQuery);if(newDescendant){this._activeDescendant=newDescendant.parentNode.getAttribute('id')}}},{key:"_onDayMouseDown",value:function _onDayMouseDown(event){this._activeDescendant=event.target.parentNode.id;this._setActiveDescendant();this._elements.body.focus();this._validateCalendar()}},{key:"_onDayClick",value:function _onDayClick(event){event.preventDefault();this._elements.body.focus();var date=new DateTime.Moment(event.target.dataset.date,INTERNAL_FORMAT);var dateLocal;if(this._value){dateLocal=this._value.clone()}if(validateAsChangedAndValidMoment(date,dateLocal)){this.value=date;this.trigger('change')}this._validateCalendar()}},{key:"_onEnterKey",value:function _onEnterKey(event){event.preventDefault();var el=this._elements.body.querySelector('._coral-Calendar-date.is-focused');if(el){el.click()}this._validateCalendar()}},{key:"_onUpKey",value:function _onUpKey(event){event.preventDefault();this._gotoPreviousOrNextTimeUnit(timeUnit.WEEK,false);this._validateCalendar()}},{key:"_onDownKey",value:function _onDownKey(event){event.preventDefault();this._gotoPreviousOrNextTimeUnit(timeUnit.WEEK,true);this._validateCalendar()}},{key:"_onRightKey",value:function _onRightKey(event){event.preventDefault();this._gotoPreviousOrNextTimeUnit(timeUnit.DAY,true);this._validateCalendar()}},{key:"_onLeftKey",value:function _onLeftKey(event){event.preventDefault();this._gotoPreviousOrNextTimeUnit(timeUnit.DAY,false);this._validateCalendar()}},{key:"_onHomeOrEndKey",value:function _onHomeOrEndKey(event){event.preventDefault();var isHome=event.keyCode===Keys.keyToCode('home');var direction='';var operator=isHome?'subtract':'add';var el=this._elements.body.querySelector('._coral-Calendar-date.is-focused');if(el){var currentActive=el.dataset.date;var currentMoment=new DateTime.Moment(currentActive);var difference=isHome?currentMoment.date()-1:currentMoment.daysInMonth()-currentMoment.date();this._getToNewMoment(direction,operator,difference);this._setActiveDescendant()}this._validateCalendar()}},{key:"_onPageDownKey",value:function _onPageDownKey(event){event.preventDefault();this._gotoPreviousOrNextTimeUnit(timeUnit.MONTH,true);this._validateCalendar()}},{key:"_onPageUpKey",value:function _onPageUpKey(event){event.preventDefault();this._gotoPreviousOrNextTimeUnit(timeUnit.MONTH,false);this._validateCalendar()}},{key:"_onCtrlPageDownKey",value:function _onCtrlPageDownKey(event){event.preventDefault();this._gotoPreviousOrNextTimeUnit(timeUnit.YEAR,true);this._validateCalendar()}},{key:"_onCtrlPageUpKey",value:function _onCtrlPageUpKey(event){event.preventDefault();this._gotoPreviousOrNextTimeUnit(timeUnit.YEAR,false);this._validateCalendar()}},{key:"focus",value:function focus(){var focusedElement=this._elements.body.querySelector('.is-focused');if(focusedElement!==document.activeElement&&!this.disabled){this._setActiveDescendant();this._elements.body.focus()}}},{key:"render",value:function render(){_get(_getPrototypeOf(Calendar.prototype),"render",this).call(this);this.classList.add(CLASSNAME$C);this.setAttribute('role','group');if(!this._valueFormat){this.valueFormat=INTERNAL_FORMAT}var frag=document.createDocumentFragment();frag.appendChild(this._elements.input);frag.appendChild(this._elements.header);frag.appendChild(this._elements.body);while(this.firstChild){this.removeChild(this.firstChild)}this.appendChild(frag);if(!this._elements.body.firstElementChild){this._renderCalendar()}}},{key:"startDay",get:function get(){if(this._startDay){return this._startDay}if(typeof DateTime.Moment.localeData(i18n.locale).firstDayOfWeek!=='undefined'){return DateTime.Moment.localeData(i18n.locale).firstDayOfWeek()}return 0},set:function set(value){if(value>=0&&value<7){this._startDay=value;this._renderCalendar()}}},{key:"headerFormat",get:function get(){return this._headerFormat||'MMMM YYYY'},set:function set(value){this._headerFormat=transform.string(value);this._renderCalendar()}},{key:"min",get:function get(){return this._min?this._min.toDate():null},set:function set(value){value=toMoment(value,this.valueFormat);if(validateAsChangedAndValidMoment(value,this._min)){this._min=value;this._renderCalendar()}}},{key:"max",get:function get(){return this._max?this._max.toDate():null},set:function set(value){value=toMoment(value,this.valueFormat);if(validateAsChangedAndValidMoment(value,this._max)){this._max=value;this._renderCalendar()}}},{key:"valueFormat",get:function get(){return this._valueFormat||INTERNAL_FORMAT},set:function set(value){var _this5=this;value=transform.string(value);var setValueFormat=function setValueFormat(newValue){_this5._valueFormat=newValue;_this5._reflectAttribute('valueformat',_this5._valueFormat)};if(!this._valueFormat&&this._originalValue){setValueFormat(value);this.value=this._originalValue}else{setValueFormat(value);this._elements.input.value=this.value}}},{key:"valueAsDate",get:function get(){return this._value?this._value.toDate():null},set:function set(value){if(value instanceof Date){this._valueAsDate=new DateTime.Moment(value);this.value=this._valueAsDate}else{this._valueAsDate=null;this.value=''}}},{key:"value",get:function get(){return this._value?this._value.format(this.valueFormat):''},set:function set(value){this._originalValue=value;value=toMoment(value,this.valueFormat);if(validateAsChangedAndValidMoment(value,this._value)){this._value=value;this._elements.input.value=this.value;this._cursor=null;this._renderCalendar();this.required=this.required}}},{key:"name",get:function get(){return this._elements.input.name},set:function set(value){this._reflectAttribute('name',value);this._elements.input.name=value}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this.classList.toggle('is-required',this._required&&this._value===null)}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.prev.disabled=this._disabled;this._elements.next.disabled=this._disabled;this._elements.body[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this._elements.body[this._disabled?'removeAttribute':'setAttribute']('tabindex','0');this._renderCalendar()}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(Calendar.prototype),"invalid",this)},set:function set(value){_set(_getPrototypeOf(Calendar.prototype),"invalid",value,this,true);this._renderCalendar()}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.prev.disabled=this._readOnly;this._elements.next.disabled=this._readOnly;this._elements.body[this._readOnly?'removeAttribute':'setAttribute']('tabindex','0');this.classList.toggle('is-readOnly',this._readOnly)}}],[{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Calendar),"_attributePropertyMap",this),{startday:'startDay',headerformat:'headerFormat',valueformat:'valueFormat'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Calendar),"observedAttributes",this).concat(['startday','headerformat','min','max','valueformat'])}}]);return Calendar}(BaseFormField(BaseComponent(HTMLElement)));commons.extend(strings,{'coral-component-calendar':translations$b});commons._define('coral-calendar',Calendar);var template$m=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["wrapper"]=document.createElement("div");el0.setAttribute("handle","wrapper");el0.className+=" _coral-Card-wrapper";frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var COLOR_HINT_REG_EXP=/^#[0-9A-F]{6}$/i;var variant$c={DEFAULT:'default',QUIET:'quiet',CONDENSED:'condensed',INVERTED:'inverted',ASSET:'asset'};var CLASSNAME$D='_coral-Card';var ALL_VARIANT_CLASSES$8=[];for(var variantValue$6 in variant$c){ALL_VARIANT_CLASSES$8.push("".concat(CLASSNAME$D,"--").concat(variant$c[variantValue$6]))}var Card=function(_BaseComponent){_inherits(Card,_BaseComponent);var _super=_createSuper(Card);function Card(){var _this;_classCallCheck(this,Card);_this=_super.call(this);_this._elements={asset:_this.querySelector('coral-card-asset')||document.createElement('coral-card-asset'),content:_this.querySelector('coral-card-content')||document.createElement('coral-card-content'),info:_this.querySelector('coral-card-info')||document.createElement('coral-card-info'),overlay:_this.querySelector('coral-card-overlay')||document.createElement('coral-card-overlay')};template$m.call(_this._elements);_this._delegateEvents({'capture:load coral-card-asset img':'_onLoad'});return _this}_createClass(Card,[{key:"_onLoad",value:function _onLoad(event){this._loaded=true;this._elements.asset.style.height='';event.target.classList.remove('is-loading')}},{key:"render",value:function render(){_get(_getPrototypeOf(Card.prototype),"render",this).call(this);this.classList.add(CLASSNAME$D);if(!this._variant){this.variant=variant$c.DEFAULT}var content=this._elements.content;var asset=this._elements.asset;var images=asset.querySelectorAll('img');var imagesCount=images.length;for(var i=0;i<imagesCount;i+=1){var image=images[i];if(!image.complete){image.classList.add('is-loading')}}for(var contentZone in this._contentZones){var element=this._elements[this._contentZones[contentZone]];if(element.parentNode){element.parentNode.removeChild(element)}}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE&&child.textContent.trim()!==''||child.nodeType===Node.ELEMENT_NODE&&child.getAttribute('handle')!=='wrapper'){content.appendChild(child )}else{this.removeChild(child)}}this.overlay=this._elements.overlay;this.content=content;this.info=this._elements.info;this.appendChild(this._elements.wrapper);this.asset=asset;this.classList.toggle("".concat(CLASSNAME$D,"--overflow"),this.info.childNodes.length&&this.info.scrollHeight>this.clientHeight)}},{key:"asset",get:function get(){return this._getContentZone(this._elements.asset)},set:function set(value){this._setContentZone('asset',value,{handle:'asset',tagName:'coral-card-asset',insert:function insert(asset){this.insertBefore(asset,this.info||this._elements.wrapper||null)}})}},{key:"assetHeight",get:function get(){return this._assetHeight||''},set:function set(value){var _this2=this;this._assetHeight=transform.number(value);window.requestAnimationFrame(function(){if(!_this2._loaded&&_this2._elements.asset&&_this2.assetWidth&&_this2._assetHeight){var clientRect=_this2.getBoundingClientRect();var width=clientRect.right-clientRect.left;var ratio=width/_this2.assetWidth;if(ratio>1){_this2._elements.asset.style.height="".concat(_this2._assetHeight+32,"px")}else if(_this2.variant!==variant$c.CONDENSED&&_this2.variant!==variant$c.INVERTED){_this2._elements.asset.style.height="".concat(ratio*_this2._assetHeight,"px")}}})}},{key:"assetWidth",get:function get(){return this._assetWidth||''},set:function set(value){this._assetWidth=transform.number(value)}},{key:"colorHint",get:function get(){return this._colorHint||''},set:function set(value){if(COLOR_HINT_REG_EXP.test(value)){this._colorHint=value;if(!this._loaded){this._elements.asset.style['background-color']=this._colorHint}}}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-card-content',insert:function insert(content){var title=content.querySelector('coral-card-title');if(title){content.insertBefore(title,content.firstChild)}this._elements.wrapper.insertBefore(content,this.overlay||null)}})}},{key:"info",get:function get(){return this._getContentZone(this._elements.info)},set:function set(value){this._setContentZone('info',value,{handle:'info',tagName:'coral-card-info',insert:function insert(info){this.appendChild(info)}})}},{key:"fixedWidth",get:function get(){return this._fixedWidth||false},set:function set(value){this._fixedWidth=transform.booleanAttr(value);this._reflectAttribute('fixedwidth',this._fixedWidth);this.classList.toggle("".concat(CLASSNAME$D,"--fixedWidth"),this._fixedWidth)}},{key:"overlay",get:function get(){return this._getContentZone(this._elements.overlay)},set:function set(value){this._setContentZone('overlay',value,{handle:'overlay',tagName:'coral-card-overlay',insert:function insert(overlay){this._elements.wrapper.appendChild(overlay)}})}},{key:"stacked",get:function get(){return this._stacked||false},set:function set(value){this._stacked=transform.booleanAttr(value);this._reflectAttribute('stacked',this._stacked);this.classList.toggle("".concat(CLASSNAME$D,"--stacked"),this._stacked)}},{key:"variant",get:function get(){return this._variant||variant$c.DEFAULT},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$c)(value)&&value||variant$c.DEFAULT;this._reflectAttribute('variant',this._variant);(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$8);if(this._variant!==variant$c.DEFAULT){this.classList.add("".concat(CLASSNAME$D,"--").concat(this._variant))}this.assetHeight=this.assetHeight}},{key:"_contentZones",get:function get(){return{'coral-card-asset':'asset','coral-card-content':'content','coral-card-info':'info','coral-card-overlay':'overlay'}}}],[{key:"variant",get:function get(){return variant$c}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Card),"_attributePropertyMap",this),{assetwidth:'assetWidth',assetheight:'assetHeight',colorhint:'colorHint',fixedwidth:'fixedWidth'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Card),"observedAttributes",this).concat(['assetwidth','assetheight','colorhint','fixedwidth','variant','stacked'])}}]);return Card}(BaseComponent(HTMLElement));var template$n=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["icon"]=document.createElement("coral-icon");el0.setAttribute("handle","icon");el0.setAttribute("size","XS");el0.className+=" _coral-Card-property-icon";el0.setAttribute("autoarialabel","on");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var CLASSNAME$E='_coral-Card-property';var CardProperty=function(_BaseComponent){_inherits(CardProperty,_BaseComponent);var _super=_createSuper(CardProperty);function CardProperty(){var _this;_classCallCheck(this,CardProperty);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-card-property-content')||document.createElement('coral-card-property-content')};template$n.call(_this._elements);return _this}_createClass(CardProperty,[{key:"render",value:function render(){_get(_getPrototypeOf(CardProperty.prototype),"render",this).call(this);this.classList.add(CLASSNAME$E,'coral-Body--small');var frag=document.createDocumentFragment();if(this.icon){frag.appendChild(this._elements.icon)}var content=this._elements.content;if(content.parentNode){content.parentNode.removeChild(content)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&child.getAttribute('handle')!=='icon'){content.appendChild(child)}else{this.removeChild(child)}}this.appendChild(frag);this.content=content}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-card-property-content',insert:function insert(content){this.appendChild(content)}})}},{key:"icon",get:function get(){return this._elements.icon.icon},set:function set(value){this._elements.icon.icon=value;if(this.icon===''){this._elements.icon.remove()}else if(!this._elements.icon.parentNode){this.insertBefore(this._elements.icon,this.firstChild)}}},{key:"iconAlt",get:function get(){return this._elements.icon?this._elements.icon.getAttribute('alt'):undefined},set:function set(value){this._elements.icon&&this._elements.icon.setAttribute('alt',value)}},{key:"iconTitle",get:function get(){return this._elements.icon?this._elements.icon.getAttribute('title'):undefined},set:function set(value){this._elements.icon&&this._elements.icon.setAttribute('title',value)}},{key:"_contentZones",get:function get(){return{'coral-card-property-content':'content'}}}],[{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(CardProperty),"_attributePropertyMap",this),{iconalt:'iconAlt',icontitle:'iconTitle'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(CardProperty),"observedAttributes",this).concat(['icon','iconalt','icontitle'])}}]);return CardProperty}(BaseComponent(HTMLElement));var CardTitle=(function(){return document.createElement('coral-card-title')});var CardSubtitle=(function(){return document.createElement('coral-card-subtitle')});var CardContext=(function(){return document.createElement('coral-card-context')});var CardDescription=(function(){return document.createElement('coral-card-description')});var CardAsset=(function(){return document.createElement('coral-card-asset')});var CardOverlay=(function(){return document.createElement('coral-card-overlay')});var CardInfo=(function(){return document.createElement('coral-card-info')});var CardContent=(function(){return document.createElement('coral-card-content')});var CardPropertyList=function(_BaseComponent){_inherits(CardPropertyList,_BaseComponent);var _super=_createSuper(CardPropertyList);function CardPropertyList(){_classCallCheck(this,CardPropertyList);return _super.apply(this,arguments)}_createClass(CardPropertyList,[{key:"render",value:function render(){_get(_getPrototypeOf(CardPropertyList.prototype),"render",this).call(this);this.classList.add('u-coral-clearFix');if(this.innerHTML.trim()===''){this.textContent=''}}}]);return CardPropertyList}(BaseComponent(HTMLElement));var CardPropertyContent=(function(){return document.createElement('coral-card-property-content')});commons._define('coral-card-propertylist',CardPropertyList);commons._define('coral-card-property',CardProperty);commons._define('coral-card',Card);Card.Property=CardProperty;Card.Property.Content=CardPropertyContent;Card.Title=CardTitle;Card.Subtitle=CardSubtitle;Card.Context=CardContext;Card.Description=CardDescription;Card.Asset=CardAsset;Card.Overlay=CardOverlay;Card.Info=CardInfo;Card.Content=CardContent;Card.PropertyList=CardPropertyList;var CLASSNAME$F='_coral-CharacterCount';var target$1={PREVIOUS:'_prev',NEXT:'_next'};var CharacterCount=function(_BaseComponent){_inherits(CharacterCount,_BaseComponent);var _super=_createSuper(CharacterCount);function CharacterCount(){_classCallCheck(this,CharacterCount);return _super.apply(this,arguments)}_createClass(CharacterCount,[{key:"_getCharCount",value:function _getCharCount(){var elementLength=0;if(this._targetEl&&this._targetEl.value){elementLength=this._targetEl.value.length}return this._maxLength?this._maxLength-elementLength:elementLength}},{key:"_refreshCharCount",value:function _refreshCharCount(){var currentCount=this._getCharCount();this.innerHTML=currentCount;var isMaxExceeded=currentCount<0;if(this._targetEl){this._targetEl.classList.toggle('is-invalid',isMaxExceeded);this.classList.toggle('is-invalid',isMaxExceeded)}}},{key:"render",value:function render(){_get(_getPrototypeOf(CharacterCount.prototype),"render",this).call(this);this.classList.add(CLASSNAME$F,'coral-Body--S');this.target=this.target;this._refreshCharCount()}},{key:"target",get:function get(){return this._target||target$1.PREVIOUS},set:function set(value){if(typeof value==='string'||value instanceof Node){this._target=value;if(this._targetEl){this._targetEl.removeEventListener('input',this._refreshCharCount.bind(this))}if(value===target$1.NEXT){this._targetEl=this.nextElementSibling}else if(value===target$1.PREVIOUS){this._targetEl=this.previousElementSibling}else if(typeof value==='string'){this._targetEl=document.querySelector(value)}else{this._targetEl=value}if(this._targetEl){this._targetEl.addEventListener('input',this._refreshCharCount.bind(this));if(this._targetEl.getAttribute('maxlength')){this.maxLength=this._targetEl.getAttribute('maxlength')}}}}},{key:"maxLength",get:function get(){return this._maxLength||null},set:function set(value){this._maxLength=transform.number(value);this._reflectAttribute('maxlength',this._maxLength);this._refreshCharCount()}}],[{key:"target",get:function get(){return target$1}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(CharacterCount),"_attributePropertyMap",this),{maxlength:'maxLength'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(CharacterCount),"observedAttributes",this).concat(['target','maxlength'])}}]);return CharacterCount}(BaseComponent(HTMLElement));commons._define('coral-charactercount',CharacterCount);var translations$c={"en-US":{"am":"am","pm":"pm","Hours":"Hours","Minutes":"Minutes","AM/PM":"AM/PM"},"de-DE":{"am":"vormittags","pm":"nachmittags","Hours":"Stunden","Minutes":"Minuten","AM/PM":"AM/PM"},"fr-FR":{"am":"matin","pm":"après-midi","Hours":"Heures","Minutes":"Minutes","AM/PM":"AM/PM"},"ja-JP":{"am":"午前","pm":"午後","Hours":"時間","Minutes":"分","AM/PM":"午前 / 午後"},"es-ES":{"am":"a. m.","pm":"p. m.","Hours":"Horas","Minutes":"Minutos","AM/PM":"a. m./p. m."},"ko-KR":{"am":"오전","pm":"오후","Hours":"시간","Minutes":"분","AM/PM":"오전/오후"},"zh-CN":{"am":"上午","pm":"下午","Hours":"小时","Minutes":"分钟","AM/PM":"上午/下午"},"zh-TW":{"am":"上午","pm":"下午","Hours":"小時","Minutes":"分鐘","AM/PM":"上午/下午"},"pt-BR":{"am":"am","pm":"pm","Hours":"Horas","Minutes":"Minutos","AM/PM":"AM/PM"},"it-IT":{"am":"am","pm":"pm","Hours":"Ore","Minutes":"Minuti","AM/PM":"AM/PM"},"nl-NL":{"am":"am","pm":"pm","Hours":"Uren","Minutes":"Minuten","AM/PM":"AM/PM"},"da-DK":{"am":"am","pm":"pm","Hours":"Timer","Minutes":"Minutter","AM/PM":"AM/PM"},"fi-FI":{"am":"ap.","pm":"ip.","Hours":"Tunnit","Minutes":"Minuutit","AM/PM":"ap./ip."},"nb-NO":{"am":"am","pm":"pm","Hours":"Timer","Minutes":"Minutter","AM/PM":"AM/PM"},"sv-SE":{"am":"am","pm":"pm","Hours":"Timmar","Minutes":"Minuter","AM/PM":"AM/PM"},"cs-CZ":{"am":"am","pm":"pm","Hours":"hodin","Minutes":"minut","AM/PM":"AM/PM"},"pl-PL":{"am":"przed południem","pm":"po południu","Hours":"Godz.","Minutes":"Min","AM/PM":"Przed południem / Po południu"},"ru-RU":{"am":"дп","pm":"пп","Hours":"ч.","Minutes":"мин.","AM/PM":"ДП/ПП"},"tr-TR":{"am":"öö","pm":"ös","Hours":"Saat","Minutes":"Dakika","AM/PM":"ÖÖ/ÖS"}};var template$o=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;var labelHourId=data.commons.getUID();var labelMinuteId=data.commons.getUID();data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["input"]=document.createElement("input");el2.setAttribute("type","hidden");el2.setAttribute("name","");el2.setAttribute("handle","input");frag.appendChild(el2);var el3=document.createTextNode("\n");frag.appendChild(el3);var el4=this["valueAsText"]=document.createElement("time");el4.setAttribute("handle","valueAsText");el4.id=data_0["commons"]["getUID"]();el4.setAttribute("hidden","");frag.appendChild(el4);var el5=document.createTextNode("\n");frag.appendChild(el5);var el6=document.createElement("label");el6.setAttribute("for",labelHourId);el6.className+=" coral-Form-fieldlabel";el6.textContent=data_0["i18n"]["get"]('Hours');frag.appendChild(el6);var el7=document.createTextNode("\n");frag.appendChild(el7);var el8=this["hours"]=document.createElement("input","coral-textfield");el8.setAttribute("is","coral-textfield");el8.id=labelHourId;el8.setAttribute("type","number");el8.setAttribute("min","0");el8.setAttribute("max","23");el8.className+=" _coral-Clock-hour";el8.setAttribute("handle","hours");frag.appendChild(el8);var el9=document.createTextNode("\n");frag.appendChild(el9);var el10=this["divider"]=document.createElement("span");el10.className+=" _coral-Clock-divider";el10.setAttribute("handle","divider");el10.textContent=":";frag.appendChild(el10);var el11=document.createTextNode("\n");frag.appendChild(el11);var el12=document.createElement("label");el12.setAttribute("for",labelMinuteId);el12.className+=" coral-Form-fieldlabel";el12.textContent=data_0["i18n"]["get"]('Minutes');frag.appendChild(el12);var el13=document.createTextNode("\n");frag.appendChild(el13);var el14=this["minutes"]=document.createElement("input","coral-textfield");el14.setAttribute("is","coral-textfield");el14.id=labelMinuteId;el14.setAttribute("type","number");el14.setAttribute("min","0");el14.setAttribute("max","59");el14.className+=" _coral-Clock-minute";el14.setAttribute("handle","minutes");frag.appendChild(el14);var el15=document.createTextNode("\n");frag.appendChild(el15);var el16=this["period"]=document.createElement("coral-select");el16.setAttribute("handle","period");el16.className+=" _coral-Clock-period";el16.setAttribute("hidden","");el16.setAttribute("aria-label",data_0["i18n"]["get"]('AM/PM'));var el17=document.createTextNode("\n  ");el16.appendChild(el17);var el18=document.createElement("coral-select-item");el18.setAttribute("value","am");el16.appendChild(el18);var el19=document.createTextNode("\n  ");el16.appendChild(el19);var el20=document.createElement("coral-select-item");el20.setAttribute("value","pm");el16.appendChild(el20);var el21=document.createTextNode("\n");el16.appendChild(el21);frag.appendChild(el16);var el22=document.createTextNode("\n");frag.appendChild(el22);return frag};var DEFAULT_HOUR_FORMAT='HH';var DEFAULT_MINUTE_FORMAT='mm';var DEFAULT_TIME_FORMAT="".concat(DEFAULT_HOUR_FORMAT,":").concat(DEFAULT_MINUTE_FORMAT);var AUTHORIZED_TOKENS='(A|a|H{1,2}|h{1,2}|k{1,2}|m{1,2})';var TIME_REG_EXP=new RegExp("".concat(AUTHORIZED_TOKENS,".*").concat(AUTHORIZED_TOKENS,"|").concat(AUTHORIZED_TOKENS));var HOUR_REG_EXP=new RegExp('h{1,2}|H{1,2}|k{1,2}');var MIN_REG_EXP=new RegExp('m{1,2}');var variant$d={DEFAULT:'default',QUIET:'quiet'};var CLASSNAME$G='_coral-Clock';var ALL_VARIANT_CLASSES$9=[];for(var variantValue$7 in variant$d){ALL_VARIANT_CLASSES$9.push("".concat(CLASSNAME$G,"--").concat(variant$d[variantValue$7]))}var Clock=function(_BaseFormField){_inherits(Clock,_BaseFormField);var _super=_createSuper(Clock);function Clock(){var _this;_classCallCheck(this,Clock);_this=_super.call(this);_this._value='';_this._delegateEvents(commons.extend(_this._events,{'change [handle="period"]':'_onPeriodChange'}));_this._elements={};_this._template=template$o.call(_this._elements,{commons:commons,i18n:i18n});_this._labellableElement=_assertThisInitialized(_this);return _this}_createClass(Clock,[{key:"_extractTimeFormat",value:function _extractTimeFormat(format,regExp,defaultFormat){var match=regExp.exec(format);return match&&match.length&&match[0]!==''?match[0]:defaultFormat}},{key:"_syncDisplay",value:function _syncDisplay(){var hourFormat=this._extractTimeFormat(this.displayFormat,HOUR_REG_EXP,DEFAULT_HOUR_FORMAT);var minuteFormat=this._extractTimeFormat(this.displayFormat,MIN_REG_EXP,DEFAULT_MINUTE_FORMAT);this._elements.hours.placeholder=hourFormat;this._elements.minutes.placeholder=minuteFormat;this._elements.hours.value=this._getValueAsString(this._value,hourFormat);this._elements.minutes.value=this._getValueAsString(this._value,minuteFormat);this._syncPeriod();this._syncValueAsText()}},{key:"_syncPeriod",value:function _syncPeriod(){var period=this._elements.period;var time=this._value;var am=i18n.get('am');var pm=i18n.get('pm');var items=period.items.getAll();if(time&&time.isValid()){if(time.hours()<12){period.value='am'}else{period.value='pm'}}if(this.displayFormat.indexOf('a')!==-1){items[0].textContent=am;items[1].textContent=pm;this._togglePeriod(true)}else if(this.displayFormat.indexOf('A')!==-1){items[0].textContent=am.toUpperCase();items[1].textContent=pm.toUpperCase();this._togglePeriod(true)}else{this._togglePeriod(false)}}},{key:"_togglePeriod",value:function _togglePeriod(show){this.classList.toggle("".concat(CLASSNAME$G,"--extended"),show);this._elements.period.hidden=!show}},{key:"_onPeriodChange",value:function _onPeriodChange(event){event.stopImmediatePropagation();var time=this._value;var period=this._elements.period;if(time&&time.isValid()){if(this.displayFormat.indexOf('h')!==-1){if(period.value==='am'){time.subtract(12,'h')}else{time.add(12,'h')}}this.value=time.format(this.valueFormat);this.trigger('change')}}},{key:"_syncValueAsText",value:function _syncValueAsText(){this._elements.valueAsText.textContent=this._getValueAsString(this._value,this.displayFormat);if(!this.getAttribute('aria-labelledby')){this.labelledBy=this.labelledBy}}},{key:"_onInputChange",value:function _onInputChange(event){event.stopImmediatePropagation();var newTime=new DateTime.Moment();var oldTime=this._value;var hours=parseInt(this._elements.hours.value,10);var minutes=parseInt(this._elements.minutes.value,10);if(window.isNaN(hours)||window.isNaN(minutes)){newTime=''}else{if(!this._elements.period.hidden&&this.displayFormat.indexOf('h')!==-1&&this._elements.period.value==='pm'){hours+=12}newTime.hours(hours);newTime.minutes(minutes)}if(newTime&&newTime.isValid()){this.invalid=false;if(!newTime.isSame(oldTime,'hour')||!newTime.isSame(oldTime,'minute')){this.value=newTime.format(this.valueFormat);this.trigger('change')}}else{this.invalid=true;this._value='';if(newTime!==oldTime){this.trigger('change')}}}},{key:"_getValueAsString",value:function _getValueAsString(value,format){return value&&value.isValid()?value.format(format):''}},{key:"focus",value:function focus(){if(!this.contains(document.activeElement)){this._elements.hours.focus()}}},{key:"render",value:function render(){_get(_getPrototypeOf(Clock.prototype),"render",this).call(this);this.classList.add(CLASSNAME$G);this.setAttribute('role','group');if(!this._variant){this.variant=variant$d.DEFAULT}if(!this._valueFormat){this.valueFormat=DEFAULT_TIME_FORMAT}if(!this._displayFormat){this.displayFormat=DEFAULT_TIME_FORMAT}while(this.firstChild){this.removeChild(this.firstChild)}this.appendChild(this._template);this._syncDisplay()}},{key:"displayFormat",get:function get(){return this._displayFormat||DEFAULT_TIME_FORMAT},set:function set(value){this._displayFormat=this._extractTimeFormat(transform.string(value).trim(),TIME_REG_EXP,DEFAULT_TIME_FORMAT);this._reflectAttribute('displayformat',this._displayFormat);this._syncDisplay()}},{key:"valueFormat",get:function get(){return this._valueFormat||DEFAULT_TIME_FORMAT},set:function set(value){var _this2=this;var setValueFormat=function setValueFormat(newValue){_this2._valueFormat=_this2._extractTimeFormat(transform.string(newValue).trim(),TIME_REG_EXP,DEFAULT_TIME_FORMAT);_this2._reflectAttribute('valueformat',_this2._valueFormat)};if(!this._valueFormat&&this._originalValue){setValueFormat(value);this.value=this._originalValue}else{setValueFormat(value);this._elements.input.value=this.value}}},{key:"valueAsDate",get:function get(){return this._value?new Date(this._value.toDate().getTime()):null},set:function set(value){this.value=value instanceof Date?new DateTime.Moment(value,null,true).format(this.valueFormat):''}},{key:"variant",get:function get(){return this._variant||variant$d.DEFAULT},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$d)(value)&&value||variant$d.DEFAULT;this._reflectAttribute('variant',this._variant);this._elements.hours.variant=this._variant;this._elements.minutes.variant=this._variant;this._elements.period.variant=this._variant;(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$9);if(this._variant!==variant$d.DEFAULT){this.classList.add("".concat(CLASSNAME$G,"--").concat(this._variant))}}},{key:"name",get:function get(){return this._elements.input.name},set:function set(value){this._reflectAttribute('name',value);this._elements.input.name=value}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.hours.disabled=this._disabled;this._elements.minutes.disabled=this._disabled;this._elements.input.disabled=this._disabled}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(Clock.prototype),"invalid",this)},set:function set(value){_set(_getPrototypeOf(Clock.prototype),"invalid",value,this,true);this._elements.hours.invalid=this._invalid;this._elements.minutes.invalid=this._invalid}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.hours.required=this._required;this._elements.minutes.required=this._required;this._elements.input.required=this._required}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.hours.readOnly=this._readOnly;this._elements.minutes.readOnly=this._readOnly;this._elements.input.readOnly=this._readOnly}},{key:"value",get:function get(){return this._getValueAsString(this._value,this.valueFormat)},set:function set(value){value=typeof value==='string'?value:'';this._originalValue=value;var time=new DateTime.Moment(value,this.valueFormat,true);this._value=time.isValid()?time:'';this._elements.input.value=this.value;this._syncValueAsText();this._syncDisplay()}},{key:"labelledBy",get:function get(){var labelledBy=this.getAttribute('aria-labelledby');if(labelledBy){labelledBy=labelledBy.replace(this._elements.valueAsText.id,'').trim();if(!labelledBy.length){labelledBy=null}}return labelledBy},set:function set(value){_set(_getPrototypeOf(Clock.prototype),"labelledBy",value,this,true);var labelledBy=this.labelledBy;var ids=[this._elements.valueAsText.id];if(labelledBy){ids.unshift(labelledBy);this.setAttribute('aria-labelledby',ids.join(' '))}else{this.removeAttribute('aria-labelledby')}}}],[{key:"variant",get:function get(){return variant$d}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Clock),"_attributePropertyMap",this),{displayformat:'displayFormat',valueformat:'valueFormat'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Clock),"observedAttributes",this).concat(['displayformat','valueformat','variant'])}}]);return Clock}(BaseFormField(BaseComponent(HTMLElement)));commons.extend(strings,{'coral-component-clock':translations$c});commons._define('coral-clock',Clock);var template$p=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=document.createElement("div");el0.className+=" _coral-CoachMarkIndicator-ring";frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=document.createElement("div");el2.className+=" _coral-CoachMarkIndicator-ring";frag.appendChild(el2);var el3=document.createTextNode("\n");frag.appendChild(el3);var el4=document.createElement("div");el4.className+=" _coral-CoachMarkIndicator-ring";frag.appendChild(el4);var el5=document.createTextNode("\n");frag.appendChild(el5);return frag};var size$5={SMALL:'S',MEDIUM:'M'};var variant$e={DEFAULT:'default',LIGHT:'light',DARK:'dark'};var CLASSNAME$H='_coral-CoachMarkIndicator';var CoachMark=function(_BaseComponent){_inherits(CoachMark,_BaseComponent);var _super=_createSuper(CoachMark);function CoachMark(){var _this;_classCallCheck(this,CoachMark);_this=_super.call(this);_this._elements={};_this._template=template$p.call(_this._elements);return _this}_createClass(CoachMark,[{key:"render",value:function render(){_get(_getPrototypeOf(CoachMark.prototype),"render",this).call(this);this.classList.add(CLASSNAME$H);if(!this._size){this.size=size$5.MEDIUM}if(!this._variant){this.variant=variant$e.DEFAULT}var template=this.getElementsByClassName('_coral-CoachMarkIndicator-ring');while(template.length){template[0].remove()}this.appendChild(this._template)}},{key:"target",get:function get(){return this._target||null},set:function set(value){var _this2=this;if(value===null||typeof value==='string'||value instanceof Node){this._target=value;requestAnimationFrame(function(){var targetElement=Overlay._getTarget(_this2);if(targetElement){_this2._popper=_this2._popper||new Popper(targetElement,_this2);if(targetElement){_this2._popper.reference=targetElement}_this2._popper.options.placement='top';_this2._popper.modifiers.forEach(function(modifier){if(modifier.name==='offset'){var lengthOffset=targetElement.clientHeight/2+_this2.clientHeight/2;modifier.offset="0, -".concat(lengthOffset)}else if(modifier.name==='preventOverflow'){modifier.padding=0}});_this2._popper.update()}})}}},{key:"size",get:function get(){return this._size||size$5.MEDIUM},set:function set(value){value=transform.string(value).toUpperCase();this._size=validate.enumeration(size$5)(value)&&value||size$5.MEDIUM;this._reflectAttribute('size',this._size);this.classList.toggle("".concat(CLASSNAME$H,"--quiet"),this._size===size$5.SMALL)}},{key:"variant",get:function get(){return this._variant||variant$e.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$e)(value)&&value||variant$e.DEFAULT;this._reflectAttribute('variant',this._variant);this.classList.toggle("".concat(CLASSNAME$H,"--light"),this._variant===variant$e.LIGHT);this.classList.toggle("".concat(CLASSNAME$H,"--dark"),this._variant===variant$e.DARK)}}],[{key:"size",get:function get(){return size$5}},{key:"variant",get:function get(){return variant$e}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(CoachMark),"observedAttributes",this).concat(['size','variant','target'])}}]);return CoachMark}(BaseComponent(HTMLElement));commons._define('coral-coachmark',CoachMark);var colorSpace={RGB:'rgb',HEX:'hex',CMYK:'cmyk',HSB:'hsb',HSL:'hsl'};function _hex(x){return "0".concat(x.toString(16)).slice(-2)}function _slice(str,startStr){var sliced=[];str=transform.string(str).toLowerCase();startStr=transform.string(startStr).toLowerCase();if(str.indexOf(startStr)!==-1){sliced=str.substring(str.indexOf(startStr)+startStr.length,str.lastIndexOf(')')).split(/,\s*/)}return sliced}function _parseRGB(rgbStr){var sliced=_slice(rgbStr,'rgb(');if(sliced.length!==3){return null}var r=parseInt(sliced[0],10);var g=parseInt(sliced[1],10);var b=parseInt(sliced[2],10);if(isNaN(r)||isNaN(g)||isNaN(b)){return null}if(r<0||r>255||g<0||g>255||b<0||b>255){return null}return{r:r,g:g,b:b}}function _serializeRGB(rgb){if(rgb){return "rgb(".concat(rgb.r,",").concat(rgb.g,",").concat(rgb.b,")")}return ''}function _parseRGBA(rgbaStr){var sliced=_slice(rgbaStr,'rgba(');if(sliced.length!==4){return null}var r=parseInt(sliced[0],10);var g=parseInt(sliced[1],10);var b=parseInt(sliced[2],10);var a=parseFloat(sliced[3]);if(isNaN(r)||isNaN(g)||isNaN(b)||isNaN(a)){return null}if(r<0||r>255||g<0||g>255||b<0||b>255||a<0||a>1){return null}return{r:r,g:g,b:b,a:a}}function _serializeRGBA(rgba){if(rgba){return "rgba(".concat(rgba.r,",").concat(rgba.g,",").concat(rgba.b,",").concat(rgba.a,")")}return ''}function _parseCMYK(cmykStr){var sliced=_slice(cmykStr,'cmyk(');if(sliced.length!==4){return null}var c=parseFloat(sliced[0]);var m=parseFloat(sliced[1]);var y=parseFloat(sliced[2]);var k=parseFloat(sliced[3]);if(isNaN(c)||isNaN(m)||isNaN(y)||isNaN(k)){return null}if(c<0||c>100||m<0||m>100||y<0||y>100||k<0||k>100){return null}return{c:c,m:m,y:y,k:k}}function _serializeCMYK(cmyk){if(cmyk){var c=parseFloat(cmyk.c.toFixed(2));var m=parseFloat(cmyk.m.toFixed(2));var y=parseFloat(cmyk.y.toFixed(2));var k=parseFloat(cmyk.k.toFixed(2));return "cmyk(".concat(c,",").concat(m,",").concat(y,",").concat(k,")")}return ''}function _parseHex(hexStr){hexStr=transform.string(hexStr).replace('#','');if(hexStr.length===3){hexStr=hexStr.charAt(0)+hexStr.charAt(0)+hexStr.charAt(1)+hexStr.charAt(1)+hexStr.charAt(2)+hexStr.charAt(2)}var isOk=/^[0-9A-F]{6}$/i.test(hexStr);if(!isOk){return null}return parseInt(hexStr,16)}function _hexToRgb(hex){if(hex!==null){return{r:hex>>16,g:(hex&0x00FF00)>>8,b:hex&0x0000FF}}return null}function _serializeHex(hex){if(hex!==null){var rgb=_hexToRgb(hex);return "#".concat(_hex(rgb.r)+_hex(rgb.g)+_hex(rgb.b))}return ''}function _rgbToHex(rgb){if(rgb){return _parseHex(_hex(rgb.r)+_hex(rgb.g)+_hex(rgb.b))}return null}function _cmykToRgb(cmyk){if(!cmyk){return null}var result={r:0,g:0,b:0};var c=parseFloat(cmyk.c)/100;var m=parseFloat(cmyk.m)/100;var y=parseFloat(cmyk.y)/100;var k=parseFloat(cmyk.k)/100;result.r=1-Math.min(1,c*(1-k)+k);result.g=1-Math.min(1,m*(1-k)+k);result.b=1-Math.min(1,y*(1-k)+k);result.r=Math.round(result.r*255);result.g=Math.round(result.g*255);result.b=Math.round(result.b*255);return result}function _rgbToCmyk(rgb){if(!rgb){return null}var result={c:0,m:0,y:0,k:0};if(rgb.r===0&&rgb.g===0&&rgb.b===0){result.k=100;return result}var r=rgb.r/255;var g=rgb.g/255;var b=rgb.b/255;result.k=Math.min(1-r,1-g,1-b);result.c=(1-r-result.k)/(1-result.k);result.m=(1-g-result.k)/(1-result.k);result.y=(1-b-result.k)/(1-result.k);result.c=Math.round(result.c*100);result.m=Math.round(result.m*100);result.y=Math.round(result.y*100);result.k=Math.round(result.k*100);return result}function _parseHSB(hsbStr){var sliced=_slice(hsbStr,'hsb(');if(sliced.length!==3){return null}var h=parseFloat(sliced[0]);var s=parseFloat(sliced[1]);var b=parseFloat(sliced[2]);if(isNaN(h)||isNaN(s)||isNaN(b)){return null}if(h<0||h>360||s<0||s>100||b<0||b>100){return null}return{h:h,s:s,b:b}}function _serializeHSB(hsb){if(hsb){var h=parseFloat(hsb.h.toFixed(2));var s=parseFloat(hsb.s.toFixed(2));var b=parseFloat(hsb.b.toFixed(2));return "hsb(".concat(h,",").concat(s,",").concat(b,")")}return ''}function _hsbToRgb(hsb){if(!hsb){return null}var h=hsb.h/360;var s=hsb.s/100;var v=hsb.b/100;var r,g,b;var i=Math.floor(h*6);var f=h*6-i;var p=v*(1-s);var q=v*(1-f*s);var t=v*(1-(1-f)*s);switch(i%6){case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;case 4:r=t;g=p;b=v;break;case 5:r=v;g=p;b=q;break}return{r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)}}function _rgbToHsb(rgb){if(!rgb){return null}var r=rgb.r;var g=rgb.g;var b=rgb.b;var max=Math.max(r,g,b);var min=Math.min(r,g,b);var d=max-min;var h;var s=max===0?0:d/max;var v=max/255;switch(max){case min:h=0;break;case r:h=g-b+d*(g<b?6:0);h/=6*d;break;case g:h=b-r+d*2;h/=6*d;break;case b:h=r-g+d*4;h/=6*d;break}return{h:h*360,s:s*100,b:v*100}}function _parseHSL(hslStr){var sliced=_slice(hslStr,'hsl(');if(sliced.length!==3){return null}var h=parseFloat(sliced[0]);var s=parseFloat(sliced[1]);var l=parseFloat(sliced[2]);if(isNaN(h)||isNaN(s)||isNaN(l)){return null}if(h<0||h>360||s<0||s>100||l<0||l>100){return null}return{h:h,s:s,l:l}}function _serializeHSL(hsl){if(hsl){var h=parseFloat(hsl.h.toFixed(2));var s=parseFloat(hsl.s.toFixed(2));var l=parseFloat(hsl.l.toFixed(2));return "hsl(".concat(h,",").concat(s,"%,").concat(l,"%)")}return ''}function _hslToRgb(hsl){if(!hsl){return null}var h=hsl.h/360;var s=hsl.s/100;var l=hsl.l/100;var r;var g;var b;if(s===0){r=g=b=l}else{var hue2rgb=function hue2rgb(p,q,t){if(t<0){t+=1}if(t>1){t-=1}if(t<1/6){return p+(q-p)*6*t}if(t<1/2){return q}if(t<2/3){return p+(q-p)*(2/3-t)*6}return p};var qValue=l<0.5?l*(1+s):l+s-l*s;var pValue=2*l-qValue;r=hue2rgb(pValue,qValue,h+1/3);g=hue2rgb(pValue,qValue,h);b=hue2rgb(pValue,qValue,h-1/3)}return{r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)}}function _rgbToHsl(rgb){if(!rgb){return null}var r=rgb.r/255;var g=rgb.g/255;var b=rgb.b/255;var max=Math.max(r,g,b);var min=Math.min(r,g,b);var h;var s;var l=(max+min)/2;if(max===min){h=s=0}else{var d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break}h/=6}return{h:h*360,s:s*100,l:l*100}}function _parseHSLA(hslaStr){var sliced=_slice(hslaStr,'hsla(');if(sliced.length!==4){return null}var h=parseFloat(sliced[0]);var s=parseFloat(sliced[1]);var l=parseFloat(sliced[2]);var a=parseFloat(sliced[3]);if(isNaN(h)||isNaN(s)||isNaN(l)){return null}if(h<0||h>360||s<0||s>100||l<0||l>100||a<0||a>1){return null}return{h:h,s:s,l:l,a:a}}function _serializeHSLA(hsla){if(hsla){var h=parseFloat(hsla.h.toFixed(2));var s=parseFloat(hsla.s.toFixed(2));var l=parseFloat(hsla.l.toFixed(2));var a=parseFloat(hsla.a.toFixed(2));return "hsla(".concat(h,",").concat(s,"%,").concat(l,"%,").concat(a,")")}return ''}var Color=function(){function Color(){_classCallCheck(this,Color);this._colorSpace=colorSpace.HEX;this._value='';this._alpha=1}_createClass(Color,[{key:"clone",value:function clone(){var clone=new this.constructor();clone.value=this.value;clone.alpha=this.alpha;return clone}},{key:"isSimilarTo",value:function isSimilarTo(compareColor,allowSlightColorDifference){if(this.rgb===null&&(!compareColor||compareColor.rgb===null)){return true}if(!compareColor||compareColor.rgb===null||this.rgb===null){return false}var allowedRgbDifference=1;var allowedAlphaDifference=0.01;if(allowSlightColorDifference===false){allowedRgbDifference=0;allowedAlphaDifference=0}var rgb=this.rgb;var rgb2=compareColor.rgb;var rDiff=Math.abs(rgb2.r-rgb.r);var gDiff=Math.abs(rgb2.g-rgb.g);var bDiff=Math.abs(rgb2.b-rgb.b);var aDiff=Math.abs(this.alpha-compareColor.alpha);if(rDiff<=allowedRgbDifference&&gDiff<=allowedRgbDifference&&bDiff<=allowedRgbDifference&&aDiff<=allowedAlphaDifference){return true}return false}},{key:"calculateTintColors",value:function calculateTintColors(amount){var tintColors=[];var tintColor=null;var rgb=this.rgb;if(rgb){var r=rgb.r;var g=rgb.g;var b=rgb.b;var tintFactor=1;for(var i=1;i<=amount;i+=1){tintFactor=i/(amount+1);tintColor=this.clone();tintColor.rgb={r:r+(255-r)*tintFactor,g:g+(255-g)*tintFactor,b:b+(255-b)*tintFactor};tintColors.push(tintColor)}}return tintColors}},{key:"calculateShadeColors",value:function calculateShadeColors(amount){var shadeColors=[];var shadeColor=null;var rgb=this.rgb;if(rgb){var r=rgb.r;var g=rgb.g;var b=rgb.b;var shadeFactor=1;for(var i=1;i<=amount;i+=1){shadeFactor=i/(amount+1);shadeColor=this.clone();shadeColor.rgb={r:r*(1-shadeFactor),g:g*(1-shadeFactor),b:b*(1-shadeFactor)};shadeColors.push(shadeColor)}}return shadeColors}},{key:"value",get:function get(){return this._value},set:function set(value){var rgba=_parseRGBA(value);var hsla=_parseHSLA(value);var rgb=_parseRGB(value);var cmyk=_parseCMYK(value);var hsb=_parseHSB(value);var hsl=_parseHSL(value);var hex=_parseHex(value);if(rgba!==null){this._colorSpace=colorSpace.RGB;this.alpha=rgba.a;value=_serializeRGB({r:rgba.r,g:rgba.g,b:rgba.b})}else if(hsla!==null){this._colorSpace=colorSpace.HSL;this.alpha=hsla.a;value=_serializeHSL({h:hsla.h,s:hsla.s,l:hsla.l})}else if(rgb!==null){this._colorSpace=colorSpace.RGB}else if(cmyk!==null){this._colorSpace=colorSpace.CMYK}else if(hsb!==null){this._colorSpace=colorSpace.HSB}else if(hsl!==null){this._colorSpace=colorSpace.HSL}else if(hex!==null){this._colorSpace=colorSpace.HEX}else{this._colorSpace=colorSpace.HEX;value=''}this._value=value}},{key:"alpha",get:function get(){return this._alpha},set:function set(value){if(isNaN(value)||value<0||value>1){return}this._alpha=transform.number(value)}},{key:"rgb",get:function get(){var rgb=null;if(this._colorSpace===colorSpace.RGB){rgb=_parseRGB(this.value)}else if(this._colorSpace===colorSpace.HEX){var hex=_parseHex(this.value);rgb=_hexToRgb(hex)}else if(this._colorSpace===colorSpace.CMYK){var cmyk=_parseCMYK(this.value);rgb=_cmykToRgb(cmyk)}else if(this._colorSpace===colorSpace.HSB){var hsb=_parseHSB(this.value);rgb=_hsbToRgb(hsb)}else if(this._colorSpace===colorSpace.HSL){var hsl=_parseHSL(this.value);rgb=_hslToRgb(hsl)}return rgb},set:function set(value){this.value=_serializeRGB(value)}},{key:"rgbValue",get:function get(){return _serializeRGB(this.rgb)},set:function set(value){this.value=value}},{key:"rgba",get:function get(){var rgb=this.rgb;if(rgb){return{r:rgb.r,g:rgb.g,b:rgb.b,a:this.alpha}}return null},set:function set(value){this.value=_serializeRGBA(value)}},{key:"rgbaValue",get:function get(){return _serializeRGBA(this.rgba)},set:function set(value){this.value=value}},{key:"hex",get:function get(){return _rgbToHex(this.rgb)},set:function set(value){this.value=_serializeHex(value)}},{key:"hexValue",get:function get(){return _serializeHex(this.hex)},set:function set(value){this.value=value}},{key:"cmyk",get:function get(){var cmyk=null;var rgb=null;if(this._colorSpace===colorSpace.RGB){rgb=_parseRGB(this.value);cmyk=_rgbToCmyk(rgb)}else if(this._colorSpace===colorSpace.HEX){var hex=_parseHex(this.value);rgb=_hexToRgb(hex);cmyk=_rgbToCmyk(rgb)}else if(this._colorSpace===colorSpace.CMYK){cmyk=_parseCMYK(this.value)}else if(this._colorSpace===colorSpace.HSB){var hsb=_parseHSB(this.value);rgb=_hsbToRgb(hsb);cmyk=_rgbToCmyk(rgb)}else if(this._colorSpace===colorSpace.HSL){var hsl=_parseHSL(this.value);rgb=_hslToRgb(hsl);cmyk=_rgbToCmyk(rgb)}return cmyk},set:function set(value){this.value=_serializeCMYK(value)}},{key:"cmykValue",get:function get(){return _serializeCMYK(this.cmyk)},set:function set(value){this.value=value}},{key:"hsb",get:function get(){var hsb=null;var rgb=null;if(this._colorSpace===colorSpace.RGB){rgb=_parseRGB(this.value);hsb=_rgbToHsb(rgb)}else if(this._colorSpace===colorSpace.HEX){var hex=_parseHex(this.value);rgb=_hexToRgb(hex);hsb=_rgbToHsb(rgb)}else if(this._colorSpace===colorSpace.CMYK){var cmyk=_parseCMYK(this.value);rgb=_cmykToRgb(cmyk);hsb=_rgbToHsb(rgb)}else if(this._colorSpace===colorSpace.HSB){hsb=_parseHSB(this.value)}else if(this._colorSpace===colorSpace.HSL){var hsl=_parseHSL(this.value);rgb=_hslToRgb(hsl);hsb=_rgbToHsb(rgb)}return hsb},set:function set(value){this.value=_serializeHSB(value)}},{key:"hsbValue",get:function get(){return _serializeHSB(this.hsb)},set:function set(value){this.value=value}},{key:"hsl",get:function get(){var hsl=null;var rgb=null;if(this._colorSpace===colorSpace.RGB){rgb=_parseRGB(this.value);hsl=_rgbToHsl(rgb)}else if(this._colorSpace===colorSpace.HEX){var hex=_parseHex(this.value);rgb=_hexToRgb(hex);hsl=_rgbToHsl(rgb)}else if(this._colorSpace===colorSpace.CMYK){var cmyk=_parseCMYK(this.value);rgb=_cmykToRgb(cmyk);hsl=_rgbToHsl(rgb)}else if(this._colorSpace===colorSpace.HSB){var hsb=_parseHSB(this.value);rgb=_hsbToRgb(hsb);hsl=_rgbToHsl(rgb)}else if(this._colorSpace===colorSpace.HSL){hsl=_parseHSL(this.value)}return hsl},set:function set(value){this.value=_serializeHSL(value)}},{key:"hslValue",get:function get(){return _serializeHSL(this.hsl)},set:function set(value){this.value=value}},{key:"hsla",get:function get(){var hsl=this.hsl;if(hsl){return{h:hsl.h,s:hsl.s,l:hsl.l,a:this.alpha}}return null},set:function set(value){this.value=_serializeHSLA(value)}},{key:"hslaValue",get:function get(){return _serializeHSLA(this.hsla)},set:function set(value){this.value=value}}]);return Color}();var ColorInputItem=function(_BaseComponent){_inherits(ColorInputItem,_BaseComponent);var _super=_createSuper(ColorInputItem);function ColorInputItem(){_classCallCheck(this,ColorInputItem);return _super.apply(this,arguments)}_createClass(ColorInputItem,[{key:"render",value:function render(){_get(_getPrototypeOf(ColorInputItem.prototype),"render",this).call(this);this.setAttribute('role','option')}},{key:"value",get:function get(){return this._value||''},set:function set(value){var color=new Color();color.value=value;this._value=color.rgb!==null?value:'';this._reflectAttribute('value',this._value)}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){value=transform.booleanAttr(value);this._selected=value;this._reflectAttribute('selected',this._selected);this.classList.toggle('is-selected',this._selected);this.setAttribute('aria-selected',this._selected);this.trigger('coral-colorinput-item:_selectedchanged')}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ColorInputItem),"observedAttributes",this).concat(['selected','value'])}}]);return ColorInputItem}(BaseComponent(HTMLElement));var BaseColorInputAbstractSubview=function BaseColorInputAbstractSubview(superClass){return function(_superClass){_inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){var _this;_classCallCheck(this,_class);_this=_super.call(this);_this._events={'click ._coral-ColorInput-preview':'_onPreviewClicked'};_this.constructor._lastValidColor=null;return _this}_createClass(_class,[{key:"_onPreviewClicked",value:function _onPreviewClicked(){if(this._colorinput.valueAsColor!==null){this.constructor._lastValidColor=this._colorinput.valueAsColor;this._colorinput._setActiveColor(null)}else if(this.constructor._lastValidColor!==null){this._colorinput._setActiveColor(this.constructor._lastValidColor)}}},{key:"_beforeOverlayOpen",value:function _beforeOverlayOpen(){}},{key:"_onColorInputChange",value:function _onColorInputChange(){}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(_class.prototype),"connectedCallback",this).call(this);var overlay=this.closest('._coral-ColorInput-overlay');if(overlay&&overlay._colorinput){this.__beforeOverlayOpen=this._beforeOverlayOpen.bind(this);this.__onColorInputChange=this._onColorInputChange.bind(this);this._colorinput=overlay._colorinput;this._colorinput.on('coral-overlay:beforeopen',this.__beforeOverlayOpen);this._colorinput.on('coral-colorinput:_valuechange',this.__onColorInputChange);this._onColorInputChange()}}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(_class.prototype),"disconnectedCallback",this).call(this);if(this._colorinput){this._colorinput.off('coral-overlay:beforeopen',this.__beforeOverlayOpen);this._colorinput.off('coral-colorinput:_valuechange',this.__onColorInputChange)}this._colorinput=null}}]);return _class}(superClass)};var template$q=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["label"]=document.createElement("div");el0.className+=" _coral-Slider-labelContainer";el0.setAttribute("handle","label");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["labelContent"]=document.createElement("label");el2.className+=" _coral-Slider-label";el2.setAttribute("handle","labelContent");el0.appendChild(el2);var el3=document.createTextNode("\n  ");el0.appendChild(el3);var el4=this["labelValue"]=document.createElement("label");el4.className+=" _coral-Slider-value";el4.setAttribute("handle","labelValue");el4.setAttribute("hidden","");el0.appendChild(el4);var el5=document.createTextNode("\n");el0.appendChild(el5);frag.appendChild(el0);var el6=document.createTextNode("\n");frag.appendChild(el6);var el7=this["controls"]=document.createElement("div");el7.className+=" _coral-Slider-controls";el7.setAttribute("role","presentation");el7.setAttribute("handle","controls");var el8=document.createTextNode("\n  ");el7.appendChild(el8);var el9=document.createElement("div");el9.className+=" _coral-Slider-track";el7.appendChild(el9);var el10=document.createTextNode("\n  ");el7.appendChild(el10);var el11=this["leftHandle"]=document.createElement("div");el11.className+=" _coral-Slider-handle";el11.setAttribute("handle","leftHandle");var el12=document.createTextNode("\n    ");el11.appendChild(el12);var el13=this["leftInput"]=document.createElement("input");el13.setAttribute("handle","leftInput");el13.setAttribute("value","1");el13.setAttribute("type","range");el13.className+=" _coral-Slider-input";el11.appendChild(el13);var el14=document.createTextNode("\n  ");el11.appendChild(el14);el7.appendChild(el11);var el15=document.createTextNode("\n  ");el7.appendChild(el15);var el16=document.createElement("div");el16.className+=" _coral-Slider-track";el7.appendChild(el16);var el17=document.createTextNode("\n");el7.appendChild(el17);frag.appendChild(el7);var el18=document.createTextNode("\n");frag.appendChild(el18);return frag};var CLASSNAME$I='_coral-Slider';var CLASSNAME_HANDLE='_coral-Slider-handle';var CLASSNAME_INPUT='_coral-Slider-input';var orientation$2={HORIZONTAL:'horizontal',VERTICAL:'vertical'};var Slider=function(_BaseFormField){_inherits(Slider,_BaseFormField);var _super=_createSuper(Slider);function Slider(){var _this;_classCallCheck(this,Slider);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'key:up ._coral-Slider-handle':'_handleKey','key:right ._coral-Slider-handle':'_handleKey','key:down ._coral-Slider-handle':'_handleKey','key:left ._coral-Slider-handle':'_handleKey','key:pageUp ._coral-Slider-handle':'_handleKey','key:pageDown ._coral-Slider-handle':'_handleKey','key:home ._coral-Slider-handle':'_handleKey','key:end ._coral-Slider-handle':'_handleKey','input':'_onInputChangeHandler','touchstart':'_onMouseDown','mousedown':'_onMouseDown','capture:focus':'_focus','capture:blur':'_blur'}));_this._elements={};_this._getTemplate().call(_this._elements,{commons:commons});_this._labellableElement=_this._elements.leftInput;_this._elements.content=_this.querySelector('coral-slider-content')||document.createElement('coral-slider-content');var handleContainer=_this._elements.controls;_this._elements.handles=Array.prototype.slice.call(handleContainer.querySelectorAll(".".concat(CLASSNAME_HANDLE)));_this._elements.inputs=Array.prototype.slice.call(handleContainer.querySelectorAll(".".concat(CLASSNAME_INPUT)));_this._onInteraction=_this._onInteraction.bind(_assertThisInitialized(_this));_this.items._startHandlingItems(true);return _this}_createClass(Slider,[{key:"_getValueOf",value:function _getValueOf(name,defaultValue){if(typeof this["_".concat(name)]==='number'){return this["_".concat(name)]}else if(this.hasAttribute(name)){return parseFloat(this.getAttribute(name))}return defaultValue}},{key:"_onMouseDown",value:function _onMouseDown(event){if(this.disabled){return}if(event instanceof MouseEvent){if((event.which||event.button)!==1){return}}event.preventDefault();this._currentHandle=event.target.closest(".".concat(CLASSNAME_HANDLE));if(!this._currentHandle){var p=this._getPoint(event);var val=this._getValueFromCoord(p.pageX,p.pageY,true);this._currentHandle=this._findNearestHandle(p.pageX,p.pageY);this._updateValue(this._currentHandle,val);this._setHandleFocus(this._currentHandle)}this._currentHandle.classList.add('is-dragged');document.body.classList.add('u-coral-closedHand');this._draggingHandler=this._handleDragging.bind(this);this._mouseUpHandler=this._mouseUp.bind(this);events.on('mousemove.Slider',this._draggingHandler);events.on('mouseup.Slider',this._mouseUpHandler);events.on('touchmove.Slider',this._draggingHandler);events.on('touchend.Slider',this._mouseUpHandler);events.on('touchcancel.Slider',this._mouseUpHandler);this._setHandleFocus(this._currentHandle)}},{key:"_getPoint",value:function _getPoint(event){if(event.changedTouches&&event.changedTouches.length>0){return event.changedTouches[0]}else if(event.touches&&event.touches.length>0){return event.touches[0]}return event}},{key:"_setHandleFocus",value:function _setHandleFocus(handle){handle.querySelector(".".concat(CLASSNAME_INPUT)).focus()}},{key:"_handleKey",value:function _handleKey(event){event.preventDefault();this._focus(event);var handle=event.matchedTarget;var idx=this._elements.handles.indexOf(handle);var v=parseInt(this._values[idx],10);if(event.keyCode===Keys.keyToCode('up')||event.keyCode===Keys.keyToCode('right')||event.keyCode===Keys.keyToCode('pageUp')){v+=this.step}else if(event.keyCode===Keys.keyToCode('down')||event.keyCode===Keys.keyToCode('left')||event.keyCode===Keys.keyToCode('pageDown')){v-=this.step}else if(event.keyCode===Keys.keyToCode('home')){v=this.min}else if(event.keyCode===Keys.keyToCode('end')){v=this.max}this._updateValue(handle,v)}},{key:"_findNearestHandle",value:function _findNearestHandle(mouseX,mouseY){var closestDistance=Infinity;var closestHandle;function calculateDistance(elem,x,y){var box=elem.getBoundingClientRect();var top=box.top+window.pageYOffset;var left=box.left+window.pageXOffset;return Math.floor(Math.sqrt(Math.pow(x-(left+box.width/2),2)+Math.pow(y-(top+box.height/2),2)))}this._elements.handles.forEach(function(handle){var distance=calculateDistance(handle,mouseX,mouseY);if(distance<closestDistance){closestDistance=distance;closestHandle=handle}});return closestHandle}},{key:"_moveHandles",value:function _moveHandles(){var _this2=this;var calculatePercent=function calculatePercent(value){return(value-_this2.min)/(_this2.max-_this2.min)*100};var labelValue=[];if(this._elements.handles.length===1){var handle=this._elements.handles[0];var percent=calculatePercent(this._values[0]);handle.style.left="".concat(percent,"%");handle.previousElementSibling.style.width="".concat(percent,"%");handle.nextElementSibling.style.width="".concat(100-percent,"%");labelValue.push(this._getLabel(this._values[0]))}else{var leftHandle=this._elements.handles[0];var leftPercent=calculatePercent(this._values[0]);leftHandle.style.left="".concat(leftPercent,"%");var rightHandle=this._elements.handles[1];var rightPercent=calculatePercent(this._values[1]);rightHandle.style.left="".concat(rightPercent,"%");leftHandle.previousElementSibling.style.width="".concat(leftPercent,"%");leftHandle.nextElementSibling.style.left="".concat(leftPercent,"%");var middlePercent=100-rightPercent;leftHandle.nextElementSibling.style.right="".concat(middlePercent,"%");rightHandle.nextElementSibling.style.width="".concat(middlePercent,"%");labelValue.push(this._getLabel(this._values[0]));labelValue.push(this._getLabel(this._values[1]))}this._elements.labelValue.textContent=labelValue.length>1?labelValue.join(' - '):labelValue[0]}},{key:"_onInputChange",value:function _onInputChange(event){if(typeof event.target.oninput==='undefined'){this._onInputChangeHandler(event)}}},{key:"_onInputChangeHandler",value:function _onInputChangeHandler(event){event.stopPropagation();var handle=event.target.closest(".".concat(CLASSNAME_HANDLE));if(event.target===document.activeElement){this._focus(event)}this._updateValue(handle,event.target.value,true)}},{key:"_focus",value:function _focus(event){event.target.closest(".".concat(CLASSNAME_HANDLE)).classList.add('is-focused');events.on('touchstart.Slider',this._onInteraction);events.on('mousedown.Slider',this._onInteraction)}},{key:"_onInteraction",value:function _onInteraction(event){if(!this.contains(event.target)){return}event.target.blur()}},{key:"_blur",value:function _blur(event){event.target.closest(".".concat(CLASSNAME_HANDLE)).classList.remove('is-focused');events.off('touchstart.Slider');events.off('mousedown.Slider')}},{key:"_handleDragging",value:function _handleDragging(event){var p=this._getPoint(event);this._updateValue(this._currentHandle,this._getValueFromCoord(p.pageX,p.pageY));event.preventDefault()}},{key:"_updateValue",value:function _updateValue(handle,val,forceEvent){var idx=this._elements.handles.indexOf(handle);var values=this._values;values[idx]=val;var oldValues=this._values;this._values=values;var newValues=this._values;if(forceEvent||oldValues.join(':')!==newValues.join(':')){this.trigger('change')}}},{key:"_getValueFromCoord",value:function _getValueFromCoord(posX,posY,restrictBounds){var boundingClientRect=this.getBoundingClientRect();var elementWidth=boundingClientRect.width;var percent=(posX-boundingClientRect.left)/elementWidth;if(restrictBounds&&(percent<0||percent>1)){return NaN}var rawValue=this.min+(this.max-this.min)*percent;return this._snapValueToStep(rawValue,this.min,this.max,this.step)}},{key:"_snapValueToStep",value:function _snapValueToStep(rawValue,min,max,step){step=parseFloat(step);var remainder=(rawValue-min)%step;var floatString=step.toString().replace(/^(?:\d+)(?:\.(\d+))?$/g,'$1');var precision=floatString.length;var snappedValue;if(Math.abs(remainder)*2>=step){snappedValue=rawValue-Math.abs(remainder)+step}else{snappedValue=rawValue-remainder}if(snappedValue<min){snappedValue=min}else if(snappedValue>max){snappedValue=min+Math.floor((max-min)/step)*step}if(precision>0){snappedValue=parseFloat(snappedValue.toFixed(precision))}return snappedValue}},{key:"_mouseUp",value:function _mouseUp(){if(this._currentHandle){this._currentHandle.style.cursor='grab';this._currentHandle.classList.remove('is-dragged')}document.body.classList.remove('u-coral-closedHand');events.off('mousemove.Slider',this._draggingHandler);events.off('touchmove.Slider',this._draggingHandler);events.off('mouseup.Slider',this._mouseUpHandler);events.off('touchend.Slider',this._mouseUpHandler);events.off('touchcancel.Slider',this._mouseUpHandler);this._currentHandle=null;this._draggingHandler=null;this._mouseUpHandler=null}},{key:"_getLabel",value:function _getLabel(value){var items=this.items.getAll();var item;for(var i=0;i<items.length;i+=1){if(transform.number(items[i].getAttribute('value'))===transform.number(value)){item=items[i];break}}return item?item.innerHTML:value}},{key:"_getTemplate",value:function _getTemplate(){return template$q}},{key:"render",value:function render(){_get(_getPrototypeOf(Slider.prototype),"render",this).call(this);this.classList.add(CLASSNAME$I);if(!this._min){this.min=this.min}if(!this._max){this.max=this.max}if(!this._step){this.step=this.step}if(!this._orientation){this.orientation=orientation$2.HORIZONTAL}this.setAttribute('role','presentation');var template=this.querySelectorAll('._coral-Slider-labelContainer, ._coral-Slider-controls');for(var i=0;i<template.length;i+=1){template[i].remove()}var frag=document.createDocumentFragment();frag.appendChild(this._elements.label);frag.appendChild(this._elements.controls);var content=this._elements.content;if(!content.parentNode){while(this.firstChild){var child=this.firstChild;if(child.nodeName==='CORAL-SLIDER-ITEM'){frag.appendChild(child)}else{content.appendChild(child)}}}this.appendChild(frag);this.content=content;this._moveHandles()}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-slider-content',insert:function insert(content){this._elements.labelContent.appendChild(content)}})}},{key:"items",get:function get(){if(!this._items){this._items=new Collection$1({host:this,itemTagName:'coral-slider-item'})}return this._items}},{key:"step",get:function get(){return this._getValueOf('step',1)},set:function set(value){var _this3=this;value=transform.number(value);if(value>0){this._step=value;this._reflectAttribute('step',this._step);this._elements.inputs.forEach(function(input){input.setAttribute('step',_this3._step)})}}},{key:"min",get:function get(){return this._getValueOf('min',1)},set:function set(value){var _this4=this;this._min=transform.number(value);this._reflectAttribute('min',this._min);this._elements.inputs.forEach(function(input){input.setAttribute('min',_this4._min)})}},{key:"max",get:function get(){return this._getValueOf('max',100)},set:function set(value){var _this5=this;this._max=transform.number(value);this._reflectAttribute('max',this._max);this._elements.inputs.forEach(function(input){input.setAttribute('max',_this5._max)})}},{key:"tooltips",get:function get(){return this.showValue},set:function set(value){this.showValue=value}},{key:"showValue",get:function get(){return this._showValue||false},set:function set(value){this._showValue=transform.booleanAttr(value);this._reflectAttribute('showvalue',this._showValue);this._elements.labelValue.hidden=!this._showValue}},{key:"orientation",get:function get(){return this._orientation||orientation$2.HORIZONTAL},set:function set(value){value=transform.string(value).toLowerCase();this._orientation=validate.enumeration(orientation$2)(value)&&value||orientation$2.HORIZONTAL;this._reflectAttribute('orientation',this._orientation)}},{key:"filled",get:function get(){return this._filled||false},set:function set(value){this._filled=transform.booleanAttr(value);this._reflectAttribute('filled',this._filled);this.classList.toggle("".concat(CLASSNAME$I,"--filled"),this._filled)}},{key:"valueAsNumber",get:function get(){return parseFloat(this.value)},set:function set(value){this.value=transform.float(value)}},{key:"name",get:function get(){return this._elements.inputs[0].name},set:function set(value){var _this6=this;this._reflectAttribute('name',value);this._elements.inputs.forEach(function(input){input.name=_this6.getAttribute('name')})}},{key:"value",get:function get(){return this._elements.inputs[0].value},set:function set(value){value=transform.number(value);if(this._elements.handles.length===1){var input=this._elements.inputs[0];value=this._snapValueToStep(value,this.min,this.max,this.step);input.value=value;if(input.value){input.setAttribute('aria-valuenow',value);input.setAttribute('aria-valuetext',this._getLabel(value))}else{input.removeAttribute('aria-valuenow');input.removeAttribute('aria-valuetext')}this._moveHandles();var valueAttribute=this.getAttribute('value');input[valueAttribute?'setAttribute':'removeAttribute']('value',valueAttribute)}}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){var _this7=this;this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this._elements.inputs.forEach(function(input){input.disabled=_this7._disabled})}},{key:"required",get:function get(){return this._required||false},set:function set(value){var _this8=this;this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.inputs.forEach(function(input){input.required=_this8._required})}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){var _this9=this;this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.inputs.forEach(function(input){input.readOnly=_this9._readOnly})}},{key:"labelledBy",get:function get(){return _get(_getPrototypeOf(Slider.prototype),"labelledBy",this)},set:function set(value){_set(_getPrototypeOf(Slider.prototype),"labelledBy",value,this,true);if(this._elements.inputs.length>1){var input=this._elements.inputs[1];var labelledBy=this.labelledBy;input[labelledBy?'setAttribute':'removeAttribute']('aria-labelledby',labelledBy)}}},{key:"_values",get:function get(){return this._elements.inputs.map(function(input){return String(parseInt(input.value,10))})},set:function set(values){var _this10=this;if(values&&values.length===this._elements.handles.length){this._elements.inputs.forEach(function(input,i){var value=values[i]=_this10._snapValueToStep(values[i],_this10.min,_this10.max,_this10.step);input.value=value;if(input.value){input.setAttribute('aria-valuenow',value);input.setAttribute('aria-valuetext',_this10._getLabel(value))}else{input.removeAttribute('aria-valuenow');input.removeAttribute('aria-valuetext')}});this._moveHandles()}}},{key:"_contentZones",get:function get(){return{'coral-slider-content':'content'}}}],[{key:"orientation",get:function get(){return orientation$2}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Slider),"_attributePropertyMap",this),{showvalue:'showValue'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Slider),"observedAttributes",this).concat(['step','min','max','tooltips','showvalue','orientation','filled'])}}]);return Slider}(BaseFormField(BaseComponent(HTMLElement)));var SliderContent=(function(){return document.createElement('coral-slider-content')});var CLASSNAME$J='_coral-Slider-item';var SliderItem=function(_BaseComponent){_inherits(SliderItem,_BaseComponent);var _super=_createSuper(SliderItem);function SliderItem(){_classCallCheck(this,SliderItem);return _super.apply(this,arguments)}_createClass(SliderItem,[{key:"render",value:function render(){_get(_getPrototypeOf(SliderItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$J)}},{key:"value",get:function get(){return this.getAttribute('value')},set:function set(value){this._reflectAttribute('value',transform.string(value))}},{key:"content",get:function get(){return this},set:function set(value){if(value instanceof HTMLElement){this.innerHTML=value.innerHTML}}}]);return SliderItem}(BaseComponent(HTMLElement));var template$r=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;data.uidMin=data.commons.getUID();data.uidMax=data.commons.getUID();data_0=data;var el1=document.createTextNode("\n\n");frag.appendChild(el1);var el2=this["label"]=document.createElement("div");el2.className+=" _coral-Slider-labelContainer";el2.setAttribute("handle","label");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=this["labelContent"]=document.createElement("label");el4.className+=" _coral-Slider-label";el4.setAttribute("handle","labelContent");el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);var el6=this["labelValue"]=document.createElement("label");el6.className+=" _coral-Slider-value";el6.setAttribute("handle","labelValue");el6.setAttribute("hidden","");el2.appendChild(el6);var el7=document.createTextNode("\n");el2.appendChild(el7);frag.appendChild(el2);var el8=document.createTextNode("\n");frag.appendChild(el8);var el9=this["controls"]=document.createElement("div");el9.className+=" _coral-Slider-controls";el9.setAttribute("role","presentation");el9.setAttribute("handle","controls");var el10=document.createTextNode("\n  ");el9.appendChild(el10);var el11=document.createElement("div");el11.className+=" _coral-Slider-track";el9.appendChild(el11);var el12=document.createTextNode("\n  ");el9.appendChild(el12);var el13=this["leftHandle"]=document.createElement("div");el13.className+=" _coral-Slider-handle";el13.setAttribute("handle","leftHandle");var el14=document.createTextNode("\n    ");el13.appendChild(el14);var el15=this["leftLabel"]=document.createElement("label");el15.setAttribute("handle","leftLabel");el15.className+=" u-coral-screenReaderOnly";el15.id=data_0["uidMin"]+"-label";el15.setAttribute("for",data_0["uidMin"]);el15.setAttribute("aria-hidden","true");el15.textContent="Minimum";el13.appendChild(el15);var el16=document.createTextNode("\n    ");el13.appendChild(el16);var el17=this["leftInput"]=document.createElement("input");el17.setAttribute("handle","leftInput");el17.setAttribute("value","1");el17.setAttribute("type","range");el17.className+=" _coral-Slider-input";el17.id=data_0["uidMin"];el13.appendChild(el17);var el18=document.createTextNode("\n  ");el13.appendChild(el18);el9.appendChild(el13);var el19=document.createTextNode("\n  ");el9.appendChild(el19);var el20=document.createElement("div");el20.className+=" _coral-Slider-track";el9.appendChild(el20);var el21=document.createTextNode("\n  ");el9.appendChild(el21);var el22=this["rightHandle"]=document.createElement("div");el22.className+=" _coral-Slider-handle";el22.setAttribute("handle","rightHandle");var el23=document.createTextNode("\n    ");el22.appendChild(el23);var el24=this["rightLabel"]=document.createElement("label");el24.setAttribute("handle","rightLabel");el24.className+=" u-coral-screenReaderOnly";el24.id=data_0["uidMax"]+"-label";el24.setAttribute("for",data_0["uidMax"]);el24.setAttribute("aria-hidden","true");el24.textContent="Maximum";el22.appendChild(el24);var el25=document.createTextNode("\n    ");el22.appendChild(el25);var el26=this["rightInput"]=document.createElement("input");el26.setAttribute("handle","rightInput");el26.setAttribute("value","100");el26.setAttribute("type","range");el26.className+=" _coral-Slider-input";el26.id=data_0["uidMax"];el22.appendChild(el26);var el27=document.createTextNode("\n  ");el22.appendChild(el27);el9.appendChild(el22);var el28=document.createTextNode("\n  ");el9.appendChild(el28);var el29=document.createElement("div");el29.className+=" _coral-Slider-track";el9.appendChild(el29);var el30=document.createTextNode("\n");el9.appendChild(el30);frag.appendChild(el9);var el31=document.createTextNode("\n");frag.appendChild(el31);return frag};var RangedSlider=function(_Slider){_inherits(RangedSlider,_Slider);var _super=_createSuper(RangedSlider);function RangedSlider(){_classCallCheck(this,RangedSlider);return _super.apply(this,arguments)}_createClass(RangedSlider,[{key:"_getHighestValue",value:function _getHighestValue(){return Math.max.apply(null,this.values)}},{key:"_getLowestValue",value:function _getLowestValue(){return Math.min.apply(null,this.values)}},{key:"_updateValue",value:function _updateValue(handle,val){var idx=this._elements.handles.indexOf(handle);if(idx===0){if(val>parseFloat(this.values[1])){val=this.values[1]}this._elements.rightInput.min=val;this._elements.rightHandle.setAttribute('aria-valuemin',val)}else{if(val<parseFloat(this.values[0])){val=this.values[0]}this._elements.leftInput.max=val;this._elements.leftHandle.setAttribute('aria-valuemax',val)}var resValue=[this.values[0],this.values[1]];resValue[idx]=val;var oldValues=this.values;this.values=resValue;var newValues=this.values;if(oldValues.join(':')!==newValues.join(':')){this.trigger('change')}}},{key:"_getTemplate",value:function _getTemplate(){return template$r}},{key:"clear",value:function clear(){this.startValue=this.min;this.endValue=this.max}},{key:"reset",value:function reset(){var initialStartValue=this.getAttribute('startvalue')||this.getAttribute('value');var initialEndValue=this.getAttribute('endvalue');this.startValue=transform.string(initialStartValue);this.endValue=transform.string(initialEndValue)}},{key:"render",value:function render(){_get(_getPrototypeOf(RangedSlider.prototype),"render",this).call(this);this.classList.add('_coral-Slider--range');this.setAttribute('filled','')}},{key:"filled",get:function get(){return true},set:function set(value){if(!transform.booleanAttr(value)){commons._log('warn','Coral.RangedSlider: filled can not be set to false.')}}},{key:"value",get:function get(){return this.startValue},set:function set(value){this.startValue=value}},{key:"startValue",get:function get(){return this.values[0]||'1'},set:function set(value){value=String(this._snapValueToStep(transform.number(value),this.min,this.max,this.step));var values=this.values;values[0]=value;this.values=values;var input=this._elements.inputs[0];var valueAttribute=this.getAttribute('startvalue')||this.getAttribute('value');input[valueAttribute?'setAttribute':'removeAttribute']('value',valueAttribute)}},{key:"endValue",get:function get(){return this.values[1]||'100'},set:function set(value){value=String(this._snapValueToStep(transform.number(value),this.min,this.max,this.step));var values=this.values;values[1]=value;this.values=values;var input=this._elements.inputs[1];var valueAttribute=this.getAttribute('endvalue');input[valueAttribute?'setAttribute':'removeAttribute']('value',valueAttribute)}},{key:"values",get:function get(){return this._values},set:function set(values){this._values=values}}],[{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(RangedSlider),"_attributePropertyMap",this),{startvalue:'startValue',endvalue:'endValue'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(RangedSlider),"observedAttributes",this).concat(['startvalue','endvalue'])}}]);return RangedSlider}(Slider);commons._define('coral-slider-item',SliderItem);commons._define('coral-rangedslider',RangedSlider);commons._define('coral-slider',Slider);Slider.Content=SliderContent;Slider.Item=SliderItem;var template$s=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["label"]=document.createElement("div");el0.className+=" _coral-Slider-labelContainer";el0.setAttribute("handle","label");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["labelContent"]=document.createElement("label");el2.className+=" _coral-Slider-label";el2.setAttribute("handle","labelContent");el0.appendChild(el2);var el3=document.createTextNode("\n  ");el0.appendChild(el3);var el4=this["labelValue"]=document.createElement("label");el4.className+=" _coral-Slider-value";el4.setAttribute("handle","labelValue");el4.setAttribute("hidden","");el0.appendChild(el4);var el5=document.createTextNode("\n");el0.appendChild(el5);frag.appendChild(el0);var el6=document.createTextNode("\n");frag.appendChild(el6);var el7=this["controls"]=document.createElement("div");el7.className+=" _coral-Slider-controls u-coral-noMargin";el7.setAttribute("role","presentation");el7.setAttribute("handle","controls");var el8=document.createTextNode("\n  ");el7.appendChild(el8);var el9=this["bar"]=document.createElement("div");el9.className+=" _coral-Slider-track _coral-ColorInput-sliderBar u-coral-clearFix";el9.setAttribute("handle","bar");el7.appendChild(el9);var el10=document.createTextNode("\n  ");el7.appendChild(el10);var el11=this["leftHandle"]=document.createElement("div");el11.className+=" _coral-Slider-handle _coral-ColorInput-sliderHandle";el11.setAttribute("handle","leftHandle");var el12=document.createTextNode("\n    ");el11.appendChild(el12);var el13=this["leftInput"]=document.createElement("input");el13.setAttribute("aria-orientation","horizontal");el13.setAttribute("handle","leftInput");el13.setAttribute("value","1");el13.setAttribute("type","range");el13.className+=" _coral-Slider-input";el11.appendChild(el13);var el14=document.createTextNode("\n  ");el11.appendChild(el14);el7.appendChild(el11);var el15=document.createTextNode("\n");el7.appendChild(el15);frag.appendChild(el7);var el16=document.createTextNode("\n");frag.appendChild(el16);return frag};var CLASSNAMES$1=['_coral-ColorInput-slider','_coral-Slider--color'];var ColorInputSlider=function(_Slider){_inherits(ColorInputSlider,_Slider);var _super=_createSuper(ColorInputSlider);function ColorInputSlider(){_classCallCheck(this,ColorInputSlider);return _super.apply(this,arguments)}_createClass(ColorInputSlider,[{key:"_moveHandles",value:function _moveHandles(){var _this=this;var calculatePercent=function calculatePercent(value){return(value-_this.min)/(_this.max-_this.min)*100};var labelValue=[];this._elements.handles.forEach(function(handle,index){var percent=calculatePercent(_this._values[index]);handle.style.left="".concat(percent,"%");labelValue.push(_this._getLabel(_this._values[index]))});this._elements.labelValue.textContent=labelValue.length>1?labelValue.join(' - '):labelValue[0]}},{key:"_getTemplate",value:function _getTemplate(){return template$s}},{key:"render",value:function render(){var _this$classList;_get(_getPrototypeOf(ColorInputSlider.prototype),"render",this).call(this);(_this$classList=this.classList).add.apply(_this$classList,CLASSNAMES$1)}},{key:"gradient",get:function get(){return this._gradient||''},set:function set(value){this._gradient=transform.string(value);var bar=this._elements.bar;var barStyle=bar.style;var stops=this.gradient.split(' ');var amountStops=stops.length;barStyle.backgroundImage='none';barStyle.filter='';if(amountStops<2){return}var partialGradientStr='';for(var i=0;i<amountStops;i+=1){partialGradientStr+=", ".concat(stops[i]," ").concat(Math.abs(i*100/(amountStops-1)),"%")}barStyle.backgroundImage="-moz-linear-gradient(to right".concat(partialGradientStr,")");barStyle.backgroundImage="-ms-linear-gradient(to right".concat(partialGradientStr,")");barStyle.backgroundImage="-o-linear-gradient(to right".concat(partialGradientStr,")");barStyle.backgroundImage="-webkit-linear-gradient(to right".concat(partialGradientStr,")");barStyle.backgroundImage="linear-gradient(to right".concat(partialGradientStr,")");barStyle.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='".concat(stops[0],"', endColorstr='").concat(stops[1],"', gradientType=1)")}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ColorInputSlider),"observedAttributes",this).concat(['gradient'])}}]);return ColorInputSlider}(Slider);var template$t=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;var uid=data.commons.getUID();data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["propertiesSubview"]=document.createElement("div");el2.className+=" _coral-ColorInput-propertiesSubview";el2.setAttribute("handle","propertiesSubview");el2.setAttribute("role","group");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=document.createElement("div");el4.className+=" _coral-ColorInput-previewView";el4.setAttribute("role","presentation");var el5=document.createTextNode("\n    ");el4.appendChild(el5);var el6=document.createElement("div");el6.className+=" _coral-ColorInput-preview-container";el6.setAttribute("role","presentation");var el7=document.createTextNode("\n      ");el6.appendChild(el7);var el8=this["colorPreview2"]=document.createElement("button","coral-button");el8.setAttribute("is","coral-button");el8.setAttribute("handle","colorPreview2");el8.setAttribute("variant","action");el8.className+=" _coral-ColorInput-preview";el8.setAttribute("type","button");el8.setAttribute("aria-pressed","false");el6.appendChild(el8);var el9=document.createTextNode("\n    ");el6.appendChild(el9);el4.appendChild(el6);var el10=document.createTextNode("\n    ");el4.appendChild(el10);var el11=document.createElement("div");el11.className+=" _coral-ColorInput-editHex";el11.setAttribute("role","presentation");var el12=document.createTextNode("\n      ");el11.appendChild(el12);var el13=document.createElement("label");el13.className+=" _coral-ColorInput-editHex-label";var el14=document.createTextNode("\n        ");el13.appendChild(el14);var el15=document.createElement("span");el15.textContent="#";el13.appendChild(el15);var el16=document.createTextNode("\n        ");el13.appendChild(el16);var el17=this["hexInput"]=document.createElement("input","coral-textfield");el17.className+=" _coral-ColorInput-editHex-input";el17.setAttribute("type","text");el17.setAttribute("handle","hexInput");el17.setAttribute("is","coral-textfield");el17.setAttribute("aria-label",data_0["i18n"]["get"]('HEX'));el17.setAttribute("placeholder",data_0["i18n"]["get"]('HEX'));el17.setAttribute("maxlength","6");el17.setAttribute("value","");el17.setAttribute("variant","quiet");el13.appendChild(el17);var el18=document.createTextNode("\n      ");el13.appendChild(el18);el11.appendChild(el13);var el19=document.createTextNode("\n    ");el11.appendChild(el19);el4.appendChild(el11);var el20=document.createTextNode("\n  ");el4.appendChild(el20);el2.appendChild(el4);var el21=document.createTextNode("\n  ");el2.appendChild(el21);var el22=document.createElement("div");el22.className+=" _coral-ColorInput-rgbaView _coral-ColorInput-editRgba";el22.setAttribute("role","presentation");var el23=document.createTextNode("\n    ");el22.appendChild(el23);var el24=document.createElement("div");el24.setAttribute("role","group");el24.className+=" _coral-ColorInput-editRgba-group";var el25=document.createTextNode("\n      ");el24.appendChild(el25);var el26=document.createElement("label");el26.className+=" _coral-ColorInput-editRgba-group-label";el26.id=uid+"-r-label";el26.setAttribute("for",uid+"-r");el26.textContent=data_0["i18n"]["get"]('R');el24.appendChild(el26);var el27=document.createTextNode("\n      ");el24.appendChild(el27);var el28=this["redSlider"]=document.createElement("coral-colorinput-slider");el28.setAttribute("handle","redSlider");el28.setAttribute("min","0");el28.setAttribute("max","255");el28.setAttribute("value","0");el28.setAttribute("gradient","#000000 #FF0000");el28.setAttribute("labelledby",uid+"-r-label");el24.appendChild(el28);var el29=document.createTextNode("\n      ");el24.appendChild(el29);var el30=this["redInput"]=document.createElement("input","coral-textfield");el30.className+=" _coral-ColorInput-editRgba-group-input";el30.id=uid+"-r";el30.setAttribute("handle","redInput");el30.setAttribute("is","coral-textfield");el30.setAttribute("type","number");el30.setAttribute("placeholder",data_0["i18n"]["get"]('R'));el30.setAttribute("maxlength","3");el30.setAttribute("value","");el30.setAttribute("variant","quiet");el24.appendChild(el30);var el31=document.createTextNode("\n    ");el24.appendChild(el31);el22.appendChild(el24);var el32=document.createTextNode("\n    ");el22.appendChild(el32);var el33=document.createElement("div");el33.setAttribute("role","group");el33.className+=" _coral-ColorInput-editRgba-group";var el34=document.createTextNode("\n      ");el33.appendChild(el34);var el35=document.createElement("label");el35.className+=" _coral-ColorInput-editRgba-group-label";el35.id=uid+"-g-label";el35.setAttribute("for",uid+"-g");el35.textContent=data_0["i18n"]["get"]('G');el33.appendChild(el35);var el36=document.createTextNode("\n      ");el33.appendChild(el36);var el37=this["greenSlider"]=document.createElement("coral-colorinput-slider");el37.setAttribute("handle","greenSlider");el37.setAttribute("min","0");el37.setAttribute("max","255");el37.setAttribute("value","0");el37.setAttribute("gradient","#000000 #00FF00");el37.setAttribute("labelledby",uid+"-g-label");el33.appendChild(el37);var el38=document.createTextNode("\n      ");el33.appendChild(el38);var el39=this["greenInput"]=document.createElement("input","coral-textfield");el39.className+=" _coral-ColorInput-editRgba-group-input";el39.id=uid+"-g";el39.setAttribute("handle","greenInput");el39.setAttribute("is","coral-textfield");el39.setAttribute("type","number");el39.setAttribute("placeholder",data_0["i18n"]["get"]('G'));el39.setAttribute("maxlength","3");el39.setAttribute("value","");el39.setAttribute("variant","quiet");el33.appendChild(el39);var el40=document.createTextNode("\n    ");el33.appendChild(el40);el22.appendChild(el33);var el41=document.createTextNode("\n    ");el22.appendChild(el41);var el42=document.createElement("div");el42.setAttribute("role","group");el42.className+=" _coral-ColorInput-editRgba-group";var el43=document.createTextNode("\n      ");el42.appendChild(el43);var el44=document.createElement("label");el44.className+=" _coral-ColorInput-editRgba-group-label";el44.id=uid+"-b-label";el44.setAttribute("for",uid+"-b");el44.textContent=data_0["i18n"]["get"]('B');el42.appendChild(el44);var el45=document.createTextNode("\n      ");el42.appendChild(el45);var el46=this["blueSlider"]=document.createElement("coral-colorinput-slider");el46.setAttribute("handle","blueSlider");el46.setAttribute("min","0");el46.setAttribute("max","255");el46.setAttribute("value","0");el46.setAttribute("gradient","#000000 #0000FF");el46.setAttribute("labelledby",uid+"-b-label");el42.appendChild(el46);var el47=document.createTextNode("\n      ");el42.appendChild(el47);var el48=this["blueInput"]=document.createElement("input","coral-textfield");el48.className+=" _coral-ColorInput-editRgba-group-input";el48.id=uid+"-b";el48.setAttribute("handle","blueInput");el48.setAttribute("is","coral-textfield");el48.setAttribute("type","number");el48.setAttribute("placeholder",data_0["i18n"]["get"]('B'));el48.setAttribute("maxlength","3");el48.setAttribute("value","");el48.setAttribute("variant","quiet");el42.appendChild(el48);var el49=document.createTextNode("\n    ");el42.appendChild(el49);el22.appendChild(el42);var el50=document.createTextNode("\n    ");el22.appendChild(el50);var el51=document.createElement("div");el51.setAttribute("role","group");el51.className+=" _coral-ColorInput-editRgba-group";var el52=document.createTextNode("\n      ");el51.appendChild(el52);var el53=document.createElement("label");el53.className+=" _coral-ColorInput-editRgba-group-label";el53.id=uid+"-a-label";el53.setAttribute("for",uid+"-a");el53.textContent=data_0["i18n"]["get"]('A');el51.appendChild(el53);var el54=document.createTextNode("\n      ");el51.appendChild(el54);var el55=this["alphaSlider"]=document.createElement("coral-colorinput-slider");el55.setAttribute("handle","alphaSlider");el55.setAttribute("min","0");el55.setAttribute("max","100");el55.setAttribute("value","100");el55.setAttribute("gradient","rgba(255,255,255,0) rgba(255,255,255,1)");el55.setAttribute("labelledby",uid+"-a-label");el51.appendChild(el55);var el56=document.createTextNode("\n      ");el51.appendChild(el56);var el57=this["alphaInput"]=document.createElement("input","coral-textfield");el57.className+=" _coral-ColorInput-editRgba-group-input";el57.id=uid+"-a";el57.setAttribute("handle","alphaInput");el57.setAttribute("is","coral-textfield");el57.setAttribute("type","number");el57.setAttribute("placeholder",data_0["i18n"]["get"]('A'));el57.setAttribute("maxlength","3");el57.setAttribute("value","");el57.setAttribute("variant","quiet");el51.appendChild(el57);var el58=document.createTextNode("\n    ");el51.appendChild(el58);el22.appendChild(el51);var el59=document.createTextNode("\n  ");el22.appendChild(el59);el2.appendChild(el22);var el60=document.createTextNode("\n");el2.appendChild(el60);frag.appendChild(el2);var el61=document.createTextNode("\n");frag.appendChild(el61);return frag};var CLASSNAME$K='_coral-ColorInput-colorProperties';var ColorInputColorProperties=function(_BaseColorInputAbstra){_inherits(ColorInputColorProperties,_BaseColorInputAbstra);var _super=_createSuper(ColorInputColorProperties);function ColorInputColorProperties(){var _this;_classCallCheck(this,ColorInputColorProperties);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'change [handle="redSlider"]':'_onRedSliderChange','change [handle="greenSlider"]':'_onGreenSliderChange','change [handle="blueSlider"]':'_onBlueSliderChange','change [handle="alphaSlider"]':'_onAlphaSliderChange','change ._coral-ColorInput-editHex':'_onChangeHex','change ._coral-ColorInput-editRgba':'_onChangeRgba'}));_this._elements={};template$t.call(_this._elements,{commons:commons,i18n:i18n});return _this}_createClass(ColorInputColorProperties,[{key:"_onColorInputChange",value:function _onColorInputChange(){var newColor=this._colorinput.valueAsColor;var colorPreview=this._elements.colorPreview2;var rgba;if(!newColor){colorPreview.setAttribute('aria-pressed','true');colorPreview.setAttribute('aria-label',i18n.get('Color not set'));this._elements.hexInput.value=''}else{rgba=newColor.rgba;colorPreview.style.backgroundColor=newColor.rgbValue;colorPreview.setAttribute('aria-pressed','false');colorPreview.setAttribute('aria-label',i18n.get('{value}, Color',{value:parseFloat(rgba.a)===1?newColor.value:newColor.rgbaValue}));this._elements.hexInput.value=newColor.hexValue.substr(1)}var prefixes=['red','green','blue','alpha'];var prefixesLength=prefixes.length;var prefix;var abbr;var isAlpha;var val;for(var i=0;i<prefixesLength;i+=1){prefix=prefixes[i];abbr=prefix.substr(0,1);isAlpha=i===prefixesLength-1;val=isAlpha?100:127;if(newColor){if(!rgba){val=''}else if(isAlpha){val=parseInt(rgba[abbr]*100,10)}else{val=rgba[abbr]}}this._elements["".concat(prefix,"Slider")].value=this._elements["".concat(prefix,"Input")].value=val}if(colorPreview===document.activeElement){colorPreview.blur();window.setTimeout(function(){colorPreview.focus()},100)}}},{key:"_onRedSliderChange",value:function _onRedSliderChange(event){this._elements.redInput.value=this._elements.redSlider.value;this._onChangeRgba(event)}},{key:"_onGreenSliderChange",value:function _onGreenSliderChange(event){this._elements.greenInput.value=this._elements.greenSlider.value;this._onChangeRgba(event)}},{key:"_onBlueSliderChange",value:function _onBlueSliderChange(event){this._elements.blueInput.value=this._elements.blueSlider.value;this._onChangeRgba(event)}},{key:"_onAlphaSliderChange",value:function _onAlphaSliderChange(event){this._elements.alphaInput.value=this._elements.alphaSlider.value;this._onChangeRgba(event)}},{key:"_onChangeHex",value:function _onChangeHex(event){event.stopPropagation();var value="#".concat(this._elements.hexInput.value);var color=new Color();color.value=value;if(color.hex===null){this._elements.hexInput.value='';if(this._colorinput.valueAsColor!==null){this.constructor._lastValidColor=this._colorinput.valueAsColor}this._colorinput._setActiveColor(null)}else{this._colorinput._setActiveColor(color)}}},{key:"_onChangeRgba",value:function _onChangeRgba(event){event.stopPropagation();var r=parseInt(this._elements.redInput.value,10);var g=parseInt(this._elements.greenInput.value,10);var b=parseInt(this._elements.blueInput.value,10);var a=parseInt(this._elements.alphaInput.value,10);var colorValid=true;if(isNaN(r)||r<0||r>255){colorValid=false;this._elements.redInput.value=''}if(isNaN(g)||g<0||g>255){colorValid=false;this._elements.greenInput.value=''}if(isNaN(b)||b<0||b>255){colorValid=false;this._elements.blueInput.value=''}if(isNaN(a)||a<0||a>100){colorValid=false;this._elements.alphaInput.value=''}if(colorValid){var color=new Color();color.rgba={r:r,g:g,b:b,a:a/100};this._colorinput._setActiveColor(color)}}},{key:"render",value:function render(){_get(_getPrototypeOf(ColorInputColorProperties.prototype),"render",this).call(this);this.classList.add(CLASSNAME$K);var subview=this.querySelector('._coral-ColorInput-propertiesSubview');if(subview){subview.remove()}this.appendChild(this._elements.propertiesSubview)}}]);return ColorInputColorProperties}(BaseColorInputAbstractSubview(BaseComponent(HTMLElement)));var template$u=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["colorButton"]=document.createElement("button","coral-button");el0.setAttribute("is","coral-button");el0.setAttribute("variant","action");el0.setAttribute("handle","colorButton");el0.setAttribute("icon","checkmark");el0.setAttribute("type","button");el0.setAttribute("role","option");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);this.colorButton.label.classList.add('u-coral-screenReaderOnly');var el3=document.createTextNode("\n");frag.appendChild(el3);return frag};var CLASSNAME$L='_coral-ColorInput-swatch';var ColorInputSwatch=function(_BaseColorInputAbstra){_inherits(ColorInputSwatch,_BaseColorInputAbstra);var _super=_createSuper(ColorInputSwatch);function ColorInputSwatch(){var _this;_classCallCheck(this,ColorInputSwatch);_this=_super.call(this);_this._delegateEvents(_this._events);_this._elements={};template$u.call(_this._elements);return _this}_createClass(ColorInputSwatch,[{key:"_onColorInputChange",value:function _onColorInputChange(){if(this.targetColor){this.selected=this.targetColor.selected}}},{key:"render",value:function render(){_get(_getPrototypeOf(ColorInputSwatch.prototype),"render",this).call(this);this.classList.add(CLASSNAME$L,'u-coral-clearFix');this.setAttribute('role','presentation');var button=this.querySelector('[handle="colorButton"]');if(button){button.remove()}this.appendChild(this._elements.colorButton)}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){value=transform.booleanAttr(value);if(!value||value&&!this.disabled){this._selected=value;this._reflectAttribute('selected',this.disabled?false:this._selected);this.removeAttribute('aria-selected',this._selected);this.classList.toggle('is-selected',this._selected);this._elements.colorButton.setAttribute('aria-selected',this._selected);this._elements.colorButton.tabIndex=this.tabIndex;this.removeAttribute('tabindex');this._elements.colorButton[this._selected?'setAttribute':'removeAttribute']('aria-label',"".concat(i18n.get('checked')," ").concat(this._elements.colorButton.label.textContent));this.trigger('coral-colorinput-swatch:_selectedchanged')}}},{key:"targetColor",get:function get(){return this._targetColor||null},set:function set(value){if(typeof value==='string'){value=this.querySelector(value)}this._targetColor=value;var cssColorValue='';var hexColorValue='';if(this._targetColor){var color=new Color();color.value=this._targetColor.value;cssColorValue=color.rgbaValue;hexColorValue=color.hexValue}if(cssColorValue){this._elements.colorButton.style.backgroundColor=cssColorValue;this._elements.colorButton.label.textContent=hexColorValue;this.setAttribute('data-value',hexColorValue)}else{this._elements.colorButton.classList.add('_coral-ColorInput-swatch-novalue');this._elements.colorButton.label.textContent=i18n.get('unset');this.setAttribute('data-value','')}}},{key:"disabled",get:function get(){return this._elements.colorButton.disabled},set:function set(value){this._elements.colorButton.disabled=value;this._reflectAttribute('disabled',this.disabled)}},{key:"tabIndex",get:function get(){return this._elements.colorButton.tabIndex},set:function set(value){this._elements.colorButton.tabIndex=value;this.removeAttribute('tabindex')}}],[{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(ColorInputSwatch),"_attributePropertyMap",this),{tabindex:'tabIndex',targetcolor:'targetColor'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ColorInputSwatch),"observedAttributes",this).concat(['selected','tabindex','disabled','targetcolor'])}}]);return ColorInputSwatch}(BaseColorInputAbstractSubview(BaseComponent(HTMLElement)));var template$v=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["swatchesSubview"]=document.createElement("div");el0.className+=" _coral-ColorInput-swatchesSubview";el0.setAttribute("role","presentation");el0.setAttribute("handle","swatchesSubview");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=document.createElement("div");el2.className+=" _coral-ColorInput-swatches-header-title coral-Heading coral-Heading--5";el2.setAttribute("role","presentation");el2.setAttribute("aria-hidden","true");var el3=document.createTextNode("\n    ");el2.appendChild(el3);var el4=this["swatchesHeaderTitle"]=document.createElement("span");el4.setAttribute("handle","swatchesHeaderTitle");el4.id=data_0["commons"]["getUID"]();el4.setAttribute("role","heading");el4.setAttribute("aria-level","2");el4.textContent="\n      "+data_0["i18n"]["get"]('Swatches');el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);el0.appendChild(el2);var el6=document.createTextNode("\n  ");el0.appendChild(el6);var el7=document.createElement("div");el7.className+=" _coral-ColorInput-swatches-container";el7.setAttribute("role","presentation");var el8=document.createTextNode("\n    ");el7.appendChild(el8);var el9=this["swatchesContainer"]=document.createElement("div");el9.setAttribute("handle","swatchesContainer");el9.setAttribute("role","presentation");el7.appendChild(el9);var el10=document.createTextNode("\n  ");el7.appendChild(el10);el0.appendChild(el7);var el11=document.createTextNode("\n");el0.appendChild(el11);frag.appendChild(el0);var el12=document.createTextNode("\n");frag.appendChild(el12);return frag};var CLASSNAME$M='_coral-ColorInput-swatches';var ColorInputSwatches=function(_BaseColorInputAbstra){_inherits(ColorInputSwatches,_BaseColorInputAbstra);var _super=_createSuper(ColorInputSwatches);function ColorInputSwatches(){var _this;_classCallCheck(this,ColorInputSwatches);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'click coral-colorinput-swatch':'_onSwatchClicked','keydown ._coral-ColorInput-swatch':'_onKeyDown','capture:focus coral-colorinput-swatch':'_onFocus','coral-colorinput-swatch:_selectedchanged':'_onItemSelectedChanged'}));_this._elements={};template$v.call(_this._elements,{commons:commons,i18n:i18n});_this._oldSelection=null;_this.items._startHandlingItems(true);return _this}_createClass(ColorInputSwatches,[{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_validateSelection",value:function _validateSelection(item){var _this2=this;var selectedItems=this.items._getAllSelected();item=item||selectedItems[selectedItems.length-1];if(item&&item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){if(selectedItem){this.value=selectedItem.value}this.trigger('coral-colorinput-swatches:change',{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"_beforeOverlayOpen",value:function _beforeOverlayOpen(){var colorElements=this._colorinput.items.getAll();var colorsElementsChanged=false;if(!this._cachedColorElements){colorsElementsChanged=true}else if(this._cachedColorElements.length!==colorElements.length){colorsElementsChanged=true}else if(this._cachedColorElements.length===colorElements.length){for(var i=0;i<colorElements.length;i+=1){if(this._cachedColorElements[i]!==colorElements[i]){colorsElementsChanged=true;break}}}this._cachedColorElements=colorElements;if(colorsElementsChanged){this._layoutColorSwatch()}this._ensureKeyboardAccess()}},{key:"_onColorInputChange",value:function _onColorInputChange(){this._ensureKeyboardAccess()}},{key:"_ensureKeyboardAccess",value:function _ensureKeyboardAccess(){if(!this.querySelector('coral-colorinput-swatch[selected]')){var firstSwatch=this.querySelector('coral-colorinput-swatch');if(firstSwatch){firstSwatch.tabIndex=0}}}},{key:"_layoutColorSwatch",value:function _layoutColorSwatch(){this._elements.swatchesContainer.innerHtml='';var colors=this._colorinput.items.getAll();var colorsLength=colors.length;var swatchSelected=false;for(var colorCount=0;colorCount<colorsLength;colorCount+=1){var color=colors[colorCount];var swatch=new ColorInputSwatch();this._elements.swatchesContainer.appendChild(swatch);swatch.targetColor=color;if(color.selected){swatch[color.selected?'setAttribute':'removeAttribute']('selected',color.selected);swatchSelected=true}swatch.tabIndex=swatch.selected?0:-1}if(!swatchSelected){this._ensureKeyboardAccess()}}},{key:"_onSwatchClicked",value:function _onSwatchClicked(event){event.stopPropagation();var colorButton=event.target;var swatch=colorButton.closest('coral-colorinput-swatch');if(!swatch.selected){var color=new Color();color.value=swatch.targetColor?swatch.targetColor.value:'';this._colorinput._setActiveColor(color);swatch.selected=true}swatch.firstChild.focus()}},{key:"_onKeyDown",value:function _onKeyDown(event){var overlay=this._colorinput._elements.overlay;if(!overlay.open){return}var allItems=this.items.getAll();var currentIndex=allItems.indexOf(event.matchedTarget);var preventDefault=true;var newIndex=currentIndex;switch(event.which){case 13:window.requestAnimationFrame(function(){overlay.open=false});break;case 37:newIndex-=1;break;case 38:newIndex-=4;break;case 39:newIndex+=1;break;case 40:newIndex+=4;break;default:preventDefault=false;break}if(preventDefault){event.preventDefault();if(newIndex<0||newIndex>=allItems.length){return}var swatch=allItems[newIndex];var color=new Color();color.value=swatch.targetColor?swatch.targetColor.value:'';this._colorinput._setActiveColor(color);swatch.selected=true;swatch.firstChild.focus()}}},{key:"_onFocus",value:function _onFocus(event){var allItems=this.items.getAll();for(var i=0;i<allItems.length;i+=1){var swatch=allItems[i];if(!swatch.contains(event.matchedTarget)){swatch.tabIndex=-1}}event.matchedTarget.tabIndex=0;if(document.activeElement!==event.matchedTarget.firstChild){event.matchedTarget.firstChild.focus()}}},{key:"render",value:function render(){_get(_getPrototypeOf(ColorInputSwatches.prototype),"render",this).call(this);this.classList.add(CLASSNAME$M);this.setAttribute('role','listbox');var swatchesSubview=this.querySelector('._coral-ColorInput-swatchesSubview');if(swatchesSubview){swatchesSubview.remove()}this.appendChild(this._elements.swatchesSubview);this.setAttribute('aria-labelledby',this._elements.swatchesHeaderTitle.id);this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-colorinput-swatch',onItemAdded:this._validateSelection})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getLastSelected()}}]);return ColorInputSwatches}(BaseColorInputAbstractSubview(BaseComponent(HTMLElement)));var template$w=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["defaultPalette"]=document.createElement("div");el0.setAttribute("handle","defaultPalette");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=document.createElement("coral-colorinput-item");el2.setAttribute("value","");el0.appendChild(el2);var el3=document.createTextNode("\n  ");el0.appendChild(el3);var el4=document.createElement("coral-colorinput-item");el4.setAttribute("value","#001F3F");el0.appendChild(el4);var el5=document.createTextNode("\n  ");el0.appendChild(el5);var el6=document.createElement("coral-colorinput-item");el6.setAttribute("value","#0074D9");el0.appendChild(el6);var el7=document.createTextNode("\n  ");el0.appendChild(el7);var el8=document.createElement("coral-colorinput-item");el8.setAttribute("value","#7FDBFF");el0.appendChild(el8);var el9=document.createTextNode("\n  ");el0.appendChild(el9);var el10=document.createElement("coral-colorinput-item");el10.setAttribute("value","#39CCCC");el0.appendChild(el10);var el11=document.createTextNode("\n  ");el0.appendChild(el11);var el12=document.createElement("coral-colorinput-item");el12.setAttribute("value","#3D9970");el0.appendChild(el12);var el13=document.createTextNode("\n  ");el0.appendChild(el13);var el14=document.createElement("coral-colorinput-item");el14.setAttribute("value","#2ECC40");el0.appendChild(el14);var el15=document.createTextNode("\n  ");el0.appendChild(el15);var el16=document.createElement("coral-colorinput-item");el16.setAttribute("value","#01FF70");el0.appendChild(el16);var el17=document.createTextNode("\n  ");el0.appendChild(el17);var el18=document.createElement("coral-colorinput-item");el18.setAttribute("value","#FFDC00");el0.appendChild(el18);var el19=document.createTextNode("\n  ");el0.appendChild(el19);var el20=document.createElement("coral-colorinput-item");el20.setAttribute("value","#FF851B");el0.appendChild(el20);var el21=document.createTextNode("\n  ");el0.appendChild(el21);var el22=document.createElement("coral-colorinput-item");el22.setAttribute("value","#FF4136");el0.appendChild(el22);var el23=document.createTextNode("\n  ");el0.appendChild(el23);var el24=document.createElement("coral-colorinput-item");el24.setAttribute("value","#85144B");el0.appendChild(el24);var el25=document.createTextNode("\n  ");el0.appendChild(el25);var el26=document.createElement("coral-colorinput-item");el26.setAttribute("value","#F012BE");el0.appendChild(el26);var el27=document.createTextNode("\n  ");el0.appendChild(el27);var el28=document.createElement("coral-colorinput-item");el28.setAttribute("value","#B10DC9");el0.appendChild(el28);var el29=document.createTextNode("\n  ");el0.appendChild(el29);var el30=document.createElement("coral-colorinput-item");el30.setAttribute("value","#111111");el0.appendChild(el30);var el31=document.createTextNode("\n  ");el0.appendChild(el31);var el32=document.createElement("coral-colorinput-item");el32.setAttribute("value","#AAAAAA");el0.appendChild(el32);var el33=document.createTextNode("\n  ");el0.appendChild(el33);var el34=document.createElement("coral-colorinput-item");el34.setAttribute("value","#DDDDDD");el0.appendChild(el34);var el35=document.createTextNode("\n");el0.appendChild(el35);frag.appendChild(el0);var el36=document.createTextNode("\n");frag.appendChild(el36);data=data_0;var uid=data.commons.getUID();data_0=data;var el38=document.createTextNode("\n");frag.appendChild(el38);var el39=this["input"]=document.createElement("input","coral-textfield");el39.setAttribute("handle","input");el39.setAttribute("is","coral-textfield");el39.className+=" _coral-ColorInput-input";el39.setAttribute("type","text");el39.setAttribute("value","");el39.setAttribute("role","combobox");el39.setAttribute("aria-autocomplete","none");el39.setAttribute("aria-haspopup","dialog");el39.setAttribute("aria-expanded","false");el39.setAttribute("aria-controls",uid);frag.appendChild(el39);var el40=document.createTextNode("\n");frag.appendChild(el40);var el41=this["buttonWrapper"]=document.createElement("div");el41.className+=" _coral-ColorInput-buttonWrapper";el41.setAttribute("handle","buttonWrapper");el41.setAttribute("role","presentation");var el42=document.createTextNode("\n  ");el41.appendChild(el42);var el43=this["colorPreview"]=document.createElement("button","coral-button");el43.setAttribute("handle","colorPreview");el43.setAttribute("is","coral-button");el43.setAttribute("variant","_custom");el43.className+=" _coral-FieldButton _coral-ColorInput-button _coral-ColorInput-preview";el43.setAttribute("type","button");el43.setAttribute("aria-haspopup","dialog");el43.setAttribute("aria-expanded","false");el43.setAttribute("aria-controls",uid);el41.appendChild(el43);var el44=document.createTextNode("\n  ");el41.appendChild(el44);data=data_0;this.colorPreview.label.classList.add('u-coral-screenReaderOnly');this.colorPreview.label.innerText=data.i18n.get('Color Picker');this.colorPreview.label.id=uid+'-coral-button-label';data_0=data;var el46=document.createTextNode("\n");el41.appendChild(el46);frag.appendChild(el41);var el47=document.createTextNode("\n");frag.appendChild(el47);var el48=this["overlay"]=document.createElement("coral-popover");el48.setAttribute("smart","");el48.className+=" _coral-ColorInput-overlay";el48.setAttribute("role","dialog");el48.setAttribute("focusonshow","on");el48.setAttribute("trapfocus","on");el48.setAttribute("handle","overlay");el48.setAttribute("breadthoffset","50%r - 50%p");el48.setAttribute("placement","bottom");el48.id=uid;el48.setAttribute("aria-label",data_0["i18n"]["get"]('Color Picker'));var el49=document.createTextNode("\n  ");el48.appendChild(el49);var el50=this["propertiesView"]=document.createElement("coral-colorinput-colorproperties");el50.setAttribute("handle","propertiesView");el48.appendChild(el50);var el51=document.createTextNode("\n  ");el48.appendChild(el51);var el52=this["swatchesView"]=document.createElement("coral-colorinput-swatches");el52.setAttribute("handle","swatchesView");el48.appendChild(el52);var el53=document.createTextNode("\n");el48.appendChild(el53);frag.appendChild(el48);var el54=document.createTextNode("\n");frag.appendChild(el54);return frag};var CLASSNAME$N='_coral-ColorInput';var variant$f={DEFAULT:'default',SWATCH:'swatch'};var autoGenerateColors={OFF:'off',SHADES:'shades',TINTS:'tints'};var showSwatches={ON:'on',OFF:'off'};var showProperties={ON:'on',OFF:'off'};var showDefaultColors={ON:'on',OFF:'off'};var ColorInput=function(_BaseFormField){_inherits(ColorInput,_BaseFormField);var _super=_createSuper(ColorInput);function ColorInput(){var _this;_classCallCheck(this,ColorInput);_this=_super.call(this);_this._elements={};template$w.call(_this._elements,{commons:commons,i18n:i18n});var overlay=_this._elements.overlay;var overlayId=overlay.id;overlay._colorinput=_assertThisInitialized(_this);var events=commons.extend(_this._events,{'key:down ._coral-ColorInput-input:not([readonly])':'_onKeyDown','key:down [handle="colorPreview"]':'_onKeyDown','click [handle="colorPreview"]':'_onColorPreviewClick','key:esc input':'_onKeyEsc','key:enter input':'_onKeyEsc','coral-colorinput-item:_selectedchanged':'_onItemSelectedChanged'});events["global:capture:coral-overlay:beforeopen #".concat(overlayId)]='_beforeOverlayOpen';events["global:capture:coral-overlay:close #".concat(overlayId)]='_onOverlayClose';events["global:key:esc #".concat(overlayId)]='_onKeyEsc';_this._delegateEvents(events);_this._labellableElement=_this._elements.input;_this._oldSelection=null;_this.items._startHandlingItems(true);return _this}_createClass(ColorInput,[{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_onItemAdded",value:function _onItemAdded(item){this._validateSelection(item);if(this._elements.overlay.open){this._elements.overlay.open=false}}},{key:"_onItemRemoved",value:function _onItemRemoved(){if(this._elements.overlay.open){this._elements.overlay.open=false}}},{key:"_validateSelection",value:function _validateSelection(item){var _this2=this;var selectedItems=this.items._getAllSelected();item=item||selectedItems[selectedItems.length-1];if(item&&item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){if(selectedItem){this.value=selectedItem.getAttribute('value')}this.trigger('coral-colorinput:change',{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"_onColorPreviewClick",value:function _onColorPreviewClick(event){this._elements.overlay.returnFocusTo(this.variant===variant$f.SWATCH?event.matchedTarget:this._elements.input)}},{key:"_onInputChange",value:function _onInputChange(event){if(event.target===this._elements.input){event.stopPropagation();var color=new Color();color.value=event.target[this._eventTargetProperty];this._setActiveColor(color)}}},{key:"_onKeyDown",value:function _onKeyDown(event){event.stopPropagation();this._elements.overlay.returnFocusTo(this.variant===variant$f.SWATCH?event.matchedTarget:this._elements.input);this._elements.overlay.open=true}},{key:"_onKeyEsc",value:function _onKeyEsc(event){if(!this._elements.overlay.open){return}event.stopPropagation();this._elements.overlay.open=false}},{key:"_beforeOverlayOpen",value:function _beforeOverlayOpen(){if(this.showProperties===showProperties.ON){this._elements.overlay.focusOnShow=this._elements.propertiesView._elements.colorPreview2}else if(this.showSwatches===showSwatches.ON){this._elements.overlay.focusOnShow=this._elements.overlay.querySelector('coral-colorinput-swatch[selected] > button')||'coral-colorinput-swatch > button'}this._elements.input.setAttribute('aria-expanded',true);this._elements.colorPreview.setAttribute('aria-expanded',true)}},{key:"_onOverlayClose",value:function _onOverlayClose(){this._elements.input.setAttribute('aria-expanded',true);this._elements.colorPreview.setAttribute('aria-expanded',false)}},{key:"_validateInputValue",value:function _validateInputValue(){this.invalid=this.value!==''&&this.valueAsColor===null}},{key:"_showOrHideView",value:function _showOrHideView(view,hide){view.hidden=hide;this._elements.overlay.classList.remove('_coral-ColorInput-onlySwatchesView','_coral-ColorInput-onlyPropertiesView');if(!this._elements.propertiesView.hidden&&this._elements.swatchesView.hidden){this._elements.overlay.classList.add('_coral-ColorInput-onlyPropertiesView')}else if(this._elements.propertiesView.hidden&&!this._elements.swatchesView.hidden){this._elements.overlay.classList.add('_coral-ColorInput-onlySwatchesView')}if(this.showProperties===showProperties.OFF&&this.showSwatches===showSwatches.ON){this._elements.colorPreview.label.textContent=i18n.get('Swatches');this._elements.overlay.setAttribute('aria-label',i18n.get('Swatches'))}else{this._elements.colorPreview.label.textContent=i18n.get('Color Picker');this._elements.overlay.setAttribute('aria-label',i18n.get('Color Picker'))}}},{key:"_recalculateGeneratedColors",value:function _recalculateGeneratedColors(){var childrenList=this.querySelectorAll('coral-colorinput-item[coral-colorinput-generatedcolor]');var childrenListLength=childrenList.length;for(var i=0;i<childrenListLength;i+=1){childrenList[i].remove()}if(this.autoGenerateColors!==autoGenerateColors.OFF){var colorElements=this.items.getAll();var colorEl=null;var color=null;var colorIndex=0;var generatedIndex=0;var generatedColorEl=null;var generatedColors=[];for(colorIndex=0;colorIndex<colorElements.length;colorIndex+=1){colorEl=colorElements[colorIndex];color=new Color();color.value=colorEl.value;generatedColors=this.autoGenerateColors===autoGenerateColors.TINTS?color.calculateTintColors(5):color.calculateShadeColors(5);for(generatedIndex=generatedColors.length-1;generatedIndex>=0;generatedIndex-=1){generatedColorEl=new ColorInputItem();generatedColorEl.value=generatedColors[generatedIndex].rgbaValue;generatedColorEl.setAttribute('coral-colorinput-generatedcolor','');colorEl.parentNode.insertBefore(generatedColorEl,colorEl.nextSibling)}}}}},{key:"_syncColorPreviewIcon",value:function _syncColorPreviewIcon(){var colorPreview=this._elements.colorPreview;colorPreview.icon=this.disabled&&this.variant===variant$f.SWATCH?'lockClosed':'';colorPreview.iconSize=Icon.size.SMALL}},{key:"_setActiveColor",value:function _setActiveColor(color){var oldColor=this.valueAsColor?this.valueAsColor:new Color();this.valueAsColor=color;if(!oldColor.isSimilarTo(this.valueAsColor,false)){this._validateInputValue();this.trigger('change')}}},{key:"_selectColorInputColor",value:function _selectColorInputColor(newColor){var selectColorInItems=true;if(this.selectedItem){var selectedColor=new Color();selectedColor.value=this.selectedItem.value;selectColorInItems=!selectedColor.isSimilarTo(newColor,true)}if(selectColorInItems){var selectedItem=this.selectedItem;if(selectedItem){selectedItem.removeAttribute('selected')}var colorElements=this.items.getAll();var colorElementsCount=colorElements.length;var color=null;for(var i=0;i<colorElementsCount;i+=1){color=new Color();color.value=colorElements[i].getAttribute('value');if(color.isSimilarTo(newColor,true)){colorElements[i].setAttribute('selected','');break}}}}},{key:"_setDefaultSelectedItem",value:function _setDefaultSelectedItem(){var selectedItem=this.selectedItem;var value=this.value;if(value&&!selectedItem){var color=new Color();color.value=value;this._selectColorInputColor(color)}this._updateColorPreview()}},{key:"_updateColorPreview",value:function _updateColorPreview(){var isValueEmpty=this.value==='';var currentColor=this.valueAsColor;this._elements.colorPreview.style.backgroundColor=currentColor?currentColor.rgbaValue:'';this.classList.toggle('_coral-ColorInput--novalue',isValueEmpty);var preview=this._elements.overlay.querySelector('._coral-ColorInput-preview');if(preview){preview.classList.toggle('_coral-ColorInput-preview--novalue',isValueEmpty)}}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(ColorInput.prototype),"connectedCallback",this).call(this);var overlay=this._elements.overlay;overlay.removeAttribute('open');if(overlay._parent){overlay._parent.appendChild(overlay)}}},{key:"render",value:function render(){_get(_getPrototypeOf(ColorInput.prototype),"render",this).call(this);this.classList.add(CLASSNAME$N);this.setAttribute('role','group');var frag=document.createDocumentFragment();frag.appendChild(this._elements.defaultPalette);frag.appendChild(this._elements.input);frag.appendChild(this._elements.buttonWrapper);frag.appendChild(this._elements.overlay);while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.ELEMENT_NODE&&child.hasAttribute('handle')){this.removeChild(child)}else{frag.appendChild(child)}}this._elements.overlay.target=this._elements.colorPreview;this.appendChild(frag);this.autoGenerateColors=this.autoGenerateColors;this.showDefaultColors=this.showDefaultColors;this._preventTriggeringEvents=true;this._validateSelection();this._setDefaultSelectedItem();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(ColorInput.prototype),"disconnectedCallback",this).call(this);var overlay=this._elements.overlay;if(!this.contains(overlay)){overlay._parent=overlay._repositioned?document.body:this;overlay.remove()}}},{key:"overlay",get:function get(){return this._elements.overlay}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-colorinput-item',onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getLastSelected()}},{key:"variant",get:function get(){return this._variant||variant$f.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$f)(value)&&value||variant$f.DEFAULT;this._reflectAttribute('variant',this._variant);if(this._variant===variant$f.SWATCH){this.classList.add('_coral-ColorInput--swatch');this._elements.input.setAttribute('tabindex',-1);this._elements.colorPreview.removeAttribute('tabindex')}else{this.classList.remove('_coral-ColorInput--swatch');this._elements.input.removeAttribute('tabindex');this._elements.colorPreview.setAttribute('tabindex',-1)}this._syncColorPreviewIcon()}},{key:"valueAsColor",get:function get(){if(!this._color){this._color=new Color()}var newColor=new Color();newColor.value=this.value;if(!this._color.isSimilarTo(newColor,true)){this._color.value=newColor.value;this._color.alpha=newColor.alpha}if(this._color.rgb===null){return null}return this._color.clone()},set:function set(value){if(!this._color){this._color=new Color()}if(!value){this._color.value='';this.value=''}else{this._color=value;if(value.alpha<1){this.value=value.rgbaValue}else{this.value=value.value}}}},{key:"autoGenerateColors",get:function get(){return this._autoGenerateColors||autoGenerateColors.OFF},set:function set(value){value=transform.string(value).toLowerCase();this._autoGenerateColors=validate.enumeration(autoGenerateColors)(value)&&value||autoGenerateColors.OFF;this._recalculateGeneratedColors()}},{key:"showSwatches",get:function get(){return this._showSwatches||showSwatches.ON},set:function set(value){value=transform.string(value).toLowerCase();this._showSwatches=validate.enumeration(showSwatches)(value)&&value||showSwatches.ON;this._showOrHideView(this._elements.swatchesView,this._showSwatches===showSwatches.OFF)}},{key:"showProperties",get:function get(){return this._showProperties||showProperties.ON},set:function set(value){value=transform.string(value).toLowerCase();this._showProperties=validate.enumeration(showProperties)(value)&&value||showProperties.ON;this._showOrHideView(this._elements.propertiesView,this._showProperties===showProperties.OFF)}},{key:"showDefaultColors",get:function get(){return this._showDefaultColors||showDefaultColors.ON},set:function set(value){value=transform.string(value).toLowerCase();this._showDefaultColors=validate.enumeration(showDefaultColors)(value)&&value||showDefaultColors.ON;var defaultPalette=this._elements.defaultPalette;if(this._showDefaultColors===showDefaultColors.ON){if(!defaultPalette.parentNode){this.insertBefore(defaultPalette,this.firstChild||null)}}else if(defaultPalette.parentNode){defaultPalette.parentNode.removeChild(defaultPalette)}}},{key:"placeholder",get:function get(){return this._elements.input.placeholder},set:function set(value){this._reflectAttribute('placeholder',value);this._elements.input.placeholder=value}},{key:"value",get:function get(){return this._value||''},set:function set(value){var oldColor=new Color();oldColor.value=this.value;var newColor=new Color();newColor.value=value;if(!newColor.isSimilarTo(oldColor,false)){this._value=value;this._selectColorInputColor(newColor);this.trigger('coral-colorinput:_valuechange')}this._elements.input.value=this.value;this._updateColorPreview()}},{key:"name",get:function get(){return this._elements.input.name},set:function set(value){this._reflectAttribute('name',value);this._elements.input.name=value}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.input.disabled=this.disabled;this._elements.colorPreview.disabled=this._disabled||this.readOnly;this._syncColorPreviewIcon()}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(ColorInput.prototype),"invalid",this)},set:function set(value){_set(_getPrototypeOf(ColorInput.prototype),"invalid",value,this,true);this._elements.input.invalid=this.invalid}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.input.required=this._required}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.input.readOnly=this._readOnly;this._elements.colorPreview.disabled=this.disabled||this._readOnly}},{key:"labelledBy",get:function get(){return _get(_getPrototypeOf(ColorInput.prototype),"labelledBy",this)},set:function set(value){_set(_getPrototypeOf(ColorInput.prototype),"labelledBy",value,this,true);this._elements.input[value?'setAttribute':'removeAttribute']('aria-labelledby',value);if(this.labelledBy){this.setAttribute('aria-labelledby',this.labelledBy);this._elements.colorPreview.setAttribute('aria-labelledby',[this.labelledBy,this._elements.colorPreview.label.id].join(' '))}else{this.removeAttribute('aria-labelledby');this._elements.colorPreview.removeAttribute('aria-labelledby')}}}],[{key:"variant",get:function get(){return variant$f}},{key:"autoGenerateColors",get:function get(){return autoGenerateColors}},{key:"showSwatches",get:function get(){return showSwatches}},{key:"showDefaultColors",get:function get(){return showDefaultColors}},{key:"showProperties",get:function get(){return showProperties}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(ColorInput),"_attributePropertyMap",this),{autogeneratecolors:'autoGenerateColors',showswatches:'showSwatches',showproperties:'showProperties',showdefaultcolors:'showDefaultColors'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ColorInput),"observedAttributes",this).concat(['variant','autogeneratecolors','showswatches','showproperties','showdefaultcolors','placeholder'])}}]);return ColorInput}(BaseFormField(BaseComponent(HTMLElement)));var translations$d={"en-US":{"Swatches":"Swatches","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Color Picker","unset":"Not set","checked":"Checked","{value}, Color":"{value}, Color","Color not set":"Color not set"},"fr-FR":{"Swatches":"Échantillons","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Sélecteur de couleurs","unset":"Non défini","checked":"Activé","{value}, Color":"{value}, Couleur","Color not set":"Couleur non défini"},"de-DE":{"Swatches":"Muster","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Farbauswahl","unset":"Nicht gesetzt","checked":"Aktiviert","{value}, Color":"{value}, Farbe","Color not set":"Farbe nicht gesetzt"},"it-IT":{"Swatches":"Campioni","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Selettore colori","unset":"Non impostato","checked":"Selezionato","{value}, Color":"{value}, Colore","Color not set":"Colore non impostato"},"es-ES":{"Swatches":"Muestras","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Selector de colores","unset":"No establecido","checked":"Activado","{value}, Color":"{value}, Color","Color not set":"Color no establecido"},"pt-BR":{"Swatches":"Amostras","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Seletor de cores","unset":"Não definida","checked":"Selecionado","{value}, Color":"{value}, Cor","Color not set":"Cor não definida"},"ja-JP":{"Swatches":"スウォッチ","R":"R","G":"G","B":"B","A":"A","HEX":"16 進","Color Picker":"カラー ピッカー","unset":"設定解除","checked":"選択","{value}, Color":"{value}, カラー","Color not set":"色が設定されていません"},"ko-KR":{"Swatches":"견본","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"색 선택","unset":"설정 해제","checked":"선택됨","{value}, Color":"{value}, 색","Color not set":"색상이 설정되지 않았습니다."},"zh-CN":{"Swatches":"色板","R":"R","G":"G","B":"B","A":"A","HEX":"十六进制","Color Picker":"颜色选取器","unset":"取消设置","checked":"已选中","{value}, Color":"{value}, 颜色","Color not set":"颜色未设定"},"zh-TW":{"Swatches":"色票","R":"R","G":"G","B":"B","A":"A","HEX":"十六進位","Color Picker":"色彩選擇器","unset":"取消設定","checked":"已檢查","{value}, Color":"{value}, 色彩","Color not set":"顏色未設定"},"nl-NL":{"Swatches":"Stalen","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Kleurenkiezer","unset":"Niet ingesteld","checked":"Geselecteerd","{value}, Color":"{value}, Kleur","Color not set":"Kleur niet ingesteld"},"da-DK":{"Swatches":"Farveprøver","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Farvevælger","unset":"annuller indstilling","checked":"kontrolleret","{value}, Color":"{value}, Farve","Color not set":"Farve ikke indstillet"},"fi-FI":{"Swatches":"Värimallit","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Värimuokkain","unset":"poista asetus","checked":"valittu","{value}, Color":"{value}, väri","Color not set":"Väriä ei ole asetettu."},"nb-NO":{"Swatches":"Fargekart","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Fargevelger","unset":"fjern","checked":"avmerket","{value}, Color":"{value}, farge","Color not set":"Farge ikke angitt"},"sv-SE":{"Swatches":"Färgrutor","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Färgväljaren","unset":"ställ tillbaka","checked":"kontrollerade","{value}, Color":"{value}, Färg","Color not set":"Färg inte inställd"},"cs-CZ":{"Swatches":"Vzorníky","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Výběr barvy","unset":"nenastaveno","checked":"zkontrolováno","{value}, Color":"{value}, Barva","Color not set":"Barva není nastavena"},"pl-PL":{"Swatches":"Próbki","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Próbnik kolorów","unset":"usuń ustawienie","checked":"sprawdzono","{value}, Color":"{value}, kolor","Color not set":"Nie ustawiono koloru"},"ru-RU":{"Swatches":"Цветовые образцы","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Палитра цветов","unset":"не задано","checked":"проверено","{value}, Color":"{value}, цвет","Color not set":"Цвет не задан"},"tr-TR":{"Swatches":"Renk Örnekleri","R":"R","G":"G","B":"B","A":"A","HEX":"HEX","Color Picker":"Renk Seçici","unset":"ayarı kaldır","checked":"denetlendi","{value}, Color":"{value}, Renk","Color not set":"Renk ayarlanmadı"}};commons.extend(strings,{'coral-component-colorinput':translations$d});commons._define('coral-colorinput-swatches',ColorInputSwatches);commons._define('coral-colorinput-swatch',ColorInputSwatch);commons._define('coral-colorinput-slider',ColorInputSlider);commons._define('coral-colorinput-colorproperties',ColorInputColorProperties);commons._define('coral-colorinput-item',ColorInputItem);commons._define('coral-colorinput',ColorInput);ColorInput.Item=ColorInputItem;ColorInput.Swatches=ColorInputSwatches;ColorInput.Swatch=ColorInputSwatch;ColorInput.Slider=ColorInputSlider;ColorInput.ColorProperties=ColorInputColorProperties;var template$x=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["accessibilityState"]=document.createElement("span");el0.setAttribute("handle","accessibilityState");el0.className+=" u-coral-screenReaderOnly";el0.setAttribute("aria-hidden","true");el0.id=data_0["commons"]["getUID"]();el0.setAttribute("role","presentation");el0.setAttribute("aria-live","off");el0.setAttribute("aria-atomic","true");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var ColumnViewCollection=function(_SelectableCollection){_inherits(ColumnViewCollection,_SelectableCollection);var _super=_createSuper(ColumnViewCollection);function ColumnViewCollection(){_classCallCheck(this,ColumnViewCollection);return _super.apply(this,arguments)}_createClass(ColumnViewCollection,[{key:"_deselectAndDeactivateAllExcept",value:function _deselectAndDeactivateAllExcept(item){this.getAll().forEach(function(el){if(el.hasAttribute('selected')||el.hasAttribute('active')){el.removeAttribute('selected');if(el!==item){el.removeAttribute('active')}}})}},{key:"_deactivateAll",value:function _deactivateAll(){this._deselectAllExcept(null,'active')}},{key:"_deactivateAllExceptFirst",value:function _deactivateAllExceptFirst(){this._deselectAllExceptFirst('active')}},{key:"_getAllActive",value:function _getAllActive(){return this._getAllSelected('active')}},{key:"_selectAll",value:function _selectAll(){this.getAll().forEach(function(el){if(!el.hasAttribute('selected')){el.setAttribute('selected','')}})}}]);return ColumnViewCollection}(SelectableCollection);var isInteractiveTarget=function isInteractiveTarget(target){return target.hasAttribute('coral-interactive')||target.closest('[coral-interactive]')!==null};var selectionMode$1={NONE:'none',SINGLE:'single',MULTIPLE:'multiple'};var CLASSNAME$O='_coral-MillerColumns';var scrollTo=function scrollTo(element,to,duration,scrollCallback){if(duration<=0){if(scrollCallback){scrollCallback()}return}var difference=to-element.scrollLeft;var perTick=difference/duration*10;window.setTimeout(function(){element.scrollLeft=element.scrollLeft+perTick;if(element.scrollLeft===to){if(scrollCallback){scrollCallback()}}else{scrollTo(element,to,duration-10)}},10)};var ColumnView=function(_BaseComponent){_inherits(ColumnView,_BaseComponent);var _super=_createSuper(ColumnView);function ColumnView(){var _this;_classCallCheck(this,ColumnView);_this=_super.call(this);_this._elements={accessibilityState:_this.querySelector('span[handle="accessibilityState"]')};if(!_this._elements.accessibilityState){template$x.call(_this._elements,{commons:commons});_this._elements.accessibilityState.removeAttribute('aria-hidden');_this._elements.accessibilityState.hidden=true}_this._delegateEvents({'global:keyup':'_onGlobalKeyUp','global:keydown':'_onGlobalKeyDown','key:up':'_onKeyUp','key:down':'_onKeyDown','key:right':'_onKeyRight','key:left':'_onKeyLeft','key:shift+up':'_onKeyShiftAndUp','key:shift+down':'_onKeyShiftAndDown','key:space':'_onKeySpace','key:control+a':'_onKeyCtrlA','key:command+a':'_onKeyCtrlA','key:control+shift+a':'_onKeyCtrlShiftA','key:command+shift+a':'_onKeyCtrlShiftA','key:esc':'_onKeyCtrlShiftA','capture:focus coral-columnview-item':'_onItemFocus','coral-columnview-column:_loaditems':'_onColumnLoadItems','coral-columnview-column:_activeitemchanged':'_onColumnActiveItemChanged','coral-columnview-column:_selecteditemchanged':'_onColumnSelectedItemChanged'});_this._oldActiveItem=null;_this._oldSelection=[];_this._bulkSelectionChange=false;_this._observer=new MutationObserver(_this._handleMutation.bind(_assertThisInitialized(_this)));_this._observer.observe(_assertThisInitialized(_this),{childList:true});_this.items._startHandlingItems(true);_this.columns._startHandlingItems(true);return _this}_createClass(ColumnView,[{key:"_onColumnActiveItemChanged",value:function _onColumnActiveItemChanged(event){event.stopImmediatePropagation();if(this._bulkSelectionChange){return}var column=event.target;this._handleKeyboardMultiselect(null);this._bulkSelectionChange=true;if(!event.detail.activeItem){this._afterItemSelectedInColumn(column)}else{this.items._deselectAllExcept();var nextColumn=column.nextElementSibling;while(nextColumn){if(nextColumn.tagName==='CORAL-COLUMNVIEW-COLUMN'&&nextColumn.items){nextColumn.items._deactivateAll()}nextColumn=nextColumn.nextElementSibling}}this._bulkSelectionChange=false;this._validateColumnViewChange()}},{key:"_onColumnLoadItems",value:function _onColumnLoadItems(event){event.stopImmediatePropagation();this._updateAriaLevel(event.target);this._ensureTabbableItem();this.trigger('coral-columnview:loaditems',{column:event.target,start:event.detail.start,item:event.detail.item})}},{key:"_onItemAdd",value:function _onItemAdd(){var _this2=this;window.requestAnimationFrame(function(){return _this2._ensureTabbableItem()})}},{key:"_onItemRemoved",value:function _onItemRemoved(){var _this3=this;window.requestAnimationFrame(function(){return _this3._ensureTabbableItem()})}},{key:"_ensureTabbableItem",value:function _ensureTabbableItem(){this._vent.off('coral-collection:add',this._onItemAdd);this._vent.off('coral-collection:remove',this._onItemRemoved);if(!this.selectedItem&&!this.activeItem){var selectableItems=this.items._getSelectableItems();if(!selectableItems.length){this._vent.off('coral-collection:remove',this._onItemRemoved);this._vent.on('coral-collection:add',this._onItemAdd)}else{selectableItems[0].tabIndex=0;this._vent.on('coral-collection:remove',this._onItemRemoved)}}else if(this.selectedItem&&this.selectedItem.tabIndex!==0){this.selectedItem.tabIndex=0}else if(this.activeItem&&this.activeItem.tabIndex!==0){this.activeItem.tabIndex=0}}},{key:"_onColumnSelectedItemChanged",value:function _onColumnSelectedItemChanged(event){event.stopImmediatePropagation();if(this._bulkSelectionChange||this.selectionMode===selectionMode$1.NONE){return}this._bulkSelectionChange=true;this._oldSelection.forEach(function(el){if(event.detail.selection.indexOf(el)===-1){el.removeAttribute('selected')}});this._bulkSelectionChange=false;this._validateColumnViewChange()}},{key:"_onGlobalKeyUp",value:function _onGlobalKeyUp(event){if(event.keyCode===16&&!isInteractiveTarget(event.target)){this.classList.remove('is-unselectable')}}},{key:"_onGlobalKeyDown",value:function _onGlobalKeyDown(event){if(event.keyCode===16||!isInteractiveTarget(event.target)){this.classList.add('is-unselectable')}}},{key:"_onKeyShiftAndUp",value:function _onKeyShiftAndUp(event){var matchedTarget=this._getRealMatchedTarget(event);if(matchedTarget.closest('coral-columnview-preview')||isInteractiveTarget(event.target)){return}event.preventDefault();if(this.selectionMode===selectionMode$1.NONE){this._onKeyUp(event);return}var oldSelectedItems=this._oldSelection;this._isKeyBoardMultiselect=true;if(oldSelectedItems.length===0){var activeItem=this.activeItem;if(activeItem){activeItem.setAttribute('selected','')}}var selectedItems=this.items._getAllSelected();var lastSelected=this._lastSelected;var selectedItem;if(!lastSelected){selectedItem=selectedItems[0].previousElementSibling;selectedItem.setAttribute('selected','')}else if(lastSelected.item){selectedItem=lastSelected.item;if(selectedItem.matches(':first-child')){this._isKeyBoardMultiselect=false;return}if(!lastSelected.direction||lastSelected.direction==='up'){selectedItem=selectedItem.previousElementSibling;selectedItem.setAttribute('selected','')}else{if(selectedItem!==lastSelected.firstSelectedItem){selectedItem.removeAttribute('selected')}else{lastSelected.direction='up'}selectedItem=selectedItem.previousElementSibling;selectedItem.setAttribute('selected','')}}this._lastSelected={item:selectedItem,direction:lastSelected&&lastSelected.direction?lastSelected.direction:'up',firstSelectedItem:lastSelected&&lastSelected.firstSelectedItem?lastSelected.firstSelectedItem:selectedItem.nextElementSibling};if(selectedItem&&selectedItem!==document.activeElement){selectedItem.focus()}this._isKeyBoardMultiselect=false}},{key:"_onKeyShiftAndDown",value:function _onKeyShiftAndDown(event){var matchedTarget=this._getRealMatchedTarget(event);if(matchedTarget.closest('coral-columnview-preview')||isInteractiveTarget(event.target)){return}event.preventDefault();if(this.selectionMode===selectionMode$1.NONE){this._onKeyDown(event);return}var oldSelectedItems=this._oldSelection;this._isKeyBoardMultiselect=true;if(oldSelectedItems.length===0){var activeItem=this.activeItem;if(activeItem){activeItem.setAttribute('selected','')}}var selectedItems=this.items._getAllSelected();var lastSelected=this._lastSelected;var selectedItem;if(!lastSelected){selectedItem=selectedItems[selectedItems.length-1].nextElementSibling;selectedItem.setAttribute('selected','')}else if(lastSelected.item){selectedItem=lastSelected.item;if(selectedItem.matches(':last-child')){this._isKeyBoardMultiselect=false;return}if(!lastSelected.direction||lastSelected.direction==='down'){selectedItem=selectedItem.nextElementSibling;selectedItem.setAttribute('selected','')}else{if(selectedItem!==lastSelected.firstSelectedItem){selectedItem.removeAttribute('selected')}else{lastSelected.direction='down'}selectedItem=selectedItem.nextElementSibling;selectedItem.setAttribute('selected','')}}this._lastSelected={item:selectedItem,direction:lastSelected&&lastSelected.direction?lastSelected.direction:'down',firstSelectedItem:lastSelected&&lastSelected.firstSelectedItem?lastSelected.firstSelectedItem:selectedItem.previousElementSibling};if(selectedItem&&selectedItem!==document.activeElement){selectedItem.focus()}this._isKeyBoardMultiselect=false}},{key:"_onKeyUp",value:function _onKeyUp(event){var matchedTarget=this._getRealMatchedTarget(event);if(matchedTarget.closest('coral-columnview-preview')||isInteractiveTarget(event.target)){return}event.preventDefault();var selectedItems=this._oldSelection;var item;if(selectedItems.length!==0){var selectedItem=matchedTarget;item=selectedItem.previousElementSibling;if(!item){item=selectedItem }}else if(this._oldActiveItem===null){item=this.items._getLastSelectable()}else{item=this._oldActiveItem.previousElementSibling}if(item&&item!==document.activeElement){item.focus();if(this.selectionMode===selectionMode$1.NONE||selectedItems.length===0){item.click()}}}},{key:"_onKeyDown",value:function _onKeyDown(event){var matchedTarget=this._getRealMatchedTarget(event);if(matchedTarget.closest('coral-columnview-preview')||isInteractiveTarget(event.target)){return}event.preventDefault();var selectedItems=this._oldSelection;var item;if(selectedItems.length!==0){var selectedItem=matchedTarget;item=selectedItem.nextElementSibling;if(!item){item=matchedTarget }}else if(this._oldActiveItem===null){item=this.items._getFirstSelectable()}else{item=this._oldActiveItem.nextElementSibling}if(item&&item!==document.activeElement){item.focus();if(this.selectionMode===selectionMode$1.NONE||selectedItems.length===0){item.click()}}}},{key:"_onKeyRight",value:function _onKeyRight(event){var _this4=this;var matchedTarget=this._getRealMatchedTarget(event);if(matchedTarget.variant!==ColumnView.Item.variant.DRILLDOWN){return false}if(isInteractiveTarget(event.target)){return}event.preventDefault();var nextColumn=this.activeItem&&this.activeItem.closest('coral-columnview-column').nextElementSibling;if(nextColumn&&nextColumn.tagName==='CORAL-COLUMNVIEW-COLUMN'){commons.ready(nextColumn,function(){return _this4._focusAndActivateFirstSelectableItem(nextColumn)})}}},{key:"_onKeyLeft",value:function _onKeyLeft(event){if(isInteractiveTarget(event.target)){return}event.preventDefault();var previousColumn;var selectedItems=this._oldSelection;if(selectedItems.length!==0){previousColumn=selectedItems[0].closest('coral-columnview-column').previousElementSibling}else if(this.activeItem){var col=this.activeItem.closest('coral-columnview-column');previousColumn=event.target.closest('coral-columnview-preview')?col:col.previousElementSibling}if(previousColumn&&previousColumn.tagName==='CORAL-COLUMNVIEW-COLUMN'){var activeDescendant=previousColumn.activeItem||previousColumn.items._getFirstSelected()||previousColumn.items._getFirstSelectable();if(activeDescendant&&activeDescendant!==document.activeElement){activeDescendant.focus();activeDescendant.click()}}}},{key:"_onKeySpace",value:function _onKeySpace(event){var matchedTarget=this._getRealMatchedTarget(event);if(matchedTarget.closest('coral-columnview-preview')||isInteractiveTarget(event.target)){return}event.preventDefault();var selectedItems=this._oldSelection;var activeDescendant;if(selectedItems.length!==0){activeDescendant=matchedTarget;if(activeDescendant.hasAttribute('selected','')){if(selectedItems.length===1){activeDescendant.setAttribute('active','')}else{activeDescendant.removeAttribute('selected','')}}else{activeDescendant.setAttribute('selected','')}}else{var activeItem=this.activeItem||matchedTarget;if(activeItem&&this.selectionMode!==selectionMode$1.NONE){activeItem.setAttribute('selected','');activeDescendant=activeItem}}}},{key:"_onKeyCtrlA",value:function _onKeyCtrlA(event){var matchedTarget=this._getRealMatchedTarget(event);if(matchedTarget.closest('coral-columnview-preview')||isInteractiveTarget(event.target)){return}event.preventDefault();if(this.selectionMode===selectionMode$1.MULTIPLE){var currentColumn=matchedTarget.closest('coral-columnview-column');currentColumn.items._selectAll()}else if(this.selectionMode===selectionMode$1.SINGLE){if(!matchedTarget.hasAttribute('selected')){matchedTarget.setAttribute('selected','')}}}},{key:"_onKeyCtrlShiftA",value:function _onKeyCtrlShiftA(event){var matchedTarget=this._getRealMatchedTarget(event);if(matchedTarget.closest('coral-columnview-preview')||isInteractiveTarget(event.target)){return}event.preventDefault();if(this.selectionMode!==selectionMode$1.NONE){var currentColumn=matchedTarget.closest('coral-columnview-column');currentColumn.items._deselectAndDeactivateAllExcept(matchedTarget);if(!matchedTarget.hasAttribute('active')){matchedTarget.setAttribute('active','')}}}},{key:"_onItemFocus",value:function _onItemFocus(event){if(isInteractiveTarget(event.target)){return}var matchedTarget=this._getRealMatchedTarget(event);if(!matchedTarget.hasAttribute('active')&&!this._oldSelection.length){matchedTarget.setAttribute('active','')}this.items._getSelectableItems().forEach(function(item){item.tabIndex=item===matchedTarget?0:-1});if(matchedTarget.contains(document.activeElement)){matchedTarget.focus()}}},{key:"_updateAriaLevel",value:function _updateAriaLevel(column){var colIndex=this.columns.getAll().indexOf(column);var level=colIndex+1;if(column.items){column.items.getAll().filter(function(item,index){item.setAttribute('aria-posinset',index+1);item.setAttribute('aria-setsize',column.items.length);return!item.hasAttribute('aria-level')}).forEach(function(item){item.setAttribute('aria-level',level)})}if(colIndex===0){column.setAttribute('role','presentation');return}if(!column.hasAttribute('aria-labelledby')){if(!column.hasAttribute('aria-label')){column.setAttribute('aria-label',this.getAttribute('aria-label')||'…')}}else if(column.getAttribute('aria-label')===(this.getAttribute('aria-label')||'…')){column.removeAttribute('aria-label')}}},{key:"_arraysAreDifferent",value:function _arraysAreDifferent(selection,oldSelection){var diff=[];if(oldSelection.length===selection.length){diff=oldSelection.filter(function(item){return selection.indexOf(item)===-1})}return oldSelection.length!==selection.length||diff.length!==0}},{key:"_handleKeyboardMultiselect",value:function _handleKeyboardMultiselect(newSelectedItem){if(!this._isKeyBoardMultiselect){this._lastSelected=undefined;if(newSelectedItem){this._lastSelected={item:newSelectedItem,direction:null,firstSelectedItem:newSelectedItem}}}}},{key:"_scrollColumnIntoView",value:function _scrollColumnIntoView(column,clearEmptyColumns,triggerEvent){var _this5=this;var left=0;var duration;if(!this.contains(column)){return}var completeCallback=function completeCallback(){if(clearEmptyColumns){_this5._removeEmptyColumnsWithSmoothTransition(triggerEvent)}};if(column.getBoundingClientRect().left+column.offsetWidth>=this.offsetWidth){var next=column.nextElementSibling;while(next){next.parentNode.removeChild(next);next=column.nextElementSibling}left=this.scrollWidth-this.offsetWidth;duration=left-this.scrollLeft;scrollTo(this,left,duration,completeCallback)}else if(clearEmptyColumns){this._removeEmptyColumnsWithSmoothTransition(triggerEvent)}}},{key:"_afterItemSelectedInColumn",value:function _afterItemSelectedInColumn(column){this._emptyColumnsNextToColumn(column);this._scrollColumnIntoView(column,true,true)}},{key:"_emptyColumnsNextToColumn",value:function _emptyColumnsNextToColumn(column){if(column!==null){var next=column.nextElementSibling;while(next&&next.innerHTML.length){next.innerHTML='';next=next.nextElementSibling}}}},{key:"_removeEmptyColumnsWithSmoothTransition",value:function _removeEmptyColumnsWithSmoothTransition(triggerEvent){var _this6=this;var emptyColumns=Array.prototype.filter.call(this.querySelectorAll('coral-columnview-column, coral-columnview-preview'),function(el){return!el.firstChild});if(emptyColumns.length){emptyColumns.forEach(function(column,i){column.style.visibility='hidden';column.classList.add('is-collapsing');commons.transitionEnd(column,function(){column.remove();if(i===emptyColumns.length-1&&triggerEvent){_this6._validateNavigation(_this6.columns.last())}});column.style.width=0})}else if(triggerEvent){this._validateNavigation(this.columns.last())}}},{key:"_triggerCollectionEvents",value:function _triggerCollectionEvents(addedNodes,removedNodes){var item;var addedNodesCount=addedNodes.length;for(var i=0;i<addedNodesCount;i+=1){item=addedNodes[i];if(this.activeItem){this.activeItem.setAttribute('aria-owns',item.id);item.setAttribute('aria-labelledby',this.activeItem.content.id);if(item.tagName==='CORAL-COLUMNVIEW-PREVIEW'){this.activeItem.setAttribute('aria-describedby',item.id)}}if(item.tagName==='CORAL-COLUMNVIEW-COLUMN'){item.setAttribute('_selectionmode',this.selectionMode);this.trigger('coral-collection:add',{item:item});this._updateAriaLevel(item)}}var removedNodesCount=removedNodes.length;for(var j=0;j<removedNodesCount;j+=1){item=removedNodes[j];if(item.tagName==='CORAL-COLUMNVIEW-COLUMN'){this.trigger('coral-collection:remove',{item:item})}}}},{key:"_setStateFromDOM",value:function _setStateFromDOM(){this._oldActiveItem=this.activeItem;this._oldSelection=this.selectedItems;if(!this._oldActiveItem&&!this._oldSelection.length){var selectableItems=this.items._getSelectableItems();if(selectableItems.length){selectableItems[0].tabIndex=0}}if(this.columns&&this.columns.first()){this._updateAriaLevel(this.columns.first())}}},{key:"_handleMutation",value:function _handleMutation(mutations){var mutationsCount=mutations.length;for(var i=0;i<mutationsCount;i+=1){var mutation=mutations[i];this._triggerCollectionEvents(mutation.addedNodes,mutation.removedNodes)}this._setStateFromDOM()}},{key:"_validateColumnViewChange",value:function _validateColumnViewChange(){var activeItem=this.activeItem;var oldActiveItem=this._oldActiveItem;if(activeItem!==oldActiveItem){this.trigger('coral-columnview:activeitemchange',{activeItem:activeItem,oldActiveItem:oldActiveItem});this._oldActiveItem=activeItem}if(this.selectionMode===selectionMode$1.NONE){return}var newSelection=this.selectedItems;var oldSelection=this._oldSelection||[];var newSelectedItems=newSelection.filter(function(item){return oldSelection.indexOf(item)===-1});this._handleKeyboardMultiselect(newSelectedItems.length>0?newSelectedItems[0]:null);if(this._arraysAreDifferent(newSelection,oldSelection)){this.trigger('coral-columnview:change',{selection:newSelection,oldSelection:oldSelection});this._oldSelection=newSelection;this._announceActiveElementState()}}},{key:"_validateNavigation",value:function _validateNavigation(column){if(column.tagName==='CORAL-COLUMNVIEW-PREVIEW'&&this._oldSelection.length!==0){return}this.trigger('coral-columnview:navigate',{activeItem:this.activeItem,column:column})}},{key:"_announceActiveElementState",value:function _announceActiveElementState(){var _this7=this;var accessibilityState=this._elements.accessibilityState;accessibilityState.setAttribute('lang',i18n.locale);if(!this.contains(accessibilityState)){this.insertBefore(accessibilityState,this.firstChild)}function resetAccessibilityState(){accessibilityState.hidden=true;accessibilityState.setAttribute('aria-live','off');accessibilityState.innerHTML=''}resetAccessibilityState();if(this._addTimeout||this._removeTimeout){clearTimeout(this._addTimeout);clearTimeout(this._removeTimeout)}this._addTimeout=window.setTimeout(function(){var activeElement=document.activeElement.closest('coral-columnview-item')||document.activeElement;if(!_this7.contains(activeElement)||activeElement.tagName!=='CORAL-COLUMNVIEW-ITEM'){return}var span=document.createElement('span');var contentSpan=document.createElement('span');var lang=!activeElement.hasAttribute('lang')&&activeElement.closest('[lang]')?activeElement.closest('[lang]').getAttribute('lang'):activeElement.getAttribute('lang');if(lang&&lang!==i18n.locale){contentSpan.setAttribute('lang',lang)}contentSpan.innerText=activeElement._elements.content.innerText;span.appendChild(contentSpan);span.appendChild(document.createTextNode(i18n.get(activeElement.selected?', checked':', unchecked')));accessibilityState.hidden=false;accessibilityState.setAttribute('aria-live','assertive');accessibilityState.appendChild(span);_this7._removeTimeout=window.setTimeout(function(){resetAccessibilityState();_this7._elements.accessibilityState=accessibilityState.parentNode.removeChild(accessibilityState)},2000)},20)}},{key:"_getRealMatchedTarget",value:function _getRealMatchedTarget(event){if(event.matchedTarget.nodeName!=='CORAL-COLUMNVIEW'){return event.matchedTarget}if(event.matchedTarget.contains(document.activeElement)&&document.activeElement.nodeName==='CORAL-COLUMNVIEW-ITEM'){return document.activeElement}if(event.matchedTarget.selectedItem){return event.matchedTarget.selectedItem}if(event.matchedTarget.activeItem){return event.matchedTarget.activeItem}}},{key:"_focusAndActivateFirstSelectableItem",value:function _focusAndActivateFirstSelectableItem(column){var item;if(column.items){item=column.items._getFirstSelectable()}else if(column.tagName==='CORAL-COLUMNVIEW-PREVIEW'){item=this.selectedItems[0]||this.activeItem}if(item&&item!==document.activeElement){item.focus();if(this.selectionMode===selectionMode$1.NONE||this._oldSelection.length===0){item.click()}}}},{key:"focus",value:function focus(){var item=this.selectedItems[0]||this.activeItem;if(item&&item!==document.activeElement){item.focus()}}},{key:"setNextColumn",value:function setNextColumn(newColumn,referenceColumn,scrollToColumn){var _this8=this;scrollToColumn=typeof scrollToColumn==='undefined'||scrollToColumn;var column=referenceColumn||null;var columnReplacedContainedFocus=false;if(column===null||!this.contains(column)){this.appendChild(newColumn)}else{var nextColumn=column.nextElementSibling;if(nextColumn){columnReplacedContainedFocus=nextColumn.contains(document.activeElement);this._emptyColumnsNextToColumn(column);var before=nextColumn.nextElementSibling;this.removeChild(nextColumn);this.insertBefore(newColumn,before)}else{this.appendChild(newColumn)}}commons.ready(newColumn,function(){if(scrollToColumn){_this8._scrollColumnIntoView(newColumn,true,false)}_this8._validateNavigation(newColumn);if(columnReplacedContainedFocus&&!newColumn.contains(document.activeElement)){_this8._focusAndActivateFirstSelectableItem(newColumn)}})}},{key:"render",value:function render(){_get(_getPrototypeOf(ColumnView.prototype),"render",this).call(this);this.classList.add(CLASSNAME$O);this.setAttribute('role','tree');this.tabIndex=-1;if(!this.hasAttribute('aria-label')&&!this.hasAttribute('aria-labelledby')){this.setAttribute('aria-label',i18n.get('Column View'))}if(!this._selectionMode){this._selectionMode=selectionMode$1.NONE}this._setStateFromDOM()}},{key:"columns",get:function get(){if(!this._columns){this._columns=new ColumnViewCollection({host:this,itemTagName:'coral-columnview-column'})}return this._columns}},{key:"items",get:function get(){if(!this._items){this._items=new ColumnViewCollection({host:this,itemTagName:'coral-columnview-item'})}return this._items}},{key:"selectionMode",get:function get(){return this._selectionMode||selectionMode$1.NONE},set:function set(value){var _this9=this;value=transform.string(value).toLowerCase();this._selectionMode=validate.enumeration(selectionMode$1)(value)&&value||selectionMode$1.NONE;this._reflectAttribute('selectionmode',this._selectionMode);this.columns.getAll().forEach(function(item){item.setAttribute('_selectionmode',_this9._selectionMode)});this.classList.remove("".concat(CLASSNAME$O,"--selection"));if(this._selectionMode!==selectionMode$1.NONE){this.classList.add("".concat(CLASSNAME$O,"--selection"))}this.setAttribute('aria-multiselectable',this._selectionMode===selectionMode$1.MULTIPLE)}},{key:"selectedItem",get:function get(){return this.selectionMode!==selectionMode$1.NONE?this.items._getFirstSelected():null}},{key:"selectedItems",get:function get(){return this.selectionMode!==selectionMode$1.NONE?this.items._getAllSelected():[]}},{key:"activeItem",get:function get(){return this.items._getAllActive().pop()||null}}],[{key:"selectionMode",get:function get(){return selectionMode$1}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(ColumnView),"_attributePropertyMap",this),{selectionmode:'selectionMode'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ColumnView),"observedAttributes",this).concat(['selectionmode'])}}]);return ColumnView}(BaseComponent(HTMLElement));var CLASSNAME$P='_coral-MillerColumns-item';var SCROLL_DEBOUNCE$2=100;var ITEM_HEIGHT=40;var WINDOW_LOAD=false;window.addEventListener('load',function(){WINDOW_LOAD=true});var ColumnViewColumn=function(_BaseComponent){_inherits(ColumnViewColumn,_BaseComponent);var _super=_createSuper(ColumnViewColumn);function ColumnViewColumn(){var _this;_classCallCheck(this,ColumnViewColumn);_this=_super.call(this);_this._delegateEvents({'capture:scroll coral-columnview-column-content':'_onContentScroll','click coral-columnview-column-content':'_onColumnContentClick','click coral-columnview-item':'_onItemClick','click [coral-columnview-itemselect]':'_onItemSelectClick','coral-columnview-item:_activechanged coral-columnview-item':'_onItemActiveChange','coral-columnview-item:_selectedchanged coral-columnview-item':'_onItemSelectedChange'});_this._elements={content:_this.querySelector('coral-columnview-column-content')||document.createElement('coral-columnview-column-content')};_this._bulkSelectionChange=false;_this._oldSelection=[];_this._oldActiveItem=null;_this._onDebouncedScroll=_this._onDebouncedScroll.bind(_assertThisInitialized(_this));_this._toggleItemSelection=_this._toggleItemSelection.bind(_assertThisInitialized(_this));_this._observer=new MutationObserver(_this._handleMutation.bind(_assertThisInitialized(_this)));_this._observer.observe(_this._elements.content,{childList:true});_this.items._startHandlingItems(true);return _this}_createClass(ColumnViewColumn,[{key:"_onItemClick",value:function _onItemClick(event){if(isInteractiveTarget(event.target)){return}if(event.matchedTarget.hasAttribute('active')){this._onItemActiveChange(event)}else{event.matchedTarget.active=true}}},{key:"_toggleItemSelection",value:function _toggleItemSelection(item){item[this._selectionMode!==selectionMode$1.NONE?'setAttribute':'removeAttribute']('_selectable','')}},{key:"_onItemSelectClick",value:function _onItemSelectClick(event){if(this._selectionMode&&this._selectionMode!==selectionMode$1.NONE){event.stopPropagation();var item=event.matchedTarget.parentElement;var isSelected=item.hasAttribute('selected');if(!isSelected&&event.shiftKey&&this._selectionMode===selectionMode$1.MULTIPLE){var lastSelectedItem=this._lastSelectedItems[this._lastSelectedItems.length-1];if(lastSelectedItem){var items=this.items.getAll();var lastSelectedItemIndex=items.indexOf(lastSelectedItem);var selectedItemIndex=items.indexOf(item);var direction=selectedItemIndex<lastSelectedItemIndex;var selectionRange=[];var selectionIndex=lastSelectedItemIndex;while(selectedItemIndex!==selectionIndex){selectionIndex=direction?selectionIndex-1:selectionIndex+1;selectionRange.push(items[selectionIndex])}selectionRange.forEach(function(rangeItem){if(rangeItem!==item){rangeItem.set('selected',true,true)}})}}item[isSelected?'removeAttribute':'setAttribute']('selected','');if(isSelected&&!this._lastSelectedItems.length){item.setAttribute('active','')}}}},{key:"_onItemActiveChange",value:function _onItemActiveChange(event){event.stopImmediatePropagation();if(this._bulkSelectionChange){return}var item=event.matchedTarget;this._bulkSelectionChange=true;this.items._deselectAndDeactivateAllExcept(item);this._bulkSelectionChange=false;this._validateColumnChange(item);this._loadItems(0,item)}},{key:"_onItemSelectedChange",value:function _onItemSelectedChange(event){event.stopImmediatePropagation();var item=event.target;var isSelected=item.selected;if(isSelected){this._lastSelectedItems.push(item)}else{var removedItemIndex=this._lastSelectedItems.indexOf(item);if(removedItemIndex!==-1){this._lastSelectedItems=this._lastSelectedItems.splice(removedItemIndex,1)}}if(this._bulkSelectionChange){return}if(isSelected){this._bulkSelectionChange=true;this.items._deactivateAll();if(this._selectionMode===selectionMode$1.SINGLE){this.items._deselectAllExcept(item)}this._bulkSelectionChange=false}this._validateColumnChange()}},{key:"_tryToLoadAdditionalItems",value:function _tryToLoadAdditionalItems(){var _this2=this;if(this._bulkCollectionChange){return}this._bulkCollectionChange=true;window.setTimeout(function(){_this2._bulkCollectionChange=false;_this2._loadFittingAdditionalItems()},0)}},{key:"_onContentScroll",value:function _onContentScroll(){window.clearTimeout(this._scrollTimeout);this._scrollTimeout=window.setTimeout(this._onDebouncedScroll,SCROLL_DEBOUNCE$2)}},{key:"_onColumnContentClick",value:function _onColumnContentClick(event){if(event.target!==event.matchedTarget||isInteractiveTarget(event.target)){return}event.preventDefault();if(this._bulkSelectionChange){return false}this._bulkSelectionChange=true;this.items._deselectAndDeactivateAllExcept();this._bulkSelectionChange=false;this._validateColumnChange()}},{key:"_onDebouncedScroll",value:function _onDebouncedScroll(){var threshold=20;if(this.content.scrollTop+this.offsetHeight>=this.content.scrollHeight-threshold){this._loadItems(this.items.length,undefined)}}},{key:"_arraysAreDifferent",value:function _arraysAreDifferent(selection,oldSelection){var diff=[];if(oldSelection.length===selection.length){diff=oldSelection.filter(function(item){return selection.indexOf(item)===-1})}return oldSelection.length!==selection.length||diff.length!==0}},{key:"_validateColumnChange",value:function _validateColumnChange(item){var newActiveItem=this.activeItem;var oldActiveItem=this._oldActiveItem||null;if(newActiveItem!==oldActiveItem||item===newActiveItem){this.trigger('coral-columnview-column:_activeitemchanged',{activeItem:newActiveItem,oldActiveItem:oldActiveItem});this._oldActiveItem=newActiveItem}var newSelection=this.selectedItems;var oldSelection=this._oldSelection;if(this._arraysAreDifferent(newSelection,oldSelection)){this.trigger('coral-columnview-column:_selecteditemchanged',{selection:newSelection,oldSelection:oldSelection});this._oldSelection=newSelection}}},{key:"_loadFittingAdditionalItems",value:function _loadFittingAdditionalItems(){var itemsCount=this.items.length;var itemsHeight=itemsCount*ITEM_HEIGHT;if(itemsHeight<=this.offsetHeight){this._loadItems(itemsCount,undefined)}}},{key:"_loadItems",value:function _loadItems(count,item){if(!item||item.hasAttribute('active')){this.trigger('coral-columnview-column:_loaditems',{start:count,item:item})}}},{key:"_setStateFromDOM",value:function _setStateFromDOM(){if(this._selectionMode){if(this._selectionMode===selectionMode$1.SINGLE){this.items._deselectAllExceptLast()}else if(this._selectionMode===selectionMode$1.NONE){this.items._deselectAllExcept()}this.items._deactivateAllExceptFirst()}}},{key:"_handleMutation",value:function _handleMutation(mutations){var mutationsCount=mutations.length;for(var i=0;i<mutationsCount;i+=1){var mutation=mutations[i];this._triggerCollectionEvents(mutation.addedNodes,mutation.removedNodes)}this._setStateFromDOM();this._validateColumnChange();this._tryToLoadAdditionalItems()}},{key:"_triggerCollectionEvents",value:function _triggerCollectionEvents(addedNodes,removedNodes){var item;var addedNodesCount=addedNodes.length;for(var i=0;i<addedNodesCount;i+=1){item=addedNodes[i];if(item.tagName==='CORAL-COLUMNVIEW-ITEM'){this.trigger('coral-collection:add',{item:item})}}var removedNodesCount=removedNodes.length;for(var j=0;j<removedNodesCount;j+=1){item=removedNodes[j];if(item.tagName==='CORAL-COLUMNVIEW-ITEM'){this.trigger('coral-collection:remove',{item:item})}}}},{key:"render",value:function render(){var _this3=this;_get(_getPrototypeOf(ColumnViewColumn.prototype),"render",this).call(this);this.classList.add(CLASSNAME$P);this.setAttribute('role','group');this.id=this.id||commons.getUID();var content=this._elements.content;if(!content.parentNode){while(this.firstChild){content.appendChild(this.firstChild)}}content.setAttribute('role','presentation');this.content=content;this._setStateFromDOM();this._oldSelection=this.selectedItems;this._oldActiveItem=this.activeItem;if(!WINDOW_LOAD){window.addEventListener('load',function(){_this3._loadFittingAdditionalItems()})}else{window.setTimeout(function(){_this3._loadFittingAdditionalItems()})}}},{key:"activeItem",get:function get(){return this.items._getAllActive()[0]||null}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-columnview-column-content',insert:function insert(content){content.classList.add('_coral-AssetList');this.appendChild(content)}})}},{key:"items",get:function get(){if(!this._items){this._items=new ColumnViewCollection({host:this,container:this._elements.content,itemTagName:'coral-columnview-item',onItemAdded:this._toggleItemSelection})}return this._items}},{key:"selectedItem",get:function get(){return this._selectionMode!==selectionMode$1.NONE?this.items._getFirstSelected():null}},{key:"selectedItems",get:function get(){return this._selectionMode!==selectionMode$1.NONE?this.items._getAllSelected():[]}},{key:"_selectionMode",get:function get(){return this.__selectionMode},set:function set(value){var _this4=this;value=transform.string(value).toLowerCase();this.__selectionMode=validate.enumeration(selectionMode$1)(value)&&value||null;this._reflectAttribute('_selectionmode',this.__selectionMode);this.items.getAll().forEach(function(item){return _this4._toggleItemSelection(item)});this._setStateFromDOM()}},{key:"_lastSelectedItems",get:function get(){return this.__lastSelectedItems||this.selectedItems},set:function set(value){this.__lastSelectedItems=value}},{key:"_contentZones",get:function get(){return{'coral-columnview-column-content':'content'}}}],[{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(ColumnViewColumn),"_attributePropertyMap",this),{_selectionmode:'_selectionMode'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ColumnViewColumn),"observedAttributes",this).concat(['_selectionmode'])}}]);return ColumnViewColumn}(BaseComponent(HTMLElement));var ColumnViewColumnContent=(function(){return document.createElement('coral-columnview-column-content')});var CLASSNAME$Q='_coral-AssetList-item';var variant$g={DEFAULT:'default',DRILLDOWN:'drilldown'};var ColumnViewItem=function(_BaseLabellable){_inherits(ColumnViewItem,_BaseLabellable);var _super=_createSuper(ColumnViewItem);function ColumnViewItem(){var _thisSuper,_this;_classCallCheck(this,ColumnViewItem);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-columnview-item-content')||document.createElement('coral-columnview-item-content'),thumbnail:_this.querySelector('coral-columnview-item-thumbnail')||document.createElement('coral-columnview-item-thumbnail'),accessibilityState:_this.querySelector('span[handle="accessibilityState"]')};if(!_this._elements.accessibilityState){template$x.call(_this._elements,{commons:commons})}_get((_thisSuper=_assertThisInitialized(_this),_getPrototypeOf(ColumnViewItem.prototype)),"_observeLabel",_thisSuper).call(_thisSuper);return _this}_createClass(ColumnViewItem,[{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='_selectable'){if(value===null){this.classList.remove('is-selectable')}else{this.classList.add('is-selectable');var itemSelector=this.querySelector('[coral-columnview-itemselect]');if(!itemSelector){itemSelector=new Checkbox();itemSelector.setAttribute('coral-columnview-itemselect','');itemSelector._elements.input.tabIndex=-1;itemSelector.setAttribute('labelledby',this._elements.content.id);this.insertBefore(itemSelector,this.firstChild)}}}else{_get(_getPrototypeOf(ColumnViewItem.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"render",value:function render(){_get(_getPrototypeOf(ColumnViewItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$Q);this.setAttribute('role','treeitem');this.id=this.id||commons.getUID();this.tabIndex=this.active||this.selected?0:-1;if(!this._variant){this.variant=variant$g.DEFAULT}var thumbnail=this._elements.thumbnail;var content=this._elements.content;var contentZoneProvided=content.parentNode||thumbnail.parentNode;if(!contentZoneProvided){while(this.firstChild){content.appendChild(this.firstChild)}}this.content=content;this.thumbnail=thumbnail;var thumbnailImg=thumbnail.querySelector('img:not([alt])');if(thumbnailImg){thumbnailImg.setAttribute('alt','')}thumbnail.id=thumbnail.id||commons.getUID();content.id=content.id||commons.getUID();var accessibilityState=this._elements.accessibilityState;accessibilityState.setAttribute('lang',i18n.locale);this.setAttribute('aria-labelledby',thumbnail.id+' '+content.id)}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-columnview-item-content',insert:function insert(content){content.classList.add("".concat(CLASSNAME$Q,"Label"));this.insertBefore(content,this.querySelector('._coral-AssetList-itemChildIndicator'))}})}},{key:"thumbnail",get:function get(){return this._getContentZone(this._elements.thumbnail)},set:function set(value){this._setContentZone('thumbnail',value,{handle:'thumbnail',tagName:'coral-columnview-item-thumbnail',insert:function insert(thumbnail){thumbnail.classList.add("".concat(CLASSNAME$Q,"Thumbnail"));this.insertBefore(thumbnail,this.content||null)}})}},{key:"variant",get:function get(){return this._variant||variant$g.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$g)(value)&&value||variant$g.DEFAULT;this._reflectAttribute('variant',this._variant);if(this._variant===variant$g.DRILLDOWN){var childIndicator=this.querySelector('._coral-AssetList-itemChildIndicator');if(!childIndicator){this.insertAdjacentHTML('beforeend',Icon._renderSVG('spectrum-css-icon-ChevronRightMedium',['_coral-AssetList-itemChildIndicator','_coral-UIIcon-ChevronRightMedium']))}this.classList.add('is-branch');this.setAttribute('aria-expanded',this.active)}else{this.classList.remove('is-branch');this.removeAttribute('aria-expanded')}}},{key:"icon",get:function get(){return this._icon||''},set:function set(value){this._icon=transform.string(value);this._reflectAttribute('icon',this._icon);if(this._icon){if(!this._elements.icon){this._elements.icon=new Icon()}this._elements.icon.icon=this.icon;this._elements.icon.size=Icon.size.SMALL;this._elements.thumbnail.innerHTML='';this._elements.thumbnail.appendChild(this._elements.icon)}_get(_getPrototypeOf(ColumnViewItem.prototype),"_toggleIconAriaHidden",this).call(this)}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.classList.toggle('is-selected',this._selected);this.setAttribute('aria-selected',this._selected);if(this.variant===variant$g.DRILLDOWN){if(this._ariaExpandedTimeout){window.clearTimeout(this._ariaExpandedTimeout);this._ariaExpandedTimeout=undefined}this.setAttribute('aria-expanded',this.active)}var accessibilityState=this._elements.accessibilityState;if(this.selected){this.removeAttribute('aria-owns');this.removeAttribute('aria-describedby');accessibilityState.innerHTML=i18n.get(', checked');if(!this.contains(accessibilityState)){this.appendChild(accessibilityState)}}else{this._elements.accessibilityState=accessibilityState.parentNode.removeChild(accessibilityState);this._elements.accessibilityState.innerHTML=''}var ariaLabelledby=this._elements.thumbnail.id+' '+this._elements.content.id;this.setAttribute('aria-labelledby',this.selected?"".concat(ariaLabelledby," ").concat(accessibilityState.id):ariaLabelledby);var itemSelector=this.querySelector('coral-checkbox[coral-columnview-itemselect]');if(itemSelector){itemSelector[this._selected?'setAttribute':'removeAttribute']('checked','')}this.trigger('coral-columnview-item:_selectedchanged')}},{key:"active",get:function get(){return this._active||false},set:function set(value){var _this2=this;this._active=transform.booleanAttr(value);this._reflectAttribute('active',this._active);this.classList.toggle('is-navigated',this._active);this.setAttribute('aria-selected',this._active);if(this.variant===variant$g.DRILLDOWN){if(this._ariaExpandedTimeout){window.cancelAnimationFrame(this._ariaExpandedTimeout);window.clearTimeout(this._ariaExpandedTimeout);this._ariaExpandedTimeout=undefined}var timeoutDelay=20;this._ariaExpandedTimeout=commons.nextFrame(function(){var isFocused=_this2===document.activeElement||_this2.contains(document.activeElement);var activeElement;if(isFocused&&!_this2.selected){_this2.setAttribute('aria-expanded',_this2._active);activeElement=document.activeElement;activeElement.blur()}else{_this2.setAttribute('aria-hidden',true)}commons.nextFrame(function(){if(isFocused&&activeElement){activeElement.focus()}else{window.setTimeout(function(){_this2.setAttribute('aria-expanded',_this2._active);commons.nextFrame(function(){return _this2.removeAttribute('aria-hidden')})},timeoutDelay)}})})}if(!this._active){this.removeAttribute('aria-owns');this.removeAttribute('aria-describedby')}this.trigger('coral-columnview-item:_activechanged')}},{key:"_contentZones",get:function get(){return{'coral-columnview-item-content':'content','coral-columnview-item-thumbnail':'thumbnail'}}}],[{key:"variant",get:function get(){return variant$g}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ColumnViewItem),"observedAttributes",this).concat(['variant','icon','selected','active','_selectable'])}}]);return ColumnViewItem}(BaseLabellable(BaseComponent(HTMLElement)));var ColumnViewItemContent=(function(){return document.createElement('coral-columnview-item-content')});var ColumnViewItemThumbnail=(function(){return document.createElement('coral-columnview-item-thumbnail')});var CLASSNAME$R='_coral-MillerColumns-item';var ColumnViewPreview=function(_BaseComponent){_inherits(ColumnViewPreview,_BaseComponent);var _super=_createSuper(ColumnViewPreview);function ColumnViewPreview(){var _this;_classCallCheck(this,ColumnViewPreview);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-columnview-preview-content')||document.createElement('coral-columnview-preview-content')};return _this}_createClass(ColumnViewPreview,[{key:"render",value:function render(){_get(_getPrototypeOf(ColumnViewPreview.prototype),"render",this).call(this);this.setAttribute('role','group');this.id=this.id||commons.getUID();this.classList.add(CLASSNAME$R);var content=this._elements.content;if(!content.parentNode){while(this.firstChild){content.appendChild(this.firstChild)}}this.content=content;this._makeAccessible()}},{key:"_makeAccessible",value:function _makeAccessible(){var elements=this.content.querySelectorAll('coral-columnview-preview-label + coral-columnview-preview-value');var length=elements.length;var i;var element;var elementLabel;for(i=0;i<length;i+=1){element=elements[i];elementLabel=element.previousElementSibling;elementLabel.id=elementLabel.id||commons.getUID();element.setAttribute('aria-labelledby',elementLabel.id);element.setAttribute('role','textbox');element.setAttribute('tabindex','0');element.setAttribute('aria-readonly','true');if(window.cvox){element.setAttribute('aria-valuetext',element.textContent)}}elements=this.content.querySelectorAll('coral-columnview-preview-separator');length=elements.length;for(i=0;i<length;i+=1){element=elements[i];element.setAttribute('role','separator');element.setAttribute('aria-orientation','horizontal')}elements=this.content.querySelectorAll('coral-columnview-preview-asset > img:not([alt])');length=elements.length;for(i=0;i<length;i+=1){element=elements[i];element.setAttribute('alt','')}}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-columnview-preview-content',insert:function insert(content){content.classList.add('coral-Body--small');this.appendChild(content)}})}},{key:"_contentZones",get:function get(){return{'coral-columnview-preview-content':'content'}}}]);return ColumnViewPreview}(BaseComponent(HTMLElement));var ColumnViewPreviewAsset=(function(){return document.createElement('coral-columnview-preview-asset')});var ColumnViewPreviewContent=(function(){return document.createElement('coral-columnview-preview-content')});var ColumnViewPreviewLabel=(function(){return document.createElement('coral-columnview-preview-label')});var ColumnViewPreviewSeparator=(function(){return document.createElement('coral-columnview-preview-separator')});var ColumnViewPreviewValue=(function(){return document.createElement('coral-columnview-preview-value')});var translations$e={"en-US":{"Column View":"Column View",", checked":", checked",", unchecked":", unchecked"},"de-DE":{"Column View":"Column View",", checked":", markiert",", unchecked":", nicht markiert"},"fr-FR":{"Column View":"Column View",", checked":", cochée",", unchecked":", pas cochée"},"it-IT":{"Column View":"Column View",", checked":", selezionata",", unchecked":", non selezionata"},"ja-JP":{"Column View":"Column View",", checked":"、チェック",", unchecked":"、未チェック"},"es-ES":{"Column View":"Column View",", checked":", marcada",", unchecked":", desmarcada"},"ko-KR":{"Column View":"Column View",", checked":", 선택됨",", unchecked":", 선택되지 않은"},"zh-CN":{"Column View":"Column View",", checked":"，选中",", unchecked":"，未选中"},"zh-TW":{"Column View":"Column View",", checked":"，選中",", unchecked":"，未選中"},"pt-BR":{"Column View":"Column View",", checked":", marcada",", unchecked":", desmarcada"},"nl-NL":{"Column View":"Column View",", checked":", geselecteerd",", unchecked":", neit geselecteerd"},"da-DK":{", checked":", valgte",", unchecked":", ikke valgt"},"fi-FI":{"Column View":"Column View",", checked":", valittu",", unchecked":", valittuna"},"nb-NO":{"Column View":"Column View",", checked":", valgt",", unchecked":", ikke valgt"},"sv-SE":{"Column View":"Column View",", checked":", markerad",", unchecked":", avmarkerad"},"cs-CZ":{"Column View":"Column View",", checked":", vybráno",", unchecked":", není vybráno"},"pl-PL":{"Column View":"Column View",", checked":", zaznaczone",", unchecked":", nie zaznaczone"},"ru-RU":{"Column View":"Column View",", checked":", выбранный",", unchecked":", неотобранный"},"tr-TR":{"Column View":"Column View",", checked":", seçilmiş",", unchecked":", seçilmemiş"}};commons.extend(strings,{'coral-component-columnview':translations$e});commons._define('coral-columnview-preview',ColumnViewPreview);commons._define('coral-columnview-column',ColumnViewColumn);commons._define('coral-columnview-item',ColumnViewItem);commons._define('coral-columnview',ColumnView);ColumnView.Column=ColumnViewColumn;ColumnView.Column.Content=ColumnViewColumnContent;ColumnView.Item=ColumnViewItem;ColumnView.Item.Content=ColumnViewItemContent;ColumnView.Item.Thumbnail=ColumnViewItemThumbnail;ColumnView.Preview=ColumnViewPreview;ColumnView.Preview.Asset=ColumnViewPreviewAsset;ColumnView.Preview.Content=ColumnViewPreviewContent;ColumnView.Preview.Label=ColumnViewPreviewLabel;ColumnView.Preview.Separator=ColumnViewPreviewSeparator;ColumnView.Preview.Value=ColumnViewPreviewValue;var displayMode={ICON:'icon',TEXT:'text',ICON_TEXT:'icontext',INHERIT:'inherit'};var CycleButtonItem=function(_BaseComponent){_inherits(CycleButtonItem,_BaseComponent);var _super=_createSuper(CycleButtonItem);function CycleButtonItem(){_classCallCheck(this,CycleButtonItem);return _super.apply(this,arguments)}_createClass(CycleButtonItem,[{key:"render",value:function render(){_get(_getPrototypeOf(CycleButtonItem.prototype),"render",this).call(this);this.setAttribute('role','menuitemradio');if(!this._displayMode){this.displayMode=displayMode.INHERIT}}},{key:"icon",get:function get(){return this._icon||''},set:function set(value){this._icon=transform.string(value);this._reflectAttribute('icon',this._icon);this.trigger('coral-cyclebutton-item:_iconchanged')}},{key:"content",get:function get(){return this},set:function set(value){if(_typeof(value)==='object'){for(var prop in value){this[prop]=value[prop]}}}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.classList.toggle('is-disabled',this.disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);if(this._disabled&&this.selected){this.selected=false}if(!this._disabled&&!this.selected){this.trigger('coral-cyclebutton-item:_validateselection')}}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){value=transform.booleanAttr(value);if(!value||value&&!this.disabled){this._selected=value;this._reflectAttribute('selected',this.disabled?false:this._selected);this.classList.toggle('is-selected',this._selected);this.setAttribute('aria-checked',this._selected);this.trigger('coral-cyclebutton-item:_selectedchanged')}}},{key:"displayMode",get:function get(){return this._displayMode||displayMode.INHERIT},set:function set(value){value=transform.string(value).toLowerCase();this._displayMode=validate.enumeration(displayMode)(value)&&value||displayMode.INHERIT;this._reflectAttribute('displaymode',this._displayMode);this.trigger('coral-cyclebutton-item:_displaymodechanged')}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?(this.content||this).textContent.replace(/\s{2,}/g,' ').trim()||this.icon:this._trackingElement},set:function set(value){_set(_getPrototypeOf(CycleButtonItem.prototype),"trackingElement",value,this,true)}}],[{key:"displayMode",get:function get(){return displayMode}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(CycleButtonItem),"_attributePropertyMap",this),{displaymode:'displayMode'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(CycleButtonItem),"observedAttributes",this).concat(['selected','disabled','icon','displaymode'])}}]);return CycleButtonItem}(BaseComponent(HTMLElement));var template$y=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;data.buttonId=data.id+'-button';data.menuId=data.id+'-menu';data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["button"]=document.createElement("button","coral-button");el2.setAttribute("tracking","off");el2.id=data_0["buttonId"];el2.setAttribute("handle","button");el2.className+=" _coral-CycleSelect-button";el2.setAttribute("is","coral-button");el2.setAttribute("type","button");el2.setAttribute("variant","quietaction");el2.setAttribute("iconsize","S");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=this["label"]=document.createElement("coral-button-label");el4.className+=" _coral-ActionButton-label";el4.setAttribute("handle","label");el2.appendChild(el4);var el5=document.createTextNode("\n");el2.appendChild(el5);frag.appendChild(el2);var el6=document.createTextNode("\n");frag.appendChild(el6);data=data_0;this.button._elements.label=this.label;this.button.insertAdjacentHTML('afterbegin',data.Icon._renderSVG('spectrum-css-icon-ChevronDownMedium',['_coral-CycleSelect-icon','_coral-UIIcon-ChevronDownMedium']));data_0=data;var el8=document.createTextNode("\n");frag.appendChild(el8);var el9=this["overlay"]=document.createElement("coral-popover");el9.setAttribute("tracking","off");el9.setAttribute("smart","");el9.id=data_0["menuId"];el9.setAttribute("handle","overlay");el9.setAttribute("focusonshow","coral-selectlist");el9.setAttribute("placement","bottom");el9.setAttribute("aria-live","off");el9.setAttribute("role","menu");var el10=document.createTextNode("\n  ");el9.appendChild(el10);var el11=this["selectList"]=document.createElement("coral-selectlist");el11.setAttribute("role","group");el11.setAttribute("tracking","off");el11.className+=" _coral-CycleSelect-list";el11.setAttribute("handle","selectList");el11.id=data_0["commons"]["getUID"]();el9.appendChild(el11);var el12=document.createTextNode("\n  ");el9.appendChild(el12);var el13=this["separator"]=document.createElement("div");el13.setAttribute("role","separator");el13.setAttribute("handle","separator");el13.className+=" _coral-CycleButton-separator";el13.setAttribute("hidden","");el9.appendChild(el13);var el14=document.createTextNode("\n  ");el9.appendChild(el14);var el15=this["actionList"]=document.createElement("coral-buttonlist");el15.setAttribute("role","group");el15.setAttribute("tracking","off");el15.className+=" _coral-CycleSelect-buttonList";el15.setAttribute("handle","actionList");el15.setAttribute("hidden","");el9.appendChild(el15);var el16=document.createTextNode("\n");el9.appendChild(el16);frag.appendChild(el9);var el17=document.createTextNode("\n");frag.appendChild(el17);return frag};var displayMode$1={ICON:'icon',TEXT:'text',ICON_TEXT:'icontext'};var WHITESPACE_REGEX=/[\t\n\r ]+/g;var ACTION_TAG_NAME='coral-cyclebutton-action';var CLASSNAME$S='_coral-CycleSelect';var CycleButton=function(_BaseComponent){_inherits(CycleButton,_BaseComponent);var _super=_createSuper(CycleButton);function CycleButton(){var _this;_classCallCheck(this,CycleButton);_this=_super.call(this);_this._id=_this.id||commons.getUID();_this._elements={};template$y.call(_this._elements,{Icon:Icon,commons:commons,id:_this._id});var events={'click button[is="coral-button"]':'_onMouseDown','click ._coral-CycleSelect-button':'_onItemClick','click coral-cyclebutton-item':'_onItemClick','key:down ._coral-CycleSelect-button[aria-expanded=false]':'_onItemClick','coral-cyclebutton-item:_selectedchanged':'_onItemSelectedChanged','coral-cyclebutton-item:_validateselection':'_onValidateSelection','coral-cyclebutton-item:_iconchanged coral-cyclebutton-item[selected]':'_onSelectedItemPropertyChange','coral-cyclebutton-item:_displaymodechanged coral-cyclebutton-item[selected]':'_onSelectedItemPropertyChange','key:pageup coral-selectlist-item, [coral-list-item]':'_onFocusPreviousItem','key:left coral-selectlist-item, [coral-list-item]':'_onFocusPreviousItem','key:up coral-selectlist-item, [coral-list-item]':'_onFocusPreviousItem','key:pagedown coral-selectlist-item, [coral-list-item]':'_onFocusNextItem','key:right coral-selectlist-item, [coral-list-item]':'_onFocusNextItem','key:down coral-selectlist-item, [coral-list-item]':'_onFocusNextItem','key:home coral-selectlist-item, [coral-list-item]':'_onFocusFirstItem','key:end coral-selectlist-item, [coral-list-item]':'_onFocusLastItem','capture:focus coral-selectlist-item, [coral-list-item]':'_onItemFocus','capture:blur coral-selectlist-item, [coral-list-item]':'_onItemBlur','coral-overlay:open':'_onOverlayOpen','coral-overlay:close':'_onOverlayClose'};var overlay=_this._elements.overlay;var overlayId=overlay.id;events["global:capture:click #".concat(overlayId," button[is=\"coral-buttonlist-item\"]")]='_onActionClick';events["global:capture:coral-selectlist:beforechange #".concat(overlayId)]='_onSelectListBeforeChange';events["global:capture:coral-selectlist:change #".concat(overlayId)]='_onSelectListChange';events["global:keypress #".concat(overlayId)]='_onOverlayKeyPress';_this._delegateEvents(events);_this._oldSelection=null;_this.items._startHandlingItems(true);_this.actions._startHandlingItems(true);return _this}_createClass(CycleButton,[{key:"_hasMenuItemRadioGroup",value:function _hasMenuItemRadioGroup(){return this.items.getAll().length>0&&this.actions.getAll().length>0}},{key:"_onItemAdded",value:function _onItemAdded(item){if(!this.selectedItem){item.setAttribute('selected','')}else{this._validateSelection(item)}this._checkExtended()}},{key:"_onItemRemoved",value:function _onItemRemoved(){if(!this.selectedItem){this._selectFirstItem()}this._checkExtended()}},{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_onValidateSelection",value:function _onValidateSelection(event){event.stopImmediatePropagation();this._validateSelection()}},{key:"_selectFirstItem",value:function _selectFirstItem(){var item=this.items._getFirstSelectable();if(item){item.setAttribute('selected','')}}},{key:"_validateSelection",value:function _validateSelection(item){var _this2=this;var selectedItems=this.items._getAllSelected();if(item){if(!item.hasAttribute('selected')&&!selectedItems.length){var siblingItem=this.items._getNextSelectable(item);if(item!==siblingItem){siblingItem.setAttribute('selected','')}}else if(item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}}else if(selectedItems.length>1){item=selectedItems[selectedItems.length-1];selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}else if(!selectedItems.length){this._selectFirstItem()}this._renderSelectedItem(this.selectedItem);this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){this.trigger('coral-cyclebutton:change',{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"_onMouseDown",value:function _onMouseDown(event){event.preventDefault();event.stopPropagation();this._trackEvent('click','coral-cyclebutton',event)}},{key:"_onItemClick",value:function _onItemClick(event){event.preventDefault();var items=this.items.getAll();var itemCount=items.length;if(this._isExtended()){this[this._elements.overlay.classList.contains('is-open')?'_hideOverlay':'_showOverlay']()}else if(itemCount>1){var neighbor=this.selectedItem.nextElementSibling;var nextItem=neighbor.nodeName==='CORAL-CYCLEBUTTON-ITEM'?neighbor:items[0];this._selectCycleItem(nextItem);this._focusItem(this._elements.button)}}},{key:"_renderSelectedItem",value:function _renderSelectedItem(item){if(!item||!item.content){return}var effectiveDisplayMode=this.displayMode;var effectiveIcon=item.icon||this.icon||'';if(item.displayMode!==CycleButtonItem.displayMode.INHERIT){effectiveDisplayMode=item.displayMode}if(!item.content.textContent.trim()||!effectiveIcon.trim()){effectiveDisplayMode=displayMode$1.ICON_TEXT}if(effectiveDisplayMode===displayMode$1.ICON){this._elements.button.icon=effectiveIcon;this._elements.button.label.innerHTML='';var ariaLabel=item.content.textContent.replace(WHITESPACE_REGEX,' ');this._elements.button.setAttribute('aria-label',ariaLabel);this._elements.button.setAttribute('title',ariaLabel);if(ariaLabel&&effectiveIcon!==''&&this._elements.button._elements.icon){this._elements.button._elements.icon.setAttribute('aria-hidden',true)}}else{if(effectiveDisplayMode===displayMode$1.TEXT){this._elements.button.icon=''}if(effectiveDisplayMode===displayMode$1.ICON_TEXT){this._elements.button.icon=effectiveIcon;if(effectiveIcon!==''&&this._elements.button._elements.icon){this._elements.button._elements.icon.setAttribute('aria-hidden',true)}}this._elements.button.label.innerHTML=item.content.innerHTML;this._elements.button.removeAttribute('aria-label');this._elements.button.removeAttribute('title')}}},{key:"_onSelectedItemPropertyChange",value:function _onSelectedItemPropertyChange(event){event.stopImmediatePropagation();this._renderSelectedItem(event.target)}},{key:"_onSelectListBeforeChange",value:function _onSelectListBeforeChange(event){if(event.detail.item.selected){event.preventDefault();if(!this._isPopulatingLists){this._hideOverlay()}}}},{key:"_onSelectListChange",value:function _onSelectListChange(event){event.stopImmediatePropagation();event.preventDefault();var origNode;var selectListItem=event.detail.selection;if(selectListItem){origNode=selectListItem._originalItem;this._selectCycleItem(origNode);if(!this._isPopulatingLists){this._hideOverlay()}}this._trackEvent('selected','coral-cyclebutton-item',event,origNode)}},{key:"_onOverlayKeyPress",value:function _onOverlayKeyPress(event){this._elements.selectList._onKeyPress(event)}},{key:"_onActionClick",value:function _onActionClick(event){event.stopPropagation();var item=event.matchedTarget;var proxyEvent=item._originalItem.trigger('click');if(!proxyEvent.defaultPrevented){this._hideOverlay()}this._trackEvent('selected','coral-cyclebutton-action',event,item)}},{key:"_isExtended",value:function _isExtended(){var hasActions=this.actions.getAll().length>0;return this.threshold>0&&this.items.getAll().length>=this.threshold||hasActions}},{key:"_checkExtended",value:function _checkExtended(){var isExtended=this._isExtended();this.classList.toggle("".concat(CLASSNAME$S,"--extended"),isExtended);if(isExtended){this._elements.button.setAttribute('aria-controls',this._elements.overlay.id);this._elements.button.setAttribute('aria-haspopup',true);this._elements.button.setAttribute('aria-expanded',false);this._elements.overlay.target=this._elements.button;this._elements.overlay.hidden=false;this._elements.overlay.content.setAttribute('role','presentation')}else{this._elements.button.removeAttribute('aria-controls');this._elements.button.removeAttribute('aria-haspopup');this._elements.button.removeAttribute('aria-expanded');this._elements.overlay.target=null;this._elements.overlay.hidden=true}}},{key:"_focusItem",value:function _focusItem(item){if(item){item.focus()}}},{key:"_onFocusPreviousItem",value:function _onFocusPreviousItem(event){event.preventDefault();var items=this._getSelectableItems();if(items.length>1){var el=event.matchedTarget;var index=items.indexOf(el);if(index>0){this._focusItem(items[index-1])}else if(document.activeElement!==el){this._focusItem(el)}}}},{key:"_onFocusNextItem",value:function _onFocusNextItem(event){event.preventDefault();var items=this._getSelectableItems();if(items.length>1){var el=event.matchedTarget;var index=items.indexOf(el);if(index<items.length-1){this._focusItem(items[index+1])}else if(document.activeElement!==el){this._focusItem(el)}}}},{key:"_onFocusFirstItem",value:function _onFocusFirstItem(event){event.preventDefault();this._focusItem(this._getSelectableItems()[0])}},{key:"_onFocusLastItem",value:function _onFocusLastItem(event){event.preventDefault();var items=this._getSelectableItems();this._focusItem(items[items.length-1])}},{key:"_getSelectableItems",value:function _getSelectableItems(){var items=this.items.getAll();var actions=this.actions.getAll();return items.concat(actions).map(function(item){return item._selectListItem||item._buttonListItem}).filter(function(item){!item.hasAttribute('hidden')&&!item.hasAttribute('disabled')&&item.offsetParent!==null&&(item.offsetWidth>0||item.offsetHeight>0)})}},{key:"_onItemFocus",value:function _onItemFocus(event){this._elements.selectList.classList.toggle('is-focused',true);event.matchedTarget.classList.toggle('focus-ring',true)}},{key:"_onItemBlur",value:function _onItemBlur(event){this._elements.selectList.classList.toggle('is-focused',false);event.matchedTarget.classList.toggle('focus-ring',false)}},{key:"_onOverlayClose",value:function _onOverlayClose(){this._elements.button.setAttribute('aria-expanded',false)}},{key:"_onOverlayOpen",value:function _onOverlayOpen(){this._elements.button.setAttribute('aria-expanded',true)}},{key:"_hideOverlay",value:function _hideOverlay(){this._elements.overlay.hide()}},{key:"_getSelectListItem",value:function _getSelectListItem(item){var selectListItem=new SelectList.Item();selectListItem.trackingElement=item.trackingElement;var selectListItemContent=new SelectList.Item.Content();selectListItemContent.innerHTML=item.content.innerHTML;selectListItem.content=selectListItemContent;if(item.icon){selectListItem.icon=item.icon}selectListItem.disabled=item.disabled;selectListItem.selected=item.selected;selectListItem.role=item.role;selectListItem.setAttribute('aria-checked',item.selected);selectListItem._originalItem=item;item._selectListItem=selectListItem;return selectListItem}},{key:"_getActionListItem",value:function _getActionListItem(action){var actionListItem=new ButtonList.Item();actionListItem.icon=action.icon;actionListItem.disabled=action.disabled;actionListItem.role=action.role;actionListItem.tabIndex=action.tabIndex;actionListItem.trackingElement=action.trackingElement;actionListItem.content.innerHTML=action.content.innerHTML;actionListItem._originalItem=action;action._buttonListItem=actionListItem;return actionListItem}},{key:"_populateLists",value:function _populateLists(){var _this3=this;var selectList=this._elements.selectList;var actionList=this._elements.actionList;var items=this.items.getAll();var actions=this.actions.getAll();var itemCount=items.length;var actionCount=actions.length;var selectListItem;var actionListItem;this._isPopulatingLists=true;selectList.items.clear();actionList.items.clear();for(var i=0;i<itemCount;i+=1){var item=items[i];selectListItem=this._getSelectListItem(item);selectListItem.icon=item.icon;selectListItem.role=item.role;selectListItem.setAttribute('aria-checked',item.selected);selectListItem._elements.icon.setAttribute('aria-hidden',true);selectListItem.set({disabled:item.disabled,selected:item.selected},true);selectList.items.add(selectListItem)}if(actionCount>0){for(var j=0;j<actionCount;j+=1){var action=actions[j];actionListItem=this._getActionListItem(action);actionListItem.disabled=action.disabled;actionListItem.icon=action.icon;actionListItem.role=action.role;actionListItem._elements.icon.setAttribute('aria-hidden',true);actionList.items.add(actionListItem)}this._elements.actionList.removeAttribute('hidden');if(itemCount>0){this._elements.separator.removeAttribute('hidden');this._elements.selectList.setAttribute('role','group')}}else{this._elements.actionList.setAttribute('hidden','');this._elements.separator.setAttribute('hidden','');this._elements.selectList.setAttribute('role','presentation')}commons.nextFrame(function(){_this3._isPopulatingLists=false})}},{key:"_selectCycleItem",value:function _selectCycleItem(item){item.setAttribute('selected','')}},{key:"_showOverlay",value:function _showOverlay(){this._populateLists();this._elements.overlay.show()}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='aria-label'){var hasMenuItemRadioGroup=this._hasMenuItemRadioGroup();if(this.getAttribute('aria-labelledby')){this._elements.button.setAttribute('aria-labelledby',"".concat(this.id," ").concat(this._elements.button.id));this._elements.overlay.setAttribute('aria-labelledby',this.id);this._elements.selectList[hasMenuItemRadioGroup?'setAttribute':'removeAttribute']('aria-labelledby',this.id)}else{this._elements.button.removeAttribute('aria-labelledby');this._elements.overlay.setAttribute('aria-labelledby',this._elements.button.id);this._elements.selectList[hasMenuItemRadioGroup?'setAttribute':'removeAttribute']('aria-labelledby',this._elements.button.id)}}else if(name==='aria-labelledby'){if(value||!this.getAttribute('aria-label')){this._elements.button.setAttribute('aria-labelledby',"".concat(value," ").concat(this._elements.button.id));this._elements.overlay.setAttribute('aria-labelledby',value||this._elements.button.id);this._elements.selectList[this._hasMenuItemRadioGroup()?'setAttribute':'removeAttribute']('aria-labelledby',value||this._elements.button.id)}}else{_get(_getPrototypeOf(CycleButton.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(CycleButton.prototype),"connectedCallback",this).call(this);var overlay=this._elements.overlay;overlay.removeAttribute('open');if(overlay._parent){overlay._parent.appendChild(overlay)}}},{key:"render",value:function render(){var _this4=this;_get(_getPrototypeOf(CycleButton.prototype),"render",this).call(this);if(!this.id){this.id=this._id}this.classList.add(CLASSNAME$S);if(typeof this._threshold==='undefined'){this.threshold=3}if(!this._displayMode){this.displayMode=displayMode$1.ICON}this.setAttribute('role','presentation');this._checkExtended();['button','overlay'].forEach(function(handleName){var handle=_this4.querySelector("[handle=\"".concat(handleName,"\"]"));if(handle){handle.remove()}});var frag=document.createDocumentFragment();frag.appendChild(this._elements.button);frag.appendChild(this._elements.overlay);this.appendChild(frag);this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(CycleButton.prototype),"disconnectedCallback",this).call(this);var overlay=this._elements.overlay;if(!this.contains(overlay)){overlay._parent=overlay._repositioned?document.body:this;overlay.remove()}}},{key:"overlay",get:function get(){return this._elements.overlay}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-cyclebutton-item',onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getLastSelected()}},{key:"icon",get:function get(){return this._icon||''},set:function set(value){this._icon=transform.string(value);this._reflectAttribute('icon',this._icon);var selectedItem=this.selectedItem;if(selectedItem){this._renderSelectedItem(selectedItem)}}},{key:"threshold",get:function get(){return typeof this._threshold==='number'?this._threshold:3},set:function set(value){value=transform.number(value);if(value>-1){this._threshold=value;this._checkExtended()}}},{key:"actions",get:function get(){if(!this._actions){this._actions=new SelectableCollection({host:this,itemTagName:ACTION_TAG_NAME,itemSelector:ACTION_TAG_NAME,onCollectionChange:this._checkExtended})}return this._actions}},{key:"displayMode",get:function get(){return this._displayMode||displayMode$1.ICON},set:function set(value){value=transform.string(value).toLowerCase();this._displayMode=validate.enumeration(displayMode$1)(value)&&value||displayMode$1.ICON;this._reflectAttribute('displaymode',this._displayMode);var selectedItem=this.selectedItem;if(selectedItem){this._renderSelectedItem(selectedItem)}}}],[{key:"displayMode",get:function get(){return displayMode$1}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(CycleButton),"_attributePropertyMap",this),{displaymode:'displayMode'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(CycleButton),"observedAttributes",this).concat(['icon','threshold','displaymode','aria-label','aria-labelledby'])}}]);return CycleButton}(BaseComponent(HTMLElement));var CycleButtonAction=function(_BaseComponent){_inherits(CycleButtonAction,_BaseComponent);var _super=_createSuper(CycleButtonAction);function CycleButtonAction(){_classCallCheck(this,CycleButtonAction);return _super.apply(this,arguments)}_createClass(CycleButtonAction,[{key:"render",value:function render(){_get(_getPrototypeOf(CycleButtonAction.prototype),"render",this).call(this);this.setAttribute('role','menuitem');this.tabIndex=-1}},{key:"icon",get:function get(){return this._icon||''},set:function set(value){this._icon=transform.string(value);this._reflectAttribute('icon',this._icon)}},{key:"content",get:function get(){return this},set:function set(value){if(_typeof(value)==='object'){for(var prop in value){this[prop]=value[prop]}}}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?(this.content||this).textContent.replace(/\s{2,}/g,' ').trim()||this.icon:this._trackingElement},set:function set(value){_set(_getPrototypeOf(CycleButtonAction.prototype),"trackingElement",value,this,true)}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(CycleButtonAction),"observedAttributes",this).concat(['icon'])}}]);return CycleButtonAction}(BaseComponent(HTMLElement));commons._define('coral-cyclebutton-action',CycleButtonAction);commons._define('coral-cyclebutton-item',CycleButtonItem);commons._define('coral-cyclebutton',CycleButton);CycleButton.Item=CycleButtonItem;CycleButton.Action=CycleButtonAction;var translations$f={"en-US":{"Time":"Time","Calendar":"Calendar"},"de-DE":{"Time":"Zeit","Calendar":"Kalender"},"fr-FR":{"Time":"Heure","Calendar":"Calendrier"},"it-IT":{"Time":"Ora","Calendar":"Calendario"},"ja-JP":{"Time":"時間","Calendar":"カレンダー"},"es-ES":{"Time":"Hora","Calendar":"Calendario"},"ko-KR":{"Time":"시간","Calendar":"달력"},"zh-CN":{"Time":"时间","Calendar":"日历"},"zh-TW":{"Time":"時間","Calendar":"日曆"},"pt-BR":{"Time":"Hora","Calendar":"Calendário"},"nl-NL":{"Time":"Tijd","Calendar":"Kalender"},"da-DK":{"Time":"Tid","Calendar":"Kalender"},"fi-FI":{"Time":"Aika","Calendar":"Kalenteri"},"nb-NO":{"Time":"Klokkeslett","Calendar":"Kalender"},"sv-SE":{"Time":"Tid","Calendar":"Kalender"},"cs-CZ":{"Time":"Čas","Calendar":"Kalendář"},"pl-PL":{"Time":"Czas","Calendar":"Kalendarz"},"ru-RU":{"Time":"Время","Calendar":"Календарь"},"tr-TR":{"Time":"Zaman","Calendar":"Takvim"}};var template$z=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["overlay"]=document.createElement("coral-popover");el0.setAttribute("tracking","off");el0.setAttribute("smart","");el0.className+=" _coral-Datepicker-overlay";el0.setAttribute("handle","overlay");el0.id=data_0["commons"]["getUID"]();el0.setAttribute("breadthoffset","50%r - 50%p");el0.setAttribute("placement","bottom");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["hiddenInput"]=document.createElement("input");el2.setAttribute("type","hidden");el2.setAttribute("handle","hiddenInput");frag.appendChild(el2);var el3=document.createTextNode("\n");frag.appendChild(el3);var el4=this["input"]=document.createElement("input","coral-textfield");el4.setAttribute("tracking","off");el4.setAttribute("is","coral-textfield");el4.setAttribute("type","text");el4.setAttribute("handle","input");el4.className+=" _coral-InputGroup-field";el4.setAttribute("role","textbox");frag.appendChild(el4);var el5=document.createTextNode("\n");frag.appendChild(el5);var el6=this["toggle"]=document.createElement("button","coral-button");el6.setAttribute("tracking","off");el6.setAttribute("is","coral-button");el6.setAttribute("variant","_custom");el6.className+=" _coral-InputGroup-button _coral-FieldButton";el6.setAttribute("type","button");el6.setAttribute("handle","toggle");el6.setAttribute("aria-haspopup","dialog");el6.setAttribute("aria-label",data_0["i18n"]["get"]('Calendar'));el6.setAttribute("title",data_0["i18n"]["get"]('Calendar'));var el7=document.createTextNode("\n  ");el6.appendChild(el7);var el8=this["icon"]=document.createElement("coral-icon");el8.setAttribute("icon","calendar");el8.setAttribute("iconsize","S");el8.className+=" u-coral-noMargin";el8.setAttribute("handle","icon");el6.appendChild(el8);var el9=document.createTextNode("\n  ");el6.appendChild(el9);var el10=document.createElement("coral-button-label");el6.appendChild(el10);var el11=document.createTextNode("\n");el6.appendChild(el11);frag.appendChild(el6);var el12=document.createTextNode("\n");frag.appendChild(el12);return frag};var template$A=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;var uid=data.commons.getUID();data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["calendar"]=document.createElement("coral-calendar");el2.setAttribute("handle","calendar");el2.className+=" _coral-Datepicker-calendar";el2.setAttribute("aria-labelledby",uid+"-calendar");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=document.createElement("span");el4.id=uid+"-calendar";el4.className+=" u-coral-screenReaderOnly";el4.setAttribute("hidden","");el4.textContent=data_0["i18n"]["get"]("Calendar");el2.appendChild(el4);var el5=document.createTextNode("\n");el2.appendChild(el5);frag.appendChild(el2);var el6=document.createTextNode("\n");frag.appendChild(el6);var el7=this["clock"]=document.createElement("coral-clock");el7.setAttribute("handle","clock");el7.className+=" _coral-Datepicker-clock";el7.setAttribute("aria-labelledby",uid+"-clock");var el8=document.createTextNode("\n  ");el7.appendChild(el8);var el9=document.createElement("span");el9.id=uid+"-clock";el9.className+=" u-coral-screenReaderOnly";el9.setAttribute("hidden","");el9.textContent=data_0["i18n"]["get"]("Time");el7.appendChild(el9);var el10=document.createTextNode("\n");el7.appendChild(el10);frag.appendChild(el7);var el11=document.createTextNode("\n");frag.appendChild(el11);return frag};var variant$h={DEFAULT:'default',QUIET:'quiet'};var CLASSNAME$T='_coral-InputGroup';var ALL_VARIANT_CLASSES$a=[];for(var variantKey in variant$h){ALL_VARIANT_CLASSES$a.push("".concat(CLASSNAME$T,"--").concat(variant$h[variantKey]))}function toMoment$1(value,format){if(value==='today'){return new DateTime.Moment()}else if(DateTime.Moment.isMoment(value)){return value.isValid()?value.clone():null}var result=new DateTime.Moment(value,value instanceof Date?null:format);return result.isValid()?result:null}var type={DATE:'date',DATETIME:'datetime',TIME:'time'};var IS_MOBILE_DEVICE$1=navigator.userAgent.match(/iPhone|iPad|iPod|Android/i)!==null;var NATIVE_FORMATS={date:'YYYY-MM-DD',datetime:'YYYY-MM-DD[T]HH:mmZ',time:'HH:mm'};var isNativeFormat=function isNativeFormat(format){var res=false;for(var key in NATIVE_FORMATS){if(format===NATIVE_FORMATS[key]){res=true}}return res};var Datepicker=function(_BaseFormField){_inherits(Datepicker,_BaseFormField);var _super=_createSuper(Datepicker);function Datepicker(){var _this;_classCallCheck(this,Datepicker);_this=_super.call(this);_this._elements={};template$z.call(_this._elements,{commons:commons,i18n:i18n});_this._calendarFragment=template$A.call(_this._elements,{commons:commons,i18n:i18n});_this._labellableElement=_this._elements.input;var overlayId=_this._elements.overlay.id;var events={};events["global:capture:click #".concat(overlayId," coral-calendar")]='_onCalendarDayClick';events["global:capture:change #".concat(overlayId)]='_onChange';events["global:capture:coral-overlay:beforeopen #".concat(overlayId)]='_onPopoverBeforeOpen';events["global:capture:coral-overlay:open #".concat(overlayId)]='_onPopoverOpenOrClose';events["global:capture:coral-overlay:close #".concat(overlayId)]='_onPopoverOpenOrClose';events['key:alt+down [handle="input"],[handle="toggle"]']='_onAltDownKey';events['key:down [handle="toggle"]']='_onAltDownKey';events['change coral-datepicker > input[is="coral-textfield"]']='_onInputChange';_this._delegateEvents(commons.extend(_this._events,events));return _this}_createClass(Datepicker,[{key:"_onPopoverBeforeOpen",value:function _onPopoverBeforeOpen(){this._elements.overlay.returnFocusTo(this._elements.input);this._elements.calendar._validateCalendar();this._renderCalendar()}},{key:"_onPopoverOpenOrClose",value:function _onPopoverOpenOrClose(event){if(this._elements.overlay.open){if(this.type===type.TIME){this._elements.clock.focus()}else{this._elements.calendar.focus()}this._elements.input.setAttribute('aria-expanded','true');this._elements.toggle.setAttribute('aria-expanded','true');this._trackEvent('open','coral-datepicker',event)}else{this._elements.input.setAttribute('aria-expanded','false');this._elements.toggle.setAttribute('aria-expanded','false');this._trackEvent('close','coral-datepicker',event)}}},{key:"_onCalendarDayClick",value:function _onCalendarDayClick(event){if(event.target.tagName==='A'){this._elements.overlay.open=false;this._trackEvent('click','coral-datepicker',event)}}},{key:"_onInputChange",value:function _onInputChange(event){event.stopPropagation();this.value=new DateTime.Moment(event.target.value,this.displayFormat);this._validateValue();this.trigger('change');this._trackEvent('change','coral-datepicker',event)}},{key:"_onChange",value:function _onChange(event){if(event.target.tagName==='CORAL-CALENDAR'||event.target.tagName==='CORAL-CLOCK'){event.stopPropagation();this.value=this._mergeCalendarAndClockDates(true);this._validateValue();this.trigger('change')}}},{key:"_onAltDownKey",value:function _onAltDownKey(event){event.preventDefault();if(!this._elements.overlay.open){this._elements.overlay.open=true}}},{key:"_validateValue",value:function _validateValue(){this._elements.calendar._validateCalendar();if(this.type===type.DATE){this.invalid=this._elements.calendar.invalid}else if(this.type===type.TIME){this.invalid=this._elements.clock.invalid}else{this.invalid=this._elements.calendar.invalid||this._elements.clock.invalid}}},{key:"_mergeCalendarAndClockDates",value:function _mergeCalendarAndClockDates(autoSetTimeIfNeeded){var value=new DateTime.Moment(this._elements.calendar.valueAsDate);var time=this._elements.clock.valueAsDate;if(autoSetTimeIfNeeded&&value&&!time&&this.type===type.DATETIME){time=new DateTime.Moment().toDate()}if(time){if(!value.isValid()){value=new DateTime.Moment()}value.hours(time.getHours());value.minutes(time.getMinutes())}return value}},{key:"_getValueAsString",value:function _getValueAsString(value,format){return value&&value.isValid()?value.format(format):''}},{key:"_renderCalendar",value:function _renderCalendar(){if(this._elements.overlay.content.innerHTML===''){this._elements.overlay.content.appendChild(this._calendarFragment);this._calendarFragment=undefined}}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(Datepicker.prototype),"connectedCallback",this).call(this);var overlay=this._elements.overlay;overlay.removeAttribute('open');if(overlay._parent){overlay._parent.appendChild(overlay)}}},{key:"render",value:function render(){_get(_getPrototypeOf(Datepicker.prototype),"render",this).call(this);this.classList.add(CLASSNAME$T);this.setAttribute('role','group');this._elements.input.setAttribute('role','combobox');this._elements.input.setAttribute('aria-autocomplete','none');this._elements.input.setAttribute('aria-haspopup','dialog');this._elements.input.setAttribute('aria-expanded','false');this._elements.input.setAttribute('aria-controls',this._elements.overlay.id);this._elements.toggle.setAttribute('aria-haspopup','dialog');this._elements.toggle.setAttribute('aria-expanded','false');this._elements.toggle.setAttribute('aria-controls',this._elements.overlay.id);this._useNativeInput=IS_MOBILE_DEVICE$1;if(!this._variant){this.variant=variant$h.DEFAULT}if(!this._type){this.type=type.DATE}while(this.firstChild){this.removeChild(this.firstChild)}var frag=document.createDocumentFragment();frag.appendChild(this._elements.hiddenInput);frag.appendChild(this._elements.input);frag.appendChild(this._elements.toggle);frag.appendChild(this._elements.overlay);this._elements.overlay.target=this._elements.toggle;this.appendChild(frag)}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(Datepicker.prototype),"disconnectedCallback",this).call(this);var overlay=this._elements.overlay;if(!this.contains(overlay)){overlay._parent=overlay._repositioned?document.body:this;overlay.remove()}}},{key:"overlay",get:function get(){return this._elements.overlay}},{key:"type",get:function get(){return this._type||type.DATE},set:function set(value){this._typeFormatChanged=typeof this._type==='undefined';value=transform.string(value).toLowerCase();this._type=validate.enumeration(type)(value)&&value||type.DATE;this._reflectAttribute('type',this._type);var format=NATIVE_FORMATS[this._type];var isTime=this._type===type.TIME;var isDate=this._type===type.DATE;this._elements.icon.icon=isTime?'clock':'calendar';var toggleLabel=isTime?i18n.get('Time'):i18n.get('Calendar');this._elements.toggle.setAttribute('aria-label',toggleLabel);this._elements.toggle.setAttribute('title',toggleLabel);this._elements.clock.hidden=isDate;this._elements.clock.setAttribute('aria-hidden',isDate);this._elements.calendar.hidden=isTime;this._elements.calendar.setAttribute('aria-hidden',isTime);if(isNativeFormat(this.valueFormat)){this.valueFormat=format}if(isNativeFormat(this.displayFormat)){this.displayFormat=format}this._useNativeInput=this._useNativeInput;this._typeFormatChanged=false}},{key:"displayFormat",get:function get(){if(this._useNativeInput&&this.type!==type.DATETIME){return NATIVE_FORMATS[this.type]}return typeof this._displayFormat==='undefined'?NATIVE_FORMATS[this.type]:this._displayFormat},set:function set(value){value=transform.string(value).trim();var displayFormatAttribute=this.getAttribute('displayformat');if(this._typeFormatChanged&&displayFormatAttribute&&displayFormatAttribute!==value){value=displayFormatAttribute}this._displayFormat=value===''?NATIVE_FORMATS[this.type]:value;this._reflectAttribute('displayformat',this._displayFormat);this._elements.clock.displayFormat=this._displayFormat;this._elements.input.value=this._getValueAsString(this._value,this._displayFormat)}},{key:"valueFormat",get:function get(){return typeof this._valueFormat==='undefined'?NATIVE_FORMATS[this.type]:this._valueFormat},set:function set(value){var _this2=this;var setValueFormat=function setValueFormat(newValue){_this2._valueFormat=newValue===''?NATIVE_FORMATS[_this2.type]:newValue;_this2._reflectAttribute('valueformat',_this2._valueFormat)};value=transform.string(value).trim();var valueFormatAttribute=this.getAttribute('valueformat');if(this._typeFormatChanged&&valueFormatAttribute&&valueFormatAttribute!==value){value=valueFormatAttribute}if(!this._valueFormat&&this._originalValue){setValueFormat(value);this.value=this._originalValue}else{setValueFormat(value)}this._elements.calendar.valueFormat=this._valueFormat;this._elements.hiddenInput.value=this.value}},{key:"valueAsDate",get:function get(){var value=this._value;if(this.type==='date'&&value){value=value.startOf('day')}return value?value.toDate():null},set:function set(value){this._valueAsDate=value instanceof Date?new DateTime.Moment(value):'';this.value=this._valueAsDate}},{key:"min",get:function get(){return this._elements.calendar.min},set:function set(value){this._elements.calendar.min=value}},{key:"max",get:function get(){return this._elements.calendar.max},set:function set(value){this._elements.calendar.max=value}},{key:"headerFormat",get:function get(){return this._elements.calendar.headerFormat},set:function set(value){this._elements.calendar.headerFormat=value}},{key:"startDay",get:function get(){return this._elements.calendar.startDay},set:function set(value){this._elements.calendar.startDay=value}},{key:"value",get:function get(){return this._getValueAsString(this._value,this.valueFormat)},set:function set(value){this._originalValue=value;this._value=toMoment$1(value,this.valueFormat);this._elements.calendar.valueAsDate=this.valueAsDate;this._elements.clock.valueAsDate=this.valueAsDate;this._elements.input.value=this._getValueAsString(this._value,this.displayFormat);this._elements.hiddenInput.value=this.value}},{key:"placeholder",get:function get(){return this._elements.input.placeholder},set:function set(value){this._elements.input.placeholder=value;this._reflectAttribute('placeholder',this.placeholder)}},{key:"variant",get:function get(){return this._variant||variant$h.DEFAULT},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$h)(value)&&value||variant$h.DEFAULT;this._elements.input.variant=this._variant;this._elements.toggle.classList.toggle('_coral-FieldButton--quiet',this._variant===variant$h.QUIET);(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$a);if(this._variant!==variant$h.DEFAULT){this.classList.add("".concat(CLASSNAME$T,"--").concat(this._variant))}}},{key:"name",get:function get(){return this._elements.hiddenInput.name},set:function set(value){this._reflectAttribute('name',value);this._elements.hiddenInput.name=value}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.input.disabled=this._disabled;this._elements.hiddenInput.disabled=this._disabled;this._elements.toggle.disabled=this._disabled}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(Datepicker.prototype),"invalid",this)},set:function set(value){_set(_getPrototypeOf(Datepicker.prototype),"invalid",value,this,true);this.classList.toggle('is-invalid',this.invalid);this._elements.toggle.classList.toggle('is-invalid',this.invalid);this._elements.input.invalid=this.invalid;this._elements.input.setAttribute('aria-invalid',this.invalid)}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.toggle.classList.toggle('is-invalid',this._required);this._elements.input.required=this._required}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.hiddenInput.readOnly=this.readOnly;this._elements.input.readOnly=this._readOnly;this._elements.toggle.disabled=this._readOnly}},{key:"labelled",get:function get(){return _get(_getPrototypeOf(Datepicker.prototype),"labelled",this)},set:function set(value){_set(_getPrototypeOf(Datepicker.prototype),"labelled",value,this,true);this[this.labelled?'setAttribute':'removeAttribute']('aria-label',this.labelled);this._elements.overlay[this.labelled?'setAttribute':'removeAttribute']('aria-label',this.labelled);this._elements.calendar[this.labelled?'setAttribute':'removeAttribute']('labelled',this.labelled)}},{key:"labelledBy",get:function get(){return _get(_getPrototypeOf(Datepicker.prototype),"labelledBy",this)},set:function set(value){_set(_getPrototypeOf(Datepicker.prototype),"labelledBy",value,this,true);this[this.labelledBy?'setAttribute':'removeAttribute']('aria-labelledby',this.labelledBy);this._elements.overlay[this.labelledBy?'setAttribute':'removeAttribute']('aria-labelledby',this.labelledBy);this._elements.calendar[this.labelledBy?'setAttribute':'removeAttribute']('aria-labelledby',this.labelledBy)}},{key:"_useNativeInput",get:function get(){return this.__useNativeInput},set:function set(value){this.__useNativeInput=value;if(this.__useNativeInput&&this.type!==type.DATETIME){this._elements.toggle.hidden=true;this._elements.input.setAttribute('type',this.type);this._elements.overlay.hidden=true;this._elements.input.removeAttribute('role');this._elements.input.removeAttribute('aria-autocomplete');this._elements.input.removeAttribute('aria-haspopup');this._elements.input.removeAttribute('aria-expanded');this._elements.input.removeAttribute('aria-controls')}else{this._elements.toggle.hidden=false;this._elements.input.setAttribute('type','text');this._elements.overlay.hidden=false;this._elements.input.setAttribute('role','combobox');this._elements.input.setAttribute('aria-autocomplete','none');this._elements.input.setAttribute('aria-haspopup','dialog');this._elements.input.setAttribute('aria-expanded',this._elements.overlay.open);this._elements.input.setAttribute('aria-controls',this._elements.overlay.id);this._elements.toggle.setAttribute('aria-haspopup','dialog');this._elements.toggle.setAttribute('aria-expanded',this._elements.overlay.open);this._elements.toggle.setAttribute('aria-controls',this._elements.overlay.id)}}}],[{key:"variant",get:function get(){return variant$h}},{key:"type",get:function get(){return type}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Datepicker),"_attributePropertyMap",this),{startday:'startDay',headerformat:'headerFormat',displayformat:'displayFormat',valueformat:'valueFormat'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Datepicker),"observedAttributes",this).concat(['min','max','type','placeholder','startday','headerFormat','displayformat','valueformat','variant'])}}]);return Datepicker}(BaseFormField(BaseComponent(HTMLElement)));commons.extend(strings,{'coral-component-datepicker':translations$f});commons._define('coral-datepicker',Datepicker);var translations$g={"en-US":{"More":"More"},"de-DE":{"More":"Mehr"},"fr-FR":{"More":"Plus"},"it-IT":{"More":"Altro"},"ja-JP":{"More":"その他"},"es-ES":{"More":"Más"},"ko-KR":{"More":"자세히"},"zh-CN":{"More":"更多"},"zh-TW":{"More":"更多"},"pt-BR":{"More":"Mais"},"nl-NL":{"More":"Meer"},"da-DK":{"More":"Mere"},"fi-FI":{"More":"Lisää"},"nb-NO":{"More":"Mer"},"sv-SE":{"More":"Mer"},"cs-CZ":{"More":"Více"},"pl-PL":{"More":"Więcej"},"ru-RU":{"More":"Дополнительно"},"tr-TR":{"More":"Daha Fazla"}};var template$B=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;var buttonId=data.commons.getUID();var contentId=data.commons.getUID();data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["slider"]=document.createElement("div");el2.setAttribute("handle","slider");el2.className+=" _coral-Drawer-slider";var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=this["contentWrapper"]=document.createElement("div");el4.setAttribute("handle","contentWrapper");el4.className+=" _coral-Drawer-content";el4.id=contentId;el4.setAttribute("aria-labelledby",buttonId);el4.setAttribute("role","region");el2.appendChild(el4);var el5=document.createTextNode("\n");el2.appendChild(el5);frag.appendChild(el2);var el6=document.createTextNode("\n");frag.appendChild(el6);var el7=this["toggle"]=document.createElement("div");el7.className+=" _coral-Drawer-toggle";el7.setAttribute("handle","toggle");var el8=document.createTextNode("\n  ");el7.appendChild(el8);var el9=this["toggleButton"]=document.createElement("button","coral-button");el9.id=buttonId;el9.setAttribute("aria-controls",contentId);el9.setAttribute("aria-label",data_0["i18n"]["get"]('More'));el9.className+=" _coral-Drawer-toggleButton";el9.setAttribute("type","button");el9.setAttribute("handle","toggleButton");el9.setAttribute("is","coral-button");el9.setAttribute("variant","quiet");el7.appendChild(el9);var el10=document.createTextNode("\n");el7.appendChild(el10);frag.appendChild(el7);var el11=document.createTextNode("\n");frag.appendChild(el11);return frag};var direction$1={DOWN:'down',UP:'up'};var CLASSNAME$U='_coral-Drawer';var ALL_DIRECTION_CLASSES=[];for(var directionValue in direction$1){ALL_DIRECTION_CLASSES.push("".concat(CLASSNAME$U,"--").concat(direction$1[directionValue]))}var Drawer=function(_BaseComponent){_inherits(Drawer,_BaseComponent);var _super=_createSuper(Drawer);function Drawer(){var _this;_classCallCheck(this,Drawer);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-drawer-content')||document.createElement('coral-drawer-content')};template$B.call(_this._elements,{commons:commons,i18n:i18n});_this._delegateEvents({'click ._coral-Drawer-toggleButton':'_onClick'});return _this}_createClass(Drawer,[{key:"_onClick",value:function _onClick(){this.open=!this.open}},{key:"render",value:function render(){_get(_getPrototypeOf(Drawer.prototype),"render",this).call(this);this.classList.add(CLASSNAME$U,'coral-Well');if(!this._direction){this.direction=direction$1.DOWN}if(!this._open){this.open=false}var fragment=document.createDocumentFragment();var templateHandleNames=['slider','toggle'];fragment.appendChild(this._elements.slider);fragment.appendChild(this._elements.toggle);var content=this._elements.content;while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){content.appendChild(child)}else{this.removeChild(child)}}this.appendChild(fragment);this.content=content}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this._elements.toggle.hidden=this._disabled}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-drawer-content',insert:function insert(content){this._elements.contentWrapper.appendChild(content)}})}},{key:"direction",get:function get(){return this._direction||direction$1.DOWN},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._direction=validate.enumeration(direction$1)(value)&&value||direction$1.DOWN;this._reflectAttribute('direction',this._direction);(_this$classList=this.classList).remove.apply(_this$classList,ALL_DIRECTION_CLASSES);this.classList.add("".concat(CLASSNAME$U,"--").concat(this._direction))}},{key:"open",get:function get(){return this._open||false},set:function set(value){var _this2=this;var silenced=this._silenced;this._open=transform.booleanAttr(value);this._reflectAttribute('open',this._open);this._elements.toggleButton.setAttribute('aria-expanded',this._open);var slider=this._elements.slider;if(this._animate){commons.transitionEnd(slider,function(){_this2._silenced=silenced;if(_this2._open){slider.style.height=''}_this2.trigger("coral-drawer:".concat(_this2._open?'open':'close'));_this2._silenced=false});if(!this._open){slider.style.height="".concat(slider.scrollHeight,"px")}window.setTimeout(function(){slider.style.height=_this2._open?"".concat(slider.scrollHeight,"px"):0},10)}else{this._animate=true;if(!this._open){slider.style.height=0}}}},{key:"_contentZones",get:function get(){return{'coral-drawer-content':'content'}}}],[{key:"direction",get:function get(){return direction$1}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Drawer),"observedAttributes",this).concat(['disabled','direction','open'])}}]);return Drawer}(BaseComponent(HTMLElement));var DrawerContent=(function(){return document.createElement('coral-drawer-content')});commons.extend(strings,{'coral-component-drawer':translations$g});commons._define('coral-drawer',Drawer);Drawer.Content=DrawerContent;var MIME_TYPES={".123":"application/vnd.lotus-1-2-3",".3dml":"text/vnd.in3d.3dml",".3g2":"video/3gpp2",".3gp":"video/3gpp",".a":"application/octet-stream",".aab":"application/x-authorware-bin",".aac":"audio/x-aac",".aam":"application/x-authorware-map",".aas":"application/x-authorware-seg",".abw":"application/x-abiword",".acc":"application/vnd.americandynamics.acc",".ace":"application/x-ace-compressed",".acu":"application/vnd.acucobol",".acutc":"application/vnd.acucorp",".adp":"audio/adpcm",".aep":"application/vnd.audiograph",".afm":"application/x-font-type1",".afp":"application/vnd.ibm.modcap",".ai":"application/postscript",".aif":"audio/x-aiff",".aifc":"audio/x-aiff",".aiff":"audio/x-aiff",".air":"application/vnd.adobe.air-application-installer-package+zip",".ami":"application/vnd.amiga.ami",".apk":"application/vnd.android.package-archive",".application":"application/x-ms-application",".apr":"application/vnd.lotus-approach",".asc":"application/pgp-signature",".asf":"video/x-ms-asf",".asm":"text/x-asm",".aso":"application/vnd.accpac.simply.aso",".asx":"video/x-ms-asf",".atc":"application/vnd.acucorp",".atom":"application/atom+xml",".atomcat":"application/atomcat+xml",".atomsvc":"application/atomsvc+xml",".atx":"application/vnd.antix.game-component",".au":"audio/basic",".avi":"video/x-msvideo",".aw":"application/applixware",".azf":"application/vnd.airzip.filesecure.azf",".azs":"application/vnd.airzip.filesecure.azs",".azw":"application/vnd.amazon.ebook",".bat":"application/x-msdownload",".bcpio":"application/x-bcpio",".bdf":"application/x-font-bdf",".bdm":"application/vnd.syncml.dm+wbxml",".bh2":"application/vnd.fujitsu.oasysprs",".bin":"application/octet-stream",".bmi":"application/vnd.bmi",".bmp":"image/bmp",".book":"application/vnd.framemaker",".box":"application/vnd.previewsystems.box",".boz":"application/x-bzip2",".bpk":"application/octet-stream",".btif":"image/prs.btif",".bz":"application/x-bzip",".bz2":"application/x-bzip2",".c":"text/x-c",".c4d":"application/vnd.clonk.c4group",".c4f":"application/vnd.clonk.c4group",".c4g":"application/vnd.clonk.c4group",".c4p":"application/vnd.clonk.c4group",".c4u":"application/vnd.clonk.c4group",".cab":"application/vnd.ms-cab-compressed",".car":"application/vnd.curl.car",".cat":"application/vnd.ms-pki.seccat",".cc":"text/x-c",".cct":"application/x-director",".ccxml":"application/ccxml+xml",".cdbcmsg":"application/vnd.contact.cmsg",".cdf":"application/x-netcdf",".cdkey":"application/vnd.mediastation.cdkey",".cdx":"chemical/x-cdx",".cdxml":"application/vnd.chemdraw+xml",".cdy":"application/vnd.cinderella",".cer":"application/pkix-cert",".cgm":"image/cgm",".chat":"application/x-chat",".chm":"application/vnd.ms-htmlhelp",".chrt":"application/vnd.kde.kchart",".cif":"chemical/x-cif",".cii":"application/vnd.anser-web-certificate-issue-initiation",".cil":"application/vnd.ms-artgalry",".cla":"application/vnd.claymore",".class":"application/java-vm",".clkk":"application/vnd.crick.clicker.keyboard",".clkp":"application/vnd.crick.clicker.palette",".clkt":"application/vnd.crick.clicker.template",".clkw":"application/vnd.crick.clicker.wordbank",".clkx":"application/vnd.crick.clicker",".clp":"application/x-msclip",".cmc":"application/vnd.cosmocaller",".cmdf":"chemical/x-cmdf",".cml":"chemical/x-cml",".cmp":"application/vnd.yellowriver-custom-menu",".cmx":"image/x-cmx",".cod":"application/vnd.rim.cod",".com":"application/x-msdownload",".conf":"text/plain",".cpio":"application/x-cpio",".cpp":"text/x-c",".cpt":"application/mac-compactpro",".crd":"application/x-mscardfile",".crl":"application/pkix-crl",".crt":"application/x-x509-ca-cert",".csh":"application/x-csh",".csml":"chemical/x-csml",".csp":"application/vnd.commonspace",".css":"text/css",".cst":"application/x-director",".csv":["text/csv","application/vnd.ms-excel"],".cu":"application/cu-seeme",".curl":"text/vnd.curl",".cww":"application/prs.cww",".cxt":"application/x-director",".cxx":"text/x-c",".daf":"application/vnd.mobius.daf",".dataless":"application/vnd.fdsn.seed",".davmount":"application/davmount+xml",".dcr":"application/x-director",".dcurl":"text/vnd.curl.dcurl",".dd2":"application/vnd.oma.dd2+xml",".ddd":"application/vnd.fujixerox.ddd",".deb":"application/x-debian-package",".def":"text/plain",".deploy":"application/octet-stream",".der":"application/x-x509-ca-cert",".dfac":"application/vnd.dreamfactory",".dic":"text/x-c",".diff":"text/plain",".dir":"application/x-director",".dis":"application/vnd.mobius.dis",".dist":"application/octet-stream",".distz":"application/octet-stream",".djv":"image/vnd.djvu",".djvu":"image/vnd.djvu",".dll":"application/x-msdownload",".dmg":"application/octet-stream",".dms":"application/octet-stream",".dna":"application/vnd.dna",".doc":"application/msword",".docm":"application/vnd.ms-word.document.macroenabled.12",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".dot":"application/msword",".dotm":"application/vnd.ms-word.template.macroenabled.12",".dotx":"application/vnd.openxmlformats-officedocument.wordprocessingml.template",".dp":"application/vnd.osgi.dp",".dpg":"application/vnd.dpgraph",".dsc":"text/prs.lines.tag",".dtb":"application/x-dtbook+xml",".dtd":"application/xml-dtd",".dts":"audio/vnd.dts",".dtshd":"audio/vnd.dts.hd",".dump":"application/octet-stream",".dvi":"application/x-dvi",".dwf":"model/vnd.dwf",".dwg":"image/vnd.dwg",".dxf":"image/vnd.dxf",".dxp":"application/vnd.spotfire.dxp",".dxr":"application/x-director",".ecelp4800":"audio/vnd.nuera.ecelp4800",".ecelp7470":"audio/vnd.nuera.ecelp7470",".ecelp9600":"audio/vnd.nuera.ecelp9600",".ecma":"application/ecmascript",".edm":"application/vnd.novadigm.edm",".edx":"application/vnd.novadigm.edx",".efif":"application/vnd.picsel",".ei6":"application/vnd.pg.osasli",".elc":"application/octet-stream",".eml":"message/rfc822",".emma":"application/emma+xml",".eol":"audio/vnd.digital-winds",".eot":"application/vnd.ms-fontobject",".eps":"application/postscript",".epub":"application/epub+zip",".es3":"application/vnd.eszigno3+xml",".esf":"application/vnd.epson.esf",".et3":"application/vnd.eszigno3+xml",".etx":"text/x-setext",".exe":"application/x-msdownload",".ext":"application/vnd.novadigm.ext",".ez":"application/andrew-inset",".ez2":"application/vnd.ezpix-album",".ez3":"application/vnd.ezpix-package",".f":"text/x-fortran",".f4v":"video/x-f4v",".f77":"text/x-fortran",".f90":"text/x-fortran",".fbs":"image/vnd.fastbidsheet",".fdf":"application/vnd.fdf",".fe_launch":"application/vnd.denovo.fcselayout-link",".fg5":"application/vnd.fujitsu.oasysgp",".fgd":"application/x-director",".fh":"image/x-freehand",".fh4":"image/x-freehand",".fh5":"image/x-freehand",".fh7":"image/x-freehand",".fhc":"image/x-freehand",".fig":"application/x-xfig",".fli":"video/x-fli",".flo":"application/vnd.micrografx.flo",".flv":"video/x-flv",".flw":"application/vnd.kde.kivio",".flx":"text/vnd.fmi.flexstor",".fly":"text/vnd.fly",".fm":"application/vnd.framemaker",".fnc":"application/vnd.frogans.fnc",".for":"text/x-fortran",".fpx":"image/vnd.fpx",".frame":"application/vnd.framemaker",".fsc":"application/vnd.fsc.weblaunch",".fst":"image/vnd.fst",".ftc":"application/vnd.fluxtime.clip",".fti":"application/vnd.anser-web-funds-transfer-initiation",".fvt":"video/vnd.fvt",".fzs":"application/vnd.fuzzysheet",".g3":"image/g3fax",".gac":"application/vnd.groove-account",".gdl":"model/vnd.gdl",".geo":"application/vnd.dynageo",".gex":"application/vnd.geometry-explorer",".ggb":"application/vnd.geogebra.file",".ggt":"application/vnd.geogebra.tool",".ghf":"application/vnd.groove-help",".gif":"image/gif",".gim":"application/vnd.groove-identity-message",".gmx":"application/vnd.gmx",".gnumeric":"application/x-gnumeric",".gph":"application/vnd.flographit",".gqf":"application/vnd.grafeq",".gqs":"application/vnd.grafeq",".gram":"application/srgs",".gre":"application/vnd.geometry-explorer",".grv":"application/vnd.groove-injector",".grxml":"application/srgs+xml",".gsf":"application/x-font-ghostscript",".gtar":"application/x-gtar",".gtm":"application/vnd.groove-tool-message",".gtw":"model/vnd.gtw",".gv":"text/vnd.graphviz",".gz":"application/x-gzip",".h":"text/x-c",".h261":"video/h261",".h263":"video/h263",".h264":"video/h264",".hbci":"application/vnd.hbci",".hdf":"application/x-hdf",".hh":"text/x-c",".hlp":"application/winhlp",".hpgl":"application/vnd.hp-hpgl",".hpid":"application/vnd.hp-hpid",".hps":"application/vnd.hp-hps",".hqx":"application/mac-binhex40",".htke":"application/vnd.kenameaapp",".htm":"text/html",".html":"text/html",".hvd":"application/vnd.yamaha.hv-dic",".hvp":"application/vnd.yamaha.hv-voice",".hvs":"application/vnd.yamaha.hv-script",".icc":"application/vnd.iccprofile",".ice":"x-conference/x-cooltalk",".icm":"application/vnd.iccprofile",".ico":"image/x-icon",".ics":"text/calendar",".ief":"image/ief",".ifb":"text/calendar",".ifm":"application/vnd.shana.informed.formdata",".iges":"model/iges",".igl":"application/vnd.igloader",".igs":"model/iges",".igx":"application/vnd.micrografx.igx",".iif":"application/vnd.shana.informed.interchange",".imp":"application/vnd.accpac.simply.imp",".ims":"application/vnd.ms-ims",".in":"text/plain",".ipk":"application/vnd.shana.informed.package",".irm":"application/vnd.ibm.rights-management",".irp":"application/vnd.irepository.package+xml",".iso":"application/octet-stream",".itp":"application/vnd.shana.informed.formtemplate",".ivp":"application/vnd.immervision-ivp",".ivu":"application/vnd.immervision-ivu",".jad":"text/vnd.sun.j2me.app-descriptor",".jam":"application/vnd.jam",".jar":"application/java-archive",".java":"text/x-java-source",".jisp":"application/vnd.jisp",".jlt":"application/vnd.hp-jlyt",".jnlp":"application/x-java-jnlp-file",".joda":"application/vnd.joost.joda-archive",".jpe":"image/jpeg",".jpeg":"image/jpeg",".jpg":"image/jpeg",".jpgm":"video/jpm",".jpgv":"video/jpeg",".jpm":"video/jpm",".js":"application/javascript",".json":"application/json",".kar":"audio/midi",".karbon":"application/vnd.kde.karbon",".kfo":"application/vnd.kde.kformula",".kia":"application/vnd.kidspiration",".kil":"application/x-killustrator",".kml":"application/vnd.google-earth.kml+xml",".kmz":"application/vnd.google-earth.kmz",".kne":"application/vnd.kinar",".knp":"application/vnd.kinar",".kon":"application/vnd.kde.kontour",".kpr":"application/vnd.kde.kpresenter",".kpt":"application/vnd.kde.kpresenter",".ksh":"text/plain",".ksp":"application/vnd.kde.kspread",".ktr":"application/vnd.kahootz",".ktz":"application/vnd.kahootz",".kwd":"application/vnd.kde.kword",".kwt":"application/vnd.kde.kword",".latex":"application/x-latex",".lbd":"application/vnd.llamagraphics.life-balance.desktop",".lbe":"application/vnd.llamagraphics.life-balance.exchange+xml",".les":"application/vnd.hhe.lesson-player",".lha":"application/octet-stream",".link66":"application/vnd.route66.link66+xml",".list":"text/plain",".list3820":"application/vnd.ibm.modcap",".listafp":"application/vnd.ibm.modcap",".log":"text/plain",".lostxml":"application/lost+xml",".lrf":"application/octet-stream",".lrm":"application/vnd.ms-lrm",".ltf":"application/vnd.frogans.ltf",".lvp":"audio/vnd.lucent.voice",".lwp":"application/vnd.lotus-wordpro",".lzh":"application/octet-stream",".m13":"application/x-msmediaview",".m14":"application/x-msmediaview",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".m3u":"audio/x-mpegurl",".m4u":"video/vnd.mpegurl",".m4v":"video/x-m4v",".ma":"application/mathematica",".mag":"application/vnd.ecowin.chart",".maker":"application/vnd.framemaker",".man":"text/troff",".mathml":"application/mathml+xml",".mb":"application/mathematica",".mbk":"application/vnd.mobius.mbk",".mbox":"application/mbox",".mc1":"application/vnd.medcalcdata",".mcd":"application/vnd.mcd",".mcurl":"text/vnd.curl.mcurl",".mdb":"application/x-msaccess",".mdi":"image/vnd.ms-modi",".me":"text/troff",".mesh":"model/mesh",".mfm":"application/vnd.mfmp",".mgz":"application/vnd.proteus.magazine",".mht":"message/rfc822",".mhtml":"message/rfc822",".mid":"audio/midi",".midi":"audio/midi",".mif":"application/vnd.mif",".mime":"message/rfc822",".mj2":"video/mj2",".mjp2":"video/mj2",".mlp":"application/vnd.dolby.mlp",".mmd":"application/vnd.chipnuts.karaoke-mmd",".mmf":"application/vnd.smaf",".mmr":"image/vnd.fujixerox.edmics-mmr",".mny":"application/x-msmoney",".mobi":"application/x-mobipocket-ebook",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4s":"application/mp4",".mp4v":"video/mp4",".mpa":"video/mpeg",".mpc":"application/vnd.mophun.certificate",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".mpkg":"application/vnd.apple.installer+xml",".mpm":"application/vnd.blueice.multipass",".mpn":"application/vnd.mophun.application",".mpp":"application/vnd.ms-project",".mpt":"application/vnd.ms-project",".mpy":"application/vnd.ibm.minipay",".mqy":"application/vnd.mobius.mqy",".mrc":"application/marc",".ms":"text/troff",".mscml":"application/mediaservercontrol+xml",".mseed":"application/vnd.fdsn.mseed",".mseq":"application/vnd.mseq",".msf":"application/vnd.epson.msf",".msh":"model/mesh",".msi":"application/x-msdownload",".msl":"application/vnd.mobius.msl",".msty":"application/vnd.muvee.style",".mts":"model/vnd.mts",".mus":"application/vnd.musician",".musicxml":"application/vnd.recordare.musicxml+xml",".mvb":"application/x-msmediaview",".mwf":"application/vnd.mfer",".mxf":"application/mxf",".mxl":"application/vnd.recordare.musicxml",".mxml":"application/xv+xml",".mxs":"application/vnd.triscape.mxs",".mxu":"video/vnd.mpegurl",".n-gage":"application/vnd.nokia.n-gage.symbian.install",".nb":"application/mathematica",".nc":"application/x-netcdf",".ncx":"application/x-dtbncx+xml",".ngdat":"application/vnd.nokia.n-gage.data",".nlu":"application/vnd.neurolanguage.nlu",".nml":"application/vnd.enliven",".nnd":"application/vnd.noblenet-directory",".nns":"application/vnd.noblenet-sealer",".nnw":"application/vnd.noblenet-web",".npx":"image/vnd.net-fpx",".nsf":"application/vnd.lotus-notes",".nws":"message/rfc822",".o":"application/octet-stream",".oa2":"application/vnd.fujitsu.oasys2",".oa3":"application/vnd.fujitsu.oasys3",".oas":"application/vnd.fujitsu.oasys",".obd":"application/x-msbinder",".obj":"application/octet-stream",".oda":"application/oda",".odb":"application/vnd.oasis.opendocument.database",".odc":"application/vnd.oasis.opendocument.chart",".odf":"application/vnd.oasis.opendocument.formula",".odft":"application/vnd.oasis.opendocument.formula-template",".odg":"application/vnd.oasis.opendocument.graphics",".odi":"application/vnd.oasis.opendocument.image",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"audio/ogg",".ogv":"video/ogg",".ogx":"application/ogg",".onepkg":"application/onenote",".onetmp":"application/onenote",".onetoc":"application/onenote",".onetoc2":"application/onenote",".opf":"application/oebps-package+xml",".oprc":"application/vnd.palm",".org":"application/vnd.lotus-organizer",".osf":"application/vnd.yamaha.openscoreformat",".osfpvg":"application/vnd.yamaha.openscoreformat.osfpvg+xml",".otc":"application/vnd.oasis.opendocument.chart-template",".otf":"application/x-font-otf",".otg":"application/vnd.oasis.opendocument.graphics-template",".oth":"application/vnd.oasis.opendocument.text-web",".oti":"application/vnd.oasis.opendocument.image-template",".otm":"application/vnd.oasis.opendocument.text-master",".otp":"application/vnd.oasis.opendocument.presentation-template",".ots":"application/vnd.oasis.opendocument.spreadsheet-template",".ott":"application/vnd.oasis.opendocument.text-template",".oxt":"application/vnd.openofficeorg.extension",".p":"text/x-pascal",".p10":"application/pkcs10",".p12":"application/x-pkcs12",".p7b":"application/x-pkcs7-certificates",".p7c":"application/pkcs7-mime",".p7m":"application/pkcs7-mime",".p7r":"application/x-pkcs7-certreqresp",".p7s":"application/pkcs7-signature",".pas":"text/x-pascal",".pbd":"application/vnd.powerbuilder6",".pbm":"image/x-portable-bitmap",".pcf":"application/x-font-pcf",".pcl":"application/vnd.hp-pcl",".pclxl":"application/vnd.hp-pclxl",".pct":"image/x-pict",".pcurl":"application/vnd.curl.pcurl",".pcx":"image/x-pcx",".pdb":"application/vnd.palm",".pdf":"application/pdf",".pfa":"application/x-font-type1",".pfb":"application/x-font-type1",".pfm":"application/x-font-type1",".pfr":"application/font-tdpfr",".pfx":"application/x-pkcs12",".pgm":"image/x-portable-graymap",".pgn":"application/x-chess-pgn",".pgp":"application/pgp-encrypted",".pic":"image/x-pict",".pkg":"application/octet-stream",".pki":"application/pkixcmp",".pkipath":"application/pkix-pkipath",".pl":"text/plain",".plb":"application/vnd.3gpp.pic-bw-large",".plc":"application/vnd.mobius.plc",".plf":"application/vnd.pocketlearn",".pls":"application/pls+xml",".pml":"application/vnd.ctc-posml",".png":"image/png",".pnm":"image/x-portable-anymap",".portpkg":"application/vnd.macports.portpkg",".pot":"application/vnd.ms-powerpoint",".potm":"application/vnd.ms-powerpoint.template.macroenabled.12",".potx":"application/vnd.openxmlformats-officedocument.presentationml.template",".ppa":"application/vnd.ms-powerpoint",".ppam":"application/vnd.ms-powerpoint.addin.macroenabled.12",".ppd":"application/vnd.cups-ppd",".ppm":"image/x-portable-pixmap",".pps":"application/vnd.ms-powerpoint",".ppsm":"application/vnd.ms-powerpoint.slideshow.macroenabled.12",".ppsx":"application/vnd.openxmlformats-officedocument.presentationml.slideshow",".ppt":"application/vnd.ms-powerpoint",".pptm":"application/vnd.ms-powerpoint.presentation.macroenabled.12",".pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation",".pqa":"application/vnd.palm",".prc":"application/x-mobipocket-ebook",".pre":"application/vnd.lotus-freelance",".prf":"application/pics-rules",".ps":"application/postscript",".psb":"application/vnd.3gpp.pic-bw-small",".psd":"image/vnd.adobe.photoshop",".psf":"application/x-font-linux-psf",".ptid":"application/vnd.pvi.ptid1",".pub":"application/x-mspublisher",".pvb":"application/vnd.3gpp.pic-bw-var",".pwn":"application/vnd.3m.post-it-notes",".pwz":"application/vnd.ms-powerpoint",".py":"text/x-python",".pya":"audio/vnd.ms-playready.media.pya",".pyc":"application/x-python-code",".pyo":"application/x-python-code",".pyv":"video/vnd.ms-playready.media.pyv",".qam":"application/vnd.epson.quickanime",".qbo":"application/vnd.intu.qbo",".qfx":"application/vnd.intu.qfx",".qps":"application/vnd.publishare-delta-tree",".qt":"video/quicktime",".qwd":"application/vnd.quark.quarkxpress",".qwt":"application/vnd.quark.quarkxpress",".qxb":"application/vnd.quark.quarkxpress",".qxd":"application/vnd.quark.quarkxpress",".qxl":"application/vnd.quark.quarkxpress",".qxt":"application/vnd.quark.quarkxpress",".ra":"audio/x-pn-realaudio",".ram":"audio/x-pn-realaudio",".rar":"application/x-rar-compressed",".ras":"image/x-cmu-raster",".rcprofile":"application/vnd.ipunplugged.rcprofile",".rdf":"application/rdf+xml",".rdz":"application/vnd.data-vision.rdz",".rep":"application/vnd.businessobjects",".res":"application/x-dtbresource+xml",".rgb":"image/x-rgb",".rif":"application/reginfo+xml",".rl":"application/resource-lists+xml",".rlc":"image/vnd.fujixerox.edmics-rlc",".rld":"application/resource-lists-diff+xml",".rm":"application/vnd.rn-realmedia",".rmi":"audio/midi",".rmp":"audio/x-pn-realaudio-plugin",".rms":"application/vnd.jcp.javame.midlet-rms",".rnc":"application/relax-ng-compact-syntax",".roff":"text/troff",".rpm":"application/x-rpm",".rpss":"application/vnd.nokia.radio-presets",".rpst":"application/vnd.nokia.radio-preset",".rq":"application/sparql-query",".rs":"application/rls-services+xml",".rsd":"application/rsd+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".rtx":"text/richtext",".s":"text/x-asm",".saf":"application/vnd.yamaha.smaf-audio",".sbml":"application/sbml+xml",".sc":"application/vnd.ibm.secure-container",".scd":"application/x-msschedule",".scm":"application/vnd.lotus-screencam",".scq":"application/scvp-cv-request",".scs":"application/scvp-cv-response",".scurl":"text/vnd.curl.scurl",".sda":"application/vnd.stardivision.draw",".sdc":"application/vnd.stardivision.calc",".sdd":"application/vnd.stardivision.impress",".sdkd":"application/vnd.solent.sdkm+xml",".sdkm":"application/vnd.solent.sdkm+xml",".sdp":"application/sdp",".sdw":"application/vnd.stardivision.writer",".see":"application/vnd.seemail",".seed":"application/vnd.fdsn.seed",".sema":"application/vnd.sema",".semd":"application/vnd.semd",".semf":"application/vnd.semf",".ser":"application/java-serialized-object",".setpay":"application/set-payment-initiation",".setreg":"application/set-registration-initiation",".sfd-hdstx":"application/vnd.hydrostatix.sof-data",".sfs":"application/vnd.spotfire.sfs",".sgl":"application/vnd.stardivision.writer-global",".sgm":"text/sgml",".sgml":"text/sgml",".sh":"application/x-sh",".shar":"application/x-shar",".shf":"application/shf+xml",".si":"text/vnd.wap.si",".sic":"application/vnd.wap.sic",".sig":"application/pgp-signature",".silo":"model/mesh",".sis":"application/vnd.symbian.install",".sisx":"application/vnd.symbian.install",".sit":"application/x-stuffit",".sitx":"application/x-stuffitx",".skd":"application/vnd.koan",".skm":"application/vnd.koan",".skp":"application/vnd.koan",".skt":"application/vnd.koan",".sl":"text/vnd.wap.sl",".slc":"application/vnd.wap.slc",".sldm":"application/vnd.ms-powerpoint.slide.macroenabled.12",".sldx":"application/vnd.openxmlformats-officedocument.presentationml.slide",".slt":"application/vnd.epson.salt",".smf":"application/vnd.stardivision.math",".smi":"application/smil+xml",".smil":"application/smil+xml",".snd":"audio/basic",".snf":"application/x-font-snf",".so":"application/octet-stream",".spc":"application/x-pkcs7-certificates",".spf":"application/vnd.yamaha.smaf-phrase",".spl":"application/x-futuresplash",".spot":"text/vnd.in3d.spot",".spp":"application/scvp-vp-response",".spq":"application/scvp-vp-request",".spx":"audio/ogg",".src":"application/x-wais-source",".srx":"application/sparql-results+xml",".sse":"application/vnd.kodak-descriptor",".ssf":"application/vnd.epson.ssf",".ssml":"application/ssml+xml",".stc":"application/vnd.sun.xml.calc.template",".std":"application/vnd.sun.xml.draw.template",".stf":"application/vnd.wt.stf",".sti":"application/vnd.sun.xml.impress.template",".stk":"application/hyperstudio",".stl":"application/vnd.ms-pki.stl",".str":"application/vnd.pg.format",".stw":"application/vnd.sun.xml.writer.template",".sus":"application/vnd.sus-calendar",".susp":"application/vnd.sus-calendar",".sv4cpio":"application/x-sv4cpio",".sv4crc":"application/x-sv4crc",".svd":"application/vnd.svd",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swa":"application/x-director",".swf":"application/x-shockwave-flash",".swi":"application/vnd.arastra.swi",".sxc":"application/vnd.sun.xml.calc",".sxd":"application/vnd.sun.xml.draw",".sxg":"application/vnd.sun.xml.writer.global",".sxi":"application/vnd.sun.xml.impress",".sxm":"application/vnd.sun.xml.math",".sxw":"application/vnd.sun.xml.writer",".t":"text/troff",".tao":"application/vnd.tao.intent-module-archive",".tar":"application/x-tar",".tcap":"application/vnd.3gpp2.tcap",".tcl":"application/x-tcl",".teacher":"application/vnd.smart.teacher",".tex":"application/x-tex",".texi":"application/x-texinfo",".texinfo":"application/x-texinfo",".text":"text/plain",".tfm":"application/x-tex-tfm",".tgz":"application/x-gzip",".tif":"image/tiff",".tiff":"image/tiff",".tmo":"application/vnd.tmobile-livetv",".torrent":"application/x-bittorrent",".tpl":"application/vnd.groove-tool-template",".tpt":"application/vnd.trid.tpt",".tr":"text/troff",".tra":"application/vnd.trueapp",".trm":"application/x-msterminal",".tsv":"text/tab-separated-values",".ttc":"application/x-font-ttf",".ttf":"application/x-font-ttf",".twd":"application/vnd.simtech-mindmapper",".twds":"application/vnd.simtech-mindmapper",".txd":"application/vnd.genomatix.tuxedo",".txf":"application/vnd.mobius.txf",".txt":"text/plain",".u32":"application/x-authorware-bin",".udeb":"application/x-debian-package",".ufd":"application/vnd.ufdl",".ufdl":"application/vnd.ufdl",".umj":"application/vnd.umajin",".unityweb":"application/vnd.unity",".uoml":"application/vnd.uoml+xml",".uri":"text/uri-list",".uris":"text/uri-list",".urls":"text/uri-list",".ustar":"application/x-ustar",".utz":"application/vnd.uiq.theme",".uu":"text/x-uuencode",".vcd":"application/x-cdlink",".vcf":"text/x-vcard",".vcg":"application/vnd.groove-vcard",".vcs":"text/x-vcalendar",".vcx":"application/vnd.vcx",".vis":"application/vnd.visionary",".viv":"video/vnd.vivo",".vor":"application/vnd.stardivision.writer",".vox":"application/x-authorware-bin",".vrml":"model/vrml",".vsd":"application/vnd.visio",".vsf":"application/vnd.vsf",".vss":"application/vnd.visio",".vst":"application/vnd.visio",".vsw":"application/vnd.visio",".vtu":"model/vnd.vtu",".vxml":"application/voicexml+xml",".w3d":"application/x-director",".wad":"application/x-doom",".wav":"audio/x-wav",".wax":"audio/x-ms-wax",".wbmp":"image/vnd.wap.wbmp",".wbs":"application/vnd.criticaltools.wbs+xml",".wbxml":"application/vnd.wap.wbxml",".wcm":"application/vnd.ms-works",".wdb":"application/vnd.ms-works",".wiz":"application/msword",".wks":"application/vnd.ms-works",".wm":"video/x-ms-wm",".wma":"audio/x-ms-wma",".wmd":"application/x-ms-wmd",".wmf":"application/x-msmetafile",".wml":"text/vnd.wap.wml",".wmlc":"application/vnd.wap.wmlc",".wmls":"text/vnd.wap.wmlscript",".wmlsc":"application/vnd.wap.wmlscriptc",".wmv":"video/x-ms-wmv",".wmx":"video/x-ms-wmx",".wmz":"application/x-ms-wmz",".wpd":"application/vnd.wordperfect",".wpl":"application/vnd.ms-wpl",".wps":"application/vnd.ms-works",".wqd":"application/vnd.wqd",".wri":"application/x-mswrite",".wrl":"model/vrml",".wsdl":"application/wsdl+xml",".wspolicy":"application/wspolicy+xml",".wtb":"application/vnd.webturbo",".wvx":"video/x-ms-wvx",".x32":"application/x-authorware-bin",".x3d":"application/vnd.hzn-3d-crossword",".xap":"application/x-silverlight-app",".xar":"application/vnd.xara",".xbap":"application/x-ms-xbap",".xbd":"application/vnd.fujixerox.docuworks.binder",".xbm":"image/x-xbitmap",".xdm":"application/vnd.syncml.dm+xml",".xdp":"application/vnd.adobe.xdp+xml",".xdw":"application/vnd.fujixerox.docuworks",".xenc":"application/xenc+xml",".xer":"application/patch-ops-error+xml",".xfdf":"application/vnd.adobe.xfdf",".xfdl":"application/vnd.xfdl",".xht":"application/xhtml+xml",".xhtml":"application/xhtml+xml",".xhvml":"application/xv+xml",".xif":"image/vnd.xiff",".xla":"application/vnd.ms-excel",".xlam":"application/vnd.ms-excel.addin.macroenabled.12",".xlb":"application/vnd.ms-excel",".xlc":"application/vnd.ms-excel",".xlm":"application/vnd.ms-excel",".xls":"application/vnd.ms-excel",".xlsb":"application/vnd.ms-excel.sheet.binary.macroenabled.12",".xlsm":"application/vnd.ms-excel.sheet.macroenabled.12",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".xlt":"application/vnd.ms-excel",".xltm":"application/vnd.ms-excel.template.macroenabled.12",".xltx":"application/vnd.openxmlformats-officedocument.spreadsheetml.template",".xlw":"application/vnd.ms-excel",".xml":"application/xml",".xo":"application/vnd.olpc-sugar",".xop":"application/xop+xml",".xpdl":"application/xml",".xpi":"application/x-xpinstall",".xpm":"image/x-xpixmap",".xpr":"application/vnd.is-xpr",".xps":"application/vnd.ms-xpsdocument",".xpw":"application/vnd.intercon.formnet",".xpx":"application/vnd.intercon.formnet",".xsl":"application/xml",".xslt":"application/xslt+xml",".xsm":"application/vnd.syncml+xml",".xspf":"application/xspf+xml",".xul":"application/vnd.mozilla.xul+xml",".xvm":"application/xv+xml",".xvml":"application/xv+xml",".xwd":"image/x-xwindowdump",".xyz":"chemical/x-xyz",".zaz":"application/vnd.zzazz.deck+xml",".zip":"application/zip",".zir":"application/vnd.zul",".zirz":"application/vnd.zul",".zmm":"application/vnd.handheld-entertainment+xml"};var responseType={TEXT:'text',ARRAY_BUFFER:'arraybuffer',BLOB:'blob',DOCUMENT:'document',JSON:'json'};var MIME_TYPE_REGEXP=/(.+)\/(.+)$/;var FILE_EXTENSION_REGEXP=/\.(.+)$/;var SHORTCUT_REGEXP=/.*/;var MIME_TYPE_AUDIO='audio/*';var MIME_TYPE_IMAGE='image/*';var MIME_TYPE_VIDEO='video/*';var FileUploadItem=function(){function FileUploadItem(file){_classCallCheck(this,FileUploadItem);this._originalFile=file;this._xhr=null}_createClass(FileUploadItem,[{key:"_isMimeTypeAllowed",value:function _isMimeTypeAllowed(acceptedMimeTypes){var isAllowed=false;var fileType=this.file.type||'application/unknown';if(!fileType.match(MIME_TYPE_REGEXP)){return false}return acceptedMimeTypes.split(',').some(function(allowedMimeType){allowedMimeType=allowedMimeType.trim();if(allowedMimeType==='*'||allowedMimeType==='.*'||allowedMimeType==='*/*'||fileType==='application/unknown'){isAllowed=true}else if(allowedMimeType.match(MIME_TYPE_REGEXP)){if(allowedMimeType===MIME_TYPE_AUDIO){isAllowed=fileType.indexOf(MIME_TYPE_AUDIO.slice(0,-1))===0}else if(allowedMimeType===MIME_TYPE_IMAGE){isAllowed=fileType.indexOf(MIME_TYPE_IMAGE.slice(0,-1))===0}else if(allowedMimeType===MIME_TYPE_VIDEO){isAllowed=fileType.indexOf(MIME_TYPE_VIDEO.slice(0,-1))===0}else{isAllowed=fileType===allowedMimeType}}else if(allowedMimeType.match(FILE_EXTENSION_REGEXP)){var allowedMimeTypes=MIME_TYPES[allowedMimeType];if(Array.isArray(allowedMimeTypes)){isAllowed=allowedMimeTypes.some(function(mimeType){return fileType===mimeType})}else{isAllowed=fileType===MIME_TYPES[allowedMimeType]}}else if(allowedMimeType.match(SHORTCUT_REGEXP)){isAllowed=fileType.split('/')[0]===allowedMimeType}return isAllowed})}},{key:"file",get:function get(){return this._originalFile}},{key:"parameters",get:function get(){return this._parameters||[]},set:function set(value){var isValid=Array.isArray(value)&&value.every(function(el){return el&&el.name});if(isValid){this._parameters=value}}},{key:"withCredentials",get:function get(){return this._withCredentials||false},set:function set(value){this._withCredentials=transform.boolean(value)}},{key:"timeout",get:function get(){return this._timeout||0},set:function set(value){var timeout=transform.number(value);if(timeout!==null){this._timeout=timeout;if(this._xhr){this._xhr.timeout=timeout}}}},{key:"responseType",get:function get(){return this._responseType||responseType.TEXT},set:function set(value){value=transform.string(value).toLowerCase();this._responseType=validate.enumeration(responseType)(value)&&value||responseType.TEXT;if(this._xhr){this._xhr.responseType=value}}},{key:"readyState",get:function get(){return this._xhr?this._xhr.readyState:this._readyState||0}},{key:"response",get:function get(){return this._xhr?this._xhr.response:this._response||''}},{key:"responseText",get:function get(){return this._xhr?this._xhr.responseText:this._responseText||''}},{key:"responseXML",get:function get(){return this._xhr?this._xhr.responseXML:this._responseXML||null}},{key:"status",get:function get(){return this._xhr?this._xhr.status:this._status||0}},{key:"statusText",get:function get(){return this._xhr?this._xhr.statusText:this._statusText||''}}],[{key:"responseType",get:function get(){return responseType}}]);return FileUploadItem}();var template$C=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["input"]=document.createElement("input");el0.id=data_0["commons"]["getUID"]();el0.setAttribute("handle","input");el0.className+=" _coral-FileUpload-input is-unselectable";el0.setAttribute("tabindex","-1");el0.setAttribute("name","");el0.setAttribute("type","file");el0.setAttribute("accept","");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var CLASSNAME$V='_coral-FileUpload';var XHR_EVENT_NAMES=['loadstart','progress','load','error','loadend','readystatechange','abort','timeout'];var method={POST:'POST',PUT:'PUT',PATCH:'PATCH'};var FileUpload=function(_BaseFormField){_inherits(FileUpload,_BaseFormField);var _super=_createSuper(FileUpload);function FileUpload(){var _this;_classCallCheck(this,FileUpload);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'click [coral-fileupload-submit]':'_onSubmitButtonClick','click [coral-fileupload-clear]':'clear','click [coral-fileupload-select]':'_showFileDialog','click [coral-fileupload-abort]':'abort','click [coral-fileupload-abortfile]':'_onAbortFileClick','click [coral-fileupload-removefile]':'_onRemoveFileClick','click [coral-fileupload-uploadfile]':'_onUploadFileClick','dragenter [coral-fileupload-dropzone]':'_onDragAndDrop','dragover [coral-fileupload-dropzone]':'_onDragAndDrop','dragleave [handle="input"]':'_onDragAndDrop','drop [handle="input"]':'_onDragAndDrop','capture:focus [coral-fileupload-select]':'_onButtonFocusIn','capture:focus [handle="input"]':'_onInputFocusIn','capture:blur [handle="input"]':'_onInputFocusOut'}));_this._elements={};template$C.call(_this._elements,{commons:commons});_this._labellableElement=_this._elements.input;_this._uploadQueue=[];_this._doAddDragClass=_this._doAddDragClass.bind(_assertThisInitialized(_this));_this._doRemoveDragClass=_this._doRemoveDragClass.bind(_assertThisInitialized(_this));_this._positionInputOnDropZone=_this._positionInputOnDropZone.bind(_assertThisInitialized(_this));_this._observer=new MutationObserver(_this._positionInputOnDropZone);_this._observer.observe(_assertThisInitialized(_this),{childList:true,attributes:true,attributeFilter:['coral-fileupload-dropzone'],subtree:true});return _this}_createClass(FileUpload,[{key:"_onButtonFocusIn",value:function _onButtonFocusIn(event){var input=this._elements.input;var button=event.matchedTarget;button.parentNode.insertBefore(input,button.nextElementSibling);if(event.relatedTarget!==input){window.setTimeout(function(){input.focus()},100)}}},{key:"_onInputFocusIn",value:function _onInputFocusIn(){var input=event.matchedTarget;var button=this.querySelector('[coral-fileupload-select]');if(button){button.tabIndex=-1;button.setAttribute('aria-hidden',true);button.classList.add('is-focused');window.requestAnimationFrame(function(){if(input.classList.contains('focus-ring')){button.classList.add('focus-ring')}})}}},{key:"_onInputFocusOut",value:function _onInputFocusOut(){var button=this.querySelector('[coral-fileupload-select].is-focused');button.classList.remove('is-focused');button.classList.remove('focus-ring');window.requestAnimationFrame(function(){button.tabIndex=0;button.removeAttribute('aria-hidden')})}},{key:"_onAbortFileClick",value:function _onAbortFileClick(event){if(!this.async){throw new Error('Coral.FileUpload does not support aborting file(s) upload on synchronous mode.')}var fileName=event.target.getAttribute('coral-fileupload-abortfile');if(fileName){this._abortFile(fileName)}}},{key:"_onRemoveFileClick",value:function _onRemoveFileClick(event){if(!this.async){throw new Error('Coral.FileUpload does not support removing a file from the queue on synchronous mode.')}else{var fileName=event.target.getAttribute('coral-fileupload-removefile');if(fileName){this._clearFile(fileName)}}}},{key:"_onUploadFileClick",value:function _onUploadFileClick(event){if(!this.async){throw new Error('Coral.FileUpload does not support uploading a file from the queue on synchronous mode.')}var fileName=event.target.getAttribute('coral-fileupload-uploadfile');if(fileName){this.upload(fileName)}}},{key:"_onDragAndDrop",value:function _onDragAndDrop(event){if(event.type==='dragenter'||event.type==='dragover'){this._addDragClass()}else if(event.type==='dragleave'||event.type==='drop'){this._removeDragClass()}this.trigger("coral-fileupload:".concat(event.type))}},{key:"_addDragClass",value:function _addDragClass(){window.clearTimeout(this._removeClassTimeout);this._removeClassTimeout=window.setTimeout(this._doAddDragClass,10)}},{key:"_doAddDragClass",value:function _doAddDragClass(){this.classList.add('is-dragging');var dropZone=this.querySelector('[coral-fileupload-dropzone]');if(dropZone){dropZone.classList.add('is-dragging')}this._elements.input.classList.remove('is-unselectable')}},{key:"_removeDragClass",value:function _removeDragClass(){window.clearTimeout(this._removeClassTimeout);this._removeClassTimeout=window.setTimeout(this._doRemoveDragClass,10)}},{key:"_doRemoveDragClass",value:function _doRemoveDragClass(){this.classList.remove('is-dragging');var dropZone=this.querySelector('[coral-fileupload-dropzone]');if(dropZone){dropZone.classList.remove('is-dragging')}this._elements.input.classList.add('is-unselectable')}},{key:"_onSubmitButtonClick",value:function _onSubmitButtonClick(event){var target=event.matchedTarget;this._buttonAction=target.getAttribute('formaction');var buttonMethod=transform.string(target.getAttribute('formmethod')).toUpperCase();this._buttonMethod=validate.enumeration(method)(buttonMethod)&&buttonMethod||null;this.upload()}},{key:"_onInputChange",value:function _onInputChange(event){var _this2=this;event.stopPropagation();if(this.disabled){return}var files=[];var items=[];if(event.target.files&&event.target.files.length){this._clearQueue();files=event.target.files;if(!this.multiple){files=[files[0]]}}else if(event.dataTransfer&&event.dataTransfer.files&&event.dataTransfer.files.length){this._clearQueue();files=event.dataTransfer.files;if(!this.multiple){files=[files[0]]}}else{return}for(var i=0;i<files.length;i+=1){items.push(new FileUploadItem(files[i]))}items.forEach(function(item){if(!_this2._getQueueItemByFilename(item.file.name)){if(_this2.sizeLimit&&item.file.size>_this2.sizeLimit){_this2.trigger('coral-fileupload:filesizeexceeded',{item:item})}else if(_this2.accept&&!item._isMimeTypeAllowed(_this2.accept)){_this2.trigger('coral-fileupload:filemimetyperejected',{item:item})}else{_this2._uploadQueue.push(item);_this2.trigger('coral-fileupload:fileadded',{item:item})}}});if(this.autoStart){this.upload()}if(this._triggerChangeEvent){this.trigger('change')}if(this.async){this._clearFileInputValue()}}},{key:"_setElementState",value:function _setElementState(){var _this3=this;Array.prototype.forEach.call(this.querySelectorAll('[coral-fileupload-select],[coral-fileupload-dropzone],[coral-fileupload-submit],[coral-fileupload-clear],[coral-fileupload-abort],[coral-fileupload-abortfile],[coral-fileupload-removefile],[coral-fileupload-uploadfile]'),function(item){item.classList.toggle('is-invalid',_this3.invalid);item.classList.toggle('is-disabled',_this3.disabled);item.classList.toggle('is-required',_this3.required);item.classList.toggle('is-readOnly',_this3.readOnly);item[_this3.disabled||_this3.readOnly?'setAttribute':'removeAttribute']('disabled','')})}},{key:"_clearQueue",value:function _clearQueue(){var _this4=this;this._uploadQueue.slice().forEach(function(item){_this4._clearFile(item.file.name)})}},{key:"_clearFileInputValue",value:function _clearFileInputValue(){this._elements.input.value=''}},{key:"_clearFile",value:function _clearFile(filename){var item=this._getQueueItemByFilename(filename);if(item){this._abortFile(filename);this._uploadQueue.splice(this._getQueueIndex(filename),1);this.trigger('coral-fileupload:fileremoved',{item:item})}}},{key:"_uploadFile",value:function _uploadFile(filename){var item=this._getQueueItemByFilename(filename);if(item){this._abortFile(filename);this._ajaxUpload(item)}}},{key:"_showFileDialog",value:function _showFileDialog(){this._elements.input.click()}},{key:"_abortFile",value:function _abortFile(filename){var item=this._getQueueItemByFilename(filename);if(item&&item._xhr){item._xhr.abort();item._xhr=null}}},{key:"_ajaxUpload",value:function _ajaxUpload(item){var _this5=this;var action=this._buttonAction||this.action;var requestMethod=this._buttonMethod?this._buttonMethod.toUpperCase():this.method;var parameters=this.parameters.concat(item.parameters);var formData=new FormData();parameters.forEach(function(additionalParameter){formData.append(additionalParameter.name,additionalParameter.value)});formData.append('_charset_','utf-8');formData.append(this.name,item._originalFile);item._xhr=new XMLHttpRequest();item._xhr.open(requestMethod,action);item._xhr.timeout=item.timeout;item._xhr.responseType=item.responseType;item._xhr.withCredentials=item.withCredentials;XHR_EVENT_NAMES.forEach(function(name){var isProgressEvent=name==='progress';(isProgressEvent?item._xhr.upload:item._xhr).addEventListener(name,function(event){var detail={item:item,action:action,method:requestMethod};if(isProgressEvent){detail.lengthComputable=event.lengthComputable;detail.loaded=event.loaded;detail.total=event.total}_this5.trigger("coral-fileupload:".concat(name),detail)})});item._xhr.send(formData)}},{key:"_getLabellableElement",value:function _getLabellableElement(){return this}},{key:"_getQueueItemByFilename",value:function _getQueueItemByFilename(filename){return this._getQueueItem(this._getQueueIndex(filename))}},{key:"_getQueueItem",value:function _getQueueItem(index){return index>-1?this._uploadQueue[index]:null}},{key:"_getQueueIndex",value:function _getQueueIndex(filename){var index=-1;this._uploadQueue.some(function(item,i){if(item.file.name===filename){index=i;return true}return false});return index}},{key:"_getTargetChangeInput",value:function _getTargetChangeInput(){return this._elements.input}},{key:"_positionInputOnDropZone",value:function _positionInputOnDropZone(){var input=this._elements.input;var dropZone=this.querySelector('[coral-fileupload-dropzone]');if(dropZone){var size=dropZone.getBoundingClientRect();input.style.top="".concat(parseInt(dropZone.offsetTop,10),"px");input.style.left="".concat(parseInt(dropZone.offsetLeft,10),"px");input.style.width="".concat(parseInt(size.width,10),"px");input.style.height="".concat(parseInt(size.height,10),"px")}else{input.style.width='0';input.style.height='0'}}},{key:"upload",value:function upload(filename){var _this6=this;if(!this.async){if(typeof filename==='string'){throw new Error('Coral.FileUpload does not support uploading a file from the queue on synchronous mode.')}var form=this.closest('form');if(!form){form=document.createElement('form');form.method=this.method.toLowerCase();form.enctype='multipart/form-data';form.action=this.action;form.hidden=true;form.appendChild(this._elements.input);Array.prototype.forEach.call(this.querySelectorAll('input[type="hidden"]'),function(hiddenInput){form.appendChild(hiddenInput)});this.appendChild(form)}var input=document.createElement('input');input.type='hidden';input.name='_charset_';input.value='utf-8';form.submit()}else if(typeof filename==='string'){this._uploadFile(filename)}else{this._uploadQueue.forEach(function(item){_this6._abortFile(item.file.name);_this6._ajaxUpload(item)})}}},{key:"clear",value:function clear(filename){if(!this.async){if(typeof filename==='string'){throw new Error('Coral.FileUpload does not support removing a file from the queue on synchronous mode.')}this._clearQueue();this._clearFileInputValue()}else if(typeof filename==='string'){this._clearFile(filename)}else{this._clearQueue()}}},{key:"abort",value:function abort(filename){var _this7=this;if(!this.async){throw new Error('Coral.FileUpload does not support aborting file(s) upload on synchronous mode.')}if(typeof filename==='string'){this._abortFile(filename)}else{this._uploadQueue.forEach(function(item){_this7._abortFile(item.file.name)})}}},{key:"render",value:function render(){var _this8=this;_get(_getPrototypeOf(FileUpload.prototype),"render",this).call(this);this.classList.add(CLASSNAME$V);var button=this.querySelector('[coral-fileupload-select]');if(button){button.id=button.id||commons.getUID()}this.labelledBy=this.labelledBy;var parameters=[];Array.prototype.forEach.call(this.querySelectorAll('input[type="hidden"]'),function(input){parameters.push({name:input.name,value:input.value})});this.parameters=parameters;var inputElement=this.querySelector('[handle="input"]');if(inputElement){inputElement.parentNode.removeChild(inputElement)}this.appendChild(this._elements.input);window.requestAnimationFrame(function(){commons.addResizeListener(_this8,_this8._positionInputOnDropZone)})}},{key:"name",get:function get(){return this._elements.input.name},set:function set(value){this._reflectAttribute('name',value);this._elements.input.name=value}},{key:"value",get:function get(){var item=this._uploadQueue?this._getQueueItem(0):null;return item?"C:\\fakepath\\".concat(item.file.name):''},set:function set(value){if(value===''||value===null){this._clearQueue();this._clearFileInputValue()}else{throw new Error('Coral.FileUpload accepts a filename, which may only be programmatically set to empty string.')}}},{key:"disabled",get:function get(){return this._elements.input.disabled},set:function set(value){this._elements.input.disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this.disabled);this.classList.toggle('is-disabled',this.disabled);this._setElementState()}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(FileUpload.prototype),"invalid",this)},set:function set(value){_set(_getPrototypeOf(FileUpload.prototype),"invalid",value,this,true);this._elements.input.setAttribute('aria-invalid',this.invalid);this._setElementState()}},{key:"required",get:function get(){return this._elements.input.required},set:function set(value){this._elements.input.required=transform.booleanAttr(value);this._reflectAttribute('required',this.required);this.classList.toggle('is-required',this.required);this._setElementState()}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._setElementState()}},{key:"values",get:function get(){var values=this._uploadQueue.map(function(item){return "C:\\fakepath\\".concat(item.file.name)});if(values.length&&!this.multiple){values=[values[0]]}return values},set:function set(values){if(Array.isArray(values)){if(values.length){this.value=values[0]}else{this.value=''}}}},{key:"labelledBy",get:function get(){return _get(_getPrototypeOf(FileUpload.prototype),"labelledBy",this)},set:function set(value){_set(_getPrototypeOf(FileUpload.prototype),"labelledBy",value,this,true);var labelledBy=this.labelledBy;var ids=[];var button=this.querySelector('[coral-fileupload-select]');if(button){ids.push(button.id)}if(labelledBy){ids.unshift(labelledBy)}this._elements.input.setAttribute('aria-labelledby',ids.join(' '));if(labelledBy){var labelElement=document.getElementById(labelledBy);if(labelElement&&labelElement.tagName==='LABEL'){labelElement.setAttribute('for',this._elements.input.id);this._labelElement=labelElement }}else if(this._labelElement){this._labelElement.removeAttribute('for')}}},{key:"parameters",get:function get(){return this._parameters||[]},set:function set(values){var _this9=this;var isValid=Array.isArray(values)&&values.every(function(el){return el&&el.name});if(isValid){this._parameters=values;if(!this.async){Array.prototype.forEach.call(this.querySelectorAll('input[type="hidden"]'),function(input){input.parentNode.removeChild(input)});this.parameters.forEach(function(param){var input=document.createElement('input');input.type='hidden';input.name=param.name;input.value=param.value;_this9.appendChild(input)})}}}},{key:"async",get:function get(){return this._async||false},set:function set(value){this._async=transform.booleanAttr(value);this._reflectAttribute('async',this._async);if(!this._async){this.parameters=this.parameters}if(this._uploadQueue){this._clearQueue();this._clearFileInputValue()}}},{key:"action",get:function get(){return this._action||''},set:function set(value){this._action=transform.string(value);this._reflectAttribute('action',this._action);this._buttonAction=null}},{key:"method",get:function get(){return this._method||method.POST},set:function set(value){value=transform.string(value).toUpperCase();this._method=validate.enumeration(method)(value)&&value||method.POST;this._reflectAttribute('method',this._method);this._buttonMethod=null}},{key:"multiple",get:function get(){return this._elements.input.multiple},set:function set(value){this._elements.input.multiple=transform.booleanAttr(value);this._reflectAttribute('multiple',this.multiple)}},{key:"sizeLimit",get:function get(){return this._sizeLimit||0},set:function set(value){this._sizeLimit=transform.number(value);this._reflectAttribute('sizelimit',this._sizeLimit)}},{key:"accept",get:function get(){return this._elements.input.accept},set:function set(value){this._elements.input.accept=value;this._reflectAttribute('accept',this.accept)}},{key:"autoStart",get:function get(){return this._autoStart||false},set:function set(value){this._autoStart=transform.booleanAttr(value);this._reflectAttribute('autostart',this._autoStart)}},{key:"uploadQueue",get:function get(){return this._uploadQueue}}],[{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(FileUpload),"_attributePropertyMap",this),{sizelimit:'sizeLimit',autostart:'autoStart'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(FileUpload),"observedAttributes",this).concat(['async','action','method','multiple','sizelimit','accept','autostart'])}}]);return FileUpload}(BaseFormField(BaseComponent(HTMLElement)));commons._define('coral-fileupload',FileUpload);FileUpload.Item=FileUploadItem;var template$D=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["quickactions"]=document.createElement("div");el0.setAttribute("handle","quickactions");el0.className+=" _coral-Masonry-item-quickActions";var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["check"]=document.createElement("coral-checkbox");el2.setAttribute("handle","check");el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);return frag};var CLASSNAME$W='_coral-Masonry-item';var MasonryItem=function(_BaseComponent){_inherits(MasonryItem,_BaseComponent);var _super=_createSuper(MasonryItem);function MasonryItem(){var _this;_classCallCheck(this,MasonryItem);_this=_super.call(this);_this._masonry=null;_this._dragAction=null;_this._elements={};template$D.call(_this._elements);return _this}_createClass(MasonryItem,[{key:"_insert",value:function _insert(){var _this2=this;if(this.classList.contains('is-beforeInserting')){this.classList.remove('is-beforeInserting');this.classList.add('is-inserting');commons.transitionEnd(this,function(){_this2.classList.remove('is-inserting')})}}},{key:"_setTabbable",value:function _setTabbable(tabbable){this.setAttribute('tabindex',tabbable?0:-1)}},{key:"_updateDragAction",value:function _updateDragAction(enabled){var handle;if(enabled){if(this.getAttribute('coral-masonry-draghandle')!==null){handle=this}else{handle=this.querySelector('[coral-masonry-draghandle]');if(!handle){enabled=false}}}if(enabled){if(!this._dragAction){this._dragAction=new DragAction(this);this._dragAction.dropZone=this.parentNode}this._dragAction.handle=handle}else if(this._dragAction){this._dragAction.destroy();this._dragAction=null}}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){var _this3=this;if(name==='_removing'){window.requestAnimationFrame(function(){_this3.classList.toggle('is-removing',value!==null)})}else if(name==='_orderable'){this._updateDragAction(value!==null)}else{_get(_getPrototypeOf(MasonryItem.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(MasonryItem.prototype),"connectedCallback",this).call(this);this.trigger('coral-masonry-item:_connected')}},{key:"render",value:function render(){_get(_getPrototypeOf(MasonryItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$W);this.setAttribute('tabindex','-1');var template=this.querySelector('._coral-Masonry-item-quickActions');if(template){template.remove()}this.insertBefore(this._elements.quickactions,this.firstChild);this._elements.check._labellableElement.tabIndex=-1}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(MasonryItem.prototype),"disconnectedCallback",this).call(this);var masonry=this._masonry;if(masonry){masonry._onItemDisconnected(this)}}},{key:"content",get:function get(){return this},set:function set(value){if(_typeof(value)==='object'){for(var prop in value){this[prop]=value[prop]}}}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.setAttribute('aria-selected',this._selected);this.classList.toggle('is-selected',this._selected);this._elements.check[this._selected?'setAttribute':'removeAttribute']('checked','');this.trigger('coral-masonry-item:_selectedchanged')}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(MasonryItem),"observedAttributes",this).concat(['selected','_removing','_orderable'])}}]);return MasonryItem}(BaseComponent(HTMLElement));var CLASSNAME$X='_coral-Masonry';var selectionMode$2={NONE:'none',SINGLE:'single',MULTIPLE:'multiple'};var layouts={FIXED_CENTERED:'fixed-centered',FIXED_SPREAD:'fixed-spread',VARIABLE:'variable',DASHBOARD:'dashboard'};var ariaGrid={ON:'on',OFF:'off'};document.addEventListener('error',function(event){var target=event.target;if(target&&target.tagName==='IMG'){target._loadError=true}},true);var itemFilter=function itemFilter(element){return element&&element.tagName==='CORAL-MASONRY-ITEM'&&!element.hasAttribute('_removing')};var isRemovingOrRemoved=function isRemovingOrRemoved(item){return item.hasAttribute('_removing')||!item.parentNode};var relativePosition=function relativePosition(el1,el2){var rect1=el1.getBoundingClientRect();var rect2=el2.getBoundingClientRect();return{left:rect2.left-rect1.left,top:rect2.top-rect1.top}};var weightedDistance=function weightedDistance(x1,y1,x2,y2,unitWidth,unitHeight){return Math.sqrt(Math.pow((x2-x1)/unitWidth,2)+Math.pow((y2-y1)/unitHeight,2))};var getPreviousItem=function getPreviousItem(item){var previousItem=item.previousElementSibling;return itemFilter(previousItem)?previousItem:null};var Masonry=function(_BaseComponent){_inherits(Masonry,_BaseComponent);var _super=_createSuper(Masonry);function Masonry(){var _this;_classCallCheck(this,Masonry);_this=_super.call(this);_this._loaded=false;_this._layouted=false;_this._layoutScheduled=false;_this._forceDebounce=false;_this._debounceId=null;_this._newItems=[];_this._tabbableItem=null;_this._defaultAriaRole="group";_this._ariaGrid=ariaGrid.OFF;_this._preservedAriaRole=_this._defaultAriaRole;_this._preservedParentAriaRole=null;_this._delegateEvents({'global:resize':'_onWindowResize','global:load':'_updateLoaded','capture:load img':'_updateLoaded','capture:error img':'_updateLoaded','coral-dragaction:dragstart coral-masonry-item':'_onItemDragStart','coral-dragaction:dragover coral-masonry-item':'_onItemDragMove','coral-dragaction:dragend coral-masonry-item':'_onItemDragEnd','capture:focus coral-masonry-item':'_onItemFocus','click coral-masonry-item':'_onItemClick','key:space coral-masonry-item':'_onItemClick','coral-masonry-item:_connected':'_onItemConnected','coral-masonry-item:_selectedchanged':'_onItemSelectedChanged'});_this._observer=new MutationObserver(_this._scheduleLayout.bind(_assertThisInitialized(_this),'mutation'));_this._observer.observe(_assertThisInitialized(_this),{childList:true,subtree:true,characterData:true,attributes:true});_this._oldSelection=[];_this.items._startHandlingItems(true);return _this}_createClass(Masonry,[{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_updateAriaRoleForParent",value:function _updateAriaRoleForParent(activateAriaGrid){if(!this.parentElement){return}if(activateAriaGrid===ariaGrid.ON){this._preservedParentAriaRole=this.parentElement.getAttribute('role');this.parentElement.setAttribute('role','grid');if(this.ariaLabel&&this.parentElement.getAttribute('aria-label')!==this.ariaLabel){this._preservedParentAriaLabel=this.parentElement.getAttribute('aria-label');this.parentElement.setAttribute('aria-label',this.ariaLabel)}if(this.ariaLabelledby&&this.parentElement.getAttribute('aria-labelledby')!==this.ariaLabelledby){this._preservedParentAriaLabelledby=this.parentElement.getAttribute('aria-labelledby');this.parentElement.setAttribute('aria-labelledby',this.ariaLabelledby)}}else{if(this._preservedParentAriaRole){this.parentElement.setAttribute('role',this._preservedParentAriaRole)}else{this.parentElement.removeAttribute('role')}if(this._preservedParentAriaLabel){this.parentElement.setAttribute('aria-label',this._preservedParentAriaLabel);this._preservedParentAriaLabel=undefined}else{this.parentElement.removeAttribute('aria-label')}if(this._preservedParentAriaLabelledby!==undefined){this.parentElement.setAttribute('aria-labelledby',this._preservedParentAriaLabelledby)}else{this.parentElement.removeAttribute('aria-labelledby')}this.parentElement.removeAttribute('aria-colcount')}}},{key:"_updateAriaRoleForItems",value:function _updateAriaRoleForItems(activateAriaGrid){var _this2=this;var columnIndex=1;this.items.getAll().forEach(function(item){_this2._updateAriaRoleForItem(item,columnIndex++,activateAriaGrid)})}},{key:"_updateAriaRoleForItem",value:function _updateAriaRoleForItem(item,columnIndex,activateAriaGrid){if(activateAriaGrid===ariaGrid.ON){item.setAttribute('role','gridcell');item.setAttribute('aria-colindex',columnIndex)}else{item.removeAttribute('role');item.removeAttribute('aria-colindex')}}},{key:"_updateAriaColumnCountForParent",value:function _updateAriaColumnCountForParent(activateAriaGrid){if(!this.parentElement){return}if(activateAriaGrid===ariaGrid.ON){this.parentElement.setAttribute('aria-colcount',this.items.length)}else{this.parentElement.removeAttribute('aria-colcount')}}},{key:"_validateSelection",value:function _validateSelection(item){var _this3=this;var selectedItems=this.selectedItems;if(this.selectionMode===selectionMode$2.NONE){selectedItems.forEach(function(selectedItem){_this3._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')})}else if(this.selectionMode===selectionMode$2.SINGLE){item=item||selectedItems[selectedItems.length-1];if(item&&item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this3._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}}this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItems=this.selectedItems;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&this._arraysAreDifferent(selectedItems,oldSelection)){if(this.selectionMode===selectionMode$2.MULTIPLE){this.trigger('coral-masonry:change',{oldSelection:oldSelection,selection:selectedItems})}else{this.trigger('coral-masonry:change',{oldSelection:oldSelection.length>1?oldSelection:oldSelection[0]||null,selection:selectedItems[0]||null})}this._oldSelection=selectedItems}}},{key:"_arraysAreDifferent",value:function _arraysAreDifferent(selection,oldSelection){var diff=[];if(oldSelection.length===selection.length){diff=oldSelection.filter(function(item){return selection.indexOf(item)===-1})}return oldSelection.length!==selection.length||diff.length!==0}},{key:"_onItemClick",value:function _onItemClick(event){if(this.selectionMode!==selectionMode$2.NONE){event.preventDefault();var item=event.matchedTarget;item[item.hasAttribute('selected')?'removeAttribute':'setAttribute']('selected','')}}},{key:"_setAllSelected",value:function _setAllSelected(selected){var items=this.items.getAll();for(var i=0;i<items.length;i+=1){var item=items[i];if(item.hasAttribute('selected')!==selected){item[selected?'setAttribute':'removeAttribute']('selected','')}}}},{key:"_scheduleLayout",value:function _scheduleLayout(){var _this4=this;if(!this._forceDebounce&&!this._layoutScheduled){window.requestAnimationFrame(function(){if(_this4._layoutScheduled){_this4._doLayout();_this4._layoutScheduled=false}});this._layoutScheduled=true}}},{key:"_scheduleDebouncedLayout",value:function _scheduleDebouncedLayout(force){var _this5=this;if(force&&this._layouted){this._forceDebounce=true}window.clearTimeout(this._debounceId);this._debounceId=window.setTimeout(function(){_this5._forceDebounce=false;_this5._scheduleLayout('window resize')},500)}},{key:"_onResize",value:function _onResize(){if(!this._layouted){this._doLayout('became visible')}else{this._scheduleDebouncedLayout(false)}}},{key:"_onWindowResize",value:function _onWindowResize(){this._scheduleDebouncedLayout(true)}},{key:"_doLayout",value:function _doLayout(){var visible=!!this.offsetParent;var LayoutClass=this.constructor._layouts[this.layout];if(this._forceDebounce||!LayoutClass||!visible){return}if(!this._layoutInstance){this._layoutInstance=new LayoutClass(this )}else if(this._layoutInstance.name!==this.layout){this._layoutInstance.destroy();this._layoutInstance=new LayoutClass(this)}var i;var newItems=this._newItems;for(i=0;i<newItems.length;i+=1){newItems[i]._insert()}this._layoutInstance.layout();this._layouted=true;for(i=0;i<newItems.length;i+=1){newItems[i].classList.add('is-managed')}newItems.length=0;this.classList.toggle('is-loaded',this._loaded);var tabbableItem=this._tabbableItem;if(!tabbableItem||isRemovingOrRemoved(tabbableItem)){this._setTabbableItem(this.items.first())}var focusedItem=this._focusedItem;if(focusedItem){if(isRemovingOrRemoved(focusedItem)&&this._focusedItemNext){this._focusedItemNext.focus()}else if(focusedItem!==document.activeElement){this._focusedItem=null;this._focusedItemNext=null}}this._updateAriaRoleForItems(this.ariaGrid);this._updateAriaColumnCountForParent(this.ariaGrid);this._observer.takeRecords()}},{key:"_updateLoaded",value:function _updateLoaded(){if(!this._loaded&&document.readyState==='complete'){var loaded=true;var images=this.querySelectorAll('img');for(var i=0;i<images.length;i+=1){var image=images[i];if(image.src&&!image.complete&&!image._loadError){loaded=false;break}}this._loaded=loaded}this._scheduleLayout()}},{key:"_onItemConnected",value:function _onItemConnected(event){event.stopImmediatePropagation();var item=event.target;this._prepareItem(item)}},{key:"_prepareItem",value:function _prepareItem(item){var _this6=this;if(!document.body.contains(this)){return}if(!item.hasAttribute('_removing')&&this!==item._masonry&&!item.hasAttribute('_placeholder')){item._masonry=this;item.classList.add('is-beforeInserting');window.requestAnimationFrame(function(){_this6._onItemAdded(item)})}}},{key:"_onItemDisconnected",value:function _onItemDisconnected(item){if(!document.body.contains(this)){return}if(item._dropping){return}if(!item.hasAttribute('_removing')){item.setAttribute('_removing','');this.appendChild(item);commons.transitionEnd(item,function(){item.remove()})}else{item.removeAttribute('_removing');item._masonry=null;this._onItemRemoved(item)}}},{key:"_onItemAdded",value:function _onItemAdded(item){item._updateDragAction(this.orderable);this._newItems.push(item);if(this._attaching&&item.nextElementSibling===null){this._doLayout('last item attached')}}},{key:"_onItemRemoved",value:function _onItemRemoved(item){item._updateDragAction(false);item.classList.remove('is-managed')}},{key:"_onItemFocus",value:function _onItemFocus(e){var item=e.target;if(item===e.matchedTarget){this._setTabbableItem(item);this._focusedItem=item;this._focusedItemNext=[item.nextElementSibling,item.previousElementSibling].filter(itemFilter)[0]}}},{key:"_setTabbableItem",value:function _setTabbableItem(item){if(this._tabbableItem){this._tabbableItem._setTabbable(false)}if(item){item._setTabbable(true)}this._tabbableItem=item}},{key:"_isApproachingPlaceholder",value:function _isApproachingPlaceholder(pos,prevPos,placeholder){var placeholderPos=relativePosition(this,placeholder);var placeholderWidth=placeholder.offsetWidth;var placeholderHeight=placeholder.offsetHeight;var placeholderX=placeholderPos.left+placeholderWidth/2;var placeholderY=placeholderPos.top+placeholderHeight/2;return weightedDistance(placeholderX,placeholderY,pos.left,pos.top,placeholderWidth,placeholderHeight)<=weightedDistance(placeholderX,placeholderY,prevPos.left,prevPos.top,placeholderWidth,placeholderHeight)}},{key:"_onItemDragStart",value:function _onItemDragStart(e){var item=e.target;if(item===e.matchedTarget){this._layoutInstance.detach(item);item._oldBefore=getPreviousItem(item);var placeholder=item._dropPlaceholder=new MasonryItem();placeholder.setAttribute('_placeholder','');var contentDiv=document.createElement('div');contentDiv.style.width="".concat(item.clientWidth,"px");contentDiv.style.height="".concat(item.clientHeight,"px");placeholder.appendChild(contentDiv);placeholder.classList.add('_coral-Masonry-item--placeholder');this.insertBefore(placeholder,item)}}},{key:"_onItemDragMove",value:function _onItemDragMove(e){var item=e.target;var placeholder=item._dropPlaceholder;if(item===e.matchedTarget&&placeholder){var prevPos=item._prevDragPos;var pos=relativePosition(this,item);if(!prevPos||!this._isApproachingPlaceholder(pos,prevPos,placeholder)){var itemBelow=this._layoutInstance.itemAt(pos.left,pos.top);if(itemBelow&&itemBelow!==placeholder){if(placeholder.compareDocumentPosition(itemBelow)&document.DOCUMENT_POSITION_PRECEDING){itemBelow.parentNode.insertBefore(placeholder,itemBelow)}else{itemBelow.parentNode.insertBefore(placeholder,itemBelow.nextSibling)}}}item._prevDragPos=pos}}},{key:"_onItemDragEnd",value:function _onItemDragEnd(e){var item=e.target;var placeholder=item._dropPlaceholder;if(item===e.matchedTarget&&placeholder){item._dropping=true;this.replaceChild(item,placeholder);item._dropping=false;item.trigger('coral-masonry:order',{item:item,oldBefore:item._oldBefore,before:getPreviousItem(item)},true,false);this._layoutInstance.reattach(item);item.classList.add('is-dropping');commons.transitionEnd(item,function(){item.classList.remove('is-dropping')});this._updateAriaRoleForItems(this.ariaGrid)}item._oldBefore=null;item._dropPlaceholder=null;item._prevDragPos=null}},{key:"render",value:function render(){var _this7=this;_get(_getPrototypeOf(Masonry.prototype),"render",this).call(this);this.classList.add(CLASSNAME$X);if(this._ariaGrid===ariaGrid.OFF){this.setAttribute('role',this._defaultAriaRole)}if(!this._layout){this.layout=layouts.FIXED_CENTERED}if(!this._selectionMode){this.selectionMode=selectionMode$2.NONE}this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItems;commons.addResizeListener(this,this._onResize.bind(this));this.items.getAll().forEach(function(item){_this7._prepareItem(item)});this._attaching=true;window.requestAnimationFrame(function(){_this7._attaching=false;_this7._updateLoaded()})}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-masonry-item',itemSelector:':scope > coral-masonry-item:not([_removing]):not([_placeholder])',onItemAdded:this._validateSelection,onItemRemoved:this._validateSelection})}return this._items}},{key:"selectionMode",get:function get(){return this._selectionMode||selectionMode$2.NONE},set:function set(value){value=transform.string(value).toLowerCase();this._selectionMode=validate.enumeration(selectionMode$2)(value)&&value||selectionMode$2.NONE;this._reflectAttribute('selectionmode',this._selectionMode);if(this._selectionMode===selectionMode$2.NONE){this.classList.remove('is-selectable');this.removeAttribute('aria-multiselectable')}else{this.classList.add('is-selectable');this.setAttribute('aria-multiselectable',this._selectionMode===selectionMode$2.MULTIPLE)}this._validateSelection()}},{key:"layoutInstance",get:function get(){return this._layoutInstance}},{key:"layout",get:function get(){return this._layout||layouts.FIXED_CENTERED},set:function set(value){value=transform.string(value);var layoutEnum=this.constructor._layouts;if(value===''){value=Object.keys(layoutEnum)[0]}if(value!==this._layout){if(layoutEnum[value]){this._layout=value;this._reflectAttribute('layout',this._layout);this._scheduleLayout('new layout')}else{commons._log('Coral.Masonry: Unknown layout:',value)}}}},{key:"selectedItem",get:function get(){return this.items._getFirstSelected()}},{key:"selectedItems",get:function get(){return this.items._getAllSelected()}},{key:"spacing",get:function get(){return this._spacing||null},set:function set(value){value=transform.number(value);this._spacing=value!==null?Math.max(0,value):null;this._scheduleLayout('spacing')}},{key:"orderable",get:function get(){return this._orderable||false},set:function set(value){this._orderable=transform.booleanAttr(value);var items=this.items.getAll();for(var i=0;i<items.length;i+=1){items[i][this._orderable?'setAttribute':'removeAttribute']('_orderable','')}}},{key:"ariaGrid",get:function get(){return this._ariaGrid||ariaGrid.OFF},set:function set(value){value=transform.string(value);if(value!==ariaGrid.ON&&value!==ariaGrid.OFF){console.warn('Coral.Masonry: Unsupported ariaGrid value: ',value,'. Will fallback to ',ariaGrid.OFF);value=ariaGrid.OFF}this._ariaGrid=value;this._reflectAttribute('ariagrid',this._ariaGrid);if(this._ariaGrid===ariaGrid.ON){this._preservedAriaRole=this.getAttribute('role');this.setAttribute('role','row')}else if(this._ariaGrid==ariaGrid.OFF){if(this._preservedAriaRole){this.setAttribute('role',this._preservedAriaRole)}else{this.removeAttribute('role')}}this._updateAriaRoleForParent(this._ariaGrid);this._updateAriaColumnCountForParent(this._ariaGrid);this._updateAriaRoleForItems(this._ariaGrid)}},{key:"ariaLabel",get:function get(){return this.getAttribute('aria-label')},set:function set(value){value=transform.string(value);if(value===''){this.removeAttribute('aria-label')}else{this._reflectAttribute('aria-label',value)}if(!this.parentElement||this._ariaGrid===ariaGrid.OFF){return}if(this.ariaLabel){this.parentElement.setAttribute('aria-label',this.ariaLabel)}else{this.parentElement.removeAttribute('aria-label')}}},{key:"ariaLabelledby",get:function get(){return this.getAttribute('aria-labelledby')},set:function set(value){value=transform.string(value);if(value===''){this.removeAttribute('aria-labelledby')}else{this._reflectAttribute('aria-labelledby',value)}if(!this.parentElement||this._ariaGrid===ariaGrid.OFF){return}if(this.ariaLabelledby){this.parentElement.setAttribute('aria-labelledby',this.ariaLabelledby)}else{this.parentElement.removeAttribute('aria-labelledby')}}}],[{key:"registerLayout",value:function registerLayout(name,Layout){Layout.defineName(name);this._layouts[name]=Layout}},{key:"_layouts",get:function get(){if(!this.__layouts){this.__layouts={}}return this.__layouts}},{key:"layouts",get:function get(){return layouts}},{key:"selectionMode",get:function get(){return selectionMode$2}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Masonry),"_attributePropertyMap",this),{selectionmode:'selectionMode',ariagrid:'ariaGrid','aria-label':'ariaLabel','aria-labelledby':'ariaLabelledby'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Masonry),"observedAttributes",this).concat(['selectionmode','layout','spacing','orderable','ariagrid','aria-label','aria-labelledby'])}}]);return Masonry}(BaseComponent(HTMLElement));var MasonryLayout=function(){function MasonryLayout(masonry){_classCallCheck(this,MasonryLayout);this._masonry=masonry}_createClass(MasonryLayout,[{key:"layout",value:function layout(){}},{key:"destroy",value:function destroy(){}},{key:"detach",value:function detach(item){}},{key:"reattach",value:function reattach(item){}},{key:"itemAt",value:function itemAt(x,y){}},{key:"name",get:function get(){return this._name||this.constructor._name},set:function set(value){this._name=value}}],[{key:"defineName",value:function defineName(name){this._name=name}}]);return MasonryLayout}();var setTransform=function setTransform(el,value){el.style.setProperty('-webkit-transform',value);el.style.setProperty('-ms-transform',value);el.style.transform=value};var setTransition=function setTransition(el,value){el.style.setProperty('-webkit-transition',value);el.style.setProperty('-ms-transition',value);el.style.transition=value};var getFirstRowFilledColumns=function getFirstRowFilledColumns(columns,items){var filledColumns=0;for(var i=0;i<items.length;i+=1){var item=items[i];filledColumns+=item._layoutData.colspan;if(filledColumns>=columns.length){return columns.length}}return filledColumns};var csspx=function csspx(el,property){return parseFloat(window.getComputedStyle(el)[property],10)};var getPositiveNumberProperty=function getPositiveNumberProperty(element,property,attribute,defaultValue){var value=element[property];if(value===undefined){value=element.getAttribute(attribute)}value=parseInt(value,10);if(value<=0||isNaN(value)){value=defaultValue}return value};var MasonryColumnLayout=function(_MasonryLayout){_inherits(MasonryColumnLayout,_MasonryLayout);var _super=_createSuper(MasonryColumnLayout);function MasonryColumnLayout(masonry){var _this;_classCallCheck(this,MasonryColumnLayout);_this=_super.call(this,masonry);_this._columns=[];var up=_this._moveFocusVertically.bind(_assertThisInitialized(_this),true);var down=_this._moveFocusVertically.bind(_assertThisInitialized(_this),false);var left=_this._moveFocusHorizontally.bind(_assertThisInitialized(_this),true);var right=_this._moveFocusHorizontally.bind(_assertThisInitialized(_this),false);var home=_this._moveFocusHomeEnd.bind(_assertThisInitialized(_this),true);var end=_this._moveFocusHomeEnd.bind(_assertThisInitialized(_this),false);var keys=_this._keys=new Keys(masonry,{context:_assertThisInitialized(_this)});keys.on('up',up).on('k',up);keys.on('down',down).on('j',down);keys.on('left',left).on('h',left);keys.on('right',right).on('l',right);keys.on('home',home);keys.on('end',end);return _this}_createClass(MasonryColumnLayout,[{key:"_resetItem",value:function _resetItem(item){}},{key:"_init",value:function _init(items){var firstItem=items[0];var masonry=this._masonry;this._columnWidth=getPositiveNumberProperty(masonry,'columnWidth','columnwidth',200);this._zeroOffsetLeft= -csspx(firstItem,'marginLeft');this._masonryInnerWidth=masonry.clientWidth;var spacing=this._masonry.spacing;if(typeof spacing==='number'){this._horSpacing=spacing;this._verSpacing=spacing;this._offsetLeft=spacing+this._zeroOffsetLeft;this._offsetTop=spacing-csspx(firstItem,'marginTop');this._verPadding=2*spacing;this._masonryAvailableWidth=masonry.clientWidth-spacing}else{this._horSpacing=csspx(firstItem,'marginLeft')+csspx(firstItem,'marginRight');this._verSpacing=csspx(firstItem,'marginTop')+csspx(firstItem,'marginBottom');this._offsetLeft=csspx(masonry,'paddingLeft');this._offsetTop=csspx(masonry,'paddingTop');this._verPadding=this._offsetTop+this._verSpacing+csspx(masonry,'paddingBottom');this._masonryAvailableWidth=masonry.clientWidth-this._offsetLeft-csspx(masonry,'paddingRight')}var columnCount=Math.max(1,Math.floor(this._masonryAvailableWidth/(this._columnWidth+this._horSpacing)));this._columns.length=columnCount;for(var ci=0;ci<columnCount;ci+=1){this._columns[ci]={height:this._offsetTop,items:[]}}for(var ii=0;ii<items.length;ii+=1){var item=items[ii];var layoutData=item._layoutData;if(!layoutData){item._layoutData=layoutData={}}layoutData.colspan=Math.min(getPositiveNumberProperty(item,'colspan','colspan',1),this._columns.length)}}},{key:"_writeStyles",value:function _writeStyles(items){for(var i=0;i<items.length;i+=1){var item=items[i];var layoutData=item._layoutData;var itemWidth=Math.round(this._getItemWidth(layoutData.colspan));if(layoutData.width!==itemWidth){item.style.width="".concat(itemWidth,"px");layoutData.width=itemWidth}this._writeItemStyle(item)}}},{key:"_getItemWidth",value:function _getItemWidth(colspan){}},{key:"_writeItemStyle",value:function _writeItemStyle(item){}},{key:"_readStyles",value:function _readStyles(items){for(var i=0;i<items.length;i+=1){var item=items[i];var layoutData=item._layoutData;layoutData.height=Math.round(item.getBoundingClientRect().height);layoutData.ignored=layoutData.detached||!item.offsetParent}}},{key:"_positionItems",value:function _positionItems(items){var j;for(var i=0;i<items.length;i+=1){var item=items[i];var layoutData=item._layoutData;if(layoutData.ignored){continue}var maxLength=this._columns.length-(layoutData.colspan-1);var minColumnIndex=-1;var minColumnHeight=void 0;for(j=0;j<maxLength;j+=1){var columnHeight=this._offsetTop;for(var y=0;y<layoutData.colspan;y+=1){columnHeight=Math.max(columnHeight,this._columns[j+y].height)}if(minColumnIndex===-1||columnHeight<minColumnHeight){minColumnIndex=j;minColumnHeight=columnHeight}}var top=minColumnHeight;var left=Math.round(this._getItemLeft(minColumnIndex));if(layoutData.left!==left||layoutData.top!==top){layoutData.columnIndex=minColumnIndex;layoutData.itemIndex=this._columns[minColumnIndex].items.length;layoutData.left=left;layoutData.top=top;setTransform(item,"translate(".concat(left,"px, ").concat(top,"px)"))}var newColumnHeight=top+layoutData.height+this._verSpacing;for(j=0;j<layoutData.colspan;j+=1){var column=this._columns[minColumnIndex+j];column.height=newColumnHeight;column.items.push(item)}}}},{key:"_getItemLeft",value:function _getItemLeft(columnIndex){}},{key:"_getContentHeight",value:function _getContentHeight(){return this._columns.reduce(function(height,column){return Math.max(height,column.height)},0)-this._offsetTop}},{key:"_postLayout",value:function _postLayout(contentHeight){}},{key:"_moveFocusVertically",value:function _moveFocusVertically(up,event){var currentLayoutData=event.target._layoutData;if(!currentLayoutData){return}var nextItemIndex=currentLayoutData.itemIndex+(up?-1:1);var nextItem=this._columns[currentLayoutData.columnIndex].items[nextItemIndex];if(nextItem){nextItem.focus();event.preventDefault()}else{var columnIndex=currentLayoutData.columnIndex;if(up){if(columnIndex>0){var prevColumn=this._columns[columnIndex-1];if(prevColumn){nextItem=prevColumn.items[prevColumn.items.length-1];}}}else{var columnCount=this._columns.length;var nextColumnIndex=columnIndex+currentLayoutData.colspan;if(nextColumnIndex<columnCount){nextItem=this._columns[nextColumnIndex].items[0];}}if(nextItem){nextItem.focus();event.preventDefault();}}}},{key:"_moveFocusHorizontally",value:function _moveFocusHorizontally(left,event){var currentLayoutData=event.target._layoutData;if(!currentLayoutData){return}var nextItem;var items=this._masonry.items.getAll();var collectionItemIndex=items.indexOf(event.target);if(left){if(collectionItemIndex>0){nextItem=items[collectionItemIndex-1]}}else if(collectionItemIndex<items.length-1){nextItem=items[collectionItemIndex+1]}if(nextItem){nextItem.focus();event.preventDefault();}}},{key:"_moveFocusHomeEnd",value:function _moveFocusHomeEnd(home,event){var currentLayoutData=event.target._layoutData;if(!currentLayoutData){return}var nextItem;var columns=this._columns;if(home){nextItem=columns[0]&&columns[0].items[0]}else{for(var i=columns.length-1;i>-1;i-=1){if(columns[i].items.length>0){nextItem=columns[i].items[columns[i].items.length-1];break}}}if(nextItem){nextItem.focus();event.preventDefault()}}},{key:"layout",value:function layout(secondTry){var masonry=this._masonry;var items=masonry.items.getAll();if(items.length>0){this._init(items);this._writeStyles(items);this._readStyles(items);this._positionItems(items)}else{this._columns.length=0}var contentHeight=this._getContentHeight();masonry.style.height="".concat(contentHeight-this._verSpacing+this._verPadding,"px");if(!secondTry&&this._masonryInnerWidth!==masonry.clientWidth){this.layout(true)}else{this._postLayout(contentHeight)}}},{key:"destroy",value:function destroy(){this._keys.destroy();var items=this._masonry.items.getAll();for(var i=0;i<items.length;i+=1){var item=items[i];item._layoutData=undefined;setTransform(item,'');this._resetItem(item)}}},{key:"detach",value:function detach(item){item._layoutData.detached=true}},{key:"reattach",value:function reattach(item){var layoutData=item._layoutData;layoutData.detached=false;var rect=item.getBoundingClientRect();setTransition(item,'none');item.style.left='';item.style.top='';setTransform(item,'');var nullRect=item.getBoundingClientRect();layoutData.left=rect.left-nullRect.left;layoutData.top=rect.top-nullRect.top;setTransform(item,"translate(".concat(layoutData.left,"px, ").concat(layoutData.top,"px)"));item.getBoundingClientRect();setTransition(item,'')}},{key:"itemAt",value:function itemAt(x,y){var items=this._masonry.items.getAll();for(var i=0;i<items.length;i+=1){var item=items[i];var layoutData=item._layoutData;if(layoutData&&!layoutData.ignored&&layoutData.left<=x&&layoutData.left+layoutData.width>=x&&layoutData.top<=y&&layoutData.top+layoutData.height>=y){return item}}return null}}]);return MasonryColumnLayout}(MasonryLayout);var MasonryFixedCenteredLayout=function(_MasonryColumnLayout){_inherits(MasonryFixedCenteredLayout,_MasonryColumnLayout);var _super=_createSuper(MasonryFixedCenteredLayout);function MasonryFixedCenteredLayout(){_classCallCheck(this,MasonryFixedCenteredLayout);return _super.apply(this,arguments)}_createClass(MasonryFixedCenteredLayout,[{key:"_writeStyles",value:function _writeStyles(items){this._outerColumnWidth=this._columnWidth+this._horSpacing;var filledColumns=getFirstRowFilledColumns(this._columns,items);this._offsetLeft+=(this._masonryAvailableWidth-filledColumns*this._outerColumnWidth)/2;_get(_getPrototypeOf(MasonryFixedCenteredLayout.prototype),"_writeStyles",this).call(this,items)}},{key:"_getItemWidth",value:function _getItemWidth(colspan){return this._columnWidth*colspan+this._horSpacing*(colspan-1)}},{key:"_getItemLeft",value:function _getItemLeft(columnIndex){return this._offsetLeft+this._outerColumnWidth*columnIndex}}]);return MasonryFixedCenteredLayout}(MasonryColumnLayout);var MasonryFixedSpreadLayout=function(_MasonryColumnLayout){_inherits(MasonryFixedSpreadLayout,_MasonryColumnLayout);var _super=_createSuper(MasonryFixedSpreadLayout);function MasonryFixedSpreadLayout(){_classCallCheck(this,MasonryFixedSpreadLayout);return _super.apply(this,arguments)}_createClass(MasonryFixedSpreadLayout,[{key:"_writeStyles",value:function _writeStyles(items){var columns=this._columns;this._alignLeft=getFirstRowFilledColumns(columns,items)<columns.length;if(!this._alignLeft){var remainingWidth=this._masonryInnerWidth-this._columnWidth*columns.length;this._horSpacing=remainingWidth/(columns.length+1)}_get(_getPrototypeOf(MasonryFixedSpreadLayout.prototype),"_writeStyles",this).call(this,items)}},{key:"_getItemWidth",value:function _getItemWidth(colspan){return this._columnWidth*colspan+this._horSpacing*(colspan-1)}},{key:"_getItemLeft",value:function _getItemLeft(columnIndex){return this._zeroOffsetLeft+this._columnWidth*columnIndex+this._horSpacing*(columnIndex+1)}}]);return MasonryFixedSpreadLayout}(MasonryColumnLayout);var MasonryVariableLayout=function(_MasonryColumnLayout){_inherits(MasonryVariableLayout,_MasonryColumnLayout);var _super=_createSuper(MasonryVariableLayout);function MasonryVariableLayout(){_classCallCheck(this,MasonryVariableLayout);return _super.apply(this,arguments)}_createClass(MasonryVariableLayout,[{key:"_getItemWidth",value:function _getItemWidth(colspan){return this._masonryAvailableWidth/this._columns.length*colspan-this._horSpacing}},{key:"_getItemLeft",value:function _getItemLeft(columnIndex){return this._offsetLeft+this._masonryAvailableWidth*columnIndex/this._columns.length}}]);return MasonryVariableLayout}(MasonryColumnLayout);var MasonryDashboardLayout=function(_MasonryVariableLayou){_inherits(MasonryDashboardLayout,_MasonryVariableLayou);var _super=_createSuper(MasonryDashboardLayout);function MasonryDashboardLayout(){_classCallCheck(this,MasonryDashboardLayout);return _super.apply(this,arguments)}_createClass(MasonryDashboardLayout,[{key:"_writeItemStyle",value:function _writeItemStyle(item){this._resetItem(item)}},{key:"_postLayout",value:function _postLayout(contentHeight){for(var columnIndex=0;columnIndex<this._columns.length;columnIndex+=1){var column=this._columns[columnIndex];var nextItemTop=contentHeight+this._offsetTop;for(var itemIndex=column.items.length-1;itemIndex>=0;itemIndex-=1){var item=column.items[itemIndex];var layoutData=item._layoutData;if(layoutData.columnIndex===columnIndex){var expandedHeight=nextItemTop-layoutData.top-this._verSpacing;item.style.height="".concat(expandedHeight,"px")}nextItemTop=layoutData.top}}}},{key:"_resetItem",value:function _resetItem(item){item.style.height=''}}]);return MasonryDashboardLayout}(MasonryVariableLayout);Masonry.registerLayout(Masonry.layouts.FIXED_CENTERED,MasonryFixedCenteredLayout);Masonry.registerLayout(Masonry.layouts.FIXED_SPREAD,MasonryFixedSpreadLayout);Masonry.registerLayout(Masonry.layouts.VARIABLE,MasonryVariableLayout);Masonry.registerLayout(Masonry.layouts.DASHBOARD,MasonryDashboardLayout);commons._define('coral-masonry-item',MasonryItem);commons._define('coral-masonry',Masonry);Masonry.Item=MasonryItem;Masonry.Layout=MasonryLayout;var MultifieldCollection=function(_Collection){_inherits(MultifieldCollection,_Collection);var _super=_createSuper(MultifieldCollection);function MultifieldCollection(){_classCallCheck(this,MultifieldCollection);return _super.apply(this,arguments)}_createClass(MultifieldCollection,[{key:"add",value:function add(item,insertBefore){if(this._container&&this._itemTagName){if(!(item instanceof HTMLElement)){item=document.createElement(this._itemTagName).set(item)}if(!insertBefore){insertBefore=this.last();if(insertBefore){insertBefore=insertBefore.nextElementSibling}}this._container.insertBefore(item,insertBefore||this._container.firstChild);return item}}}]);return MultifieldCollection}(Collection$1);var CLASSNAME$Y='_coral-Multifield';var IS_DRAGGING_CLASS$1='is-dragging';var IS_AFTER_CLASS='is-after';var IS_BEFORE_CLASS='is-before';var TEMPLATE_SUPPORT=('content'in document.createElement('template'));var Multifield=function(_BaseComponent){_inherits(Multifield,_BaseComponent);var _super=_createSuper(Multifield);function Multifield(){var _this;_classCallCheck(this,Multifield);_this=_super.call(this);_this._delegateEvents({'coral-dragaction:dragstart coral-multifield-item':'_onDragStart','coral-dragaction:drag coral-multifield-item':'_onDrag','coral-dragaction:dragend coral-multifield-item':'_onDragEnd','click [coral-multifield-add]':'_onAddItemClick','click ._coral-Multifield-remove':'_onRemoveItemClick','change coral-multifield-item-content > input':'_onInputChange'});_this.setAttribute('id',_this.id||commons.getUID());_this._elements={template:_this.querySelector("#".concat(_this.id," > template[coral-multifield-template]"))||document.createElement('template')};_this._elements.template.setAttribute('coral-multifield-template','');_this._handleTemplateSupport(_this._elements.template);_this._observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){for(var i=0;i<mutation.addedNodes.length;i+=1){var addedNode=mutation.addedNodes[i];var template=_this.template;if(template.contains(addedNode)&&template!==addedNode){template.content.appendChild(addedNode);_this.items.getAll().forEach(function(item){_this._renderTemplate(item)})}}})});_this._observer.observe(_assertThisInitialized(_this),{childList:true,subtree:true});_this.items._startHandlingItems(true);return _this}_createClass(Multifield,[{key:"_handleTemplateSupport",value:function _handleTemplateSupport(template){if(!TEMPLATE_SUPPORT&&!template.content){var frag=document.createDocumentFragment();while(template.firstChild){frag.appendChild(template.firstChild)}template.content=frag}}},{key:"_onAddItemClick",value:function _onAddItemClick(event){var _this2=this;if(event.matchedTarget.closest('coral-multifield')===this){this.items.add(document.createElement('coral-multifield-item'));window.requestAnimationFrame(function(){_this2.trigger('change');_this2._trackEvent('click','add item button',event)})}}},{key:"_onRemoveItemClick",value:function _onRemoveItemClick(event){if(event.matchedTarget.closest('coral-multifield')===this){var item=event.matchedTarget.closest('coral-multifield-item');if(item){item.remove()}this.trigger('change');this._trackEvent('click','remove item button',event)}}},{key:"_onInputChange",value:function _onInputChange(event){this._trackEvent('change','input',event)}},{key:"_onDragStart",value:function _onDragStart(event){if(event.target.closest('coral-multifield')===this){document.body.classList.add('u-coral-closedHand');var dragElement=event.detail.dragElement;var items=this.items.getAll();var dragElementIndex=items.indexOf(dragElement);dragElement.classList.add(IS_DRAGGING_CLASS$1);items.forEach(function(item,i){if(i<dragElementIndex){item.classList.add(IS_BEFORE_CLASS)}else if(i>dragElementIndex){item.classList.add(IS_AFTER_CLASS)}})}}},{key:"_onDrag",value:function _onDrag(event){if(event.target.closest('coral-multifield')===this){var items=this.items.getAll();var marginBottom=0;if(items.length){marginBottom=parseFloat(window.getComputedStyle(items[0]).marginBottom)}items.forEach(function(item){if(!item.classList.contains(IS_DRAGGING_CLASS$1)){var dragElement=event.detail.dragElement;var dragElementBoundingClientRect=dragElement.getBoundingClientRect();var itemBoundingClientRect=item.getBoundingClientRect();var dragElementOffsetTop=dragElementBoundingClientRect.top;var itemOffsetTop=itemBoundingClientRect.top;var isAfter=dragElementOffsetTop<itemOffsetTop;var itemReorderedTop="".concat(dragElementBoundingClientRect.height+marginBottom,"px");item.classList.toggle(IS_AFTER_CLASS,isAfter);item.classList.toggle(IS_BEFORE_CLASS,!isAfter);if(item.classList.contains(IS_AFTER_CLASS)){item.style.top=items.indexOf(item)<items.indexOf(dragElement)?itemReorderedTop:''}if(item.classList.contains(IS_BEFORE_CLASS)){var afterDragElement=items.indexOf(item)>items.indexOf(dragElement);item.style.top=afterDragElement?"-".concat(itemReorderedTop):''}}})}}},{key:"_onDragEnd",value:function _onDragEnd(event){if(event.target.closest('coral-multifield')===this){document.body.classList.remove('u-coral-closedHand');var dragElement=event.detail.dragElement;var items=this.items.getAll();var beforeArr=[];var afterArr=[];items.forEach(function(item){if(item.classList.contains(IS_AFTER_CLASS)){afterArr.push(item)}else if(item.classList.contains(IS_BEFORE_CLASS)){beforeArr.push(item)}item.classList.remove(IS_DRAGGING_CLASS$1,IS_AFTER_CLASS,IS_BEFORE_CLASS);item.style.top='';item.style.position=''});var oldBefore=dragElement.previousElementSibling;var before=afterArr.shift();var after=beforeArr.pop();var beforeEvent=this.trigger('coral-multifield:beforeitemorder',{item:dragElement,oldBefore:oldBefore,before:before});if(!beforeEvent.defaultPrevented){if(before){this.insertBefore(dragElement,before)}if(after){this.insertBefore(dragElement,after.nextElementSibling)}this.trigger('coral-multifield:itemorder',{item:dragElement,oldBefore:oldBefore,before:before});this.trigger('change')}}}},{key:"_onItemAdded",value:function _onItemAdded(item){if(item.parentNode===this){this._renderTemplate(item)}}},{key:"_renderTemplate",value:function _renderTemplate(item){var content=item.content||item.querySelector('coral-multifield-item-content')||item;if(!content.firstChild){if(!TEMPLATE_SUPPORT){var nestedTemplates=this.template.content.querySelectorAll('template[coral-multifield-template]');Array.prototype.forEach.call(nestedTemplates,function(template){while(template.content.firstChild){template.appendChild(template.content.firstChild)}})}content.appendChild(document.importNode(this.template.content,true))}}},{key:"render",value:function render(){var _this3=this;_get(_getPrototypeOf(Multifield.prototype),"render",this).call(this);this.classList.add(CLASSNAME$Y,'coral-Well');this.setAttribute('role','list');this.template=this._elements.template;this.items.getAll().forEach(function(item){_this3._renderTemplate(item)})}},{key:"items",get:function get(){if(!this._items){this._items=new MultifieldCollection({host:this,itemTagName:'coral-multifield-item',itemSelector:':scope > coral-multifield-item',onItemAdded:this._onItemAdded})}return this._items}},{key:"template",get:function get(){return this._getContentZone(this._elements.template)},set:function set(value){this._setContentZone('template',value,{handle:'template',tagName:'template',insert:function insert(template){this.appendChild(template)},set:function set(content){this._handleTemplateSupport(content)}})}},{key:"_contentZones",get:function get(){return{template:'template'}}}]);return Multifield}(BaseComponent(HTMLElement));var template$E=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["remove"]=document.createElement("button","coral-button");el0.setAttribute("tracking","off");el0.setAttribute("type","button");el0.setAttribute("is","coral-button");el0.setAttribute("handle","remove");el0.setAttribute("variant","quietaction");el0.setAttribute("icon","delete");el0.setAttribute("iconsize","S");el0.setAttribute("iconautoarialabel","on");el0.className+=" _coral-Multifield-remove";el0.setAttribute("coral-multifield-remove","");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["move"]=document.createElement("button","coral-button");el2.setAttribute("tracking","off");el2.setAttribute("type","button");el2.setAttribute("is","coral-button");el2.setAttribute("handle","move");el2.setAttribute("variant","quietaction");el2.setAttribute("icon","moveUpDown");el2.setAttribute("iconsize","S");el2.setAttribute("iconautoarialabel","on");el2.className+=" _coral-Multifield-move u-coral-openHand";el2.setAttribute("coral-multifield-move","");frag.appendChild(el2);var el3=document.createTextNode("\n");frag.appendChild(el3);return frag};var CLASSNAME$Z='_coral-Multifield-item';var MultifieldItem=function(_BaseComponent){_inherits(MultifieldItem,_BaseComponent);var _super=_createSuper(MultifieldItem);function MultifieldItem(){var _this;_classCallCheck(this,MultifieldItem);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-multifield-item-content')||document.createElement('coral-multifield-item-content')};template$E.call(_this._elements);return _this}_createClass(MultifieldItem,[{key:"render",value:function render(){_get(_getPrototypeOf(MultifieldItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$Z);this.setAttribute('role','listitem');var fragment=document.createDocumentFragment();var templateHandleNames=['move','remove'];fragment.appendChild(this._elements.move);fragment.appendChild(this._elements.remove);var content=this._elements.content;if(content.parentNode){this.removeChild(content)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){content.appendChild(child)}else{this.removeChild(child)}}this.appendChild(fragment);this.content=content;var dragAction=new DragAction(this);dragAction.axis='vertical';dragAction.handle=this._elements.move}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-multifield-item-content',insert:function insert(content){this.insertBefore(content,this.firstChild)}})}},{key:"_contentZones",get:function get(){return{'coral-multifield-item-content':'content'}}}]);return MultifieldItem}(BaseComponent(HTMLElement));var MultifieldItemContent=(function(){return document.createElement('coral-multifield-item-content')});commons._define('coral-multifield-item',MultifieldItem);commons._define('coral-multifield',Multifield);Multifield.Item=MultifieldItem;Multifield.Item.Content=MultifieldItemContent;var CLASSNAME$_='_coral-PanelStack';var PanelStack=function(_BaseComponent){_inherits(PanelStack,_BaseComponent);var _super=_createSuper(PanelStack);function PanelStack(){var _this;_classCallCheck(this,PanelStack);_this=_super.call(this);_this._delegateEvents({'coral-panel:_selectedchanged':'_onItemSelectedChanged'});_this._oldSelection=null;_this.items._startHandlingItems(true);return _this}_createClass(PanelStack,[{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_validateSelection",value:function _validateSelection(item){var _this2=this;var selectedItems=this.items._getAllSelected();item=item||selectedItems[selectedItems.length-1];if(item&&item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){this.trigger('coral-panelstack:change',{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"render",value:function render(){_get(_getPrototypeOf(PanelStack.prototype),"render",this).call(this);this.classList.add(CLASSNAME$_);this.setAttribute('role','presentation');this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-panel',itemSelector:':scope > coral-panel',onItemAdded:this._validateSelection,onItemRemoved:this._validateSelection})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getLastSelected()}}]);return PanelStack}(BaseComponent(HTMLElement));var CLASSNAME$$='_coral-Panel';var Panel=function(_BaseComponent){_inherits(Panel,_BaseComponent);var _super=_createSuper(Panel);function Panel(){var _this;_classCallCheck(this,Panel);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-panel-content')||document.createElement('coral-panel-content')};return _this}_createClass(Panel,[{key:"render",value:function render(){_get(_getPrototypeOf(Panel.prototype),"render",this).call(this);this.classList.add(CLASSNAME$$);if(!this.hasAttribute('role')){this.setAttribute('role','region')}var content=this._elements.content;if(!content.parentNode){while(this.firstChild){content.appendChild(this.firstChild)}}this.content=content}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-panel-content',insert:function insert(content){this.appendChild(content)}})}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.classList.toggle('is-selected',this._selected);this.setAttribute('aria-hidden',!this.selected);this.trigger('coral-panel:_selectedchanged')}},{key:"_contentZones",get:function get(){return{'coral-panel-content':'content'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Panel),"observedAttributes",this).concat(['selected'])}}]);return Panel}(BaseComponent(HTMLElement));var PanelContent=(function(){return document.createElement('coral-panel-content')});commons._define('coral-panelstack',PanelStack);commons._define('coral-panel',Panel);Panel.Content=PanelContent;var template$F=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["percentage"]=document.createElement("div");el0.className+=" _coral-BarLoader-percentage";el0.setAttribute("handle","percentage");el0.setAttribute("aria-hidden","true");el0.setAttribute("style","visibility: hidden");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["bar"]=document.createElement("div");el2.setAttribute("handle","bar");el2.className+=" _coral-BarLoader-track";var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=this["status"]=document.createElement("div");el4.className+=" _coral-BarLoader-fill";el4.setAttribute("handle","status");el2.appendChild(el4);var el5=document.createTextNode("\n");el2.appendChild(el5);frag.appendChild(el2);var el6=document.createTextNode("\n");frag.appendChild(el6);return frag};var size$6={SMALL:'S',MEDIUM:'M',LARGE:'L'};var labelPosition={LEFT:'left',RIGHT:'right',SIDE:'side',BOTTOM:'bottom'};var CLASSNAME$10='_coral-BarLoader';var Progress=function(_BaseComponent){_inherits(Progress,_BaseComponent);var _super=_createSuper(Progress);function Progress(){var _this;_classCallCheck(this,Progress);_this=_super.call(this);_this._elements={label:_this.querySelector('coral-progress-label')||document.createElement('coral-progress-label')};template$F.call(_this._elements);_this._observer=new MutationObserver(_this._toggleLabelVisibility.bind(_assertThisInitialized(_this)));_this._observer.observe(_this._elements.label,{characterData:true,childList:true,subtree:true});return _this}_createClass(Progress,[{key:"_toggleLabelVisibility",value:function _toggleLabelVisibility(){var percentage=this._elements.percentage;var label=this._elements.label;var isSidePositioned=this.labelPosition===labelPosition.SIDE;if(this.showPercent){percentage.style.visibility='visible';percentage.setAttribute('aria-hidden','false');if(isSidePositioned){percentage.hidden=false}}else{percentage.style.visibility='hidden';percentage.setAttribute('aria-hidden','true');if(isSidePositioned){percentage.hidden=true}}if(label.textContent.length>0){label.style.visibility='visible';label.setAttribute('aria-hidden','false');if(isSidePositioned){label.hidden=false}if(!this.showPercent){this.setAttribute('aria-valuetext',label.textContent)}}else{label.style.visibility='hidden';label.setAttribute('aria-hidden','true');if(isSidePositioned){label.hidden=true}this.removeAttribute('aria-valuetext')}}},{key:"_setPercentage",value:function _setPercentage(content){this._elements.percentage.textContent=content;this[this.showPercent?'removeAttribute':'setAttribute']('aria-valuetext',content)}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='indeterminate'&&transform.booleanAttr(value)){this._oldValue=this._value||0}_get(_getPrototypeOf(Progress.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}},{key:"render",value:function render(){_get(_getPrototypeOf(Progress.prototype),"render",this).call(this);this.classList.add(CLASSNAME$10);if(!this._value){this.value=this.value}if(!this._size){this.size=size$6.MEDIUM}if(!this._labelPosition){this.labelPosition=labelPosition.LEFT}var fragment=document.createDocumentFragment();var templateHandleNames=['bar','percentage'];fragment.appendChild(this._elements.percentage);fragment.appendChild(this._elements.bar);var label=this._elements.label;if(label.parentNode){label.parentNode.removeChild(label)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){label.appendChild(child)}else{this.removeChild(child)}}this.appendChild(fragment);this.label=label;this._toggleLabelVisibility();this.setAttribute('role','progressbar');this.setAttribute('aria-valuenow','0');this.setAttribute('aria-valuemin','0');this.setAttribute('aria-valuemax','100')}},{key:"value",get:function get(){return this.indeterminate?0:this._value||0},set:function set(value){value=transform.number(value)||0;if(value>100){value=100}else if(value<0){value=0}this._value=value;this._reflectAttribute('value',this._value);if(!this.indeterminate){this._elements.status.style.width="".concat(this.value,"%");this.setAttribute('aria-valuenow',this._value);if(this.showPercent){this._setPercentage("".concat(this._value,"%"))}}else{this._elements.status.style.width=''}this.trigger('coral-progress:change')}},{key:"indeterminate",get:function get(){return this._indeterminate||false},set:function set(value){this._indeterminate=transform.booleanAttr(value);this._reflectAttribute('indeterminate',this._indeterminate);if(this._indeterminate){this.classList.add("".concat(CLASSNAME$10,"--indeterminate"));this.removeAttribute('aria-valuenow');this.removeAttribute('aria-valuemin');this.removeAttribute('aria-valuemax');this.value=0}else{this.classList.remove("".concat(CLASSNAME$10,"--indeterminate"));this.setAttribute('aria-valuemin','0');this.setAttribute('aria-valuemax','100');this.value=this._oldValue}}},{key:"size",get:function get(){return this._size||size$6.MEDIUM},set:function set(value){value=transform.string(value).toUpperCase();this._size=validate.enumeration(size$6)(value)&&value||size$6.MEDIUM;this._reflectAttribute('size',this._size);this.classList.toggle("".concat(CLASSNAME$10,"--small"),this._size===size$6.SMALL)}},{key:"showPercent",get:function get(){return this._showPercent||false},set:function set(value){this._showPercent=transform.booleanAttr(value);this._reflectAttribute('showpercent',this._showPercent);if(this._showPercent){var content=this.indeterminate?'':"".concat(this.value,"%");this._setPercentage(content)}this._toggleLabelVisibility()}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-progress-label',insert:function insert(label){label.classList.add("".concat(CLASSNAME$10,"-label"));this.appendChild(label)}})}},{key:"labelPosition",get:function get(){return this._labelPosition||labelPosition.LEFT},set:function set(value){var _this2=this;value=transform.string(value).toLowerCase();this._labelPosition=validate.enumeration(labelPosition)(value)&&value||labelPosition.LEFT;this._reflectAttribute('labelposition',this._labelPosition);this.classList.toggle('_coral-BarLoader--sideLabel',this._labelPosition===labelPosition.SIDE);var elements=this.labelPosition===labelPosition.SIDE?['label','bar','percentage']:['label','percentage','bar'];elements.forEach(function(el,i){_this2._elements[el].style.order=i});this._toggleLabelVisibility()}},{key:"_contentZones",get:function get(){return{'coral-progress-label':'label'}}}],[{key:"labelPosition",get:function get(){return labelPosition}},{key:"size",get:function get(){return size$6}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Progress),"_attributePropertyMap",this),{showpercent:'showPercent',labelposition:'labelPosition'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Progress),"observedAttributes",this).concat(['value','indeterminate','size','showpercent','labelposition'])}}]);return Progress}(BaseComponent(HTMLElement));var ProgressLabel=(function(){return document.createElement('coral-progress-label')});commons._define('coral-progress',Progress);Progress.Label=ProgressLabel;var type$1={BUTTON:'button',ANCHOR:'anchor'};var QuickActionsItem=function(_BaseComponent){_inherits(QuickActionsItem,_BaseComponent);var _super=_createSuper(QuickActionsItem);function QuickActionsItem(){var _this;_classCallCheck(this,QuickActionsItem);_this=_super.call(this);_this._elements={};_this._observer=new MutationObserver(_this._onMutation.bind(_assertThisInitialized(_this)));_this._observer.observe(_assertThisInitialized(_this),{characterData:true,childList:true,subtree:true});return _this}_createClass(QuickActionsItem,[{key:"_onMutation",value:function _onMutation(){this.trigger('coral-quickactions-item:_contentchanged')}},{key:"render",value:function render(){_get(_getPrototypeOf(QuickActionsItem.prototype),"render",this).call(this);if(!this._type){this.type=type$1.BUTTON}}},{key:"content",get:function get(){return this},set:function set(value){if(_typeof(value)==='object'){for(var prop in value){this[prop]=value[prop]}}}},{key:"href",get:function get(){return this._href||''},set:function set(value){this._href=transform.string(value);this._reflectAttribute('href',this._href);this.trigger('coral-quickactions-item:_hrefchanged')}},{key:"icon",get:function get(){return this._icon||''},set:function set(value){this._icon=transform.string(value);this._reflectAttribute('icon',this._icon);this.trigger('coral-quickactions-item:_iconchanged')}},{key:"type",get:function get(){return this._type||type$1.BUTTON},set:function set(value){value=transform.string(value).toLowerCase();this._type=validate.enumeration(type$1)(value)&&value||type$1.BUTTON;this._reflectAttribute('type',this._type);this.trigger('coral-quickactions-item:_typechanged')}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?this.textContent&&this.textContent.replace(/\s{2,}/g,' ').trim()||this.icon:this._trackingElement},set:function set(value){_set(_getPrototypeOf(QuickActionsItem.prototype),"trackingElement",value,this,true)}}],[{key:"type",get:function get(){return type$1}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(QuickActionsItem),"observedAttributes",this).concat(['href','icon','type'])}}]);return QuickActionsItem}(BaseComponent(HTMLElement));var template$G=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["moreButton"]=document.createElement("button","coral-button");el0.setAttribute("tracking","off");el0.className+=" _coral-QuickActions-item _coral-QuickActions-item-more";el0.setAttribute("variant","quietaction");el0.setAttribute("is","coral-button");el0.setAttribute("type","button");el0.setAttribute("icon","more");el0.setAttribute("iconsize","S");el0.setAttribute("handle","moreButton");el0.setAttribute("title",data_0["i18n"]["get"]('More actions'));el0.setAttribute("role","menuitem");el0.setAttribute("aria-haspopup","menu");el0.setAttribute("aria-expanded","false");el0.setAttribute("aria-label",data_0["i18n"]["get"]('More actions'));frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["overlay"]=document.createElement("coral-popover");el2.className+=" _coral-QuickActions-moreOverlay";el2.setAttribute("tracking","off");el2.setAttribute("smart","");el2.id=data_0["commons"]["getUID"]();el2.setAttribute("breadthoffset","50%p - 50%");el2.setAttribute("placement","bottom");el2.setAttribute("handle","overlay");el2.setAttribute("role","presentation");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=this["buttonList"]=document.createElement("coral-buttonlist");el4.setAttribute("tracking","off");el4.id=data_0["commons"]["getUID"]();el4.className+=" _coral-QuickActions-buttonList";el4.setAttribute("handle","buttonList");el4.setAttribute("role","menu");el4.setAttribute("tabindex","-1");el2.appendChild(el4);var el5=document.createTextNode("\n");el2.appendChild(el5);frag.appendChild(el2);var el6=document.createTextNode("\n");frag.appendChild(el6);return frag};var BUTTON_FOCUSABLE_SELECTOR='._coral-QuickActions-item:not([disabled]):not([hidden])';var interaction$3={ON:'on',OFF:'off'};var target$2={PARENT:'_parent',PREVIOUS:'_prev',NEXT:'_next'};var placement$2={TOP:'top',CENTER:'center',BOTTOM:'bottom'};var OFFSET$2=10;var CLASSNAME$11='_coral-QuickActions';var QuickActions=function(_Overlay){_inherits(QuickActions,_Overlay);var _super=_createSuper(QuickActions);function QuickActions(){var _this;_classCallCheck(this,QuickActions);_this=_super.call(this);_this._overlayAnimationTime=Overlay.FADETIME;_this._alignMy=Overlay.align.CENTER_TOP;_this._alignAt=Overlay.align.CENTER_TOP;_this._lengthOffset=OFFSET$2;_this._inner=true;_this._target=target$2.PREVIOUS;_this._placement=placement$2.TOP;_this._focusOnShow=Overlay.focusOnShow.OFF;_this._scrollOnFocus=Overlay.scrollOnFocus.OFF;if(!_this.id){_this.id=commons.getUID()}_this._openedBefore=false;_this._timeout=null;template$G.call(_this._elements,{commons:commons,i18n:i18n});var events={'global:resize':'_onWindowResize','mouseout':'_onMouseOut','key:home':'_onHomeKeypress','key:end':'_onEndKeypress','key:pagedown':'_onButtonKeypressNext','key:right':'_onButtonKeypressNext','key:down':'_onButtonKeypressNext','key:pageup':'_onButtonKeypressPrevious','key:left':'_onButtonKeypressPrevious','key:up':'_onButtonKeypressPrevious','capture:focus':'_onFocus','capture:blur':'_onBlur','click > ._coral-QuickActions-item:not([handle="moreButton"])':'_onButtonClick','click > ._coral-QuickActions-item[handle="moreButton"]':'_onMoreButtonClick','coral-quickactions-item:_contentchanged':'_onItemChange','coral-quickactions-item:_iconchanged':'_onItemChange','coral-quickactions-item:_hrefchanged':'_onItemChange','coral-quickactions-item:_typechanged':'_onItemTypeChange'};var overlayId=_this._elements.overlay.id;events["global:capture:coral-overlay:beforeopen #".concat(overlayId)]='_onOverlayBeforeOpen';events["global:capture:coral-overlay:beforeclose #".concat(overlayId)]='_onOverlayBeforeClose';events["global:capture:coral-overlay:open #".concat(overlayId)]='_onOverlayOpen';events['global:capture:coral-overlay:close']='_onOverlayClose';events["global:capture:coral-overlay:positioned #".concat(overlayId)]='_onOverlayPositioned';events["global:capture:coral-overlay:_animate #".concat(overlayId)]='_onAnimate';events["global:capture:mouseout #".concat(overlayId)]='_onMouseOut';events["global:capture:click #".concat(overlayId," [coral-list-item]")]='_onButtonListItemClick';_this._onTargetMouseEnter=_this._onTargetMouseEnter.bind(_assertThisInitialized(_this));_this._onTargetKeyUp=_this._onTargetKeyUp.bind(_assertThisInitialized(_this));_this._onTargetMouseLeave=_this._onTargetMouseLeave.bind(_assertThisInitialized(_this));_this._delegateEvents(events);_this.items._startHandlingItems(true);return _this}_createClass(QuickActions,[{key:"_getButtonWidth",value:function _getButtonWidth(){if(this.closest('.coral--large')){return 50}else{return 40}}},{key:"_getTarget",value:function _getTarget(targetValue){targetValue=targetValue||this.target;if(targetValue instanceof Node){return targetValue}var newTarget=null;if(typeof targetValue==='string'){if(targetValue===target$2.PARENT){newTarget=this.parentNode}else{newTarget=_get(_getPrototypeOf(QuickActions.prototype),"_getTarget",this).call(this,targetValue)}}return newTarget}},{key:"_addTargetEventListeners",value:function _addTargetEventListeners(targetElement){targetElement=targetElement||this._getTarget();if(!targetElement){return}if(this.interaction===interaction$3.ON){targetElement.addEventListener('mouseenter',this._onTargetMouseEnter);targetElement.addEventListener('keyup',this._onTargetKeyUp);targetElement.addEventListener('keydown',this._onTargetKeyDown);targetElement.addEventListener('mouseleave',this._onTargetMouseLeave)}}},{key:"_removeTargetEventListeners",value:function _removeTargetEventListeners(targetElement){targetElement=targetElement||this._getTarget();if(!targetElement){return}targetElement.removeEventListener('mouseenter',this._onTargetMouseEnter);targetElement.removeEventListener('keyup',this._onTargetKeyUp);targetElement.removeEventListener('keydown',this._onTargetKeyDown);targetElement.removeEventListener('mouseleave',this._onTargetMouseLeave)}},{key:"_toggleTabbable",value:function _toggleTabbable(item,tabbable){if(item){if(tabbable){if(item.hasAttribute('tabIndex')){item.removeAttribute('tabIndex')}}else{item.setAttribute('tabIndex','-1')}}}},{key:"_getFocusableNeighbour",value:function _getFocusableNeighbour(current,previous){var focusableButtons=Array.prototype.slice.call(this._getFocusableButtons());var index=focusableButtons.indexOf(current);if(index>=0){if(!previous){if(index<focusableButtons.length-1){return focusableButtons[index+1]}}else if(index!==0){return focusableButtons[index-1]}}}},{key:"_getButtons",value:function _getButtons(excludeMore){var buttonSelector='._coral-QuickActions-item';buttonSelector=excludeMore?"".concat(buttonSelector,":not([handle=\"moreButton\"])"):buttonSelector;return this.querySelectorAll(buttonSelector)}},{key:"_getFocusableButtons",value:function _getFocusableButtons(){return this.querySelectorAll(BUTTON_FOCUSABLE_SELECTOR)}},{key:"_getFirstFocusableButton",value:function _getFirstFocusableButton(){return this.querySelector(BUTTON_FOCUSABLE_SELECTOR)}},{key:"_getLastFocusableButton",value:function _getLastFocusableButton(){var focusableButtons=this._getFocusableButtons();return focusableButtons[focusableButtons.length-1]}},{key:"_proxyClick",value:function _proxyClick(item){var event=item.trigger('click');if(!event.defaultPrevented&&this.interaction===interaction$3.ON){this._hideAll()}}},{key:"_getItemData",value:function _getItemData(item){return{htmlContent:item.innerHTML,textContent:item.textContent,icon:item.getAttribute('icon')||''}}},{key:"_attachItem",value:function _attachItem(item,index){if(item._elements&&item._elements.button){this._updateItem(item);return}if(typeof index==='undefined'){index=Array.prototype.indexOf.call(this.items.getAll(),item)}var itemData=this._getItemData(item);var type=QuickActionsItem.type;var button;if(item.type===type.BUTTON){button=new Button().set({icon:itemData.icon,iconsize:Icon.size.SMALL,type:'button',tracking:'off'},true)}else if(item.type===type.ANCHOR){button=new AnchorButton().set({icon:itemData.icon,iconsize:Icon.size.SMALL,href:item.href,tracking:'off'},true)}button.variant=Button.variant.QUIET_ACTION;button.classList.add('_coral-QuickActions-item');button.setAttribute('tabindex','-1');button.setAttribute('title',itemData.textContent.trim());button.setAttribute('aria-label',itemData.textContent.trim());button.setAttribute('role','menuitem');this.insertBefore(button,this.children[index]);var buttonListItem;if(item.type===type.BUTTON){buttonListItem=new ButtonList.Item()}else if(item.type===type.ANCHOR){buttonListItem=new AnchorList.Item();buttonListItem.href=item.href}var buttonListItemParent=this._elements.buttonList;buttonListItemParent.insertBefore(buttonListItem,buttonListItemParent.children[index]);buttonListItem.tabIndex=-1;buttonListItem.content.innerHTML=itemData.htmlContent;buttonListItem.icon=itemData.icon;buttonListItem.setAttribute('role','menuitem');item._elements.button=button;item._elements.buttonListItem=buttonListItem;buttonListItem._elements.quickActionsItem=item;button._elements.quickActionsItem=item}},{key:"_layout",value:function _layout(){this._setWidth();var buttons=this._getButtons(true);if(!buttons.length){return}var buttonListItems=this._elements.buttonList.items.getAll();var display=this.style.display;var temporarilyShown=false;if(!this.open){this.style.left-=10000;this.style.top-=10000;this.style.display='block';temporarilyShown=true}var totalAvailableWidth=this.offsetWidth;var totalFittingButtons=0;var widthUsed=0;var buttonWidth=this._getButtonWidth();while(totalAvailableWidth>widthUsed){widthUsed+=buttonWidth;if(totalAvailableWidth>widthUsed){totalFittingButtons+=1}}totalFittingButtons-=1;var threshold=this.threshold;var handleThreshold=threshold>0;var moreButtonsThanThreshold=handleThreshold&&buttons.length>threshold;var collapse=buttons.length>totalFittingButtons||moreButtonsThanThreshold;var collapseToThreshold=collapse&&handleThreshold&&threshold+1<totalFittingButtons;var totalButtons;if(collapse){if(collapseToThreshold){totalButtons=threshold+1}else{totalButtons=totalFittingButtons}}else{totalButtons=buttons.length}for(var i=0;i<buttons.length;i+=1){this._toggleTabbable(buttons[i],false);buttons[i].hidden=false;if(buttonListItems[i]){buttonListItems[i].hidden=false}}this._toggleTabbable(this._elements.moreButton,false);if(collapse){if(totalButtons>0){for(var j=totalButtons-1;j<buttons.length;j+=1){buttons[j].hide()}for(var k=0;k<totalButtons-1;k+=1){buttonListItems[k].hide()}this._toggleTabbable(buttons[0],true)}else{this._toggleTabbable(this._elements.moreButton,true)}this._elements.moreButton.show()}else{this._toggleTabbable(buttons[0],true);this._elements.moreButton.hide()}this._setWidth(true);if(temporarilyShown){this.style.left+=10000;this.style.top+=10000;this.style.display=display}this.reposition()}},{key:"_setWidth",value:function _setWidth(buttonWidthBased){var width=0;var targetElement=this._getTarget();if(targetElement){var maxWidth=targetElement.offsetWidth;if(buttonWidthBased){var visibleButtons=this.querySelectorAll('._coral-QuickActions-item:not([hidden])');var buttonWidth=this._getButtonWidth();if(visibleButtons.length){for(var i=0;i<visibleButtons.length&&width<=maxWidth;i+=1){width+=buttonWidth}this.style.width="".concat(width,"px")}}else{this.style.width="".concat(maxWidth,"px")}}}},{key:"_setButtonListHeight",value:function _setButtonListHeight(){this._elements.buttonList.style.height='';var style=window.getComputedStyle(this._elements.buttonList);var height=parseInt(style.height,10);var maxHeight=parseInt(style.maxHeight,10);if(height<maxHeight){this._elements.buttonList.style.height="".concat(height-1,"px")}}},{key:"_isInternalToComponent",value:function _isInternalToComponent(element){var targetElement=this._getTarget();return element&&(this.contains(element)||this._elements.overlay.contains(element)||targetElement&&targetElement.contains(element))}},{key:"_onWindowResize",value:function _onWindowResize(){this._layout()}},{key:"_handleEscape",value:function _handleEscape(event){var _this2=this;if(typeof this._isTop==='undefined'){this._isTop=this._isTopOverlay()}if(this._timeout!==null){window.clearTimeout(this._timeout)}this._timeout=window.setTimeout(function(){if(_this2._isTop){_get(_getPrototypeOf(QuickActions.prototype),"_handleEscape",_this2).call(_this2,event)}_this2._isTop=undefined})}},{key:"_onMouseOut",value:function _onMouseOut(event){var toElement=event.toElement||event.relatedTarget;if(!this._isInternalToComponent(toElement)&&this.interaction===interaction$3.ON){this._hideAll()}}},{key:"_hideAll",value:function _hideAll(){this.hide();this._elements.overlay.hide()}},{key:"_onTargetMouseEnter",value:function _onTargetMouseEnter(event){var fromElement=event.fromElement||event.relatedTarget;if(!this.open&&!this._isInternalToComponent(fromElement)){this.show();this._trackEvent('display','coral-quickactions',event)}}},{key:"_onTargetKeyUp",value:function _onTargetKeyUp(event){var keyCode=event.keyCode;if(event.shiftKey&&keyCode===121||event.ctrlKey&&keyCode===32){if(!this.open){if(this.interaction===interaction$3.ON){this._previousTrapFocus=this.trapFocus;this._previousReturnFocus=this.returnFocus;this._previousFocusOnShow=this.focusOnShow;this.trapFocus=this.constructor.trapFocus.ON;this.returnFocus=this.constructor.returnFocus.ON;this.focusOnShow=this.constructor.focusOnShow.ON}this.show()}}}},{key:"_onTargetKeyDown",value:function _onTargetKeyDown(event){var keyCode=event.keyCode;if(event.shiftKey&&keyCode===121||event.ctrlKey&&keyCode===32){event.preventDefault()}}},{key:"_onTargetMouseLeave",value:function _onTargetMouseLeave(event){var toElement=event.toElement||event.relatedTarget;if(!this._isInternalToComponent(toElement)){this._hideAll()}}},{key:"_onHomeKeypress",value:function _onHomeKeypress(event){event.preventDefault();var firstFocusableButton=this._getFirstFocusableButton();if(firstFocusableButton){firstFocusableButton.focus()}}},{key:"_onEndKeypress",value:function _onEndKeypress(event){event.preventDefault();var lastFocusableButton=this._getLastFocusableButton();if(lastFocusableButton){lastFocusableButton.focus()}}},{key:"_onButtonKeypressNext",value:function _onButtonKeypressNext(event){event.preventDefault();if(document.activeElement===this){var firstFocusableButton=this._getFirstFocusableButton();if(firstFocusableButton){firstFocusableButton.focus()}}else{var nextButton=this._getFocusableNeighbour(event.matchedTarget);if(nextButton){nextButton.focus()}else if(event.key==='ArrowDown'&&document.activeElement===this._elements.moreButton){this._elements.moreButton.click()}}}},{key:"_onButtonKeypressPrevious",value:function _onButtonKeypressPrevious(event){event.preventDefault();if(document.activeElement===this){var lastFocusableButton=this._getLastFocusableButton();if(lastFocusableButton){lastFocusableButton.focus()}}else{var previousButton=this._getFocusableNeighbour(event.matchedTarget,true);if(previousButton){previousButton.focus()}}}},{key:"_onButtonClick",value:function _onButtonClick(event){var _this3=this;event.stopPropagation();if(this._preventClick){return}var button=event.matchedTarget;var item=button._elements.quickActionsItem;this._proxyClick(item);window.setTimeout(function(){_this3._preventClick=false},this._overlayAnimationTime);this._preventClick=true;this._trackEvent('click','coral-quickactions-item',event,item)}},{key:"_onMoreButtonClick",value:function _onMoreButtonClick(event){var button=event.matchedTarget;var item=button._elements.quickActionsItem;this._trackEvent('click','coral-quickactions-more',event,item)}},{key:"_onFocus",value:function _onFocus(){if(this._focusOnShow===this.constructor.focusOnShow.OFF&&this._returnFocus!==this.constructor.returnFocus.ON){var targetElement=this._getTarget();if(targetElement){if(!this._previousReturnFocus){this._previousReturnFocus=this._returnFocus;this.returnFocus=this.constructor.returnFocus.ON}if(!this._previousElementToFocusWhenHidden){this._previousElementToFocusWhenHidden=this._elementToFocusWhenHidden;this._elementToFocusWhenHidden=targetElement}}}}},{key:"_onBlur",value:function _onBlur(){if(this._focusOnShow===this.constructor.focusOnShow.OFF){if(this._previousReturnFocus){this.returnFocus=this._previousReturnFocus;this._previousReturnFocus=undefined}if(this._previousElementToFocusWhenHidden){this._elementToFocusWhenHidden=this._previousElementToFocusWhenHidden;this._previousElementToFocusWhenHidden=undefined}}}},{key:"_onOverlayBeforeOpen",value:function _onOverlayBeforeOpen(event){if(event.target===this){this._preventClick=false;this._layout()}else if(event.target===this._elements.overlay){event.stopImmediatePropagation();this._setButtonListHeight()}}},{key:"_onOverlayBeforeClose",value:function _onOverlayBeforeClose(event){if(event.target===this._elements.overlay){event.stopImmediatePropagation()}}},{key:"_onOverlayOpen",value:function _onOverlayOpen(event){if(event.target===this._elements.overlay){event.stopImmediatePropagation();this._elements.moreButton.setAttribute('aria-expanded','true')}}},{key:"_onOverlayClose",value:function _onOverlayClose(event){var _this4=this;if(event.target===this){this._elements.overlay.open=false;window.requestAnimationFrame(function(){if(_this4._previousTrapFocus){_this4.trapFocus=_this4._previousTrapFocus;if(_this4.trapFocus!==_this4.constructor.trapFocus.ON){_this4.removeAttribute('tabindex')}_this4._previousTrapFocus=undefined}if(_this4._previousReturnFocus){_this4.returnFocus=_this4._previousReturnFocus;_this4._previousReturnFocus=undefined}if(_this4._previousFocusOnShow){_this4.focusOnShow=_this4._previousFocusOnShow;_this4._previousFocusOnShow=undefined}})}else if(event.target===this._elements.overlay){event.stopImmediatePropagation();this._elements.moreButton.setAttribute('aria-expanded','false')}}},{key:"_onOverlayPositioned",value:function _onOverlayPositioned(event){if(event.target===this._elements.overlay){event.stopImmediatePropagation()}}},{key:"_onAnimate",value:function _onAnimate(event){if(event.target===this){if(this.placement===placement$2.BOTTOM){this.style.marginTop="".concat(-parseFloat(this.lengthOffset)+8,"px")}else{this.style.marginTop="".concat(parseFloat(this.lengthOffset)-8,"px")}}}},{key:"_onButtonListItemClick",value:function _onButtonListItemClick(event){event.stopImmediatePropagation();var buttonListItem=event.matchedTarget;if(!buttonListItem){return}var item=buttonListItem._elements.quickActionsItem;this._proxyClick(item);this._trackEvent('click','coral-quickactions-item',event,item)}},{key:"_onItemRemoved",value:function _onItemRemoved(item){this._removeItemElements(item)}},{key:"_onCollectionChange",value:function _onCollectionChange(addedNodes){if(!this._openedBefore){return}var items=this.items.getAll();var index;for(var i=0,addedNodesCount=addedNodes.length;i<addedNodesCount;i+=1){index=Array.prototype.indexOf.call(items,addedNodes[i]);this._attachItem(addedNodes[i],index)}this._layout()}},{key:"_onItemChange",value:function _onItemChange(event){event.stopImmediatePropagation();this._updateItem(event.target)}},{key:"_onItemTypeChange",value:function _onItemTypeChange(event){event.stopImmediatePropagation();var item=event.target;this._removeItemElements(item);this._attachItem(item);this._layout()}},{key:"_removeItemElements",value:function _removeItemElements(item){if(item._elements.button){item._elements.button.remove();item._elements.button._elements.quickActionsItem=undefined;item._elements.button=undefined}if(item._elements.buttonListItem){item._elements.buttonListItem.remove();item._elements.buttonListItem._elements.quickActionsItem=null;item._elements.buttonListItem=undefined}}},{key:"_updateItem",value:function _updateItem(item){var itemData=this._getItemData(item);var type=QuickActionsItem.type;var button=item._elements.button;if(button){button.icon=itemData.icon;button.setAttribute('title',itemData.textContent.trim());button.setAttribute('aria-label',itemData.textContent.trim());button[item.type===type.ANCHOR?'setAttribute':'removeAttribute']('href',item.href)}var buttonListItem=item._elements.buttonListItem;if(buttonListItem){buttonListItem.content.innerHTML=itemData.htmlContent;buttonListItem[item.type===type.ANCHOR?'setAttribute':'removeAttribute']('href',item.href);buttonListItem.icon=itemData.icon}}},{key:"_toggleCenterPlacement",value:function _toggleCenterPlacement(toggle){if(toggle){if(this.placement===placement$2.CENTER){this._placement=Overlay.placement.RIGHT;this._oldInner=this._inner;this._inner=false;this._oldLengthOffset=this._lengthOffset;this._lengthOffset='-50%r - 50%p'}}else if(this._placement===Overlay.placement.RIGHT){this._placement=placement$2.CENTER;this._inner=this._oldInner;this._lengthOffset=this._oldLengthOffset}}},{key:"reposition",value:function reposition(){this._toggleCenterPlacement(true);_get(_getPrototypeOf(QuickActions.prototype),"reposition",this).call(this);this._toggleCenterPlacement(false);if(this._openedOnce){if(this.placement===placement$2.BOTTOM){this.style.marginTop="-".concat(parseFloat(this.lengthOffset),"px")}else if(this.placement===placement$2.TOP){this.style.marginTop="".concat(parseFloat(this.lengthOffset),"px")}else if(this.placement===placement$2.CENTER){this.style.marginTop="".concat(parseFloat(this.lengthOffset)-4,"px")}}}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(QuickActions.prototype),"connectedCallback",this).call(this);var overlay=this._elements.overlay;overlay.removeAttribute('open');if(overlay._parent){overlay._parent.appendChild(overlay)}}},{key:"render",value:function render(){var _this5=this;_get(_getPrototypeOf(QuickActions.prototype),"render",this).call(this);this.classList.add(CLASSNAME$11);this.setAttribute('role','menu');['moreButton','overlay'].forEach(function(handleName){var handle=_this5.querySelector("[handle=\"".concat(handleName,"\"]"));if(handle){handle.remove()}});var frag=document.createDocumentFragment();frag.appendChild(this._elements.moreButton);frag.appendChild(this._elements.overlay);this._elements.overlay.target=this._elements.moreButton;this.appendChild(frag)}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(QuickActions.prototype),"disconnectedCallback",this).call(this);var overlay=this._elements.overlay;if(!this.contains(overlay)){overlay._parent=overlay._repositioned?document.body:this;overlay.remove()}}},{key:"overlay",get:function get(){return this._elements.overlay}},{key:"items",get:function get(){if(!this._items){this._items=new Collection$1({host:this,itemTagName:'coral-quickactions-item',onItemRemoved:this._onItemRemoved,onCollectionChange:this._onCollectionChange})}return this._items}},{key:"threshold",get:function get(){return typeof this._threshold==='number'?this._threshold:4},set:function set(value){this._threshold=transform.number(value);this._reflectAttribute('threshold',this._threshold)}},{key:"placement",get:function get(){return _get(_getPrototypeOf(QuickActions.prototype),"placement",this)},set:function set(value){value=transform.string(value).toLowerCase();this._placement=validate.enumeration(placement$2)(value)&&value||placement$2.TOP;this.reposition()}},{key:"interaction",get:function get(){return _get(_getPrototypeOf(QuickActions.prototype),"interaction",this)},set:function set(value){_set(_getPrototypeOf(QuickActions.prototype),"interaction",value,this,true);if(this.interaction===interaction$3.ON){this._addTargetEventListeners()}else{this._removeTargetEventListeners()}}},{key:"target",get:function get(){return _get(_getPrototypeOf(QuickActions.prototype),"target",this)},set:function set(value){_set(_getPrototypeOf(QuickActions.prototype),"target",value,this,true);var targetElement=this._getTarget(value);var targetHasChanged=targetElement!==this._previousTarget;if(targetElement&&targetHasChanged){if(this._previousTarget){var previousTarget=this._getTarget(this._previousTarget);if(previousTarget){this._removeTargetEventListeners(previousTarget);targetElement.removeAttribute('aria-haspopup');targetElement.removeAttribute('aria-owns')}}this._addTargetEventListeners();targetElement.setAttribute('aria-haspopup','true');var ariaOwns=targetElement.getAttribute('aria-owns');ariaOwns=ariaOwns&&ariaOwns.length?"".concat(ariaOwns.trim(),"  ").concat(this.id):this.id;targetElement.setAttribute('aria-owns',ariaOwns);this._previousTarget=targetElement}}},{key:"open",get:function get(){return _get(_getPrototypeOf(QuickActions.prototype),"open",this)},set:function set(value){var _this6=this;if(value&&this._focusOnShow!==this.constructor.focusOnShow.OFF){this.returnFocusTo(document.activeElement)}_set(_getPrototypeOf(QuickActions.prototype),"open",value,this,true);this._openedOnce=true;window.requestAnimationFrame(function(){if(_this6.open&&!_this6._openedBefore){var items=_this6.items.getAll();for(var i=0,itemCount=items.length;i<itemCount;i+=1){_this6._attachItem(items[i],i)}_this6._openedBefore=true}if(_this6.open){_this6._layout()}var targetElement=_this6._getTarget();if(targetElement){targetElement.classList.toggle('is-selected',_this6.open)}})}}],[{key:"placement",get:function get(){return placement$2}},{key:"target",get:function get(){return target$2}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(QuickActions),"observedAttributes",this).concat(['threshold'])}}]);return QuickActions}(Overlay);var translations$h={"en-US":{"More actions":"More actions"},"fr-FR":{"More actions":"Autres actions"},"de-DE":{"More actions":"Weitere Aktionen"},"it-IT":{"More actions":"Altre azioni"},"es-ES":{"More actions":"Más acciones"},"pt-BR":{"More actions":"Mais ações"},"ja-JP":{"More actions":"その他のアクション"},"ko-KR":{"More actions":"추가 작업"},"zh-CN":{"More actions":"更多操作"},"zh-TW":{"More actions":"更多動作"},"nl-NL":{"More actions":"Meer acties"},"da-DK":{"More actions":"Flere handlinger"},"fi-FI":{"More actions":"Lisää toimintoja"},"nb-NO":{"More actions":"Flere handlinger"},"sv-SE":{"More actions":"Fler åtgärder"},"cs-CZ":{"More actions":"Další akce"},"pl-PL":{"More actions":"Więcej czynności"},"ru-RU":{"More actions":"Другие действия"},"tr-TR":{"More actions":"Daha fazla işlem"}};commons.extend(strings,{'coral-component-quickactions':translations$h});commons._define('coral-quickactions-item',QuickActionsItem);commons._define('coral-quickactions',QuickActions);QuickActions.Item=QuickActionsItem;var helpTranslations={"en-US":{"Search for Help":"Search for Help","Searching Help…":"Searching Help…","Error fetching results":"Error fetching results","No results found":"No results found","See all {0} results":"See all {0} results"},"fr-FR":{"Search for Help":"Rechercher de l’aide","Searching Help…":"Recherche dans l’aide…","Error fetching results":"Erreur lors de la récupération des résultats","No results found":"Aucun résultat trouvé","See all {0} results":"Voir les {0} résultats"},"de-DE":{"Search for Help":"Nach Hilfe suchen","Searching Help…":"Suche nach Hilfe …","Error fetching results":"Fehler beim Abruf von Ergebnissen","No results found":"Keine Ergebnisse gefunden","See all {0} results":"Alle {0} Ergebnisse anzeigen"},"it-IT":{"Search for Help":"Cerca informazioni nell'Aiuto","Searching Help…":"Ricerca aiuto…","Error fetching results":"Errore durante il recupero dei risultati","No results found":"Nessun risultato trovato","See all {0} results":"Visualizza tutti i {0} risultati"},"es-ES":{"Search for Help":"Buscar ayuda","Searching Help…":"Buscando ayuda…","Error fetching results":"Error al obtener los resultados","No results found":"No se han encontrado resultados","See all {0} results":"Ver los {0} resultados"},"pt-BR":{"Search for Help":"Procurar nas seções de Ajuda","Searching Help…":"Procurando ajuda…","Error fetching results":"Erro ao obter resultados","No results found":"Nenhum resultado encontrado","See all {0} results":"Ver todos os resultados de {0}"},"ja-JP":{"Search for Help":"ヘルプを検索","Searching Help…":"ヘルプを検索中…","Error fetching results":"結果を取得中にエラーが発生しました","No results found":"結果が見つかりませんでした","See all {0} results":"すべての {0} 結果を確認"},"ko-KR":{"Search for Help":"도움말 검색","Searching Help…":"도움말 검색 중…","Error fetching results":"결과를 가져오는 중 오류 발생","No results found":"결과를 찾을 수 없습니다","See all {0} results":"총 {0}개 결과 보기"},"zh-CN":{"Search for Help":"搜索帮助","Searching Help…":"正在搜索帮助…","Error fetching results":"获取结果时出错","No results found":"找不到任何结果","See all {0} results":"查看全部 {0} 个结果"},"zh-TW":{"Search for Help":"搜尋說明","Searching Help…":"正在搜尋說明…","Error fetching results":"擷取結果時發生錯誤","No results found":"找不到結果","See all {0} results":"查看全部 {0} 個結果"},"nl-NL":{"Search for Help":"Zoeken naar hulp","Searching Help…":"Hulp zoeken…","Error fetching results":"Fout bij ophalen resultaten","No results found":"Geen resultaten gevonden","See all {0} results":"Alle {0} resultaten bekijken"},"da-DK":{"Search for Help":"Søg efter Hjælp...","Searching Help…":"Søger i Hjælp...","Error fetching results":"Fejl ved hentning af resultater","No results found":"Ingen resultater fundet","See all {0} results":"Se alle {0} resultater"},"fi-FI":{"Search for Help":"Hae ohjeita","Searching Help…":"Haun ohje…","Error fetching results":"Tuloksia haettaessa tapahtui virhe.","No results found":"Tuloksia ei löytynyt.","See all {0} results":"Näytä kaikki {0} tulosta"},"nb-NO":{"Search for Help":"Søk etter hjelp","Searching Help…":"Søker i Hjelp …","Error fetching results":"Kan ikke hente resultater","No results found":"Finner ingen resultater","See all {0} results":"Vis alle de {0} resultatene"},"sv-SE":{"Search for Help":"Sök efter hjälp","Searching Help…":"Sökhjälp…","Error fetching results":"Det gick inte att hämta resultat","No results found":"Inga resultat funna","See all {0} results":"Se alla {0} resultat"},"cs-CZ":{"Search for Help":"Vyhledat nápovědu","Searching Help…":"Nápověda hledání…","Error fetching results":"Při shromažďování výsledků došlo k chybě","No results found":"Nebyly nalezeny žádné výsledky","See all {0} results":"Zobrazit všechny výsledky: {0}"},"pl-PL":{"Search for Help":"Szukaj pomocy","Searching Help…":"Trwa przeszukiwanie Pomocy...","Error fetching results":"Błąd pobierania wyników","No results found":"Nie znaleziono żadnych wyników","See all {0} results":"Zobacz wszystkie {0} wyników"},"ru-RU":{"Search for Help":"Поиск справки","Searching Help…":"Поиск по справке…","Error fetching results":"Ошибка получения результатов","No results found":"Результаты не найдены","See all {0} results":"Посмотреть все результаты ({0})"},"tr-TR":{"Search for Help":"Yardım Ara","Searching Help…":"Yardım Aranıyor...","Error fetching results":"Sonuçlar alınırken hata oluştu","No results found":"Sonuç bulunamadı","See all {0} results":"Tüm {0} sonuçlarını gör"}};var orgSwitcherTranslations={"en-US":{"Search Organizations":"Search Organizations","No organizations found&period;":"No organizations found."},"fr-FR":{"Search Organizations":"Rechercher des organisations","No organizations found&period;":"Aucune organisation trouvée."},"de-DE":{"Search Organizations":"Organisationen durchsuchen","No organizations found&period;":"Keine Organisationen gefunden."},"it-IT":{"Search Organizations":"Cerca organizzazioni","No organizations found&period;":"Nessuna organizzazione trovata."},"es-ES":{"Search Organizations":"Buscar organizaciones","No organizations found&period;":"No se ha encontrado ninguna organización."},"pt-BR":{"Search Organizations":"Procurar organizações","No organizations found&period;":"Nenhuma organização encontrada."},"ja-JP":{"Search Organizations":"組織を検索","No organizations found&period;":"組織が見つかりませんでした。"},"ko-KR":{"Search Organizations":"조직 검색","No organizations found&period;":"조직을 찾을 수 없습니다."},"zh-CN":{"Search Organizations":"搜索组织","No organizations found&period;":"找不到任何组织。"},"zh-TW":{"Search Organizations":"搜尋組織","No organizations found&period;":"找不到組織。"},"nl-NL":{"Search Organizations":"Organisaties zoeken","No organizations found&period;":"Geen organisaties gevonden."},"da-DK":{"Search Organizations":"Søg i virksomheder","No organizations found&period;":"Ingen virksomheder fundet."},"fi-FI":{"Search Organizations":"Hae organisaatioita","No organizations found&period;":"Organisaatioita ei löytynyt."},"nb-NO":{"Search Organizations":"Søk etter organisasjoner","No organizations found&period;":"Finner ingen organisasjoner."},"sv-SE":{"Search Organizations":"Sökorganisationer","No organizations found&period;":"Inga organisationer funna."},"cs-CZ":{"Search Organizations":"Hledat ve společnostech","No organizations found&period;":"Nebyly nalezeny žádné společnosti."},"pl-PL":{"Search Organizations":"Wyszukaj organizacje","No organizations found&period;":"Nie znaleziono żadnych organizacji."},"ru-RU":{"Search Organizations":"Искать организации","No organizations found&period;":"Организации не найдены."},"tr-TR":{"Search Organizations":"Kuruluşları ara","No organizations found&period;":"Kuruluş bulunamadı."}};var CLASSNAME$12='_coral-Shell';var Shell=function(_BaseComponent){_inherits(Shell,_BaseComponent);var _super=_createSuper(Shell);function Shell(){var _this;_classCallCheck(this,Shell);_this=_super.call(this);_this._elements={header:_this.querySelector('coral-shell-header')||document.createElement('coral-shell-header'),content:_this.querySelector('coral-shell-content')||document.createElement('coral-shell-content')};return _this}_createClass(Shell,[{key:"render",value:function render(){var _this2=this;_get(_getPrototypeOf(Shell.prototype),"render",this).call(this);this.classList.add(CLASSNAME$12);var header=this._elements.header;var menus=this.menus.getAll();var content=this._elements.content;if(!content.parentNode){if(header.parentNode){header.parentNode.removeChild(header)}this.menus.clear();while(this.firstChild){content.appendChild(this.firstChild)}}this.header=header;menus.forEach(function(menu){return _this2.menus.add(menu)});this.content=content}},{key:"menus",get:function get(){if(!this._menus){this._menus=new Collection$1({host:this,itemTagName:'coral-shell-menu'})}return this._menus}},{key:"header",get:function get(){return this._getContentZone(this._elements.header)},set:function set(value){this._setContentZone('header',value,{handle:'header',tagName:'coral-shell-header',insert:function insert(header){this.insertBefore(header,this.firstChild)}})}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-shell-content',insert:function insert(content){this.appendChild(content)}})}},{key:"_contentZones",get:function get(){return{'coral-shell-header':'header','coral-shell-content':'content'}}}]);return Shell}(BaseComponent(HTMLElement));var ShellContent=(function(){return document.createElement('coral-shell-content')});var CLASSNAME$13='_coral-Shell-header';var ShellHeader=function(_BaseComponent){_inherits(ShellHeader,_BaseComponent);var _super=_createSuper(ShellHeader);function ShellHeader(){var _this;_classCallCheck(this,ShellHeader);_this=_super.call(this);_this._elements={home:_this.querySelector('coral-shell-header-home')||document.createElement('coral-shell-header-home'),actions:_this.querySelector('coral-shell-header-actions')||document.createElement('coral-shell-header-actions'),content:_this.querySelector('coral-shell-header-content')||document.createElement('coral-shell-header-content')};Overlay._OverlayManager.push(_assertThisInitialized(_this));return _this}_createClass(ShellHeader,[{key:"render",value:function render(){_get(_getPrototypeOf(ShellHeader.prototype),"render",this).call(this);this.classList.add(CLASSNAME$13);this.classList.add('coral--darkest','u-coral-clearFix');var home=this._elements.home;var actions=this._elements.actions;var content=this._elements.content;if(home.parentNode){home.remove()}if(actions.parentNode){actions.remove()}if(content.parentNode){content.remove()}while(this.firstChild){content.appendChild(this.firstChild)}this.home=home;this.actions=actions;this.content=content}},{key:"home",get:function get(){return this._getContentZone(this._elements.home)},set:function set(value){this._setContentZone('home',value,{handle:'home',tagName:'coral-shell-header-home',insert:function insert(content){this.appendChild(content)}})}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-shell-header-content',insert:function insert(content){this.appendChild(content)}})}},{key:"actions",get:function get(){return this._getContentZone(this._elements.actions)},set:function set(value){this._setContentZone('actions',value,{handle:'actions',tagName:'coral-shell-header-actions',insert:function insert(content){this.appendChild(content)}})}},{key:"_contentZones",get:function get(){return{'coral-shell-header-home':'home','coral-shell-header-content':'content','coral-shell-header-actions':'actions'}}}]);return ShellHeader}(BaseComponent(HTMLElement));var template$H=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["icon"]=document.createElement("coral-icon");el0.setAttribute("handle","icon");el0.className+=" _coral-Shell-homeAnchor-icon";el0.setAttribute("size","M");el0.setAttribute("alt","");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var CLASSNAME$14='_coral-Shell-homeAnchor';var ShellHomeAnchor=function(_BaseComponent){_inherits(ShellHomeAnchor,_BaseComponent);var _super=_createSuper(ShellHomeAnchor);function ShellHomeAnchor(){var _this;_classCallCheck(this,ShellHomeAnchor);_this=_super.call(this);_this._elements={label:_this.querySelector('coral-shell-homeanchor-label')||document.createElement('coral-shell-homeanchor-label')};template$H.call(_this._elements);return _this}_createClass(ShellHomeAnchor,[{key:"render",value:function render(){_get(_getPrototypeOf(ShellHomeAnchor.prototype),"render",this).call(this);this.classList.add(CLASSNAME$14);var fragment=document.createDocumentFragment();var label=this._elements.label;if(label.parentNode){this.removeChild(label)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE){label.appendChild(child)}else if(child.nodeName==='CORAL-ICON'){if(!fragment.childNodes.length){this._elements.icon=child;fragment.appendChild(child)}else{this.removeChild(child)}}else{this.removeChild(child)}}this.appendChild(fragment);this.icon=this.icon;this.label=label}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-shell-homeanchor-label',insert:function insert(content){this.appendChild(content)}})}},{key:"icon",get:function get(){return this._elements.icon.icon},set:function set(value){this._elements.icon.icon=value;if(this.icon===''){this._elements.icon.remove()}else if(!this.contains(this._elements.icon)){this.insertBefore(this._elements.icon,this.firstChild)}}},{key:"_contentZones",get:function get(){return{'coral-shell-homeanchor-label':'label'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellHomeAnchor),"observedAttributes",this).concat(['icon'])}}]);return ShellHomeAnchor}(BaseComponent(HTMLAnchorElement));var ShellHomeAnchorLabel=(function(){return document.createElement('coral-shell-homeanchor-label')});var translations$i={"it-IT":{"Clear search":"Azzera ricerca"},"ja-JP":{"Clear search":"検索をクリア"},"es-ES":{"Clear search":"Borrar búsqueda"},"ko-KR":{"Clear search":"검색 지우기"},"zh-CN":{"Clear search":"清除搜索"},"zh-TW":{"Clear search":"清除搜尋"},"pt-BR":{"Clear search":"Limpar busca"},"nl-NL":{"Clear search":"Zoekopdracht wissen"},"en-US":{"Clear search":"Clear search"},"de-DE":{"Clear search":"Suche löschen"},"fr-FR":{"Clear search":"Effacer la recherche"},"da-DK":{"Clear search":"Slet søgning"},"fi-FI":{"Clear search":"Tyhjennä haku"},"nb-NO":{"Clear search":"Fjern søk"},"sv-SE":{"Clear search":"Rensa sökningen"},"cs-CZ":{"Clear search":"Vymazat hledání"},"pl-PL":{"Clear search":"Wyczyść wyniki wyszukiwania"},"ru-RU":{"Clear search":"Очистить поиск"},"tr-TR":{"Clear search":"Aramayı temizle"}};var template$I=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["input"]=document.createElement("input","coral-textfield");el0.setAttribute("type","search");el0.className+=" _coral-Search-input";el0.setAttribute("is","coral-textfield");el0.setAttribute("handle","input");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["clearButton"]=document.createElement("button","coral-button");el2.setAttribute("type","button");el2.setAttribute("aria-label",data_0["i18n"]["get"]('Clear search'));el2.setAttribute("is","coral-button");el2.setAttribute("variant","_custom");el2.className+=" _coral-Search-clear _coral-ClearButton";el2.setAttribute("handle","clearButton");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=this["clearButtonLabel"]=document.createElement("coral-button-label");el4.setAttribute("handle","clearButtonLabel");el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);data=data_0;this.clearButton._elements.label=this.clearButtonLabel;this.clearButton.insertAdjacentHTML('beforeend',data.Icon._renderSVG('spectrum-css-icon-CrossSmall',['_coral-UIIcon-CrossSmall']));data_0=data;var el7=document.createTextNode("\n");el2.appendChild(el7);frag.appendChild(el2);var el8=document.createTextNode("\n");frag.appendChild(el8);return frag};var CLASSNAME$15='_coral-Search';var variant$i={DEFAULT:'default',QUIET:'quiet'};var Search=function(_BaseFormField){_inherits(Search,_BaseFormField);var _super=_createSuper(Search);function Search(){var _this;_classCallCheck(this,Search);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'keydown [handle=input]':'_onEnterKey','keyup [handle=input]':'_onKeyUp','input [handle=input]':'_triggerInputEvent','key:escape [handle=input]':'_clearInput','click [handle=clearButton]:not(:disabled)':'_clearInput'}));_this._elements={};template$I.call(_this._elements,{i18n:i18n,Icon:Icon});_this._labellableElement=_this._elements.input;return _this}_createClass(Search,[{key:"_triggerInputEvent",value:function _triggerInputEvent(){this.trigger('coral-search:input')}},{key:"_onEnterKey",value:function _onEnterKey(event){if(event.which===13){event.preventDefault();if(this.disabled){return}this.trigger('coral-search:submit')}}},{key:"_onKeyUp",value:function _onKeyUp(){this._updateClearButton()}},{key:"_updateClearButton",value:function _updateClearButton(){this._elements.clearButton.style.display=this._elements.input.value===''?'none':''}},{key:"_clearInput",value:function _clearInput(){this._elements.input.value='';this._updateClearButton();this._elements.input.focus();this.trigger('coral-search:clear')}},{key:"reset",value:function reset(){this._elements.input.reset();this._updateClearButton()}},{key:"clear",value:function clear(){this._elements.input.clear();this._updateClearButton()}},{key:"render",value:function render(){_get(_getPrototypeOf(Search.prototype),"render",this).call(this);this.classList.add(CLASSNAME$15);if(!this._icon){this.icon='search'}if(!this._variant){this.variant=variant$i.DEFAULT}var templates=this.querySelectorAll('._coral-Search-input, ._coral-Search-icon, ._coral-Search-clear');for(var i=0;i<templates.length;i+=1){templates[i].remove()}var fragment=document.createDocumentFragment();fragment.appendChild(this._elements.input);fragment.appendChild(this._elements.clearButton);this.appendChild(fragment);this._elements.input.insertAdjacentHTML('afterend',Icon._renderSVG('spectrum-css-icon-Magnifier',['_coral-Search-icon','_coral-UIIcon-Magnifier']));this._updateClearButton()}},{key:"name",get:function get(){return this._elements.input.name},set:function set(value){this._reflectAttribute('name',value);this._elements.input.name=value}},{key:"value",get:function get(){return this._elements.input.value||''},set:function set(value){this._elements.input.value=value;this._updateClearButton()}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.input.disabled=this._disabled;this._elements.clearButton.disabled=this._disabled}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.input.required=this._required}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this._elements.input.readOnly=this._readOnly;this._elements.clearButton.disabled=this._readOnly}},{key:"labelledBy",get:function get(){return _get(_getPrototypeOf(Search.prototype),"labelledBy",this)},set:function set(value){_set(_getPrototypeOf(Search.prototype),"labelledBy",value,this,true);this[this.labelledBy?'setAttribute':'removeAttribute']('aria-labelledby',this.labelledBy)}},{key:"placeholder",get:function get(){return this._elements.input.placeholder||''},set:function set(value){value=transform.string(value);this._reflectAttribute('placeholder',value);this._elements.input.placeholder=value}},{key:"maxLength",get:function get(){return this._elements.input.maxLength},set:function set(value){this._elements.input.maxLength=value;this._reflectAttribute('maxlength',this.maxLength)}},{key:"variant",get:function get(){return this._variant||variant$i.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$i)(value)&&value||variant$i.DEFAULT;this._reflectAttribute('variant',this._variant);this._elements.input.variant=value}},{key:"icon",get:function get(){return this._icon||'search'},set:function set(value){this._icon=transform.string(value);this._reflectAttribute('icon',this._icon)}},{key:"invalid",get:function get(){return _get(_getPrototypeOf(Search.prototype),"invalid",this)},set:function set(value){_set(_getPrototypeOf(Search.prototype),"invalid",value,this,true)}}],[{key:"variant",get:function get(){return variant$i}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Search),"_attributePropertyMap",this),{maxlength:'maxLength'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Search),"observedAttributes",this).concat(['placeholder','icon','variant','maxlength'])}}]);return Search}(BaseFormField(BaseComponent(HTMLElement)));commons.extend(strings,{'coral-component-search':translations$i});commons._define('coral-search',Search);var template$J=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;var labelId=data.commons.getUID();data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["contentWrapper"]=document.createElement("div");el2.setAttribute("handle","contentWrapper");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=document.createElement("label");el4.className+=" u-coral-screenReaderOnly";el4.id=labelId;el4.textContent=data_0["i18n"]["get"]('Search for Help');el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);var el6=this["search"]=document.createElement("coral-search");el6.className+=" _coral-Shell-help-search";el6.setAttribute("handle","search");el6.setAttribute("placeholder",data_0["i18n"]["get"]('Search for Help'));el6.setAttribute("labelledby",labelId);el2.appendChild(el6);var el7=document.createTextNode("\n  ");el2.appendChild(el7);var el8=this["items"]=document.createElement("div");el8.className+=" _coral-Shell-help-items";el8.setAttribute("handle","items");el2.appendChild(el8);var el9=document.createTextNode("\n  ");el2.appendChild(el9);var el10=this["results"]=document.createElement("coral-anchorlist");el10.className+=" _coral-Shell-help-results";el10.setAttribute("handle","results");el10.setAttribute("hidden","");el2.appendChild(el10);var el11=document.createTextNode("\n  ");el2.appendChild(el11);var el12=this["resultMessage"]=document.createElement("div");el12.className+=" _coral-Shell-help-resultMessage";el12.setAttribute("handle","resultMessage");el12.setAttribute("role","status");el12.setAttribute("hidden","");el2.appendChild(el12);var el13=document.createTextNode("\n  ");el2.appendChild(el13);var el14=this["loading"]=document.createElement("div");el14.className+=" _coral-Shell-help-loading";el14.setAttribute("handle","loading");el14.setAttribute("role","status");el14.setAttribute("hidden","");var el15=document.createTextNode("\n    ");el14.appendChild(el15);var el16=document.createElement("coral-wait");el16.setAttribute("size","M");el16.className+=" _coral-Shell-help-loading-wait";el14.appendChild(el16);var el17=document.createTextNode("\n    ");el14.appendChild(el17);var el18=this["loadingMessage"]=document.createElement("span");el18.className+=" coral-Heading--2 _coral-Shell-help-loading-info";el18.setAttribute("handle","loadingMessage");el18.textContent=data_0["i18n"]["get"]('Searching Help…');el14.appendChild(el18);var el19=document.createTextNode("\n  ");el14.appendChild(el19);el2.appendChild(el14);var el20=document.createTextNode("\n");el2.appendChild(el20);frag.appendChild(el2);var el21=document.createTextNode("\n");frag.appendChild(el21);return frag};var template$K=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=document.createElement("coral-list-item-content");var el1=document.createTextNode(data_0["title"]+"\n  ");el0.appendChild(el1);var el2=document.createElement("div");el2.className+=" _coral-Shell-help-result-description";el2.textContent=data_0["description"];el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);return frag};var template$L=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=document.createElement("div");el0.className+=" _coral-Shell-help-resultMessage-container";var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=document.createElement("div");el2.className+=" coral-Heading--1 _coral-Shell-help-resultMessage-heading";el2.textContent=data_0["i18n"]["get"]('Error fetching results');el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);return frag};var template$M=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=document.createElement("div");el0.className+=" _coral-Shell-help-resultMessage-container";var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=document.createElement("h2");el2.className+=" coral-heading coral-Heading--2 _coral-Shell-help-resultMessage-heading";el2.textContent=data_0["i18n"]["get"]('No results found');el0.appendChild(el2);frag.appendChild(el0);var el3=document.createTextNode("\n");frag.appendChild(el3);return frag};var CLASSNAMES$2=['_coral-Menu','_coral-AnchorList','_coral-Shell-help'];var ShellHelp=function(_BaseComponent){_inherits(ShellHelp,_BaseComponent);var _super=_createSuper(ShellHelp);function ShellHelp(){var _this;_classCallCheck(this,ShellHelp);_this=_super.call(this);_this._elements={};template$J.call(_this._elements,{commons:commons,i18n:i18n});_this._delegateEvents({'coral-search:clear':'_showItems','coral-search:submit':'_performSearch'});_this.items._startHandlingItems(true);return _this}_createClass(ShellHelp,[{key:"_moveItems",value:function _moveItems(){var _this2=this;this.setAttribute('id',this.id||commons.getUID());var selector="#".concat(this.id," > a[is=\"coral-shell-help-item\"], coral-shell-help-separator");Array.prototype.forEach.call(this.querySelectorAll(selector),function(item){_this2._elements.items.appendChild(item)})}},{key:"_performSearch",value:function _performSearch(event){event.stopPropagation();this._elements.items.hidden=true;this._showLoading();this._elements.resultMessage.hidden=true;this._elements.results.hidden=true;var searchTerm=this._elements.search.value;this.trigger('coral-shell-help:search',{value:searchTerm})}},{key:"_showItems",value:function _showItems(event){event.stopPropagation();this._elements.results.hidden=true;this._hideLoading();this._elements.resultMessage.hidden=true;this._elements.items.hidden=false}},{key:"_clearTimeout",value:function _clearTimeout(timeoutName){if(this[timeoutName]){window.clearTimeout(this[timeoutName]);this[timeoutName]=undefined}}},{key:"_showMessage",value:function _showMessage(elementName,message){var el=this._elements[elementName];var timeoutName="_".concat(elementName,"Timeout");el.hidden=false;this._clearTimeout(timeoutName);this[timeoutName]=window.setTimeout(function(){return el.appendChild(message)},150)}},{key:"_showLoading",value:function _showLoading(){if(!this._elements.loading.hidden){return}if(this._elements.loading.contains(this._elements.loadingMessage)){this._elements.loadingMessage=this._elements.loading.removeChild(this._elements.loadingMessage)}this._showMessage('loading',this._elements.loadingMessage)}},{key:"_hideLoading",value:function _hideLoading(){if(this._elements.loading.hidden){return}this._elements.loading.hidden=true;this._clearTimeout('_loadingTimeout');if(this._elements.loading.contains(this._elements.loadingMessage)){this._elements.loadingMessage=this._elements.loading.removeChild(this._elements.loadingMessage)}}},{key:"showError",value:function showError(){this._hideLoading();this._elements.resultMessage.innerHTML='';this._showMessage('resultMessage',template$L.call(this._elements,{i18n:i18n}))}},{key:"showResults",value:function showResults(results,total,allResultsURL){var _this3=this;this._hideLoading();if(this._showResultsTimeout){window.clearTimeout(this._showResultsTimeout);this._showResultsTimeout=undefined}if(!results||total===0){this._elements.resultMessage.innerHTML='';this._showMessage('resultMessage',template$M.call(this._elements,{i18n:i18n}))}else{this._elements.results.innerHTML='';results.forEach(function(result){var separator=' & ';var description=result.tags.join(separator);var item=new AnchorList.Item().set({href:result.href,target:result.target});item.classList.add('_coral-Shell-help-result-item');item.content=template$K.call(_this3._elements,{title:result.title,description:description}).firstElementChild;_this3._elements.results.appendChild(item)});this._elements.results.hidden=false;if(total>1){var seeAllItem=new AnchorList.Item().set({href:allResultsURL,content:{innerHTML:i18n.get('See all {0} results',total)},target:'_blank'});seeAllItem.content.classList.add('coral-Link');this._elements.results.appendChild(seeAllItem)}}}},{key:"render",value:function render(){var _this$classList,_this4=this;_get(_getPrototypeOf(ShellHelp.prototype),"render",this).call(this);(_this$classList=this.classList).add.apply(_this$classList,CLASSNAMES$2);this._moveItems();var contentWrapper=this.querySelector('[handle="contentWrapper"]');if(contentWrapper){this._elements.contentWrapper=contentWrapper;['search','result','items','results','resultMessage','loading'].forEach(function(handle){_this4._elements[handle]=_this4.querySelector("[handle=\"".concat(handle,"\"]"))});this._items._container=this._elements.items}else{this.appendChild(this._elements.contentWrapper)}}},{key:"items",get:function get(){if(!this._items){this._items=new Collection$1({host:this,itemTagName:'coral-shell-help-item',itemBaseTagName:'a',container:this._elements.items})}return this._items}},{key:"placeholder",get:function get(){return this._elements.search.placeholder},set:function set(value){this._elements.search.placeholder=value}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellHelp),"observedAttributes",this).concat(['placeholder'])}}]);return ShellHelp}(BaseComponent(HTMLElement));var CLASSNAME$16='_coral-Shell-help-item';var ShellHelpItem=function(_AnchorList$Item){_inherits(ShellHelpItem,_AnchorList$Item);var _super=_createSuper(ShellHelpItem);function ShellHelpItem(){_classCallCheck(this,ShellHelpItem);return _super.apply(this,arguments)}_createClass(ShellHelpItem,[{key:"render",value:function render(){_get(_getPrototypeOf(ShellHelpItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$16)}}]);return ShellHelpItem}(AnchorList.Item);var ShellHelpSeparator=(function(){return document.createElement('coral-shell-help-separator')});var CLASSNAME$17='_coral-Shell-menu';var ShellMenu=function(_Popover){_inherits(ShellMenu,_Popover);var _super=_createSuper(ShellMenu);function ShellMenu(){_classCallCheck(this,ShellMenu);return _super.apply(this,arguments)}_createClass(ShellMenu,[{key:"render",value:function render(){_get(_getPrototypeOf(ShellMenu.prototype),"render",this).call(this);this.classList.add(CLASSNAME$17);this.trigger('coral-shell-menu:_connected')}},{key:"within",get:function get(){return document.querySelector('coral-shell')||'coral-shell'},set:function set(value){_set(_getPrototypeOf(ShellMenu.prototype),"within",value,this,true)}},{key:"placement",get:function get(){return this.constructor.placement.BOTTOM},set:function set(value){_set(_getPrototypeOf(ShellMenu.prototype),"placement",value,this,true)}},{key:"full",get:function get(){return this._full||false},set:function set(value){this._full=transform.booleanAttr(value);this._reflectAttribute('full',this._full);this.classList.toggle("".concat(CLASSNAME$17,"--full"),this._full)}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellMenu),"observedAttributes",this).concat(['full'])}}]);return ShellMenu}(Popover);var CLASSNAME$18='_coral-Shell-menubar';var ShellMenuBar=function(_BaseComponent){_inherits(ShellMenuBar,_BaseComponent);var _super=_createSuper(ShellMenuBar);function ShellMenuBar(){var _this;_classCallCheck(this,ShellMenuBar);_this=_super.call(this);_this.setAttribute('role','list');_this.items._startHandlingItems(true);return _this}_createClass(ShellMenuBar,[{key:"render",value:function render(){_get(_getPrototypeOf(ShellMenuBar.prototype),"render",this).call(this);this.classList.add(CLASSNAME$18)}},{key:"items",get:function get(){if(!this._items){this._items=new Collection$1({host:this,itemTagName:'coral-shell-menubar-item'})}return this._items}}]);return ShellMenuBar}(BaseComponent(HTMLElement));var template$N=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["shellMenuButton"]=document.createElement("button","coral-button");el0.setAttribute("is","coral-button");el0.setAttribute("variant","quietaction");el0.setAttribute("iconsize","S");el0.className+=" _coral-Shell-menu-button";el0.setAttribute("handle","shellMenuButton");el0.setAttribute("type","button");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["shellMenuButtonLabel"]=document.createElement("coral-button-label");el2.setAttribute("handle","shellMenuButtonLabel");el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);return frag};var iconVariant={DEFAULT:'default',CIRCLE:'circle'};var hasPopupRole={MENU:'menu',LISTBOX:'listbox',TREE:'tree',GRID:'grid',DIALOG:'dialog',DEFAULT:null};var CLASSNAME$19='_coral-Shell-menubar-item';var ALL_ICON_VARIANT_CLASSES=[];for(var variantValue$8 in iconVariant){ALL_ICON_VARIANT_CLASSES.push("".concat(CLASSNAME$19,"--").concat(iconVariant[variantValue$8]))}var ShellMenuBarItem=function(_BaseComponent){_inherits(ShellMenuBarItem,_BaseComponent);var _super=_createSuper(ShellMenuBarItem);function ShellMenuBarItem(){var _this;_classCallCheck(this,ShellMenuBarItem);_this=_super.call(this);_this._elements={};template$N.call(_this._elements);_this._delegateEvents({'click [handle="shellMenuButton"]':'_handleButtonClick','global:coral-overlay:close':'_handleOverlayEvent','global:coral-overlay:beforeclose':'_handleOverlayBeforeEvent','global:coral-overlay:open':'_handleOverlayEvent','global:coral-overlay:beforeopen':'_handleOverlayBeforeEvent'});return _this}_createClass(ShellMenuBarItem,[{key:"_handleOverlayBeforeEvent",value:function _handleOverlayBeforeEvent(event){var target=event.target;if(target===this._getMenu()){this._elements.shellMenuButton.classList.toggle('is-selected',!target.open)}}},{key:"_handleOverlayEvent",value:function _handleOverlayEvent(event){var target=event.target;if(target===this._getMenu()){var shellMenuButton=this._elements.shellMenuButton;if(this.open!==target.open){this.open=target.open}else if(shellMenuButton.getAttribute('aria-expanded')!==target.open){shellMenuButton.setAttribute('aria-expanded',target.open)}}}},{key:"_handleButtonClick",value:function _handleButtonClick(){this.open=!this.open}},{key:"_getMenu",value:function _getMenu(targetValue){targetValue=targetValue||this.menu;if(targetValue instanceof Node){return targetValue}var newTarget=null;if(typeof targetValue==='string'){newTarget=document.querySelector(targetValue)}return newTarget}},{key:"focus",value:function focus(){this._elements.shellMenuButton.focus()}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='aria-label'){if(value&&this._elements.shellMenuButton.textContent.trim()===''){this._elements.shellMenuButton.setAttribute('aria-label',value)}}else{_get(_getPrototypeOf(ShellMenuBarItem.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"render",value:function render(){_get(_getPrototypeOf(ShellMenuBarItem.prototype),"render",this).call(this);this.setAttribute('role','listitem');this.classList.add(CLASSNAME$19);var button=this.querySelector('._coral-Shell-menu-button');if(button){this._elements.shellMenuButton=button;this._elements.shellMenuButtonLabel=this.querySelector('coral-button-label')}else{while(this.firstChild){this._elements.shellMenuButtonLabel.appendChild(this.firstChild)}this.appendChild(this._elements.shellMenuButton)}this.label=this._elements.shellMenuButtonLabel;if(this.menu!==null){this.menu=this.menu}}},{key:"icon",get:function get(){return this._elements.shellMenuButton.icon},set:function set(value){this._elements.shellMenuButton.icon=value}},{key:"iconSize",get:function get(){return this._elements.shellMenuButton.iconSize},set:function set(value){this._elements.shellMenuButton.iconSize=value;this._reflectAttribute('iconsize',this.iconSize)}},{key:"iconVariant",get:function get(){return this._iconVariant||iconVariant.DEFAULT},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._iconVariant=validate.enumeration(iconVariant)(value)&&value||iconVariant.DEFAULT;(_this$classList=this.classList).remove.apply(_this$classList,ALL_ICON_VARIANT_CLASSES);if(this.variant!==iconVariant.DEFAULT){this.classList.add("".concat(CLASSNAME$19,"--").concat(this._iconVariant))}}},{key:"badge",get:function get(){return this._elements.shellMenuButton.getAttribute('badge')||''},set:function set(value){this._elements.shellMenuButton[!value||value==='0'?'removeAttribute':'setAttribute']('badge',value)}},{key:"open",get:function get(){return this._open||false},set:function set(value){var menu=this._getMenu();if(menu===null&&this.hasPopup===hasPopupRole.DEFAULT){return}this._open=transform.booleanAttr(value);this._reflectAttribute('open',this._open);if(menu!==null){if(menu.open!==this._open){menu.open=this._open}this.trigger("coral-shell-menubar-item:".concat(this._open?'open':'close'))}this._elements.shellMenuButton.setAttribute('aria-expanded',this._open)}},{key:"label",get:function get(){return this._getContentZone(this._elements.shellMenuButtonLabel)},set:function set(value){this._setContentZone('label',value,{handle:'shellMenuButtonLabel',tagName:'coral-button-label',insert:function insert(label){this._elements.shellMenuButton.label=label}})}},{key:"menu",get:function get(){return this._menu||null},set:function set(value){var menu;if(value instanceof HTMLElement){this._menu=value;menu=this._menu}else{this._menu=String(value);menu=document.querySelector(this._menu)}if(menu!==null){this.id=this.id||commons.getUID();menu.setAttribute('target',"#".concat(this.id));if(this.hasPopup===hasPopupRole.DEFAULT){this.hasPopup=menu.getAttribute('role')||hasPopupRole.DIALOG}}else if(this._menu&&this.hasPopup!==hasPopupRole.DEFAULT){this.hasPopup=hasPopupRole.DEFAULT}}},{key:"hasPopup",get:function get(){return this._hasPopup||null},set:function set(value){value=transform.string(value).toLowerCase();this._hasPopup=validate.enumeration(hasPopupRole)(value)&&value||hasPopupRole.DEFAULT;var shellMenuButton=this._elements.shellMenuButton;var ariaHaspopup=this._hasPopup;if(ariaHaspopup){shellMenuButton.setAttribute('aria-haspopup',ariaHaspopup);shellMenuButton.setAttribute('aria-expanded',this.open)}else{shellMenuButton.removeAttribute('aria-haspopup');shellMenuButton.removeAttribute('aria-expanded')}}},{key:"_contentZones",get:function get(){return{'coral-button-label':'label'}}}],[{key:"iconVariant",get:function get(){return iconVariant}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(ShellMenuBarItem),"_attributePropertyMap",this),{haspopup:'hasPopup',iconsize:'iconSize',iconvariant:'iconVariant'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellMenuBarItem),"observedAttributes",this).concat(['haspopup','icon','iconsize','iconvariant','badge','open','menu','aria-label'])}}]);return ShellMenuBarItem}(BaseComponent(HTMLElement));var template$O=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["container"]=document.createElement("div");el0.className+=" _coral-Shell-user-container";el0.setAttribute("handle","container");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["image"]=document.createElement("div");el2.className+=" _coral-Shell-user-image";el2.setAttribute("handle","image");var el3=document.createTextNode("\n    ");el2.appendChild(el3);var el4=this["avatar"]=document.createElement("coral-icon");el4.setAttribute("icon",data_0["icon"]);el4.className+=" _coral-Shell-user-avatar";el4.setAttribute("size","XL");el4.setAttribute("handle","avatar");el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);el0.appendChild(el2);var el6=document.createTextNode("\n");el0.appendChild(el6);frag.appendChild(el0);var el7=document.createTextNode("\n");frag.appendChild(el7);return frag};var CLASSNAME$1a='_coral-Shell-user';var avatar={DEFAULT:'UserCircleColor_Light'};var ShellUser=function(_BaseComponent){_inherits(ShellUser,_BaseComponent);var _super=_createSuper(ShellUser);function ShellUser(){var _this;_classCallCheck(this,ShellUser);_this=_super.call(this);_this._elements={name:_this.querySelector('coral-shell-user-name')||document.createElement('coral-shell-user-name'),heading:_this.querySelector('coral-shell-user-heading')||document.createElement('coral-shell-user-heading'),subheading:_this.querySelector('coral-shell-user-subheading')||document.createElement('coral-shell-user-subheading'),content:_this.querySelector('coral-shell-user-content')||document.createElement('coral-shell-user-content'),footer:_this.querySelector('coral-shell-user-footer')||document.createElement('coral-shell-user-footer')};template$O.call(_this._elements,{icon:avatar.DEFAULT});return _this}_createClass(ShellUser,[{key:"render",value:function render(){_get(_getPrototypeOf(ShellUser.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1a);var frag=document.createDocumentFragment();frag.appendChild(this._elements.container);for(var contentZone in this._contentZones){var element=this._elements[this._contentZones[contentZone]];if(element.parentNode){element.parentNode.removeChild(element)}}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&child.getAttribute('handle')!=='container'){this._elements.content.appendChild(child)}else{this.removeChild(child)}}this.appendChild(frag);for(var _contentZone in this._contentZones){var contentZoneName=this._contentZones[_contentZone];var _element=this._elements[this._contentZones[_contentZone]];this[contentZoneName]=_element}}},{key:"avatar",get:function get(){return this._elements.avatar.icon},set:function set(value){this._elements.avatar.icon=value}},{key:"name",get:function get(){return this._getContentZone(this._elements.name)},set:function set(value){this._setContentZone('content',value,{handle:'name',tagName:'coral-shell-user-name',insert:function insert(content){this._elements.container.appendChild(content)}})}},{key:"heading",get:function get(){return this._getContentZone(this._elements.heading)},set:function set(value){this._setContentZone('heading',value,{handle:'heading',tagName:'coral-shell-user-heading',insert:function insert(content){this._elements.container.appendChild(content)}})}},{key:"subheading",get:function get(){return this._getContentZone(this._elements.subheading)},set:function set(value){this._setContentZone('subheading',value,{handle:'subheading',tagName:'coral-shell-user-subheading',insert:function insert(content){this._elements.container.appendChild(content)}})}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-shell-user-content',insert:function insert(content){if(content.innerHTML.trim()===''){content.innerHTML=''}this.appendChild(content)}})}},{key:"footer",get:function get(){return this._getContentZone(this._elements.footer)},set:function set(value){this._setContentZone('footer',value,{handle:'footer',tagName:'coral-shell-user-footer',insert:function insert(content){this.appendChild(content)}})}},{key:"_contentZones",get:function get(){return{'coral-shell-user-name':'name','coral-shell-user-heading':'heading','coral-shell-user-subheading':'subheading','coral-shell-user-content':'content','coral-shell-user-footer':'footer'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellUser),"observedAttributes",this).concat(['avatar'])}},{key:"avatar",get:function get(){return avatar}}]);return ShellUser}(BaseComponent(HTMLElement));var ShellUserContent=(function(){return document.createElement('coral-shell-user-content')});var ShellUserFooter=(function(){return document.createElement('coral-shell-user-footer')});var ShellUserHeading=(function(){return document.createElement('coral-shell-user-heading')});var ShellUserName=(function(){return document.createElement('coral-shell-user-name')});var ShellUserSubheading=(function(){return document.createElement('coral-shell-user-subheading')});var CLASSNAME$1b='_coral-Shell-workspaces';var ShellWorkspaces=function(_BaseComponent){_inherits(ShellWorkspaces,_BaseComponent);var _super=_createSuper(ShellWorkspaces);function ShellWorkspaces(){var _this;_classCallCheck(this,ShellWorkspaces);_this=_super.call(this);_this._delegateEvents({'key:down [is="coral-shell-workspace"]':'_focusNextItem','key:right [is="coral-shell-workspace"]':'_focusNextItem','key:left [is="coral-shell-workspace"]':'_focusPreviousItem','key:up [is="coral-shell-workspace"]':'_focusPreviousItem','key:pageup [is="coral-shell-workspace"]':'_focusPreviousItem','key:pagedown [is="coral-shell-workspace"]':'_focusNextItem','key:home [is="coral-shell-workspace"]':'_focusFirstItem','key:end [is="coral-shell-workspace"]':'_focusLastItem','coral-shell-workspace:_selectedchanged':'_onItemSelectedChanged','change ._coral-Shell-workspaces-select':'_onSelectChanged'});_this._elements={select:new Select().set({variant:'quiet'})};_this._elements.select.classList.add('_coral-Shell-workspaces-select');_this._oldSelection=null;_this.items._startHandlingItems(true);return _this}_createClass(ShellWorkspaces,[{key:"_validateSelection",value:function _validateSelection(item){var selection=this.items._getAllSelected();var selectionCount=selection.length;if(selectionCount===0){var selectable=this.items._getFirstSelectable();if(selectable){selectable.setAttribute('selected','')}}else if(selectionCount>1){item=item||selection[selection.length-1];for(var i=0;i<selectionCount;i+=1){if(selection[i]!==item){this._preventTriggeringEvents=true;selection[i].removeAttribute('selected')}}this._preventTriggeringEvents=false}this._renderSelectItems();this._triggerChangeEvent()}},{key:"_renderSelectItems",value:function _renderSelectItems(){var _this2=this;this._elements.select.items.clear();this.items.getAll().forEach(function(item){_this2._elements.select.items.add({content:{innerHTML:item.innerHTML},selected:item.hasAttribute('selected'),_workspace:item})})}},{key:"_onSelectChanged",value:function _onSelectChanged(event){event.stopImmediatePropagation();this._elements.select.selectedItem._workspace.selected=true}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){this.trigger('coral-shell-workspaces:change',{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();var item=event.target;this._validateSelection(item)}},{key:"_eventIsAtTarget",value:function _eventIsAtTarget(event){var target=event.target;var listItem=event.matchedTarget;var isAtTarget=target===listItem;if(isAtTarget){event.preventDefault();event.stopPropagation()}return isAtTarget}},{key:"_focusNextItem",value:function _focusNextItem(event){if(!this._eventIsAtTarget(event)){return}var target=event.matchedTarget;if(target.nextElementSibling){target.nextElementSibling.focus()}else{this.items.first().focus()}}},{key:"_focusPreviousItem",value:function _focusPreviousItem(event){if(!this._eventIsAtTarget(event)){return}var target=event.matchedTarget;if(target.previousElementSibling){target.previousElementSibling.focus()}else{this.items.last().focus()}}},{key:"_focusFirstItem",value:function _focusFirstItem(event){if(!this._eventIsAtTarget(event)){return}this.items.first().focus()}},{key:"_focusLastItem",value:function _focusLastItem(event){if(!this._eventIsAtTarget(event)){return}this.items.last().focus()}},{key:"render",value:function render(){_get(_getPrototypeOf(ShellWorkspaces.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1b);this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem;var template=this.querySelector('._coral-Shell-workspaces-select');if(template){template.remove()}this.appendChild(this._elements.select)}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-shell-workspace',itemBaseTagName:'a',onItemAdded:this._validateSelection,onItemRemoved:this._validateSelection})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getLastSelected()}}]);return ShellWorkspaces}(BaseComponent(HTMLElement));var CLASSNAME$1c='_coral-Shell-workspaces-workspace';var ShellWorkspace=function(_BaseComponent){_inherits(ShellWorkspace,_BaseComponent);var _super=_createSuper(ShellWorkspace);function ShellWorkspace(){var _this;_classCallCheck(this,ShellWorkspace);_this=_super.call(this);_this._delegateEvents({click:'_onClick'});return _this}_createClass(ShellWorkspace,[{key:"_onClick",value:function _onClick(){if(!this.selected){this.selected=true}}},{key:"render",value:function render(){_get(_getPrototypeOf(ShellWorkspace.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1c)}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.setAttribute('aria-selected',this._selected);this.classList.toggle('is-selected',this._selected);this.trigger('coral-shell-workspace:_selectedchanged')}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellWorkspace),"observedAttributes",this).concat(['selected'])}}]);return ShellWorkspace}(BaseComponent(HTMLAnchorElement));var template$P=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["container"]=document.createElement("div");el0.setAttribute("handle","container");el0.className+=" _coral-Shell-solutions-container";frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var CLASSNAME$1d='_coral-Shell-solutionSwitcher';var ShellSolutionSwitcher=function(_BaseComponent){_inherits(ShellSolutionSwitcher,_BaseComponent);var _super=_createSuper(ShellSolutionSwitcher);function ShellSolutionSwitcher(){var _this;_classCallCheck(this,ShellSolutionSwitcher);_this=_super.call(this);_this._elements={};template$P.call(_this._elements);var observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){for(var i=0;i<mutation.addedNodes.length;i+=1){var addedNode=mutation.addedNodes[i];if(addedNode.nodeName==='CORAL-SHELL-SOLUTIONS'&&!addedNode.hasAttribute('secondary')){_this._elements.container.appendChild(addedNode)}}})});observer.observe(_assertThisInitialized(_this),{childList:true});return _this}_createClass(ShellSolutionSwitcher,[{key:"render",value:function render(){_get(_getPrototypeOf(ShellSolutionSwitcher.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1d);this.classList.add('coral--darkest');var container=this.querySelector('._coral-Shell-solutions-container')||this._elements.container;if(container.parentNode){container.remove()}Array.prototype.forEach.call(this.querySelectorAll('coral-shell-solutions:not([secondary])'),function(item){container.appendChild(item)});this.insertBefore(container,this.firstChild)}},{key:"items",get:function get(){if(!this._items){this._items=new Collection$1({host:this,itemTagName:'coral-shell-solutions'})}return this._items}}]);return ShellSolutionSwitcher}(BaseComponent(HTMLElement));var CLASSNAME$1e='_coral-Shell-solutions';var ShellSolutions=function(_BaseComponent){_inherits(ShellSolutions,_BaseComponent);var _super=_createSuper(ShellSolutions);function ShellSolutions(){_classCallCheck(this,ShellSolutions);return _super.apply(this,arguments)}_createClass(ShellSolutions,[{key:"_sortSolutions",value:function _sortSolutions(){var _this=this;if(this.items.length>1){var linked=[];var nonLinked=[];var isSecondary=this.hasAttribute('secondary');this.items.getAll().forEach(function(item,i){if(!(isSecondary&&i===0)){if(item.hasAttribute('linked')){linked.push(item)}else{nonLinked.push(item)}}});var alphabeticalSort=function alphabeticalSort(a,b){var aText=a.textContent.trim().toLowerCase();var bText=b.textContent.trim().toLowerCase();if(aText<bText){return -1}if(aText>bText){return 1}return 0};linked.sort(alphabeticalSort);nonLinked.sort(alphabeticalSort);linked.forEach(function(item){_this.appendChild(item)});nonLinked.forEach(function(item){_this.appendChild(item)})}}},{key:"render",value:function render(){_get(_getPrototypeOf(ShellSolutions.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1e);this._sortSolutions()}},{key:"items",get:function get(){if(!this._items){this._items=new Collection$1({host:this,itemTagName:'coral-shell-solution',itemBaseTagName:'a'})}return this._items}},{key:"secondary",get:function get(){return this._secondary||false},set:function set(value){this._secondary=transform.booleanAttr(value);this._reflectAttribute('secondary',this._secondary);this.classList.toggle("".concat(CLASSNAME$1e,"--secondary"),this._secondary)}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellSolutions),"observedAttributes",this).concat(['secondary'])}}]);return ShellSolutions}(BaseComponent(HTMLElement));var ShellSolutionsHeader=(function(){commons._log('warn','Coral.Shell.Solutions.Header: coral-shell-solutions-header is deprecated.');return document.createElement('coral-shell-solutions-header')});var template$Q=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["icon"]=document.createElement("coral-icon");el0.setAttribute("size","XL");el0.setAttribute("handle","icon");el0.className+=" _coral-Shell-solution-icon";el0.setAttribute("alt","");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var CLASSNAME$1f='_coral-Shell-solution';var ShellSolution=function(_BaseComponent){_inherits(ShellSolution,_BaseComponent);var _super=_createSuper(ShellSolution);function ShellSolution(){var _this;_classCallCheck(this,ShellSolution);_this=_super.call(this);_this._elements={label:_this.querySelector('coral-shell-solution-label')||document.createElement('coral-shell-solution-label')};template$Q.call(_this._elements);return _this}_createClass(ShellSolution,[{key:"render",value:function render(){_get(_getPrototypeOf(ShellSolution.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1f);var fragment=document.createDocumentFragment();fragment.appendChild(this._elements.icon);var label=this._elements.label;if(label){label.remove()}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&child.getAttribute('handle')!=='icon'){label.appendChild(child)}else{this.removeChild(child)}}this.appendChild(fragment);this.label=label}},{key:"icon",get:function get(){return this._elements.icon.icon},set:function set(value){this._elements.icon.icon=value}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-shell-solution-label',insert:function insert(content){this.appendChild(content)}})}},{key:"linked",get:function get(){return this._linked||false},set:function set(value){this._linked=transform.booleanAttr(value);this._reflectAttribute('linked',this._linked);this.classList.toggle("".concat(CLASSNAME$1f,"--linked"),this._linked)}},{key:"_contentZones",get:function get(){return{'coral-shell-solution-label':'label'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellSolution),"observedAttributes",this).concat(['icon','linked'])}}]);return ShellSolution}(BaseComponent(HTMLAnchorElement));var ShellSolutionLabel=(function(){return document.createElement('coral-shell-solution-label')});var template$R=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;data=data_0;var labelId=data.commons.getUID();data_0=data;var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["container"]=document.createElement("div");el2.setAttribute("handle","container");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=document.createElement("label");el4.className+=" u-coral-screenReaderOnly";el4.id=labelId;el4.textContent=data_0["i18n"]["get"]('Search Organizations');el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);var el6=this["search"]=document.createElement("coral-search");el6.className+=" _coral-Shell-orgSwitcher-search";el6.setAttribute("handle","search");el6.setAttribute("placeholder",data_0["i18n"]["get"]('Search Organizations'));el6.setAttribute("labelledby",labelId);el2.appendChild(el6);var el7=document.createTextNode("\n  ");el2.appendChild(el7);var el8=this["items"]=document.createElement("div");el8.className+=" _coral-Shell-orgSwitcher-items";el8.setAttribute("handle","items");el2.appendChild(el8);var el9=document.createTextNode("\n  ");el2.appendChild(el9);var el10=this["resultMessage"]=document.createElement("div");el10.className+=" _coral-Shell-orgSwitcher-resultMessage";el10.setAttribute("handle","resultMessage");el10.setAttribute("hidden","");var el11=document.createTextNode("\n    ");el10.appendChild(el11);var el12=document.createElement("div");el12.className+=" _coral-Shell-orgSwitcher-resultMessage-container";var el13=document.createTextNode("\n      ");el12.appendChild(el13);var el14=document.createElement("h2");el14.className+=" coral-Heading coral-Heading--2";el14.textContent=data_0["i18n"]["get"]('No organizations found.');el12.appendChild(el14);var el15=document.createTextNode("\n    ");el12.appendChild(el15);el10.appendChild(el12);var el16=document.createTextNode("\n  ");el10.appendChild(el16);el2.appendChild(el10);var el17=document.createTextNode("\n");el2.appendChild(el17);frag.appendChild(el2);var el18=document.createTextNode("\n");frag.appendChild(el18);return frag};var CLASSNAME$1g='_coral-Shell-orgSwitcher';var SEARCH_VISIBILITY_THRESHOLD=6;var ShellOrgSwitcher=function(_List){_inherits(ShellOrgSwitcher,_List);var _super=_createSuper(ShellOrgSwitcher);function ShellOrgSwitcher(){var _this;_classCallCheck(this,ShellOrgSwitcher);_this=_super.call(this);_this._delegateEvents({'coral-search:clear':'_showAll','coral-search:input':'_performSearch','coral-search:submit':'_selectFirst','coral-shell-organization:change':'_onOrganizationChange','coral-shell-organization:_selectedchanged':'_onItemSelectedChanged','coral-shell-suborganization:_selectedchanged':'_onSubItemSelectedChanged'});_this._elements={footer:_this.querySelector('coral-shell-orgswitcher-footer')||document.createElement('coral-shell-orgswitcher-footer')};template$R.call(_this._elements,{commons:commons,i18n:i18n});_this._oldSelection=null;_this.items._startHandlingItems(true);return _this}_createClass(ShellOrgSwitcher,[{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();var item=event.target;this._validateSelection(item)}},{key:"_onSubItemSelectedChanged",value:function _onSubItemSelectedChanged(event){var _this2=this;event.stopImmediatePropagation();var item=event.target;if(item.hasAttribute('selected')){this.items._getAllSelected().forEach(function(itemElement){if(itemElement.tagName==='CORAL-SHELL-ORGANIZATION'){_this2._preventTriggeringEvents=true;itemElement.removeAttribute('selected')}});this._preventTriggeringEvents=false}}},{key:"_onOrganizationChange",value:function _onOrganizationChange(){this._triggerChangeEvent()}},{key:"_selectFirst",value:function _selectFirst(event){event.stopPropagation();var first=this.items.first();if(first){first.setAttribute('selected','')}}},{key:"_validateSelection",value:function _validateSelection(item){var selection=this.items._getAllSelected();var selectionCount=selection.length;if(selectionCount>1){for(var i=0;i<selectionCount;i+=1){if(selection[i]!==item){this._preventTriggeringEvents=true;selection[i].removeAttribute('selected')}}this._preventTriggeringEvents=false}this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){this.trigger('coral-shell-orgswitcher:change',{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"_showAll",value:function _showAll(event){event.stopPropagation();this._elements.resultMessage.hidden=true;this.items.getAll().forEach(function(item){item.hidden=false;if(item.items){item.items.getAll().forEach(function(itemElement){itemElement.hidden=false})}})}},{key:"_performSearch",value:function _performSearch(event){event.stopPropagation();var searchTerm=this._elements.search.value.toLowerCase();this._elements.resultMessage.hidden=true;var resultCount=0;this.items.getAll().forEach(function(item){var matched=item.content.textContent.toLowerCase().indexOf(searchTerm)!==-1;var childMatched=false;if(item.items){item.items.getAll().forEach(function(itemElement){var elementMatch=itemElement.content.textContent.toLowerCase().indexOf(searchTerm)!==-1;childMatched=childMatched||elementMatch;itemElement.hidden=!elementMatch})}matched=matched||childMatched;item.hidden=!matched;if(matched){resultCount+=1}});if(resultCount===0){this._elements.resultMessage.hidden=false}}},{key:"_moveItems",value:function _moveItems(){var _this3=this;this.setAttribute('id',this.id||commons.getUID());Array.prototype.forEach.call(this.querySelectorAll("#".concat(this.id," > coral-shell-organization")),function(item){_this3._elements.items.appendChild(item)})}},{key:"_onCollectionChange",value:function _onCollectionChange(item){this._moveItems();this._validateSelection(item);if(this.items.length<=SEARCH_VISIBILITY_THRESHOLD){this._elements.search.hide()}else{this._elements.search.show()}}},{key:"render",value:function render(){_get(_getPrototypeOf(ShellOrgSwitcher.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1g);this._moveItems();var container=this.querySelector('[handle="container"]');if(container){this._elements.container=container;this._elements.items=this.querySelector('._coral-Shell-orgSwitcher-items');this._elements.search=this.querySelector('._coral-Shell-orgSwitcher-search');this._elements.resultMessage=this.querySelector('._coral-Shell-orgSwitcher-resultMessage');this._items._container=this._elements.items}else{this.appendChild(this._elements.container)}this.footer=this._elements.footer;this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-shell-organization',itemSelector:'coral-shell-organization, coral-shell-suborganization',container:this._elements.items,onItemAdded:this._onCollectionChange,onItemRemoved:this._onCollectionChange})}return this._items}},{key:"placeholder",get:function get(){return this._elements.search.placeholder},set:function set(value){this._elements.search.placeholder=value}},{key:"footer",get:function get(){return this._getContentZone(this._elements.footer)},set:function set(value){this._setContentZone('content',value,{handle:'footer',tagName:'coral-shell-orgswitcher-footer',insert:function insert(content){this.appendChild(content)}})}},{key:"_itemTagName",get:function get(){return 'coral-shell-organization'}},{key:"selectedItem",get:function get(){return this.items._getLastSelected()}},{key:"_contentZones",get:function get(){return{'coral-shell-orgswitcher-footer':'footer'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellOrgSwitcher),"observedAttributes",this).concat(['placeholder'])}}]);return ShellOrgSwitcher}(List);var ShellOrgSwitcherFooter=(function(){return document.createElement('coral-shell-orgswitcher-footer')});var template$S=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["checkmark"]=document.createElement("span");el0.setAttribute("handle","checkmark");el0.setAttribute("hidden","");el0.className+=" _coral-Shell-orgSwitcher-checkmark";var el1=document.createTextNode("\n  ");el0.appendChild(el1);data=data_0;this.checkmark.innerHTML=data.Icon._renderSVG('spectrum-css-icon-CheckmarkMedium',['_coral-UIIcon-CheckmarkMedium','_coral-Menu-checkmark']);data_0=data;var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);var el5=this["items"]=document.createElement("div");el5.setAttribute("handle","items");el5.className+=" _coral-Shell-orgSwitcher-subitems";frag.appendChild(el5);var el6=document.createTextNode("\n\n");frag.appendChild(el6);return frag};var CLASSNAME$1h='_coral-Shell-orgSwitcher-item';var ShellOrganization=function(_List$Item){_inherits(ShellOrganization,_List$Item);var _super=_createSuper(ShellOrganization);function ShellOrganization(){var _this;_classCallCheck(this,ShellOrganization);_this=_super.call(this);_this._delegateEvents({'click':'_onClick','key:enter':'_onClick','key:space':'_onClick','coral-shell-suborganization:_selectedchanged':'_onItemSelectedChanged'});var template={};template$S.call(template,{Icon:Icon});commons.extend(_this._elements,template);_this._oldSelection=null;_this.items._startHandlingItems(true);return _this}_createClass(ShellOrganization,[{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){if(this.tagName==='CORAL-SHELL-ORGANIZATION'){var item=event.target;this._validateSelection(item)}}},{key:"_onItemAdded",value:function _onItemAdded(item){this._moveItems();this._validateSelection(item)}},{key:"_onItemRemoved",value:function _onItemRemoved(item){this._setParent();this._validateSelection(item)}},{key:"_validateSelection",value:function _validateSelection(item){var selection=this.items._getAllSelected();var selectionCount=selection.length;if(selectionCount>1){for(var i=0;i<selectionCount;i+=1){if(selection[i]!==item){this._preventTriggeringEvents=true;selection[i].removeAttribute('selected')}}this._preventTriggeringEvents=false}this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){this.trigger("".concat(this.tagName.toLowerCase(),":change"),{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"_moveItems",value:function _moveItems(){var _this2=this;Array.prototype.forEach.call(this.querySelectorAll('coral-shell-suborganization'),function(item){if(!_this2._elements.items.contains(item)){_this2._elements.items.appendChild(item)}})}},{key:"_setParent",value:function _setParent(){var hasChildren=this.items.length!==0;if(hasChildren){this.removeAttribute('role');this.removeAttribute('tabindex')}else{this.setAttribute('role','button');this.setAttribute('tabindex',0)}this.classList.toggle('is-parent',hasChildren)}},{key:"_onClick",value:function _onClick(){if(this.items.length!==0){return}this.selected=true}},{key:"render",value:function render(){_get(_getPrototypeOf(ShellOrganization.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1h);this._moveItems();this.setAttribute('id',this.id||commons.getUID());var items=this.querySelector("#".concat(this.id," > ._coral-Shell-orgSwitcher-subitems"));if(items){items.remove()}var checkmark=this.querySelector("#".concat(this.id," > ._coral-Shell-orgSwitcher-checkmark"));if(checkmark){checkmark.remove()}var frag=document.createDocumentFragment();frag.appendChild(this._elements.checkmark);frag.appendChild(this._elements.items);this.appendChild(frag);this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem;this._setParent()}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-shell-suborganization',container:this._elements.items,onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getLastSelected()}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.setAttribute('aria-selected',this._selected);this.classList.toggle('is-selected',this._selected);this._elements.checkmark.hidden=!this._selected;if(this.items){var selectedItem=this.selectedItem;this.classList.toggle('is-child-selected',selectedItem);if(!this._selected&&selectedItem){selectedItem.removeAttribute('selected')}}this.trigger("".concat(this.tagName.toLowerCase(),":_selectedchanged"))}},{key:"name",get:function get(){return this._name||''},set:function set(value){this._name=transform.string(value);this._reflectAttribute('name',this._name)}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(ShellOrganization),"observedAttributes",this).concat(['name','selected'])}}]);return ShellOrganization}(List.Item);var CLASSNAME$1i='_coral-Shell-orgSwitcher-subitem';var ShellSuborganization=function(_ShellOrganization){_inherits(ShellSuborganization,_ShellOrganization);var _super=_createSuper(ShellSuborganization);function ShellSuborganization(){_classCallCheck(this,ShellSuborganization);return _super.apply(this,arguments)}_createClass(ShellSuborganization,[{key:"render",value:function render(){_get(_getPrototypeOf(ShellSuborganization.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1i);this._elements.icon.size=Icon.size.SMALL;this.setAttribute('role','button');this.setAttribute('tabindex',0)}}]);return ShellSuborganization}(ShellOrganization);commons.extend(strings,{'coral-component-shell-help':helpTranslations,'coral-component-shell-orgswitcher':orgSwitcherTranslations});commons._define('coral-shell-header',ShellHeader);commons._define('coral-shell-homeanchor',ShellHomeAnchor,{extends:'a'});commons._define('coral-shell-help-item',ShellHelpItem,{extends:'a'});commons._define('coral-shell-help',ShellHelp);commons._define('coral-shell-menubar-item',ShellMenuBarItem);commons._define('coral-shell-menubar',ShellMenuBar);commons._define('coral-shell-menu',ShellMenu);commons._define('coral-shell-user',ShellUser);commons._define('coral-shell-workspace',ShellWorkspace,{extends:'a'});commons._define('coral-shell-workspaces',ShellWorkspaces);commons._define('coral-shell-solution',ShellSolution,{extends:'a'});commons._define('coral-shell-solutions',ShellSolutions);commons._define('coral-shell-solutionswitcher',ShellSolutionSwitcher);commons._define('coral-shell-suborganization',ShellSuborganization);commons._define('coral-shell-organization',ShellOrganization);commons._define('coral-shell-orgswitcher',ShellOrgSwitcher);commons._define('coral-shell',Shell);Shell.Content=ShellContent;Shell.Header=ShellHeader;Shell.HomeAnchor=ShellHomeAnchor;Shell.HomeAnchor.Label=ShellHomeAnchorLabel;Shell.Help=ShellHelp;Shell.Help.Item=ShellHelpItem;Shell.Help.Separator=ShellHelpSeparator;Shell.Menu=ShellMenu;Shell.MenuBar=ShellMenuBar;Shell.MenuBar.Item=ShellMenuBarItem;Shell.User=ShellUser;Shell.User.Content=ShellUserContent;Shell.User.Footer=ShellUserFooter;Shell.User.Heading=ShellUserHeading;Shell.User.Name=ShellUserName;Shell.User.Subheading=ShellUserSubheading;Shell.Workspaces=ShellWorkspaces;Shell.Workspace=ShellWorkspace;Shell.SolutionSwitcher=ShellSolutionSwitcher;Shell.Solutions=ShellSolutions;Shell.Solutions.Header=ShellSolutionsHeader;Shell.Solution=ShellSolution;Shell.Solution.Label=ShellSolutionLabel;Shell.OrgSwitcher=ShellOrgSwitcher;Shell.OrgSwitcher.Footer=ShellOrgSwitcherFooter;Shell.Organization=ShellOrganization;Shell.Suborganization=ShellSuborganization;var CLASSNAME$1j='_coral-SideNav';var isLevel=function isLevel(node){return node.nodeName==='CORAL-SIDENAV-LEVEL'};var isHeading=function isHeading(node){return node.nodeName==='CORAL-SIDENAV-HEADING'};var isItem=function isItem(node){return node.nodeName==='A'&&node.getAttribute('is')==='coral-sidenav-item'};var variant$j={DEFAULT:'default',MULTI_LEVEL:'multilevel'};var SideNav=function(_BaseComponent){_inherits(SideNav,_BaseComponent);var _super=_createSuper(SideNav);function SideNav(){var _this;_classCallCheck(this,SideNav);_this=_super.call(this);_this._delegateEvents({'click a[is="coral-sidenav-item"]':'_onItemClick','capture:focus a[is="coral-sidenav-item"].focus-ring':'_onItemFocusIn','capture:blur a[is="coral-sidenav-item"]':'_onItemFocusOut','coral-sidenav-item:_selectedchanged':'_onItemSelectedChanged'});_this._oldSelection=null;_this._levels=_this.getElementsByTagName('coral-sidenav-level');_this._headings=_this.getElementsByTagName('coral-sidenav-heading');_this.items._startHandlingItems(true);_this._observer=new MutationObserver(_this._handleMutations.bind(_assertThisInitialized(_this)));_this._observer.observe(_assertThisInitialized(_this),{childList:true,subtree:true});return _this}_createClass(SideNav,[{key:"_onItemClick",value:function _onItemClick(event){var item=event.matchedTarget;if(!item.selected){item.selected=true}}},{key:"_onItemFocusIn",value:function _onItemFocusIn(event){var item=event.matchedTarget;item._elements.container.classList.add('focus-ring')}},{key:"_onItemFocusOut",value:function _onItemFocusOut(event){var item=event.matchedTarget;item._elements.container.classList.remove('focus-ring')}},{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_validateSelection",value:function _validateSelection(item){var _this2=this;var selectedItems=this.items._getAllSelected();item=item||selectedItems[selectedItems.length-1];if(item&&item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}this._expandLevels();this._triggerChangeEvent()}},{key:"_expandLevels",value:function _expandLevels(){var selectedItem=this.selectedItem;if(selectedItem){var level=selectedItem.closest('coral-sidenav-level');while(level){level.setAttribute('_expanded','on');var prev=level.previousElementSibling;if(prev&&prev.matches('a[is="coral-sidenav-item"]')){prev.setAttribute('aria-expanded','true')}level=level.parentNode&&level.parentNode.closest('coral-sidenav-level')}level=selectedItem.nextElementSibling;if(level&&level.tagName==='CORAL-SIDENAV-LEVEL'){level.setAttribute('_expanded','on');selectedItem.setAttribute('aria-expanded','true')}}}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){this.trigger('coral-sidenav:change',{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"_syncLevel",value:function _syncLevel(el,isRemoved){if(isRemoved){if(el.id&&isLevel(el)){var item=this.querySelector("a[is=\"coral-sidenav-item\"][aria-controls=\"".concat(el.id,"\"]"));item&&item.removeAttribute('aria-controls')}else if(el.id&&(isHeading(el)||isItem(el))){var level=this.querySelector("coral-sidenav-level[aria-labelledby=\"".concat(el.id,"\"]"));level&&level.removeAttribute('aria-labelledby');this._syncLevel(level)}}else if(isLevel(el)){var prev=el.previousElementSibling;if(prev&&(isHeading(prev)||isItem(prev))){prev.id=prev.id||commons.getUID();el.setAttribute('aria-labelledby',prev.id);if(isItem(prev)){el.id=el.id||commons.getUID();prev.setAttribute('aria-controls',el.id)}}}else if(isHeading(el)||isItem(el)){var next=el.nextElementSibling;if(next&&isLevel(next)){el.id=el.id||commons.getUID();next.setAttribute('aria-labelledby',el.id);if(isItem(el)){next.id=next.id||commons.getUID();el.setAttribute('aria-controls',next.id)}}}}},{key:"_syncHeading",value:function _syncHeading(heading){heading.classList.add("".concat(CLASSNAME$1j,"-heading"));heading.setAttribute('role','heading')}},{key:"_handleMutations",value:function _handleMutations(mutations){var _this3=this;mutations.forEach(function(mutation){for(var i=0;i<mutation.addedNodes.length;i+=1){var addedNode=mutation.addedNodes[i];_this3._syncLevel(addedNode);if(isHeading(addedNode)){_this3._syncHeading(addedNode)}if(isLevel(addedNode)){_this3._validateSelection(addedNode.querySelector('a[is="coral-sidenav-item"][selected]'))}}for(var k=0;k<mutation.removedNodes.length;k+=1){var removedNode=mutation.removedNodes[k];_this3._syncLevel(removedNode,true);if(isLevel(removedNode)){_this3._validateSelection()}}})}},{key:"render",value:function render(){_get(_getPrototypeOf(SideNav.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1j);if(!this._variant){this.variant=variant$j.DEFAULT}for(var i=0;i<this._levels.length;i+=1){this._syncLevel(this._levels[i])}for(var _i=0;_i<this._headings.length;_i+=1){this._syncHeading(this._headings[_i])}this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-sidenav-item',itemBaseTagName:'a',onItemAdded:this._validateSelection,onItemRemoved:this._validateSelection})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getFirstSelected()}},{key:"variant",get:function get(){return this._variant||variant$j.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$j)(value)&&value||variant$j.DEFAULT;this._reflectAttribute('variant',this._variant);this.classList.toggle("".concat(CLASSNAME$1j,"--multiLevel"),this._variant===variant$j.MULTI_LEVEL);if(this.variant===variant$j.MULTI_LEVEL){var selectedItem=this.selectedItem;var ignoreLevel=selectedItem&&selectedItem.parentNode;for(var i=0;i<this._levels.length;i+=1){if(this._levels[i]!==ignoreLevel){this._levels[i].setAttribute('_expanded','off')}}}}}],[{key:"variant",get:function get(){return variant$j}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(SideNav),"observedAttributes",this).concat(['variant'])}}]);return SideNav}(BaseComponent(HTMLElement));var template$T=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["container"]=document.createElement("div");el0.className+=" _coral-SideNav-itemLink";el0.setAttribute("handle","container");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["icon"]=document.createElement("coral-icon");el2.setAttribute("hidden","");el2.className+=" _coral-UIIcon-Star _coral-SideNav-itemIcon";el2.setAttribute("handle","icon");el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);return frag};var CLASSNAME$1k='_coral-SideNav-item';var SideNavItem=function(_BaseLabellable){_inherits(SideNavItem,_BaseLabellable);var _super=_createSuper(SideNavItem);function SideNavItem(){var _thisSuper,_this;_classCallCheck(this,SideNavItem);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-sidenav-item-content')||document.createElement('coral-sidenav-item-content')};template$T.call(_this._elements);_get((_thisSuper=_assertThisInitialized(_this),_getPrototypeOf(SideNavItem.prototype)),"_observeLabel",_thisSuper).call(_thisSuper);return _this}_createClass(SideNavItem,[{key:"render",value:function render(){_get(_getPrototypeOf(SideNavItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1k);var fragment=document.createDocumentFragment();fragment.appendChild(this._elements.container);var content=this._elements.content;if(content.parentNode){content.parentNode.removeChild(content)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&child.getAttribute('handle')!=='container'){content.appendChild(child)}else{this.removeChild(child)}}this.appendChild(fragment);this.content=content}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-sidenav-item-content',insert:function insert(content){this._elements.container.appendChild(content)}})}},{key:"icon",get:function get(){return this._elements.icon.icon},set:function set(value){this._elements.icon.icon=value;this._elements.icon.hidden=this._elements.icon.icon==='';_get(_getPrototypeOf(SideNavItem.prototype),"_toggleIconAriaHidden",this).call(this)}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.classList.toggle('is-selected',this._selected);this.trigger('coral-sidenav-item:_selectedchanged')}},{key:"_contentZones",get:function get(){return{'coral-sidenav-item-label':'content'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(SideNavItem),"observedAttributes",this).concat(['selected','icon'])}}]);return SideNavItem}(BaseLabellable(BaseComponent(HTMLAnchorElement)));var SideNavItemContent=(function(){return document.createElement('coral-sidenav-item-content')});var SideNavHeading=(function(){return document.createElement('coral-sidenav-heading')});var CLASSNAME$1l='_coral-SideNav';var SideNavLevel=function(_BaseComponent){_inherits(SideNavLevel,_BaseComponent);var _super=_createSuper(SideNavLevel);function SideNavLevel(){_classCallCheck(this,SideNavLevel);return _super.apply(this,arguments)}_createClass(SideNavLevel,[{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){var _this=this;if(name==='_expanded'){var isExpanded=value==='on';if(oldValue===value){return}this.classList.toggle('is-expanded',isExpanded);window.requestAnimationFrame(function(){if(_this._animate){commons.transitionEnd(_this,function(){if(isExpanded){_this.style.height=''}else{_this.hidden=true}});if(!isExpanded){_this.style.height="".concat(_this.scrollHeight,"px")}else{_this.hidden=false}var offsetHeight=_this.offsetHeight;_this.style.height=isExpanded?"".concat(_this.scrollHeight,"px"):0}else{_this._animate=true;if(!isExpanded){_this.style.height=0;_this.hidden=true}}})}else{_get(_getPrototypeOf(SideNavLevel.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"render",value:function render(){_get(_getPrototypeOf(SideNavLevel.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1l);this.setAttribute('role','region')}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(SideNavLevel),"observedAttributes",this).concat(['_expanded'])}}]);return SideNavLevel}(BaseComponent(HTMLElement));commons._define('coral-sidenav-level',SideNavLevel);commons._define('coral-sidenav-item',SideNavItem,{extends:'a'});commons._define('coral-sidenav',SideNav,{extends:'nav'});SideNav.Item=SideNavItem;SideNav.Item.Content=SideNavItemContent;SideNav.Heading=SideNavHeading;SideNav.Level=SideNavLevel;var variant$k={DEFAULT:'default',CTA:'cta',SECONDARY:'secondary'};var CLASSNAME$1m='_coral-SplitButton';var SplitButton=function(_BaseComponent){_inherits(SplitButton,_BaseComponent);var _super=_createSuper(SplitButton);function SplitButton(){var _this;_classCallCheck(this,SplitButton);_this=_super.call(this);_this._observer=new MutationObserver(function(){_this._updateLeftVariant();_this._updateInnerButtons();_this._updateInnerButtonsVariant(_this.variant)});_this._observer.observe(_assertThisInitialized(_this),{subtree:true,childList:true});return _this}_createClass(SplitButton,[{key:"_getInnerButtons",value:function _getInnerButtons(){var action=this.querySelector('[coral-splitbutton-action]');var trigger=this.querySelector('[coral-splitbutton-trigger]');return{action:action,trigger:trigger}}},{key:"_updateLeftVariant",value:function _updateLeftVariant(){for(var i=0;i<this.children.length;i+=1){var child=this.children[i];if(child.hasAttribute('coral-splitbutton-trigger')){this.classList.add('_coral-SplitButton--left');return}else if(child.hasAttribute('coral-splitbutton-action')){this.classList.remove('_coral-SplitButton--left');return}}}},{key:"_updateInnerButtonsVariant",value:function _updateInnerButtonsVariant(variant){var _this$_getInnerButton=this._getInnerButtons(),action=_this$_getInnerButton.action,trigger=_this$_getInnerButton.trigger;if(action){action.setAttribute('variant',variant)}if(trigger){trigger.setAttribute('variant',variant)}}},{key:"_updateInnerButtons",value:function _updateInnerButtons(){var _this$_getInnerButton2=this._getInnerButtons(),action=_this$_getInnerButton2.action,trigger=_this$_getInnerButton2.trigger;if(action){action.classList.add('_coral-SplitButton-action')}if(trigger){trigger.classList.add('_coral-SplitButton-trigger');trigger.setAttribute('aria-haspopup','true');if(action){action.id=action.id||commons.getUID();trigger.setAttribute('aria-labelledby',action.id)}}}},{key:"render",value:function render(){_get(_getPrototypeOf(SplitButton.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1m);this.setAttribute('role','group');if(!this._variant){this.variant=variant$k.DEFAULT}this._updateLeftVariant();this._updateInnerButtons()}},{key:"variant",get:function get(){return this._variant||variant$k.DEFAULT},set:function set(value){value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$k)(value)&&value||variant$k.DEFAULT;this._reflectAttribute('variant',this._variant);this._updateInnerButtonsVariant(this._variant)}}],[{key:"variant",get:function get(){return variant$k}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(SplitButton),"observedAttributes",this).concat(['variant'])}}]);return SplitButton}(BaseComponent(HTMLElement));commons._define('coral-splitbutton',SplitButton);var variant$l={NEUTRAL:'neutral',ERROR:'error',WARNING:'warning',SUCCESS:'success',INFO:'info'};var color$1={DEFAULT:'',CELERY:'celery',YELLOW:'yellow',FUCHSIA:'fuchsia',INDIGO:'indigo',SEA_FOAM:'seafoam',CHARTREUSE:'chartreuse',MAGENTA:'magenta',PURPLE:'purple'};var CLASSNAME$1n='_coral-StatusLight';var variantMapping={SUCCESS:'positive',ERROR:'negative',WARNING:'notice'};var ALL_VARIANT_CLASSES$b=[];for(var variantValue$9 in variant$l){ALL_VARIANT_CLASSES$b.push("".concat(CLASSNAME$1n,"--").concat(variantMapping[variantValue$9]||variant$l[variantValue$9]))}var ALL_COLOR_CLASSES$1=[];for(var colorValue$1 in color$1){ALL_COLOR_CLASSES$1.push("".concat(CLASSNAME$1n,"--").concat(color$1[colorValue$1]))}var Status=function(_BaseComponent){_inherits(Status,_BaseComponent);var _super=_createSuper(Status);function Status(){var _this;_classCallCheck(this,Status);_this=_super.call(this);_this._elements={label:_this.querySelector('coral-status-label')||document.createElement('coral-status-label')};return _this}_createClass(Status,[{key:"render",value:function render(){_get(_getPrototypeOf(Status.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1n);if(!this._variant){this.variant=variant$l.NEUTRAL}if(!this._color){this.color=color$1.DEFAULT}var label=this._elements.label;if(!label.parentNode){while(this.firstChild){label.appendChild(this.firstChild)}}this.label=label}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled)}},{key:"variant",get:function get(){return this._variant||variant$l.NEUTRAL},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$l)(value)&&value||variant$l.NEUTRAL;this._reflectAttribute('variant',this._variant);(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$b);this.classList.add("".concat(CLASSNAME$1n,"--").concat(variantMapping[this._variant.toUpperCase()]||this._variant))}},{key:"color",get:function get(){return this._color||color$1.DEFAULT},set:function set(value){var _this$classList2;value=transform.string(value).toLowerCase();this._color=validate.enumeration(color$1)(value)&&value||color$1.DEFAULT;this._reflectAttribute('color',this._color);(_this$classList2=this.classList).remove.apply(_this$classList2,ALL_COLOR_CLASSES$1);if(this._color!==color$1.DEFAULT){this.classList.add("".concat(CLASSNAME$1n,"--").concat(this._color))}}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-status-label',insert:function insert(label){this.appendChild(label)}})}},{key:"_contentZones",get:function get(){return{'coral-status-label':'label'}}}],[{key:"variant",get:function get(){return variant$l}},{key:"color",get:function get(){return color$1}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Status),"observedAttributes",this).concat(['variant','color','disabled'])}}]);return Status}(BaseComponent(HTMLElement));var StatusLabel=(function(){return document.createElement('coral-status-label')});commons._define('coral-status',Status);Status.Label=StatusLabel;function getTarget(targetValue){if(targetValue instanceof Node){return targetValue}var newTarget=null;if(typeof targetValue==='string'&&targetValue.trim()!==''){newTarget=document.querySelector(targetValue)}return newTarget}var interaction$4={ON:'on',OFF:'off'};var size$7={SMALL:'S',LARGE:'L'};var CLASSNAME$1o='_coral-Steplist';var StepList=function(_BaseComponent){_inherits(StepList,_BaseComponent);var _super=_createSuper(StepList);function StepList(){var _this;_classCallCheck(this,StepList);_this=_super.call(this);_this._delegateEvents({'click > coral-step > [handle="link"]':'_onStepClick','capture:focus > coral-step':'_onStepMouseEnter','capture:mouseenter > coral-step > [handle="link"]':'_onStepMouseEnter','capture:blur > coral-step':'_onStepMouseLeave','capture:mouseleave > coral-step > [handle="link"]':'_onStepMouseLeave','key:enter > coral-step > [handle="link"]':'_onStepKeyboardSelect','key:space > coral-step > [handle="link"]':'_onStepKeyboardSelect','key:home > coral-step > [handle="link"]':'_onHomeKey','key:end > coral-step > [handle="link"]':'_onEndKey','key:pagedown > coral-step > [handle="link"]':'_selectNextItem','key:right > coral-step > [handle="link"]':'_selectNextItem','key:down > coral-step > [handle="link"]':'_selectNextItem','key:pageup > coral-step > [handle="link"]':'_selectPreviousItem','key:left > coral-step > [handle="link"]':'_selectPreviousItem','key:up > coral-step > [handle="link"]':'_selectPreviousItem','coral-step:_selectedchanged':'_onItemSelectedChanged'});_this._oldSelection=null;_this.items._startHandlingItems(true);return _this}_createClass(StepList,[{key:"_syncItemTabIndex",value:function _syncItemTabIndex(item){item._syncTabIndex(this.interaction===interaction$4.ON)}},{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();var item=event.target;this._syncItemTabIndex(item);this._validateSelection(item)}},{key:"_validateSelection",value:function _validateSelection(item){var selection=this.items._getAllSelected();var selectionCount=selection.length;if(selectionCount===0){var selectable=this.items._getFirstSelectable();if(selectable){selectable.setAttribute('selected','')}}else if(selectionCount>1){item=item||selection[selection.length-1];for(var i=0;i<selectionCount;i+=1){if(selection[i]!==item){this._preventTriggeringEvents=true;selection[i].removeAttribute('selected')}}this._preventTriggeringEvents=false}this._setStateClasses();this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){this.trigger('coral-steplist:change',{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"_setStateClasses",value:function _setStateClasses(){var selectedItemIndex=Infinity;this.items.getAll().forEach(function(item,index){if(item.hasAttribute('selected')){selectedItemIndex=index}item.classList.toggle('is-complete',index<selectedItemIndex);if(!item._elements){return}var accessibilityLabel=i18n.get('not completed: ');if(index<selectedItemIndex){accessibilityLabel=i18n.get('completed: ')}else if(index===selectedItemIndex){accessibilityLabel=i18n.get('current: ')}item._elements.accessibilityLabel.innerHTML=accessibilityLabel})}},{key:"_onStepKeyboardSelect",value:function _onStepKeyboardSelect(event){if(this.interaction===interaction$4.ON){event.preventDefault();event.stopPropagation();var item=event.matchedTarget.closest('coral-step');this._selectAndFocusItem(item);this._trackEvent('click','coral-steplist-item',event,item)}}},{key:"_onStepClick",value:function _onStepClick(event){if(this.interaction===interaction$4.ON){event.preventDefault();event.stopPropagation();var item=event.matchedTarget.closest('coral-step');if(item.disabled){return}this._selectAndFocusItem(item);this._trackEvent('click','coral-steplist-item',event,item)}}},{key:"_onStepMouseEnter",value:function _onStepMouseEnter(){if(this.size===size$7.SMALL){var step=event.target.closest('coral-step');if(step._elements.label.innerHTML.trim()!==''){step._elements.overlay.content.innerHTML=step._elements.label.innerHTML;step._elements.overlay.open=true}}}},{key:"_onStepMouseLeave",value:function _onStepMouseLeave(event){if(this.size===size$7.SMALL){var step=event.target.closest('coral-step');step._elements.overlay.open=false}}},{key:"_onHomeKey",value:function _onHomeKey(event){if(this.interaction===interaction$4.ON){event.preventDefault();var item=this.items._getFirstSelectable();this._selectAndFocusItem(item)}}},{key:"_onEndKey",value:function _onEndKey(event){if(this.interaction===interaction$4.ON){event.preventDefault();var item=this.items._getLastSelectable();this._selectAndFocusItem(item)}}},{key:"_selectNextItem",value:function _selectNextItem(event){if(this.interaction===interaction$4.ON){event.preventDefault();this.next()}}},{key:"_selectPreviousItem",value:function _selectPreviousItem(event){if(this.interaction===interaction$4.ON){event.preventDefault();this.previous()}}},{key:"_selectAndFocusItem",value:function _selectAndFocusItem(item){if(item){item.setAttribute('selected','');item.focus()}}},{key:"next",value:function next(){var item=this.selectedItem;if(item){item=this.items._getNextSelectable(item);this._selectAndFocusItem(item)}}},{key:"previous",value:function previous(){var item=this.selectedItem;if(item){item=this.items._getPreviousSelectable(item);this._selectAndFocusItem(item)}}},{key:"render",value:function render(){_get(_getPrototypeOf(StepList.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1o);if(!this._interaction){this.interaction=interaction$4.OFF}if(!this._size){this.size=size$7.LARGE}this.setAttribute('role','list');if(!this.hasAttribute('aria-label')&&!this.hasAttribute('aria-labelledby')){this.setAttribute('aria-label',i18n.get('Step List'))}this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-step',onItemAdded:this._validateSelection,onItemRemoved:this._validateSelection})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getLastSelected()}},{key:"target",get:function get(){return this._target||null},set:function set(value){var _this2=this;if(value===null||typeof value==='string'||value instanceof Node){this._target=value;window.requestAnimationFrame(function(){var realTarget=getTarget(_this2._target);if(realTarget){var stepItems=_this2.items.getAll();var panelItems=realTarget.items?realTarget.items.getAll():realTarget.children;var maxItems=Math.max(stepItems.length,panelItems.length);var step;var panel;for(var i=0;i<maxItems;i+=1){step=stepItems[i];panel=panelItems[i];if(step&&step.target&&step.target.trim()!==''){continue}if(panel){panel.setAttribute('role','region')}if(step&&panel){step.id=step.id||commons.getUID();panel.id=panel.id||commons.getUID();step.setAttribute('aria-controls',panel.id);panel.setAttribute('aria-labelledby',step.id)}else if(step){step.removeAttribute('aria-controls')}else{panel.removeAttribute('aria-labelledby')}}}})}}},{key:"size",get:function get(){return this._size||size$7.LARGE},set:function set(value){var _this3=this;value=transform.string(value).toUpperCase();this._size=validate.enumeration(size$7)(value)&&value||size$7.LARGE;this._reflectAttribute('size',this._size);this.classList.toggle("".concat(CLASSNAME$1o,"--small"),this._size===size$7.SMALL);if(!this.items.length){return}var _syncItemLabelled=function _syncItemLabelled(){var isSmall=_this3.size===size$7.SMALL;var steps=_this3.items.getAll();var stepsCount=steps.length;for(var i=0;i<stepsCount;i+=1){var step=steps[i];var label=step._elements.label;if(!step.labelled&&label.textContent.length){label.classList.toggle('u-coral-screenReaderOnly',isSmall);label.style.display=isSmall?'block':''}}};var lastItem=this.items.last();if(typeof lastItem._syncTabIndex==='function'){_syncItemLabelled()}else{commons.ready(lastItem,_syncItemLabelled)}}},{key:"interaction",get:function get(){return this._interaction||interaction$4.OFF},set:function set(value){var _this4=this;value=transform.string(value).toLowerCase();this._interaction=validate.enumeration(interaction$4)(value)&&value||interaction$4.OFF;this._reflectAttribute('interaction',this._interaction);var isInteractive=this._interaction===interaction$4.ON;this.classList.toggle("".concat(CLASSNAME$1o,"--interactive"),isInteractive);if(!this.items.length){return}var _syncItemProps=function _syncItemProps(){var steps=_this4.items.getAll();var stepsCount=steps.length;for(var i=0;i<stepsCount;i+=1){steps[i]._syncTabIndex(isInteractive);steps[i]._syncSizeAndCurrentIndex(i+1,stepsCount)}};var lastItem=this.items.last();if(typeof lastItem._syncTabIndex==='function'){_syncItemProps()}else{commons.ready(lastItem,_syncItemProps)}}}],[{key:"size",get:function get(){return size$7}},{key:"interaction",get:function get(){return interaction$4}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(StepList),"observedAttributes",this).concat(['target','size','interaction'])}}]);return StepList}(BaseComponent(HTMLElement));var template$U=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["link"]=document.createElement("a");el0.className+=" _coral-Steplist-link";el0.setAttribute("handle","link");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["accessibilityLabel"]=document.createElement("span");el2.className+=" u-coral-screenReaderOnly _coral-Steplist-accessibilityLabel";el2.setAttribute("handle","accessibilityLabel");el0.appendChild(el2);var el3=document.createTextNode("\n  ");el0.appendChild(el3);var el4=this["stepMarkerContainer"]=document.createElement("span");el4.className+=" _coral-Steplist-markerContainer";el4.setAttribute("handle","stepMarkerContainer");el4.setAttribute("role","img");el4.setAttribute("aria-hidden","true");var el5=document.createTextNode("\n    ");el4.appendChild(el5);var el6=document.createElement("span");el6.className+=" _coral-Steplist-marker";el4.appendChild(el6);var el7=document.createTextNode("\n  ");el4.appendChild(el7);el0.appendChild(el4);var el8=document.createTextNode("\n  ");el0.appendChild(el8);var el9=this["overlay"]=document.createElement("coral-tooltip");el9.setAttribute("tracking","off");el9.setAttribute("smart","");el9.setAttribute("focusonshow","off");el9.setAttribute("handle","overlay");el9.setAttribute("placement","top");el9.setAttribute("variant","inspect");el9.setAttribute("interaction","off");el9.setAttribute("breadthoffset","1");el0.appendChild(el9);var el10=document.createTextNode("\n");el0.appendChild(el10);frag.appendChild(el0);var el11=document.createTextNode("\n");frag.appendChild(el11);var el12=this["line"]=document.createElement("span");el12.className+=" _coral-Steplist-segment";el12.setAttribute("handle","line");frag.appendChild(el12);var el13=document.createTextNode("\n");frag.appendChild(el13);return frag};var CLASSNAME$1p='_coral-Steplist-item';var Step=function(_BaseComponent){_inherits(Step,_BaseComponent);var _super=_createSuper(Step);function Step(){var _this;_classCallCheck(this,Step);_this=_super.call(this);_this._elements={label:_this.querySelector('coral-step-label')||document.createElement('coral-step-label')};template$U.call(_this._elements);return _this}_createClass(Step,[{key:"_isHybrid",value:function _isHybrid(){var label=this.label;var maxWidth=this.label.clientWidth;label.style.position='relative';label.style.whiteSpace='inherit';label.style.display='inline';this._labelIsHidden=label.getBoundingClientRect().width>maxWidth;label.style.position='';label.style.whiteSpace='';label.style.display=''}},{key:"focus",value:function focus(){this._elements.link.focus()}},{key:"blur",value:function blur(){this._elements.link.blur()}},{key:"_syncTabIndex",value:function _syncTabIndex(isInteractive){this.removeAttribute('tabindex');if(isInteractive){this._elements.link.setAttribute('role','link');if(this.disabled){this._elements.link.removeAttribute('tabindex');this._elements.link.setAttribute('aria-disabled',true)}else{this._elements.link.removeAttribute('aria-disabled');this._elements.link.setAttribute('tabindex',this.selected?'0':'-1')}}else{this._elements.link.removeAttribute('tabindex');this._elements.link.removeAttribute('role')}}},{key:"_syncSizeAndCurrentIndex",value:function _syncSizeAndCurrentIndex(currentStep,totalSteps){this.setAttribute('aria-setsize',totalSteps);this.setAttribute('aria-posinset',currentStep)}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(Step.prototype),"connectedCallback",this).call(this);var overlay=this._elements.overlay;overlay.removeAttribute('open');if(overlay._parent){overlay._parent.appendChild(overlay)}}},{key:"render",value:function render(){_get(_getPrototypeOf(Step.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1p);this.setAttribute('id',this.id||commons.getUID());this.setAttribute('role','listitem');var frag=document.createDocumentFragment();this._elements.link=this.querySelector('[handle="link"]')||this._elements.link;this._elements.accessibilityLabel=this.querySelector('[handle="accessibilityLabel"]')||this._elements.accessibilityLabel;this._elements.stepMarkerContainer=this.querySelector('[handle="stepMarkerContainer"]')||this._elements.stepMarkerContainer;this._elements.line=this.querySelector('[handle="line"]')||this._elements.line;this._elements.overlay=this.querySelector('coral-tooltip')||this._elements.overlay;frag.appendChild(this._elements.link);this._elements.link.appendChild(this._elements.stepMarkerContainer);this._elements.link.appendChild(this._elements.overlay);frag.appendChild(this._elements.line);var templateHandleNames=['link','accessibilityLabel','stepMarkerContainer','overlay','line'];var label=this._elements.label;if(label.parentNode){label.remove()}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){label.appendChild(child)}else{this.removeChild(child)}}this._elements.overlay.target=this._elements.stepMarkerContainer;this.appendChild(frag);this.label=label;this._isHybrid();var stepList=this.parentElement;if(stepList){this._syncTabIndex(stepList.interaction===StepList.interaction.ON)}}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(Step.prototype),"disconnectedCallback",this).call(this);var overlay=this._elements.overlay;if(!this.contains(overlay)){overlay._parent=overlay._repositioned?document.body:this;overlay.remove()}}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-step-label',insert:function insert(label){label.classList.add('_coral-Steplist-label');this._elements.link.insertBefore(label,this._elements.stepMarkerContainer)}})}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.classList.toggle('is-selected',this.selected);this.removeAttribute('aria-selected');if(this.selected){this._elements.link.setAttribute('aria-current','step')}else{this._elements.link.removeAttribute('aria-current')}var stepList=this.parentElement;var realTarget;if(this._selected){realTarget=getTarget(this.target);if(realTarget){realTarget.setAttribute('selected','')}else if(stepList&&stepList.target){realTarget=getTarget(stepList.target);if(realTarget){var currentIndex=stepList.items.getAll().indexOf(this);var targetItem=(realTarget.items?realTarget.items.getAll():realTarget.children)[currentIndex];if(targetItem){targetItem.setAttribute('selected','')}}}}this.trigger('coral-step:_selectedchanged')}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.classList.toggle('is-disabled',this.disabled);var stepList=this.parentElement;if(stepList){this._syncTabIndex(stepList.interaction===StepList.interaction.ON)}}},{key:"labelled",get:function get(){return this._labelled||this.getAttribute('labelled')||this._elements.stepMarkerContainer.getAttribute('aria-label')||''},set:function set(value){this._labelled=transform.string(value);this._reflectAttribute('labelled',this._labelled);if(value){this._elements.stepMarkerContainer.setAttribute('aria-label',this.labelled);this._elements.stepMarkerContainer.removeAttribute('aria-hidden')}else{this._elements.stepMarkerContainer.removeAttribute('aria-label');this._elements.stepMarkerContainer.setAttribute('aria-hidden','true')}}},{key:"target",get:function get(){return this._target||null},set:function set(value){if(value===null||typeof value==='string'||value instanceof Node){this._target=value;var realTarget=getTarget(this._target);if(realTarget){this.setAttribute('aria-controls',realTarget.id);realTarget.setAttribute('aria-labelledby',this.id)}}}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?(this.label||this).textContent.replace(/\s{2,}/g,' ').trim():this._trackingElement},set:function set(value){_set(_getPrototypeOf(Step.prototype),"trackingElement",value,this,true)}},{key:"_contentZones",get:function get(){return{'coral-step-label':'label'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Step),"observedAttributes",this).concat(['selected','target','disabled','labelled'])}}]);return Step}(BaseComponent(HTMLElement));var StepLabel=(function(){return document.createElement('coral-step-label')});var translations$j={"en-US":{"Step List":"Step List","completed: ":"completed: ","current: ":"current: ","not completed: ":"not completed: "},"de-DE":{"Step List":"Schrittliste","completed: ":"abgeschlossen: ","current: ":"aktuell: ","not completed: ":"nicht abgeschlossen: "},"fr-FR":{"Step List":"Liste des étapes","completed: ":"terminé : ","current: ":"actuel : ","not completed: ":"non terminé : "},"it-IT":{"Step List":"Elenco passi","completed: ":"completato: ","current: ":"corrente: ","not completed: ":"non completato: "},"ja-JP":{"Step List":"手順リスト","completed: ":"完了: ","current: ":"現在: ","not completed: ":"未完了: "},"es-ES":{"Step List":"Lista de pasos","completed: ":"completado: ","current: ":"actual: ","not completed: ":"no completado: "},"ko-KR":{"Step List":"단계 목록","completed: ":"완료됨: ","current: ":"현재: ","not completed: ":"미완료: "},"zh-CN":{"Step List":"步骤列表","completed: ":"已完成: ","current: ":"当前: ","not completed: ":"未完成: "},"zh-TW":{"Step List":"步驟清單","completed: ":"已完成: ","current: ":"目前: ","not completed: ":"未完成: "},"pt-BR":{"Step List":"Lista de passos","completed: ":"concluído: ","current: ":"atual: ","not completed: ":"não concluído: "},"nl-NL":{"Step List":"Stappenlijst","completed: ":"voltooid: ","current: ":"huidige: ","not completed: ":"niet voltooid: "},"da-DK":{"Step List":"Trin liste","completed: ":"Afsluttet: ","current: ":"aktuelt: ","not completed: ":"Ikke afsluttet: "},"fi-FI":{"Step List":"Vaihe luettelo","completed: ":"Valmis: ","current: ":"nykyinen: ","not completed: ":"Ei valmis: "},"nb-NO":{"Step List":"Trinn liste","completed: ":"fullført: ","current: ":"gjeldende: ","not completed: ":"ikke fullført: "},"sv-SE":{"Step List":"Steg lista","completed: ":"slutförd: ","current: ":"aktuell: ","not completed: ":"inte slutförd: "},"cs-CZ":{"Step List":"Seznam kroků","completed: ":"dokončeno: ","current: ":"aktuální: ","not completed: ":"nedokončeno: "},"pl-PL":{"Step List":"Lista kroków","completed: ":"zakończone: ","current: ":"bieżący: ","not completed: ":"nieukończone: "},"ru-RU":{"Step List":"Список шагов","completed: ":"завершено: ","current: ":"текущий: ","not completed: ":"не завершено: "},"tr-TR":{"Step List":"Adım listesi","completed: ":"tamamlandı: ","current: ":"geçerli: ","not completed: ":"tamamlanmadı: "}};commons.extend(strings,{'coral-component-steplist':translations$j});commons._define('coral-step',Step);commons._define('coral-steplist',StepList);Step.Label=StepLabel;var translations$k={"en-US":{"Select":"Select"},"fr-FR":{"Select":"Sélectionner"},"de-DE":{"Select":"Auswählen"},"it-IT":{"Select":"Seleziona"},"es-ES":{"Select":"Seleccionar"},"pt-BR":{"Select":"Selecionar"},"ja-JP":{"Select":"選択"},"ko-KR":{"Select":"선택"},"zh-CN":{"Select":"选择"},"zh-TW":{"Select":"選取"},"nl-NL":{"Select":"Selecteren"},"da-DK":{"Select":"Vælg"},"fi-FI":{"Select":"Valitse"},"nb-NO":{"Select":"Velg"},"sv-SE":{"Select":"Välj"},"cs-CZ":{"Select":"Vybrat"},"pl-PL":{"Select":"Wybierz"},"ru-RU":{"Select":"Выберите"},"tr-TR":{"Select":"Seç"}};var template$V=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["input"]=document.createElement("input");el0.setAttribute("type","checkbox");el0.setAttribute("handle","input");el0.className+=" _coral-ToggleSwitch-input";el0.id=data_0["commons"]["getUID"]();frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["switch"]=document.createElement("span");el2.setAttribute("handle","switch");el2.className+=" _coral-ToggleSwitch-switch";frag.appendChild(el2);var el3=document.createTextNode("\n");frag.appendChild(el3);var el4=this["labelWrapper"]=document.createElement("label");el4.className+=" _coral-ToggleSwitch-label";el4.setAttribute("for",this["input"]["id"]);el4.setAttribute("handle","labelWrapper");var el5=document.createTextNode("\n  ");el4.appendChild(el5);var el6=this["screenReaderOnly"]=document.createElement("span");el6.className+=" u-coral-screenReaderOnly";el6.setAttribute("handle","screenReaderOnly");el6.textContent=data_0["i18n"]["get"]('Select');el4.appendChild(el6);var el7=document.createTextNode("\n");el4.appendChild(el7);frag.appendChild(el4);var el8=document.createTextNode("\n");frag.appendChild(el8);return frag};var CLASSNAME$1q='_coral-ToggleSwitch';var Switch=function(_BaseFormField){_inherits(Switch,_BaseFormField);var _super=_createSuper(Switch);function Switch(){var _this;_classCallCheck(this,Switch);_this=_super.call(this);_this._delegateEvents(commons.extend(_this._events,{'capture:focus ._coral-ToggleSwitch-input':'_onFocus','capture:blur ._coral-ToggleSwitch-input':'_onBlur'}));_this._elements={label:_this.querySelector('coral-switch-label')||document.createElement('coral-switch-label')};template$V.call(_this._elements,{commons:commons,i18n:i18n});_this._labellableElement=_this._elements.input;_this._observer=new MutationObserver(_this._hideLabelIfEmpty.bind(_assertThisInitialized(_this)));_this._observer.observe(_this._elements.labelWrapper,{childList:true,characterData:true,subtree:true});return _this}_createClass(Switch,[{key:"_hideLabelIfEmpty",value:function _hideLabelIfEmpty(){var label=this._elements.label;var hiddenValue=!(label.children.length===0&&label.textContent.replace(/\s*/g,'')==='');this._elements.labelWrapper.style.margin=!hiddenValue?'0':'';this._elements.screenReaderOnly.hidden=hiddenValue||this.labelled}},{key:"_onFocus",value:function _onFocus(){this._elements.input.classList.add('focus-ring')}},{key:"_onBlur",value:function _onBlur(){this._elements.input.classList.remove('focus-ring')}},{key:"clear",value:function clear(){this.checked=false}},{key:"reset",value:function reset(){this.checked=this._initialCheckedState}},{key:"render",value:function render(){_get(_getPrototypeOf(Switch.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1q);var frag=document.createDocumentFragment();var templateHandleNames=['input','switch','labelWrapper'];frag.appendChild(this._elements.input);frag.appendChild(this._elements.switch);frag.appendChild(this._elements.labelWrapper);var label=this._elements.label;if(label&&label.parentNode){label.parentNode.removeChild(label)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){label.appendChild(child)}else{this.removeChild(child)}}this.appendChild(frag);this.label=label;this._initialCheckedState=this.checked;this._hideLabelIfEmpty()}},{key:"checked",get:function get(){return this._checked||false},set:function set(value){this._checked=transform.booleanAttr(value);this._reflectAttribute('checked',this._checked);this._elements.input.checked=this._checked}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-switch-label',insert:function insert(label){this._elements.labelWrapper.appendChild(label)}})}},{key:"name",get:function get(){return this._elements.input.name},set:function set(value){this._reflectAttribute('name',value);this._elements.input.name=value}},{key:"value",get:function get(){return this._elements.input.value||'on'},set:function set(value){this._elements.input.value=value}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this._elements.input.disabled=this._disabled}},{key:"required",get:function get(){return this._required||false},set:function set(value){this._required=transform.booleanAttr(value);this._reflectAttribute('required',this._required);this._elements.input.required=this._required}},{key:"readOnly",get:function get(){return this._readOnly||false},set:function set(value){this._readOnly=transform.booleanAttr(value);this._reflectAttribute('readonly',this._readOnly);this.classList.toggle('is-readOnly',this._readOnly);this._elements.input.tabIndex=this._readOnly?-1:0}},{key:"labelled",get:function get(){return _get(_getPrototypeOf(Switch.prototype),"labelled",this)},set:function set(value){_set(_getPrototypeOf(Switch.prototype),"labelled",value,this,true);this._hideLabelIfEmpty()}},{key:"_componentTargetProperty",get:function get(){return 'checked'}},{key:"_eventTargetProperty",get:function get(){return 'checked'}},{key:"_contentZones",get:function get(){return{'coral-switch-label':'label'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Switch),"observedAttributes",this).concat(['checked'])}}]);return Switch}(BaseFormField(BaseComponent(HTMLElement)));var SwitchLabel=(function(){return document.createElement('coral-switch-label')});commons.extend(strings,{'coral-component-switch':translations$k});commons._define('coral-switch',Switch);Switch.Label=SwitchLabel;var translations$l={"en-US":{"Select":"Select","Select All":"Select All","sorted by column {0}, in ascending order":"sorted by column {0} in ascending order","sorted by column {0}, in descending order":"sorted by column {0} in descending order",", checked":", checked",", unchecked":", unchecked"},"de-DE":{"Select":"Auswählen","Select All":"Alles auswählen","sorted by column {0}, in ascending order":"Sortiert nach Spalte {0} in aufsteigender Reihenfolge","sorted by column {0}, in descending order":"Sortiert nach Spalte {0} in absteigender Reihenfolge",", checked":", markiert",", unchecked":", nicht markiert"},"fr-FR":{"Select":"Sélectionner","Select All":"Sélectionner tout","sorted by column {0}, in ascending order":"Trié par colonne {0} dans l’ordre ascendant","sorted by column {0}, in descending order":"Trié par colonne {0} dans l’ordre décroissant",", checked":", cochée",", unchecked":", pas cochée"},"it-IT":{"Select":"Seleziona","Select All":"Seleziona tutto","sorted by column {0}, in ascending order":"Ordinato per colonna {0} in ordine crescente","sorted by column {0}, in descending order":"Ordinato per colonna {0} in ordine decrescente",", checked":", selezionata",", unchecked":", non selezionata"},"ja-JP":{"Select":"選択","Select All":"すべてを選択","sorted by column {0}, in ascending order":"列 {0} で昇順で並べ替え","sorted by column {0}, in descending order":"列 {0} で降順に並べ替え",", checked":"、チェック",", unchecked":"、未チェック"},"es-ES":{"Select":"Seleccionar","Select All":"Seleccionar todos","sorted by column {0}, in ascending order":"Ordenado por columna {0} en orden ascendente","sorted by column {0}, in descending order":"Ordenado por columna {0} en orden descendente",", checked":", marcada",", unchecked":", desmarcada"},"ko-KR":{"Select":"선택","Select All":"모두 선택","sorted by column {0}, in ascending order":"오름차순으로 열 {0} 정렬","sorted by column {0}, in descending order":"내림차순으로 {0} 열별로 정렬",", checked":", 선택됨",", unchecked":", 선택되지 않은"},"zh-CN":{"Select":"选择","Select All":"全选","sorted by column {0}, in ascending order":"按列{0}按升序排序r","sorted by column {0}, in descending order":"按列{0}按降序排序",", checked":"，选中",", unchecked":"，未选中"},"zh-TW":{"Select":"選取","Select All":"全選","sorted by column {0}, in ascending order":"按列{0}按昇冪排序","sorted by column {0}, in descending order":"按列{0}按降冪排序",", checked":"，選中",", unchecked":"，未選中"},"pt-BR":{"Select":"Selecionar","Select All":"Selecionar tudo","sorted by column {0}, in ascending order":"Classificado por coluna {0} em ordem ascendente","sorted by column {0}, in descending order":"Classificado por coluna {0} em ordem descendente",", checked":", marcada",", unchecked":", desmarcada"},"nl-NL":{"Select":"Selecteren","Select All":"Alles selecteren","sorted by column {0}, in ascending order":"Gesorteerd op kolom {0} in oplopende volgorde","sorted by column {0}, in descending order":"Gesorteerd op kolom {0} in aflopende volgorde",", checked":", geselecteerd",", unchecked":", neit geselecteerd"},"da-DK":{"Select":"Vælg","Select All":"Vælg alle","sorted by column {0}, in ascending order":"Sorteret efter kolonne {0} i stigende rækkefølge","sorted by column {0}, in descending order":"Sorteret efter kolonne {0} i faldende rækkefølge",", checked":", valgte",", unchecked":", ikke valgt"},"fi-FI":{"Select":"Valitse","Select All":"Valitse kaikki","sorted by column {0}, in ascending order":"Lajiteltu sarakkeen mukaan {0} nousevaan järjestykseen","sorted by column {0}, in descending order":"Lajiteltu sarakkeen mukaan {0} laskevassa järjestyksessä",", checked":", valittu",", unchecked":", valittuna"},"nb-NO":{"Select":"Velg","Select All":"Velg alle","sorted by column {0}, in ascending order":"Sortert etter kolonne {0} i stigende rekkefølge","sorted by column {0}, in descending order":"Sortert etter kolonne {0} i synkende rekkefølge",", checked":", valgt",", unchecked":", ikke valgt"},"sv-SE":{"Select":"Markera","Select All":"Markera allt","sorted by column {0}, in ascending order":"Sorterat efter kolumn {0} i stigande ordning","sorted by column {0}, in descending order":"Sorterat efter kolumn {0} i fallande ordning",", checked":", markerad",", unchecked":", avmarkerad"},"cs-CZ":{"Select":"Vybrat","Select All":"Vybrat vše","sorted by column {0}, in ascending order":"Seřazeno podle sloupcových {0} ve vzestupném pořadí","sorted by column {0}, in descending order":"Seřazeno podle sloupcových {0} v sestupném pořadí",", checked":", vybráno",", unchecked":", není vybráno"},"pl-PL":{"Select":"Zaznacz","Select All":"Zaznacz wszystko","sorted by column {0}, in ascending order":"Posortowane według kolumny {0} w porządku rosnącym","sorted by column {0}, in descending order":"Posortowane według kolumny {0} w porządku malejącym",", checked":", zaznaczone",", unchecked":", nie zaznaczone"},"ru-RU":{"Select":"Выбрать","Select All":"Выбрать все","sorted by column {0}, in ascending order":"Сортировка по столбе {0} в порядке возрастания","sorted by column {0}, in descending order":"Сортировка по колонке {0} в порядке убывания",", checked":", выбранный",", unchecked":", неотобранный"},"tr-TR":{"Select":"Seç","Select All":"Tümünü Seç","sorted by column {0}, in ascending order":"Artan sırada {0} sütununa göre sıralanmış","sorted by column {0}, in descending order":"Azalan sırada {0} sütununa göre sıralanmış",", checked":", seçilmiş",", unchecked":", seçilmemiş"}};var isTableHeaderCell=function isTableHeaderCell(node){return node.nodeName==='TH'&&node.getAttribute('is')==='coral-table-headercell'};var isTableCell=function isTableCell(node){return node.nodeName==='TD'&&node.getAttribute('is')==='coral-table-cell'};var isTableRow=function isTableRow(node){return node.nodeName==='TR'&&node.getAttribute('is')==='coral-table-row'};var isTableBody=function isTableBody(node){return node.nodeName==='TBODY'&&node.getAttribute('is')==='coral-table-body'};var getIndexOf=function getIndexOf(el){var parent=el.parentNode;if(!parent){return -1}return Array.prototype.indexOf.call(parent.children,el)};var getSiblingsOf=function getSiblingsOf(el,selector,type){var stack=[];if(!type){['previousElementSibling','nextElementSibling'].forEach(function(direction){var sibling=el;while(sibling[direction]){sibling=sibling[direction];if(sibling.matches(selector)){stack.push(sibling)}}})}else{var direction=type.indexOf('next')===0?'nextElementSibling':'previousElementSibling';if(type.indexOf('Until')!==-1){var matches=function matches(){if(typeof selector==='string'){return el[direction].matches(selector)}return el[direction]===selector};while(el[direction]&&!matches()){stack.push(el=el[direction])}}else if(type.indexOf('All')!==-1){while(el[direction]){el=el[direction];if(el.matches(selector)){stack.push(el);}}}else{var sibling=el[direction];return sibling&&sibling.matches(selector)?sibling:null}}return stack};var listToArray$1=function listToArray(list){var res=[];for(var i=0,listCount=res.length=list.length;i<listCount;i+=1){res[i]=list[i]}return res};var getColumns=function getColumns(colgroup){return listToArray$1(colgroup.querySelectorAll('col[is="coral-table-column"]'))};var getRows=function getRows(sections){var rows=[];sections.forEach(function(section){if(section){rows=rows.concat(listToArray$1(section.querySelectorAll('tr[is="coral-table-row"]')))}});return rows};var getCells=function getCells(row){return listToArray$1(row.querySelectorAll('td[is="coral-table-cell"], th[is="coral-table-headercell"]'))};var getContentCells=function getContentCells(row){return listToArray$1(row.querySelectorAll('td[is="coral-table-cell"]'))};var getHeaderCells=function getHeaderCells(row){return listToArray$1(row.querySelectorAll('th[is="coral-table-headercell"]'))};var getCellByIndex=function getCellByIndex(row,index){return getCells(row).filter(function(cell){return getIndexOf(cell)===index})[0]||null};var divider={NONE:'none',ROW:'row',COLUMN:'column',CELL:'cell'};var alignment={LEFT:'left',CENTER:'center',RIGHT:'right'};var CLASSNAME$1r='_coral-Table-column';var sortableDirection={DEFAULT:'default',ASCENDING:'ascending',DESCENDING:'descending'};var sortableType={ALPHANUMERIC:'alphanumeric',NUMBER:'number',DATE:'date',CUSTOM:'custom'};var TableColumn=function(_BaseComponent){_inherits(TableColumn,_BaseComponent);var _super=_createSuper(TableColumn);function TableColumn(){_classCallCheck(this,TableColumn);return _super.apply(this,arguments)}_createClass(TableColumn,[{key:"_sort",value:function _sort(){var newSortableDirection;if(this.sortableDirection===sortableDirection.DEFAULT){newSortableDirection=sortableDirection.ASCENDING}else if(this.sortableDirection===sortableDirection.ASCENDING){newSortableDirection=sortableDirection.DESCENDING}else if(this.sortableDirection===sortableDirection.DESCENDING){newSortableDirection=sortableDirection.DEFAULT}this.trigger('coral-table-column:_beforecolumnsort',{newSortableDirection:newSortableDirection})}},{key:"_doSort",value:function _doSort(onInitialization){this.trigger('coral-table-column:_sort',{onInitialization:onInitialization,sortableDirection:sortableDirection,sortableType:sortableType})}},{key:"render",value:function render(){_get(_getPrototypeOf(TableColumn.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1r);if(!this._sortableType){this.sortableType=sortableType.ALPHANUMERIC}if(!this._sortableDirection){this.sortableDirection=sortableDirection.DEFAULT}if(!this._alignment){this.alignment=alignment.LEFT}}},{key:"alignment",get:function get(){return this._alignment||alignment.LEFT},set:function set(value){var _this=this;var oldValue=this._alignment;value=transform.string(value).toLowerCase();this._alignment=validate.enumeration(alignment)(value)&&value||alignment.LEFT;this._reflectAttribute('alignment',this._alignment);if(!(typeof oldValue==='undefined'&&this._alignment===alignment.LEFT)){window.requestAnimationFrame(function(){_this.trigger('coral-table-column:_alignmentchanged')})}}},{key:"fixedWidth",get:function get(){return this._fixedWidth||false},set:function set(value){var _this2=this;this._fixedWidth=transform.booleanAttr(value);this._reflectAttribute('fixedwidth',this._fixedWidth);window.requestAnimationFrame(function(){_this2.trigger('coral-table-column:_fixedwidthchanged')})}},{key:"hidden",get:function get(){return this._hidden||false},set:function set(value){var _this3=this;this._hidden=transform.booleanAttr(value);this._reflectAttribute('hidden',this._hidden);window.requestAnimationFrame(function(){_this3.trigger('coral-table-column:_hiddenchanged')})}},{key:"orderable",get:function get(){return this._orderable||false},set:function set(value){var _this4=this;this._orderable=transform.booleanAttr(value);this._reflectAttribute('orderable',this._orderable);window.requestAnimationFrame(function(){_this4.trigger('coral-table-column:_orderablechanged')})}},{key:"sortable",get:function get(){return this._sortable||false},set:function set(value){var _this5=this;this._sortable=transform.booleanAttr(value);this._reflectAttribute('sortable',this._sortable);window.requestAnimationFrame(function(){_this5.trigger('coral-table-column:_sortablechanged')})}},{key:"sortableType",get:function get(){return this._sortableType||sortableType.ALPHANUMERIC},set:function set(value){value=transform.string(value).toLowerCase();this._sortableType=validate.enumeration(sortableType)(value)&&value||sortableType.ALPHANUMERIC;this._reflectAttribute('sortabletype',this._sortableType)}},{key:"sortableDirection",get:function get(){return this._sortableDirection||sortableDirection.DEFAULT},set:function set(value){var _this6=this;value=transform.string(value).toLowerCase();this._sortableDirection=validate.enumeration(sortableDirection)(value)&&value||sortableDirection.DEFAULT;this._reflectAttribute('sortabledirection',this._sortableDirection);if(!this._preventSort){this._doSort();window.requestAnimationFrame(function(){_this6.trigger('coral-table-column:_sortabledirectionchanged')})}}}],[{key:"sortableDirection",get:function get(){return sortableDirection}},{key:"sortableType",get:function get(){return sortableType}},{key:"alignment",get:function get(){return alignment}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(TableColumn),"_attributePropertyMap",this),{fixedwidth:'fixedWidth',sortabletype:'sortableType',sortabledirection:'sortableDirection'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(TableColumn),"observedAttributes",this).concat(['fixedwidth','hidden','alignment','orderable','sortable','sortabletype','sortabledirection'])}}]);return TableColumn}(BaseComponent(HTMLTableColElement));var CLASSNAME$1s='_coral-Table-cell';var TableCell=function(_BaseComponent){_inherits(TableCell,_BaseComponent);var _super=_createSuper(TableCell);function TableCell(){_classCallCheck(this,TableCell);return _super.apply(this,arguments)}_createClass(TableCell,[{key:"_setHandle",value:function _setHandle(handle){var _this=this;requestAnimationFrame(function(){if(!_this.querySelector("[".concat(handle,"]"))){_this.setAttribute(handle,'')}_this._syncAriaSelectedState();_this._syncSelectHandle()})}},{key:"_getHandle",value:function _getHandle(handle){return this.hasAttribute(handle)?this:this.querySelector("[".concat(handle,"]"))}},{key:"_toggleSelectable",value:function _toggleSelectable(selectable){if(selectable){this._setHandle('coral-table-cellselect')}else{this.removeAttribute('coral-table-cellselect');this.selected=false}this._syncAriaSelectedState()}},{key:"_syncAriaSelectedState",value:function _syncAriaSelectedState(){this.classList.toggle('is-selected',this.selected);if(this._getHandle('coral-table-cellselect')){this.setAttribute('aria-selected',this.selected)}else{this.removeAttribute('aria-selected')}}},{key:"_syncSelectHandle",value:function _syncSelectHandle(){var selectHandle=this.querySelector('coral-checkbox');if(selectHandle){selectHandle[this.selected?'setAttribute':'removeAttribute']('checked','')}}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='_selectable'){this._toggleSelectable(value!==null)}else{_get(_getPrototypeOf(TableCell.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"render",value:function render(){_get(_getPrototypeOf(TableCell.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1s);this.id=this.id||commons.getUID()}},{key:"content",get:function get(){return this},set:function set(value){if(_typeof(value)==='object'){for(var prop in value){this[prop]=value[prop]}}}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){if(this.hasAttribute('coral-table-cellselect')&&this.hasAttribute('disabled')||this.querySelector('[coral-table-cellselect][disabled]')){return}this.trigger('coral-table-cell:_beforeselectedchanged');this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.trigger('coral-table-cell:_selectedchanged');this._syncAriaSelectedState();this._syncSelectHandle()}},{key:"value",get:function get(){return this.getAttribute('value')||''},set:function set(value){this.setAttribute('value',transform.string(value))}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(TableCell),"observedAttributes",this).concat(['selected','_selectable'])}}]);return TableCell}(BaseComponent(HTMLTableCellElement));var template$W=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["accessibilityState"]=document.createElement("div");el0.setAttribute("handle","accessibilityState");el0.className+=" u-coral-screenReaderOnly _coral-Table-row-accessibilityState";el0.setAttribute("aria-hidden","true");el0.id=data_0["commons"]["getUID"]();frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var CLASSNAME$1t='_coral-Table-row';var TableRow=function(_BaseComponent){_inherits(TableRow,_BaseComponent);var _super=_createSuper(TableRow);function TableRow(){var _this;_classCallCheck(this,TableRow);_this=_super.call(this);_this._elements={};template$W.call(_this._elements,{commons:commons});_this._oldSelection=[];_this._delegateEvents({'coral-table-cell:_beforeselectedchanged':'_onBeforeCellSelectionChanged','coral-table-cell:_selectedchanged':'_onCellSelectionChanged'});_this._observer=new MutationObserver(_this._handleMutations.bind(_assertThisInitialized(_this)));_this._observer.observe(_assertThisInitialized(_this),{childList:true});return _this}_createClass(TableRow,[{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItems=this.selectedItems;this.trigger('coral-table-row:_change',{oldSelection:this._oldSelection,selection:selectedItems});this._oldSelection=selectedItems}},{key:"_onCellSelectionChanged",value:function _onCellSelectionChanged(event){event.stopImmediatePropagation();this._triggerChangeEvent()}},{key:"_onBeforeCellSelectionChanged",value:function _onBeforeCellSelectionChanged(event){event.stopImmediatePropagation();var selectedItem=this.selectedItem;if(!this.multiple&&selectedItem&&!event.target.selected){selectedItem.set('selected',false,true)}}},{key:"_syncAriaSelectedState",value:function _syncAriaSelectedState(){var _this2=this;this.classList.toggle('is-selected',this.selected);var selectHandle=this.querySelector('[coral-table-rowselect]');if(!(this.hasAttribute('coral-table-rowselect')||selectHandle)){this.removeAttribute('aria-selected');return}var rowOrderHandle=this.querySelector('[coral-table-roworder]');var rowLockHandle=this.querySelector('[coral-table-rowlock]');var rowRemoveHandle=this.querySelector('[coral-row-remove]');var accessibilityState=this._elements.accessibilityState;var resetAccessibilityState=function resetAccessibilityState(){_this2.removeAttribute('aria-live');_this2.removeAttribute('aria-atomic');_this2.removeAttribute('aria-relevant');if(selectHandle&&selectHandle.tagName==='CORAL-CHECKBOX'){selectHandle.removeAttribute('aria-hidden')}if(rowOrderHandle){rowOrderHandle.removeAttribute('aria-hidden')}if(rowLockHandle){rowLockHandle.removeAttribute('aria-hidden')}if(rowRemoveHandle){rowRemoveHandle.removeAttribute('aria-hidden')}if(accessibilityState){accessibilityState.setAttribute('aria-hidden','true');if(!_this2.selected){accessibilityState.innerHTML=''}}};this.setAttribute('aria-selected',this.selected);if(this._ariaLiveOnTimeout||this._ariaLiveOffTimeout){clearTimeout(this._ariaLiveOnTimeout);clearTimeout(this._ariaLiveOffTimeout)}if(accessibilityState){resetAccessibilityState();this._ariaLiveOnTimeout=setTimeout(function(){if(_this2===document.activeElement||_this2.contains(document.activeElement)){if(selectHandle&&selectHandle.tagName==='CORAL-CHECKBOX'){selectHandle.setAttribute('aria-hidden','true')}if(rowOrderHandle){rowOrderHandle.setAttribute('aria-hidden','true')}if(rowLockHandle){rowLockHandle.setAttribute('aria-hidden','true')}if(rowRemoveHandle){rowRemoveHandle.setAttribute('aria-hidden','true')}if(!window.cvox){accessibilityState.removeAttribute('aria-hidden');_this2.setAttribute('aria-live','assertive');_this2.setAttribute('aria-atomic','true')}_this2._ariaLiveOnTimeout=setTimeout(function(){accessibilityState.innerHTML=i18n.get(_this2.selected?', checked':', unchecked');_this2._ariaLiveOffTimeout=setTimeout(resetAccessibilityState,250)},20)}},20);if(!(this===document.activeElement||this.contains(document.activeElement))){accessibilityState.innerHTML=i18n.get(this.selected?', checked':'')}}}},{key:"_syncAriaLabelledby",value:function _syncAriaLabelledby(){var _this3=this;if(!(this.hasAttribute('coral-table-rowselect')||this.querySelector('[coral-table-rowselect]'))){if(this._elements.accessibilityState.parentNode){this.removeAttribute('aria-labelledby');this._elements.accessibilityState=this._elements.accessibilityState.parentNode.removeChild(this._elements.accessibilityState)}return}var cells=this.items.getAll().filter(function(cell){return cell.id&&!(cell.hasAttribute('coral-table-roworder')||cell.querySelector('[coral-table-roworder]')||cell.hasAttribute('coral-table-rowlock')||cell.querySelector('[coral-table-rowlock]')||cell.hasAttribute('coral-row-remove')||cell.querySelector('[coral-table-remove]'))});var rowHeaders=cells.filter(function(cell){return cell.getAttribute('role')==='rowheader'||cell.tagName==='TH'&&cell.getAttribute('scope')==='row'});var cellForAccessibilityState;var ids=cells.map(function(cell){var handle=cell.querySelector('[coral-table-rowselect]');if(handle){cellForAccessibilityState=cell;if(handle&&handle.tagName==='CORAL-CHECKBOX'&&handle._elements){if(_this3.selected){return}return handle._elements.input&&handle._elements.input.id}}if(rowHeaders.length===0||rowHeaders.indexOf(cell)!==-1){return cell.id}});if(!cellForAccessibilityState&&cells.length){cellForAccessibilityState=cells[cells.length-1]}if(cellForAccessibilityState){cellForAccessibilityState.appendChild(this._elements.accessibilityState)}if(this._elements.accessibilityState.parentNode){ids.push(this._elements.accessibilityState.id)}this.setAttribute('aria-labelledby',ids.join(' '))}},{key:"_syncSelectHandle",value:function _syncSelectHandle(){var _this4=this;var selectHandle=this.querySelector('[coral-table-rowselect]');if(selectHandle){if(typeof selectHandle.indeterminate!=='undefined'){selectHandle.indeterminate=false}selectHandle[this.selected?'setAttribute':'removeAttribute']('checked','');if(selectHandle.tagName==='CORAL-CHECKBOX'){if(!selectHandle.labelled){selectHandle.labelled=i18n.get('Select')}if(this.hasAttribute('aria-labelledby')){var ids=this.getAttribute('aria-labelledby').split(' ').filter(function(id){return selectHandle._elements.input.id!==id&&_this4._elements.accessibilityState.id!==id}).join(' ');selectHandle.labelledBy=selectHandle._elements.input.id+' '+ids}}}}},{key:"_toggleSelectable",value:function _toggleSelectable(selectable){if(selectable){this._setHandle('coral-table-rowselect')}else{this.set('selected',false,true)}this._syncAriaLabelledby()}},{key:"_toggleOrderable",value:function _toggleOrderable(orderable){if(orderable){this._setHandle('coral-table-roworder')}else if(this.dragAction){this.dragAction.destroy()}}},{key:"_toggleLockable",value:function _toggleLockable(lockable){if(lockable){this._setHandle('coral-table-rowlock')}}},{key:"_setHandle",value:function _setHandle(handle){var _this5=this;requestAnimationFrame(function(){if(!_this5.querySelector("[".concat(handle,"]"))){_this5.setAttribute(handle,'')}_this5._syncSelectHandle();_this5._syncAriaLabelledby();_this5._syncAriaSelectedState()})}},{key:"_handleMutations",value:function _handleMutations(mutations){var _this6=this;mutations.forEach(function(mutation){_this6.trigger('coral-table-row:_contentchanged',{addedNodes:mutation.addedNodes,removedNodes:mutation.removedNodes});_this6._syncAriaLabelledby()})}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='_selectable'){this._toggleSelectable(value!==null)}else if(name==='_orderable'){this._toggleOrderable(value!==null)}else if(name==='_lockable'){this._toggleLockable(value!==null)}else{_get(_getPrototypeOf(TableRow.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"render",value:function render(){_get(_getPrototypeOf(TableRow.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1t);this._syncAriaLabelledby()}},{key:"locked",get:function get(){return this._locked||false},set:function set(value){this._locked=transform.booleanAttr(value);this._reflectAttribute('locked',this._locked);this.trigger('coral-table-row:_lockedchanged')}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){if(this.hasAttribute('coral-table-rowselect')&&this.hasAttribute('disabled')||this.querySelector('[coral-table-rowselect][disabled]')){return}this.trigger('coral-table-row:_beforeselectedchanged');this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this.trigger('coral-table-row:_selectedchanged');this._syncSelectHandle();this._syncAriaLabelledby();this._syncAriaSelectedState()}},{key:"selectable",get:function get(){return this._selectable||false},set:function set(value){var _this7=this;this._selectable=transform.booleanAttr(value);this._reflectAttribute('selectable',this._selectable);this.items.getAll().forEach(function(cell){cell[_this7._selectable?'setAttribute':'removeAttribute']('_selectable','')})}},{key:"multiple",get:function get(){return this._multiple||false},set:function set(value){this._multiple=transform.booleanAttr(value);this._reflectAttribute('multiple',this._multiple);this.trigger('coral-table-row:_multiplechanged')}},{key:"selectedItems",get:function get(){return this.items._getAllSelected()}},{key:"selectedItem",get:function get(){return this.items._getFirstSelected()}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemBaseTagName:'td',itemTagName:'coral-table-cell'})}return this._items}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(TableRow),"observedAttributes",this).concat(['locked','selected','multiple','selectable','_selectable','_orderable','_lockable'])}}]);return TableRow}(BaseComponent(HTMLTableRowElement));var ALL_DIVIDER_CLASSES=[];for(var dividerValue in divider){ALL_DIVIDER_CLASSES.push("_coral-Table-divider--".concat(divider[dividerValue]))}var BaseTableSection=function BaseTableSection(superClass){return function(_superClass){_inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){var _this;_classCallCheck(this,_class);_this=_super.call(this);_this._tagName=_this.getAttribute('is').toLowerCase();return _this}_createClass(_class,[{key:"_toggleObserver",value:function _toggleObserver(enable){this._observer=this._observer||new MutationObserver(this._handleMutations.bind(this));if(enable){this._observer.observe(this,{childList:true,subtree:true})}else{this._observer.disconnect()}}},{key:"_handleMutations",value:function _handleMutations(mutations){var _this2=this;mutations.forEach(function(mutation){_this2.trigger("".concat(_this2._tagName,":_contentchanged"),{addedNodes:mutation.addedNodes,removedNodes:mutation.removedNodes})})}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,value){if(name==='_observe'){this._toggleObserver(value!=='off')}else{_get(_getPrototypeOf(_class.prototype),"attributeChangedCallback",this).call(this,name,oldValue,value)}}},{key:"render",value:function render(){_get(_getPrototypeOf(_class.prototype),"render",this).call(this);if(!this._divider){this.divider=divider.ROW}}},{key:"divider",get:function get(){return this._divider||divider.ROW},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._divider=validate.enumeration(divider)(value)&&value||divider.ROW;this._reflectAttribute('divider',this._divider);(_this$classList=this.classList).remove.apply(_this$classList,ALL_DIVIDER_CLASSES);this.classList.add("_coral-Table-divider--".concat(this.divider))}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(_class),"observedAttributes",this).concat(['divider','_observe'])}}]);return _class}(superClass)};var CLASSNAME$1u='_coral-Table-head';var TableHead=function(_BaseTableSection){_inherits(TableHead,_BaseTableSection);var _super=_createSuper(TableHead);function TableHead(){var _this;_classCallCheck(this,TableHead);_this=_super.call(this);_this._toggleObserver(true);return _this}_createClass(TableHead,[{key:"render",value:function render(){_get(_getPrototypeOf(TableHead.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1u)}},{key:"sticky",get:function get(){return this._sticky||false},set:function set(value){var _this2=this;this._sticky=transform.booleanAttr(value);this._reflectAttribute('sticky',this._sticky);window.requestAnimationFrame(function(){_this2.trigger('coral-table-head:_stickychanged')})}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(TableHead),"observedAttributes",this).concat(['sticky'])}}]);return TableHead}(BaseTableSection(BaseComponent(HTMLTableSectionElement)));var CLASSNAME$1v='_coral-Table-body';var TableBody=function(_BaseTableSection){_inherits(TableBody,_BaseTableSection);var _super=_createSuper(TableBody);function TableBody(){var _this;_classCallCheck(this,TableBody);_this=_super.call(this);_this._toggleObserver(true);return _this}_createClass(TableBody,[{key:"render",value:function render(){_get(_getPrototypeOf(TableBody.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1v);if(getRows([this]).length===0){this.trigger('coral-table-body:_empty')}}}]);return TableBody}(BaseTableSection(BaseComponent(HTMLTableSectionElement)));var CLASSNAME$1w='_coral-Table-foot';var TableFoot=function(_BaseTableSection){_inherits(TableFoot,_BaseTableSection);var _super=_createSuper(TableFoot);function TableFoot(){_classCallCheck(this,TableFoot);return _super.apply(this,arguments)}_createClass(TableFoot,[{key:"render",value:function render(){_get(_getPrototypeOf(TableFoot.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1w)}}]);return TableFoot}(BaseTableSection(BaseComponent(HTMLTableSectionElement)));var template$X=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["liveRegion"]=document.createElement("div");el0.setAttribute("handle","liveRegion");el0.className+=" u-coral-screenReaderOnly _coral-Table-liveRegion";el0.setAttribute("aria-hidden","true");el0.setAttribute("aria-live","off");el0.id=data_0["commons"]["getUID"]();frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["container"]=document.createElement("div");el2.setAttribute("handle","container");el2.className+=" _coral-Table-wrapper-container";el2.setAttribute("role","presentation");el2.setAttribute("coral-table-scroll","");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=this["hiddenStyle"]=document.createElement("style");el4.setAttribute("handle","hiddenStyle");el2.appendChild(el4);var el5=document.createTextNode("\n  ");el2.appendChild(el5);var el6=this["alignmentStyle"]=document.createElement("style");el6.setAttribute("handle","alignmentStyle");el2.appendChild(el6);var el7=document.createTextNode("\n  ");el2.appendChild(el7);var el8=this["table"]=document.createElement("table");el8.setAttribute("handle","table");el8.className+=" _coral-Table";el8.setAttribute("role","grid");el8.setAttribute("aria-describedby",this["liveRegion"]["id"]);el2.appendChild(el8);var el9=document.createTextNode("\n");el2.appendChild(el9);frag.appendChild(el2);var el10=document.createTextNode("\n\n");frag.appendChild(el10);return frag};var CLASSNAME$1x='_coral-Table-wrapper';var variant$m={DEFAULT:'default',QUIET:'quiet',LIST:'list'};var ALL_VARIANT_CLASSES$c=[];for(var variantValue$a in variant$m){ALL_VARIANT_CLASSES$c.push("".concat(CLASSNAME$1x,"--").concat(variant$m[variantValue$a]))}var IS_DISABLED='is-disabled';var IS_SORTED='is-sorted';var IS_UNSELECTABLE='is-unselectable';var IS_FIRST_ITEM_DRAGGED='is-draggedFirstItem';var IS_LAST_ITEM_DRAGGED='is-draggedLastItem';var IS_DRAGGING_CLASS$2='is-dragging';var IS_BEFORE_CLASS$1='is-before';var IS_AFTER_CLASS$1='is-after';var IS_LAYOUTING='is-layouting';var IS_READY='is-ready';var KEY_SPACE=Keys.keyToCode('space');var Table=function(_BaseComponent){_inherits(Table,_BaseComponent);var _super=_createSuper(Table);function Table(){var _this;_classCallCheck(this,Table);_this=_super.call(this);_this._elements={head:_this.querySelector('thead[is="coral-table-head"]')||new TableHead(),body:_this.querySelector('tbody[is="coral-table-body"]')||new TableBody(),foot:_this.querySelector('tfoot[is="coral-table-foot"]')||new TableFoot(),columns:_this.querySelector('colgroup')||document.createElement('colgroup')};template$X.call(_this._elements,{commons:commons});_this._delegateEvents({'global:coral-commons:_webfontactive':'_resetLayout','change [coral-table-select]':'_onSelectAll','capture:scroll [handle="container"]':'_onScroll','click thead[is="coral-table-head"] th[is="coral-table-headercell"]':'_onHeaderCellSort','coral-dragaction:dragstart thead[is="coral-table-head"] th[is="coral-table-headercell"]':'_onHeaderCellDragStart','coral-dragaction:drag thead[is="coral-table-head"] tr[is="coral-table-row"] > th[is="coral-table-headercell"]':'_onHeaderCellDrag','coral-dragaction:dragend thead[is="coral-table-head"] tr[is="coral-table-row"] > th[is="coral-table-headercell"]':'_onHeaderCellDragEnd','key:enter th[is="coral-table-headercell"]':'_onHeaderCellSort','key:enter th[is="coral-table-headercell"] coral-table-headercell-content':'_onHeaderCellSort','key:space th[is="coral-table-headercell"]':'_onHeaderCellSort','key:space th[is="coral-table-headercell"] coral-table-headercell-content':'_onHeaderCellSort','click tbody[is="coral-table-body"] [coral-table-rowlock]':'_onRowLock','click tbody[is="coral-table-body"] [coral-table-rowselect]':'_onRowSelect','click tbody[is="coral-table-body"] tr[is="coral-table-row"][selectable] [coral-table-cellselect]':'_onCellSelect','capture:mousedown tbody[is="coral-table-body"] [coral-table-roworder]:not([disabled])':'_onRowOrder','capture:touchstart tbody[is="coral-table-body"] [coral-table-roworder]:not([disabled])':'_onRowOrder','coral-dragaction:dragstart tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onRowDragStart','coral-dragaction:drag tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onRowDrag','coral-dragaction:dragover tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onRowDragOver','coral-dragaction:dragend tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onRowDragEnd','mousedown tbody[is="coral-table-body"] [coral-table-rowselect]':'_onRowDown','key:enter tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onRowSelect','key:space tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onRowSelect','key:pageup tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onFocusPreviousItem','key:pagedown tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onFocusNextItem','key:left tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onFocusPreviousItem','key:right tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onFocusNextItem','key:up tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onFocusPreviousItem','key:down tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onFocusNextItem','key:home tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onFocusFirstItem','key:end tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onFocusLastItem','key:shift+pageup tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onSelectPreviousItem','key:shift+pagedown tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onSelectNextItem','key:shift+left tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onSelectPreviousItem','key:shift+right tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onSelectNextItem','key:shift+up tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onSelectPreviousItem','key:shift+down tbody[is="coral-table-body"] tr[is="coral-table-row"]':'_onSelectNextItem','coral-table-row:_multiplechanged':'_onRowMultipleChanged','coral-table-row:_beforeselectedchanged':'_onBeforeRowSelectionChanged','coral-table-row:_selectedchanged':'_onRowSelectionChanged','coral-table-row:_lockedchanged':'_onRowLockedChanged','coral-table-row:_change':'_onRowChange','coral-table-row:_contentchanged':'_onRowContentChanged','coral-table-headercell:_contentchanged':'_resetLayout','coral-table-head:_contentchanged':'_onHeadContentChanged','coral-table-body:_contentchanged':'_onBodyContentChanged','coral-table-body:_empty':'_onBodyEmpty','coral-table-column:_alignmentchanged':'_onAlignmentChanged','coral-table-column:_fixedwidthchanged':'_onFixedWidthChanged','coral-table-column:_orderablechanged':'_onColumnOrderableChanged','coral-table-column:_sortablechanged':'_onColumnSortableChanged','coral-table-column:_sortabledirectionchanged':'_onColumnSortableDirectionChanged','coral-table-column:_hiddenchanged':'_onColumnHiddenChanged','coral-table-column:_beforecolumnsort':'_onBeforeColumnSort','coral-table-column:_sort':'_onColumnSort','coral-table-head:_stickychanged':'_onHeadStickyChanged'});_this._oldSelection=[];_this._lastSelectedItems={items:[],direction:null};_this._allowSorting=false;_this._timeout=null;_this._wait=50;_this._resetLayout=_this._resetLayout.bind(_assertThisInitialized(_this));_this._toggleObserver(true);return _this}_createClass(Table,[{key:"_onSelectAll",value:function _onSelectAll(event){if(this.selectable){var rows=this._getSelectableItems();if(rows.length){if(this.multiple){var selected=event.target.checked;rows.forEach(function(row){row.set('selected',selected,true)});rows=selected?rows:[];this._setSelectAllHandleState(selected?'checked':'unchecked');this.trigger('coral-table:change',{selection:rows,oldSelection:this._oldSelection});this._oldSelection=rows;this._lastSelectedItems.items=rows}else{var lastItem=rows[rows.length-1];lastItem.selected=!lastItem.selected}}}}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){if(!this._preventTriggeringEvents){var selectedItems=this.selectedItems;this.trigger('coral-table:change',{oldSelection:this._oldSelection,selection:selectedItems});this._oldSelection=selectedItems}}},{key:"_onRowOrder",value:function _onRowOrder(event){var table=this;var row=event.target.closest('tr[is="coral-table-row"]');if(row&&table.orderable){var head=table.head;var body=table.body;var sticky=head&&head.sticky;var style=row.getAttribute('style');var index=getIndexOf(row);var oldBefore=row.nextElementSibling;var dragAction=new DragAction(row);var items=getRows([body]);var tableBoundingClientRect=table.getBoundingClientRect();var rowBoundingClientRect=row.getBoundingClientRect();if(row===items[0]){table.classList.add(IS_FIRST_ITEM_DRAGGED)}else if(row===items[items.length-1]){table.classList.add(IS_LAST_ITEM_DRAGGED)}dragAction.axis='vertical';dragAction.scroll=false;dragAction.handle=row.querySelector('[coral-table-roworder]');var placeholder=row.cloneNode(true);placeholder.classList.add('_coral-Table-row--placeholder');row.style.top="".concat(rowBoundingClientRect.top-tableBoundingClientRect.top,"px");table._preventTriggeringEvents=true;body.insertBefore(placeholder,row.nextElementSibling);window.requestAnimationFrame(function(){table._preventTriggeringEvents=false});var dragData={placeholder:placeholder,index:index,oldBefore:oldBefore,style:{row:style}};if(sticky){dragData.sticky=sticky;dragData.tableTop=tableBoundingClientRect.top;dragData.tableSize=tableBoundingClientRect.height;dragData.headSize=parseFloat(table._elements.container.style.marginTop);dragData.dragElementSize=rowBoundingClientRect.height}row.dragAction._dragData=dragData}}},{key:"_onHeaderCellSort",value:function _onHeaderCellSort(event){var table=this;var matchedTarget=event.matchedTarget.closest('th');if(!matchedTarget._isDragging){var column=table._getColumn(matchedTarget);if(column&&column.sortable){event.preventDefault();column._sort();matchedTarget.focus()}}}},{key:"_onHeaderCellDragStart",value:function _onHeaderCellDragStart(event){var table=this;var matchedTarget=event.matchedTarget;var dragElement=event.detail.dragElement;var siblingHeaderCellSelector=matchedTarget===dragElement?'th[is="coral-table-headercell"]':'th[is="coral-table-headercell"] coral-table-headercell-content';var tableBoundingClientRect=table.getBoundingClientRect();dragElement.dragAction._dragData={draggedColumnIndex:getIndexOf(matchedTarget),tableLeft:tableBoundingClientRect.left,tableSize:tableBoundingClientRect.width,dragElementSize:matchedTarget.getBoundingClientRect().width,tableScrollWidth:table._elements.container.scrollWidth};getSiblingsOf(matchedTarget,siblingHeaderCellSelector,'prevAll').forEach(function(item){item.classList.add(IS_BEFORE_CLASS$1)});getSiblingsOf(matchedTarget,siblingHeaderCellSelector,'nextAll').forEach(function(item){item.classList.add(IS_AFTER_CLASS$1)})}},{key:"_onHeaderCellDrag",value:function _onHeaderCellDrag(event){var table=this;var container=table._elements.container;var matchedTarget=event.matchedTarget;var dragElement=event.detail.dragElement;var dragData=dragElement.dragAction._dragData;var row=matchedTarget.parentElement;var isHeaderCellDragged=matchedTarget===dragElement;var containerScrollLeft=container.scrollLeft;var documentScrollLeft=document.body.scrollLeft;matchedTarget._isDragging=true;var position=dragElement.getBoundingClientRect().left-dragData.tableLeft;var leftScrollLimit=0;var rightScrollLimit=dragData.tableSize-dragData.dragElementSize;var scrollOffset=10;if(position<leftScrollLimit){container.scrollLeft-=scrollOffset}else if(position>rightScrollLimit&&containerScrollLeft+dragData.tableSize<dragData.tableScrollWidth){container.scrollLeft+=scrollOffset}getHeaderCells(row).forEach(function(headerCell){var draggedHeaderCell=isHeaderCellDragged?headerCell:headerCell.content;if(!draggedHeaderCell.classList.contains(IS_DRAGGING_CLASS$2)){var offsetLeft=draggedHeaderCell.getBoundingClientRect().left+documentScrollLeft;var isAfter=event.detail.pageX<offsetLeft+draggedHeaderCell.offsetWidth/3;draggedHeaderCell.classList.toggle(IS_AFTER_CLASS$1,isAfter);draggedHeaderCell.classList.toggle(IS_BEFORE_CLASS$1,!isAfter);var columnIndex=getIndexOf(headerCell);var dragElementIndex=getIndexOf(matchedTarget);if(draggedHeaderCell.classList.contains(IS_AFTER_CLASS$1)){if(columnIndex<dragElementIndex){if(isHeaderCellDragged){var nextHeaderCellWidth=draggedHeaderCell.clientWidth;draggedHeaderCell.style.left="".concat(nextHeaderCellWidth,"px")}else{var nextHeaderCell=getSiblingsOf(headerCell,'th[is="coral-table-headercell"]','next');var nextHeaderCellLeftOffset=nextHeaderCell.getBoundingClientRect().left+documentScrollLeft;draggedHeaderCell.style.left="".concat(nextHeaderCellLeftOffset+containerScrollLeft,"px")}}else{draggedHeaderCell.style.left=''}}if(draggedHeaderCell.classList.contains(IS_BEFORE_CLASS$1)){if(columnIndex>dragElementIndex){var prev=getSiblingsOf(headerCell,'th[is="coral-table-headercell"]','prev');if(isHeaderCellDragged){var beforeHeaderCellWidth=prev.clientWidth;draggedHeaderCell.style.left="".concat(-1*beforeHeaderCellWidth,"px")}else{var beforeHeaderCellLeftOffset=prev.getBoundingClientRect().left+documentScrollLeft;draggedHeaderCell.style.left="".concat(beforeHeaderCellLeftOffset+containerScrollLeft,"px")}}else{draggedHeaderCell.style.left=''}}}})}},{key:"_onHeaderCellDragEnd",value:function _onHeaderCellDragEnd(event){var table=this;var matchedTarget=event.matchedTarget;var dragElement=event.detail.dragElement;var dragData=dragElement.dragAction._dragData;var column=table._getColumn(matchedTarget);var headRows=getRows([table.head]);var isHeaderCellDragged=matchedTarget===dragElement;var row=matchedTarget.parentElement;var getCellsByIndex=function getCellsByIndex(cellIndex){var cellElements=[];var rows=getRows([table.body,table.foot]);rows.forEach(function(rowElement){var cell=getCellByIndex(rowElement,cellIndex);if(cell){cellElements.push(cell)}});return cellElements};var cells=getCellsByIndex(getIndexOf(matchedTarget));var before=null;var after=null;if(isHeaderCellDragged){before=row.querySelector("th[is=\"coral-table-headercell\"].".concat(IS_AFTER_CLASS$1));after=row.querySelectorAll("th[is=\"coral-table-headercell\"].".concat(IS_BEFORE_CLASS$1));after=after.length?after[after.length-1]:null}else{before=row.querySelector("th[is=\"coral-table-headercell\"] > coral-table-headercell-content.".concat(IS_AFTER_CLASS$1));before=before?before.parentNode:null;after=row.querySelectorAll("th[is=\"coral-table-headercell\"] > coral-table-headercell-content.".concat(IS_BEFORE_CLASS$1));after=after.length?after[after.length-1].parentNode:null}var swapped=!(before&&before.previousElementSibling===matchedTarget||after&&after.nextElementSibling===matchedTarget);if(swapped){var beforeColumn=before?table._getColumn(before):null;var beforeEvent=table.trigger('coral-table:beforecolumndrag',{column:column,before:beforeColumn});var oldBefore=column.nextElementSibling;if(!beforeEvent.defaultPrevented){if(before){var beforeIndex=getIndexOf(before);var beforeCells=getCellsByIndex(beforeIndex);cells.forEach(function(cell,i){cell.parentNode.insertBefore(cell,beforeCells[i])});var beforeCol=getColumns(table.columns)[beforeIndex];if(beforeCol&&column){table.columns.insertBefore(column,beforeCol)}row.insertBefore(matchedTarget,before)}if(after){var afterIndex=getIndexOf(after);var afterCells=getCellsByIndex(afterIndex);cells.forEach(function(cell,i){cell.parentNode.insertBefore(cell,afterCells[i].nextElementSibling)});var afterCol=getColumns(table.columns)[afterIndex];if(afterCol&&column){table.columns.insertBefore(column,afterCol.nextElementSibling)}row.insertBefore(matchedTarget,after.nextElementSibling)}if(dragData.draggedColumnIndex!==getIndexOf(matchedTarget)){var newBefore=getColumns(table.columns)[getIndexOf(column)+1];table.trigger('coral-table:columndrag',{column:column,oldBefore:oldBefore,before:newBefore||null})}}}headRows.forEach(function(rowElement){getHeaderCells(rowElement).forEach(function(headerCell){headerCell=isHeaderCellDragged?headerCell:headerCell.content;headerCell.classList.remove(IS_AFTER_CLASS$1);headerCell.classList.remove(IS_BEFORE_CLASS$1);headerCell.style.left=''})});table._resetLayout();window.requestAnimationFrame(function(){matchedTarget._isDragging=undefined;table._toggleElementTabIndex(dragElement,null,true)})}},{key:"_onCellSelect",value:function _onCellSelect(event){var cell=event.target.closest('td[is="coral-table-cell"]');if(cell){cell.selected=!cell.selected}}},{key:"_onRowSelect",value:function _onRowSelect(event){var table=this;var row=event.target.closest('tr[is="coral-table-row"]');if(row){if(table.lockable&&row.locked){return}table.classList.remove(IS_UNSELECTABLE);if(table.selectable&&(Keys.filterInputs(event)||!row.hasAttribute('coral-table-rowselect'))){if(event.keyCode===KEY_SPACE){event.preventDefault()}if(event.shiftKey){var lastSelectedItem=table._lastSelectedItems.items[table._lastSelectedItems.items.length-1];var lastSelectedDirection=table._lastSelectedItems.direction;if(!table.selectedItem){var rows=table._getSelectableItems();if(rows.length){lastSelectedItem=rows[0];lastSelectedItem.set('selected',true,true)}}if(lastSelectedItem&&getIndexOf(row)!==getIndexOf(lastSelectedItem)){var before=getIndexOf(row)<getIndexOf(lastSelectedItem);var rangeQuery=before?'prevUntil':'nextUntil';table._lastSelectedItems.direction=before?'up':'down';if(!row.selected){var selectionRange=getSiblingsOf(lastSelectedItem,'tr[is="coral-table-row"]:not([selected])',rangeQuery);selectionRange[before?'push':'unshift'](lastSelectedItem);if(!before&&lastSelectedDirection==='up'||before&&lastSelectedDirection==='down'){selectionRange.forEach(function(item){item.set('selected',false,true)})}var selectionRangeRow=selectionRange[before?0:selectionRange.length-1];selectionRangeRow.set('selected',true,true);getSiblingsOf(selectionRangeRow,row,rangeQuery).forEach(function(item){item.set('selected',true,true)})}else{var selection=getSiblingsOf(lastSelectedItem,row,rangeQuery);if(selection.some(function(item){return!item.hasAttribute('selected')})){selection.forEach(function(item){item.set('selected',true,true)});getSiblingsOf(row,'tr[is="coral-table-row"]:not([selected])',rangeQuery).forEach(function(item){item.set('selected',false,true)})}else{selection[before?'push':'unshift'](lastSelectedItem);selection.forEach(function(item){item.set('selected',false,true)})}}}}else{table._lastSelectedItems.direction=null}row.selected=event.shiftKey?true:!row.selected;table._focusItem(row,event.target===event.matchedTarget||event.target.tabIndex<0)}}}},{key:"_onRowLock",value:function _onRowLock(event){var table=this;if(table.lockable){var row=event.target.closest('tr[is="coral-table-row"]');if(row){event.preventDefault();event.stopPropagation();row.locked=!row.locked;window.requestAnimationFrame(function(){table._focusItem(row,true)})}}}},{key:"_onRowDown",value:function _onRowDown(event){var table=this;if(table.selectedItem&&event.shiftKey){table.classList.add(IS_UNSELECTABLE);var onSelectStart=document.onselectstart;document.onselectstart=function(){return false};window.requestAnimationFrame(function(){document.onselectstart=onSelectStart})}}},{key:"_onRowDragStart",value:function _onRowDragStart(event){var table=this;var head=table.head;var body=table.body;var dragElement=event.detail.dragElement;var dragData=dragElement.dragAction._dragData;dragData.style.cells=[];getCells(dragElement).forEach(function(cell){dragData.style.cells.push(cell.getAttribute('style'));cell.style.width=window.getComputedStyle(cell).width});if(head&&!head.sticky){var scrollingElement=document.scrollingElement||document.documentElement;dragElement.style.top="".concat(dragElement.getBoundingClientRect().top+scrollingElement.scrollTop,"px")}dragElement.style.position='absolute';dragElement.dragAction.dropZone=body.querySelectorAll("tr[is=\"coral-table-row\"]:not(.".concat(IS_DRAGGING_CLASS$2,")"));dragElement.classList.add('is-focused')}},{key:"_onRowDrag",value:function _onRowDrag(event){var table=this;var body=table.body;var dragElement=event.detail.dragElement;var dragData=dragElement.dragAction._dragData;var firstRow=getRows([body])[0];if(dragElement.getBoundingClientRect().top<=firstRow.getBoundingClientRect().top){table._preventTriggeringEvents=true;body.insertBefore(dragData.placeholder,firstRow);window.requestAnimationFrame(function(){table._preventTriggeringEvents=false})}if(dragData.sticky){var dragElementTop=dragElement.getBoundingClientRect().top;var position=dragElementTop-dragData.tableTop-dragData.headSize;var topScrollLimit=0;var bottomScrollLimit=dragData.tableSize-dragData.dragElementSize-dragData.headSize;var scrollOffset=10;window.requestAnimationFrame(function(){if(position<topScrollLimit){table._elements.container.scrollTop-=scrollOffset}else if(position>bottomScrollLimit){table._elements.container.scrollTop+=scrollOffset}})}}},{key:"_onRowDragOver",value:function _onRowDragOver(event){var table=this;var body=table.body;var dragElement=event.detail.dragElement;var dropElement=event.detail.dropElement;var dragData=dragElement.dragAction._dragData;if(dragElement.getBoundingClientRect().top>=dropElement.getBoundingClientRect().top){table._preventTriggeringEvents=true;body.insertBefore(dragData.placeholder,dropElement.nextElementSibling);window.requestAnimationFrame(function(){table._preventTriggeringEvents=false})}}},{key:"_onRowDragEnd",value:function _onRowDragEnd(event){var table=this;var body=table.body;var dragElement=event.detail.dragElement;var dragData=dragElement.dragAction._dragData;var before=dragData.placeholder.nextElementSibling;table.classList.remove(IS_FIRST_ITEM_DRAGGED);table.classList.remove(IS_LAST_ITEM_DRAGGED);body.removeChild(dragData.placeholder);dragElement.dragAction.destroy();dragElement.setAttribute('style',dragData.style.row||'');getCells(dragElement).forEach(function(cell,i){cell.setAttribute('style',dragData.style.cells[i]||'')});var beforeEvent=table.trigger('coral-table:beforeroworder',{row:dragElement,before:before});if(!beforeEvent.defaultPrevented){var rows=getRows([body]).filter(function(item){return item!==dragElement});if(dragData.index!==rows.indexOf(dragData.placeholder)){table._preventTriggeringEvents=true;body.insertBefore(dragElement,before);window.requestAnimationFrame(function(){table._preventTriggeringEvents=false});table.trigger('coral-table:roworder',{row:dragElement,oldBefore:dragData.oldBefore,before:before})}}window.requestAnimationFrame(function(){dragElement.classList.remove('is-focused');table._focusItem(dragElement,true)})}},{key:"_onRowMultipleChanged",value:function _onRowMultipleChanged(event){event.stopImmediatePropagation();var table=this;var row=event.target;if(!row.multiple){var selectedItems=row.selectedItems;table._preventTriggeringEvents=true;selectedItems.forEach(function(cell,i){cell.selected=i===selectedItems.length-1});window.requestAnimationFrame(function(){table._preventTriggeringEvents=false;table.trigger('coral-table:rowchange',{oldSelection:selectedItems,selection:row.selectedItems,row:row})})}}},{key:"_onBeforeRowSelectionChanged",value:function _onBeforeRowSelectionChanged(event){event.stopImmediatePropagation();var selectedItem=this.selectedItem;if(!this.multiple&&selectedItem&&!event.target.selected){selectedItem.set('selected',false,true);this._removeLastSelectedItem(selectedItem)}}},{key:"_syncSelectAllHandle",value:function _syncSelectAllHandle(selectedItems,items){if(items.length&&selectedItems.length===items.length){this._setSelectAllHandleState('checked')}else if(!selectedItems.length){this._setSelectAllHandleState('unchecked')}else{this._setSelectAllHandleState('indeterminate')}}},{key:"_setSelectAllHandleState",value:function _setSelectAllHandleState(state){var handle=this.querySelector('[coral-table-select]');if(handle){if(handle.tagName==='CORAL-CHECKBOX'){if(!handle.labelled){handle.setAttribute('labelled',i18n.get('Select All'))}if(!handle.title){handle.setAttribute('title',i18n.get('Select All'))}}if(state==='checked'){handle.removeAttribute('indeterminate');handle.setAttribute('checked','')}else if(state==='unchecked'){handle.removeAttribute('indeterminate');handle.removeAttribute('checked')}else if(state==='indeterminate'){handle.setAttribute('indeterminate','')}}}},{key:"_onRowSelectionChanged",value:function _onRowSelectionChanged(event){event.stopImmediatePropagation();this._triggerChangeEvent();var table=this;var body=table.body;var row=event.target;if(body&&body.contains(row)){var selection=table.selectedItems;var rows=table._getSelectableItems();table._syncSelectAllHandle(selection,rows);table[row.selected?'_addLastSelectedItem':'_removeLastSelectedItem'](row);var lastSelectedItem=table._lastSelectedItems.items[table._lastSelectedItems.items.length-1];var next=table._lastSelectedItems.direction==='down';if(row.selected&&lastSelectedItem&&lastSelectedItem.selected&&getSiblingsOf(lastSelectedItem,'tr[is="coral-table-row"][selected]',next?'next':'prev')){getSiblingsOf(lastSelectedItem,'tr[is="coral-table-row"]:not([selected])',next?'nextUntil':'prevUntil').forEach(function(item){table._addLastSelectedItem(item)})}}}},{key:"_onRowLockedChanged",value:function _onRowLockedChanged(event){event.stopImmediatePropagation();var table=this;var body=this.body;var row=event.target;if(body&&body.contains(row)){if(row.locked){row._rowIndex=getIndexOf(row);table._preventTriggeringEvents=true;body.insertBefore(row,getRows([body])[0]);window.requestAnimationFrame(function(){table._preventTriggeringEvents=false});table.trigger('coral-table:rowlock',{row:row})}else{if(row._rowIndex>=0){var beforeRow=getRows([body])[row._rowIndex];if(beforeRow){table._preventTriggeringEvents=true;body.insertBefore(row,beforeRow.nextElementSibling);window.requestAnimationFrame(function(){table._preventTriggeringEvents=false})}}table.trigger('coral-table:rowunlock',{row:row})}}}},{key:"_onHeadContentChanged",value:function _onHeadContentChanged(event){event.stopImmediatePropagation();var table=this;var head=table.head;var addedNodes=event.detail.addedNodes;for(var i=0;i<addedNodes.length;i+=1){var node=addedNodes[i];if(isTableHeaderCell(node)){table._toggleStickyHeaderCell(node,head.sticky)}}}},{key:"_onBodyContentChanged",value:function _onBodyContentChanged(event){if(event.stopImmediatePropagation){event.stopImmediatePropagation()}var table=this;var addedNodes=event.detail.addedNodes;var removedNodes=event.detail.removedNodes;var addedNode=null;var selectItem=function selectItem(item){item.selected=item===addedNode};var changed=false;for(var i=0;i<addedNodes.length;i+=1){addedNode=addedNodes[i];if(isTableRow(addedNode)){changed=true;addedNode._toggleSelectable(table.selectable);addedNode._toggleOrderable(table.orderable);addedNode._toggleLockable(table.lockable);this._toggleSelectionCheckbox(addedNode);var selectedItems=table.selectedItems;if(addedNode.selected){if(!table.multiple&&selectedItems.length>1){selectedItems.forEach(selectItem)}table._triggerChangeEvent()}if(addedNode.selectable){addedNode.trigger('coral-table-row:_contentchanged',{addedNodes:getContentCells(addedNode),removedNodes:[]})}if(!table._preventTriggeringEvents){table.trigger('coral-collection:add',{item:addedNode})}table._toggleFocusable()}}for(var k=0;k<removedNodes.length;k+=1){var removedNode=removedNodes[k];if(isTableRow(removedNode)){changed=true;if(removedNode.getAttribute('tabindex')==='0'){var firstItem=getRows([table.body])[0];if(firstItem){table._focusItem(firstItem)}}if(removedNode.selected){table._triggerChangeEvent()}var removedItemIndex=table._lastSelectedItems.items.indexOf(removedNode);if(removedItemIndex!==-1){table._lastSelectedItems.items=table._lastSelectedItems.items.splice(removedItemIndex,1)}if(!table._preventTriggeringEvents){table.trigger('coral-collection:remove',{item:removedNode})}}}if(changed){var items=this._getSelectableItems();table._syncSelectAllHandle(table.selectedItems,items);table._toggleInteractivity(items.length===0)}}},{key:"_onBodyEmpty",value:function _onBodyEmpty(event){event.stopImmediatePropagation();this._toggleInteractivity(true)}},{key:"_onRowChange",value:function _onRowChange(event){event.stopImmediatePropagation();if(!this._preventTriggeringEvents){this.trigger('coral-table:rowchange',{oldSelection:event.detail.oldSelection,selection:event.detail.selection,row:event.target})}}},{key:"_onRowContentChanged",value:function _onRowContentChanged(event){event.stopImmediatePropagation();var table=this;var row=event.target;var addedNodes=event.detail.addedNodes;var addedNode=null;var removedNodes=event.detail.removedNodes;var selectItem=function selectItem(item){item.selected=item===addedNode};for(var i=0;i<addedNodes.length;i+=1){addedNode=addedNodes[i];if(isTableCell(addedNode)){addedNode._toggleSelectable(row.selectable);var selectedItems=row.selectedItems;if(addedNode.selected){if(!row.multiple&&selectedItems.length>1){selectedItems.forEach(selectItem)}row._triggerChangeEvent()}if(!table._preventTriggeringEvents){row.trigger('coral-collection:add',{item:addedNode})}}else if(isTableHeaderCell(addedNode)){table._setHeaderCellScope(addedNode,row.parentNode)}}for(var k=0;k<removedNodes.length;k+=1){var removedNode=removedNodes[k];if(isTableCell(removedNode)){if(removedNode.selected){row._triggerChangeEvent()}if(!table._preventTriggeringEvents){row.trigger('coral-collection:remove',{item:removedNode})}}}}},{key:"_toggleInteractivity",value:function _toggleInteractivity(disable){var table=this;var selectAll=table.querySelector('[coral-table-select]');if(selectAll){selectAll.disabled=disable}table.classList.toggle(IS_DISABLED,disable)}},{key:"_onAlignmentChanged",value:function _onAlignmentChanged(event){event.stopImmediatePropagation();this._resetAlignmentColumns()}},{key:"_onFixedWidthChanged",value:function _onFixedWidthChanged(event){event.stopImmediatePropagation();var table=this;var head=table.head;var column=event.target;if(head){var headRows=getRows([head]);var columnIndex=getIndexOf(event.target);headRows.forEach(function(row){var headerCell=getCellByIndex(row,columnIndex);if(headerCell&&headerCell.tagName==='TH'){headerCell[column.fixedWidth?'setAttribute':'removeAttribute']('fixedwidth','')}})}table._resetLayout()}},{key:"_onColumnOrderableChanged",value:function _onColumnOrderableChanged(event){event.stopImmediatePropagation();var table=this;var head=this.head;var column=event.target;var headerCell=table._getColumnHeaderCell(column);if(headerCell){table._toggleDragActionHandle(headerCell,head&&head.sticky);table._resetLayout()}}},{key:"_onColumnSortableChanged",value:function _onColumnSortableChanged(event){event.stopImmediatePropagation();var table=this;var head=this.head;var column=event.target;var headerCell=table._getColumnHeaderCell(column);if(headerCell){headerCell[column.sortable?'setAttribute':'removeAttribute']('sortable','');table._toggleHeaderCellTabIndex(headerCell,head&&head.sticky);table._resetLayout()}}},{key:"_onColumnSortableDirectionChanged",value:function _onColumnSortableDirectionChanged(event){var _this2=this;event.stopImmediatePropagation();var table=this;var column=event.target;var sortableDirection=TableColumn.sortableDirection;table.classList.toggle(IS_SORTED,table._isSorted());var headerCell=table._getColumnHeaderCell(column);if(headerCell){headerCell.setAttribute('sortabledirection',column.sortableDirection);(table.head.sticky?headerCell.content:headerCell).setAttribute('aria-sort',column.sortableDirection===sortableDirection.DEFAULT?'none':column.sortableDirection);if(column.sortableDirection===sortableDirection.DEFAULT){this._elements.liveRegion.innerText=''}else{var textContent=headerCell.content.textContent.trim();if(textContent.length){this._elements.liveRegion.setAttribute('aria-live','polite');this._elements.liveRegion.removeAttribute('aria-hidden');this._elements.liveRegion.innerText=i18n.get("sorted by column {0} in ".concat(column.sortableDirection," order"),textContent);window.setTimeout(function(){_this2._elements.liveRegion.setAttribute('aria-live','off');_this2._elements.liveRegion.setAttribute('aria-hidden','true')},2500)}}}}},{key:"_onColumnHiddenChanged",value:function _onColumnHiddenChanged(event){event.stopImmediatePropagation();this._resetHiddenColumns(true)}},{key:"_onBeforeColumnSort",value:function _onBeforeColumnSort(event){event.stopImmediatePropagation();var table=this;var column=event.target;var newSortableDirection=event.detail.newSortableDirection;var beforeEvent=table.trigger('coral-table:beforecolumnsort',{column:column,direction:newSortableDirection});if(!beforeEvent.defaultPrevented){column.sortableDirection=newSortableDirection}}},{key:"_onColumnSort",value:function _onColumnSort(event){var _this3=this;event.stopImmediatePropagation();if(!this._allowSorting){return}var table=this;var body=table.body;var column=event.target;var columnIndex=getIndexOf(column);var colHeaderCell=table._getColumnHeaderCell(column);var onInitialization=event.detail.onInitialization;var sortableDirection=event.detail.sortableDirection;var sortableType=event.detail.sortableType;var rows=getRows([body]);var cells=[];if(table){table._preventTriggeringEvents=true}rows.forEach(function(row,i){if(typeof row._defaultRowIndex==='undefined'){row._defaultRowIndex=i}var cell=getCellByIndex(row,columnIndex);if(cell){cells.push(cell)}});if(column.sortableDirection===sortableDirection.ASCENDING){getSiblingsOf(column,'col[is="coral-table-column"]').forEach(function(col){col._preventSort=true;col.setAttribute('sortabledirection',sortableDirection.DEFAULT);col._preventSort=false});if(colHeaderCell){getSiblingsOf(colHeaderCell,'th[is="coral-table-headercell"]').forEach(function(headerCell){headerCell.setAttribute('sortabledirection',sortableDirection.DEFAULT);(table.head.sticky?headerCell.content:headerCell).setAttribute('aria-sort','none')})}cells.sort(function(a,b){if(column.sortableType===sortableType.ALPHANUMERIC){var aText=a.value?a.value:a.textContent;var bText=b.value?b.value:b.textContent;return aText.localeCompare(bText)}else if(column.sortableType===sortableType.NUMBER){var aNumber=parseFloat(a.value?a.value:a.textContent.replace(/\s+/g,'').replace(/,/g,'.'));var bNumber=parseFloat(b.value?b.value:b.textContent.replace(/\s+/g,'').replace(/,/g,'.'));return aNumber>bNumber?1:-1}else if(column.sortableType===sortableType.DATE){var aDate=a.value?new Date(parseInt(a.value,10)):new Date(a.textContent);var bDate=b.value?new Date(parseInt(b.value,10)):new Date(b.textContent);return aDate>bDate?1:-1}});if(column.sortableType!==sortableType.CUSTOM){if(body){cells.forEach(function(cell){var row=cell.parentElement;if(!row.locked){body.appendChild(row)}})}table.trigger('coral-table:columnsort',{column:column})}rows.forEach(function(row){if(row.dragAction){row.dragAction.destroy()}})}else if(column.sortableDirection===sortableDirection.DESCENDING){getSiblingsOf(column,'col[is="coral-table-column"]').forEach(function(col){col._preventSort=true;col.setAttribute('sortabledirection',sortableDirection.DEFAULT);col._preventSort=false});if(colHeaderCell){getSiblingsOf(colHeaderCell,'th[is="coral-table-headercell"]').forEach(function(headerCell){headerCell.setAttribute('sortabledirection',sortableDirection.DEFAULT);(table.head.sticky?headerCell.content:headerCell).setAttribute('aria-sort','none')})}cells.sort(function(a,b){if(column.sortableType===sortableType.ALPHANUMERIC){var aText=a.value?a.value:a.textContent;var bText=b.value?b.value:b.textContent;return bText.localeCompare(aText)}else if(column.sortableType===sortableType.NUMBER){var aNumber=parseFloat(a.value?a.value:a.textContent.replace(/\s+/g,'').replace(/,/g,'.'));var bNumber=parseFloat(b.value?b.value:b.textContent.replace(/\s+/g,'').replace(/,/g,'.'));return aNumber<bNumber?1:-1}else if(column.sortableType===sortableType.DATE){var aDate=a.value?new Date(parseInt(a.value,10)):new Date(a.textContent);var bDate=b.value?new Date(parseInt(b.value,10)):new Date(b.textContent);return aDate<bDate?1:-1}});if(column.sortableType!==sortableType.CUSTOM){if(body){cells.forEach(function(cell){var row=cell.parentElement;if(!row.locked){body.appendChild(row)}})}table.trigger('coral-table:columnsort',{column:column})}rows.forEach(function(row){if(row.dragAction){row.dragAction.destroy()}})}else if(column.sortableDirection===sortableDirection.DEFAULT&&!onInitialization){if(column.sortableType!==sortableType.CUSTOM){rows.sort(function(a,b){return a._defaultRowIndex>b._defaultRowIndex?1:-1});rows.forEach(function(row){if(body&&!row.locked){body.appendChild(row)}});table.trigger('coral-table:columnsort',{column:column})}}window.requestAnimationFrame(function(){if(onInitialization&&column.sortableDirection!==sortableDirection.DEFAULT){var textContent=colHeaderCell.content.textContent.trim();if(textContent.length){_this3._elements.liveRegion.innerText=i18n.get("sorted by column {0} in ".concat(column.sortableDirection," order"),textContent)}}table._preventTriggeringEvents=false})}},{key:"_onHeadStickyChanged",value:function _onHeadStickyChanged(event){event.stopImmediatePropagation();this._toggleFocusable();var table=this;var head=event.target;window.requestAnimationFrame(function(){var tableHeight=head.sticky?"".concat(head.getBoundingClientRect().height,"px"):null;table._resetContainerLayout(tableHeight,table._elements.container.style.height);getRows([head]).forEach(function(row){getHeaderCells(row).forEach(function(headerCell){table._toggleStickyHeaderCell(headerCell,head.sticky)})});table.classList.toggle("".concat(CLASSNAME$1x,"--sticky"),head.sticky);table._preventResetLayout=false;table._resetLayout()})}},{key:"_getColumnHeaderCell",value:function _getColumnHeaderCell(column){var table=this;var head=table.head;var headerCell=null;if(head){var headRows=getRows([head]);var columnIndex=getIndexOf(column);if(headRows.length){headerCell=getCellByIndex(headRows[headRows.length-1],columnIndex);headerCell=headerCell&&headerCell.tagName==='TH'?headerCell:null}}return headerCell}},{key:"_getColumn",value:function _getColumn(headerCell){return getColumns(this.columns)[getIndexOf(headerCell)]||null}},{key:"_toggleStickyHeaderCell",value:function _toggleStickyHeaderCell(headerCell,sticky){this._layoutStickyCell(headerCell,sticky);this._toggleDragActionHandle(headerCell,sticky);this._toggleHeaderCellTabIndex(headerCell,sticky)}},{key:"_layoutStickyCell",value:function _layoutStickyCell(headerCell,sticky){if(sticky){var computedStyle=window.getComputedStyle(headerCell);if(!headerCell.style.minWidth){var hasVisibleChildNodes=false;if(headerCell.textContent.trim().length){hasVisibleChildNodes=true}else{var headerCellChildren=headerCell.content.children;for(var i=0;i<headerCellChildren.length&&!hasVisibleChildNodes;i+=1){if(headerCellChildren[0].offsetParent){hasVisibleChildNodes=true}}}if(hasVisibleChildNodes){var width=headerCell.content.getBoundingClientRect().width;if(width>0){headerCell.style.minWidth="".concat(width,"px")}}}var cellWidth=parseFloat(computedStyle.width);var cellPadding=parseFloat(computedStyle.paddingLeft)+parseFloat(computedStyle.paddingRight);var borderRightWidth=parseFloat(computedStyle.borderRightWidth);headerCell.content.style.width="".concat(cellWidth+cellPadding+borderRightWidth,"px")}else{headerCell.style.minWidth='';headerCell.content.style.width='';headerCell.content.style.height='';headerCell.content.style.top='';headerCell.content.style.marginLeft='';headerCell.content.style.paddingTop=''}}},{key:"_toggleDragActionHandle",value:function _toggleDragActionHandle(headerCell,sticky){var column=this._getColumn(headerCell);if(headerCell.dragAction){headerCell.dragAction.destroy()}if(headerCell.content.dragAction){headerCell.content.dragAction.destroy()}if(column&&column.orderable){var dragAction=new DragAction(sticky?headerCell.content:headerCell);dragAction.axis='horizontal';dragAction.scroll=false;headerCell.setAttribute('orderable','')}else{headerCell.removeAttribute('orderable')}}},{key:"_toggleFocusable",value:function _toggleFocusable(){var firstItem=getRows([this.body])[0];if(!firstItem){return}var focusableItem=this._getFocusableItem();if(this.selectable||this.lockable||this.orderable||this.head&&this.head.sticky){if(!focusableItem){this._toggleElementTabIndex(firstItem)}}else if(focusableItem){focusableItem.removeAttribute('tabindex')}}},{key:"_toggleElementTabIndex",value:function _toggleElementTabIndex(element,oldFocusable,forceFocus){if(oldFocusable){oldFocusable.removeAttribute('tabindex')}element.setAttribute('tabindex','0');if(forceFocus){element.focus()}}},{key:"_toggleHeaderCellTabIndex",value:function _toggleHeaderCellTabIndex(headerCell,sticky){var column=this._getColumn(headerCell);var sortable=column&&(column.sortable||column.orderable);headerCell[sortable&&!sticky?'setAttribute':'removeAttribute']('tabindex','0');headerCell.content[sortable&&sticky?'setAttribute':'removeAttribute']('tabindex','0')}},{key:"_isSorted",value:function _isSorted(){var column=null;var isSorted=getColumns(this.columns).some(function(col){column=col;return col.sortableDirection!==TableColumn.sortableDirection.DEFAULT});return isSorted?column:false}},{key:"_focusEdgeItem",value:function _focusEdgeItem(event,first){var items=getRows([this.body]);if(items.length){event.preventDefault();var item=this._getFocusableItem();if(item){item.removeAttribute('tabindex')}item=items[first?0:items.length-1];item.setAttribute('tabindex','0');item.focus()}}},{key:"_focusSiblingItem",value:function _focusSiblingItem(event,next){var item=this._getFocusableItem();if(item){event.preventDefault();var siblingItem=getSiblingsOf(item,'tr[is="coral-table-row"]',next?'next':'prev');if(siblingItem){item.removeAttribute('tabindex');siblingItem.setAttribute('tabindex','0');siblingItem.focus()}}}},{key:"_selectSiblingItem",value:function _selectSiblingItem(next){var _this4=this;if(this.selectable&&this.multiple){var selectedItems=this.selectedItems;var lastSelectedItem=this._lastSelectedItems.items[this._lastSelectedItems.items.length-1];if(selectedItems.length){if(next&&lastSelectedItem.matches(':last-of-type')||!next&&lastSelectedItem.matches(':first-of-type')){return}var sibling=getSiblingsOf(lastSelectedItem,'tr[is="coral-table-row"]',next?'next':'prev');if(!sibling.hasAttribute('selected')){lastSelectedItem=sibling}this._lastSelectedItems.direction=next?'down':'up';lastSelectedItem.selected=!lastSelectedItem.selected}else if(getRows([this.body]).length){var focusableItem=this._getFocusableItem();this._lastSelectedItems.direction=next?'down':'up';focusableItem.selected=true}}window.requestAnimationFrame(function(){var itemToFocus=_this4._lastSelectedItems.items[_this4._lastSelectedItems.items.length-1];if(itemToFocus){_this4._focusItem(itemToFocus,true)}})}},{key:"_getFocusableItem",value:function _getFocusableItem(){return this.body&&this.body.querySelector('tr[is="coral-table-row"][tabindex="0"]')}},{key:"_getFocusableHeaderCell",value:function _getFocusableHeaderCell(){return this.head&&this.head.querySelector('th[is="coral-table-headercell"][tabindex="0"], coral-table-headercell-label[tabindex="0"]')}},{key:"_addLastSelectedItem",value:function _addLastSelectedItem(item){if(this._lastSelectedItems.items.indexOf(item)===-1){this._lastSelectedItems.items.push(item)}else{this._removeLastSelectedItem(item);this._addLastSelectedItem(item)}}},{key:"_removeLastSelectedItem",value:function _removeLastSelectedItem(item){this._lastSelectedItems.items.splice(this._lastSelectedItems.items.indexOf(item),1)}},{key:"_focusItem",value:function _focusItem(item,forceFocus){this._toggleElementTabIndex(item,this._getFocusableItem(),forceFocus)}},{key:"_onFocusFirstItem",value:function _onFocusFirstItem(event){this._focusEdgeItem(event,true)}},{key:"_onFocusLastItem",value:function _onFocusLastItem(event){this._focusEdgeItem(event,false)}},{key:"_onFocusNextItem",value:function _onFocusNextItem(event){this._focusSiblingItem(event,true)}},{key:"_onFocusPreviousItem",value:function _onFocusPreviousItem(event){this._focusSiblingItem(event,false)}},{key:"_onSelectNextItem",value:function _onSelectNextItem(){this._selectSiblingItem(true)}},{key:"_onSelectPreviousItem",value:function _onSelectPreviousItem(){this._selectSiblingItem(false)}},{key:"resetLayout",value:function resetLayout(forced){forced=transform.boolean(forced);if(forced===true){this._doResetLayout();this._preventResetLayout=false}else{this._resetLayout()}}},{key:"_doResetLayout",value:function _doResetLayout(){this.classList.add(IS_LAYOUTING);this._resizeStickyHead();this._resizeContainer();this.classList.remove(IS_LAYOUTING)}},{key:"_resetLayout",value:function _resetLayout(){var _this5=this;if(this._preventResetLayout){return}if(this._timeout!==null){window.clearTimeout(this._timeout)}this._timeout=window.setTimeout(function(){_this5._timeout=null;_this5._doResetLayout();_this5.classList.add(IS_READY)},this._wait)}},{key:"_resizeStickyHead",value:function _resizeStickyHead(){var table=this;var head=table.head;if(head&&head.sticky){getRows([head]).forEach(function(row){getHeaderCells(row).forEach(function(headerCell){table._layoutStickyCell(headerCell,true)})})}}},{key:"_resizeContainer",value:function _resizeContainer(){var table=this;var head=table.head;if(head&&head.sticky){var calculatedHeadSize=0;var previousRowHeight=0;getRows([head]).forEach(function(row,i){var headerCells=getHeaderCells(row);if(headerCells.length){var computedStyle=window.getComputedStyle(headerCells[0].content);var rowHeight=0;var stickyHeaderCellMinHeight=parseFloat(computedStyle.minHeight);var borderTop=parseFloat(computedStyle.borderTopWidth);headerCells.forEach(function(headerCell){headerCell.content.style.height='';rowHeight=Math.max(rowHeight,headerCell.content.getBoundingClientRect().height)});calculatedHeadSize+=rowHeight;headerCells.forEach(function(headerCell){if(rowHeight-borderTop!==stickyHeaderCellMinHeight){headerCell.content.style.height="".concat(rowHeight,"px")}if(headerCell.content.textContent.trim().length&&!headerCell.content.querySelector('coral-checkbox[coral-table-select]')){var stickyHeaderCellHeight=headerCell.content.getBoundingClientRect().height;var span=document.createElement('span');table._preventResetLayout=true;while(headerCell.content.firstChild){span.appendChild(headerCell.content.firstChild)}headerCell.content.appendChild(span);var labelHeight=span.getBoundingClientRect().height;var paddingTop=(stickyHeaderCellHeight-labelHeight)/2;while(span.firstChild){headerCell.content.appendChild(span.firstChild)}headerCell.content.removeChild(span);headerCell.content.style.paddingTop="".concat(paddingTop,"px");window.requestAnimationFrame(function(){table._preventResetLayout=false})}previousRowHeight=previousRowHeight||rowHeight;headerCell.content.style.top="".concat(i>0?previousRowHeight*i+borderTop*(i-1):0,"px")})}});var containerComputedStyle=window.getComputedStyle(this._elements.container);var borderTopWidth=parseFloat(containerComputedStyle.borderTopWidth);var borderBottomWidth=parseFloat(containerComputedStyle.borderBottomWidth);var containerBorderSize=borderTopWidth+borderBottomWidth;var containerMarginTop="".concat(calculatedHeadSize,"px");var containerHeight="calc(100% - ".concat(calculatedHeadSize+containerBorderSize,"px)");this._resetContainerLayout(containerMarginTop,containerHeight)}else{this._resetContainerLayout()}}},{key:"_resetContainerLayout",value:function _resetContainerLayout(marginTop,height){this._elements.container.style.marginTop=marginTop||'';this._elements.container.style.height=height||''}},{key:"_resetHiddenColumns",value:function _resetHiddenColumns(resetLayout){var _this6=this;this.id=this.id||commons.getUID();this._elements.hiddenStyle.innerHTML='';getColumns(this.columns).forEach(function(column){if(column.hidden){var columnIndex=getIndexOf(column)+1;_this6._elements.hiddenStyle.innerHTML+="\n           #".concat(_this6.id," ._coral-Table-cell:nth-child(").concat(columnIndex,"),\n           #").concat(_this6.id," ._coral-Table-headerCell:nth-child(").concat(columnIndex,") {\n             display: none;\n           }\n        ")}});if(resetLayout){this._resetLayout()}}},{key:"_resetAlignmentColumns",value:function _resetAlignmentColumns(){var _this7=this;this.id=this.id||commons.getUID();this._elements.alignmentStyle.innerHTML='';getColumns(this.columns).forEach(function(column){var columnAlignment=column.alignment;var columnIndex=getIndexOf(column)+1;_this7._elements.alignmentStyle.innerHTML+="\n         #".concat(_this7.id," ._coral-Table-cell:nth-child(").concat(columnIndex,"),\n         #").concat(_this7.id," ._coral-Table-headerCell:nth-child(").concat(columnIndex,") {\n           text-align: ").concat(columnAlignment,";\n         }\n      ")})}},{key:"_onScroll",value:function _onScroll(){var table=this;var head=table.head;var scrollLeft=table._elements.container.scrollLeft;if(table._lastScrollLeft===scrollLeft){return}table._lastScrollLeft=scrollLeft;if(head&&head.sticky){head.style.margin='1px';window.requestAnimationFrame(function(){head.style.margin='';if(!table._preventLayoutStickyCellOnScroll){var firstHeaderCell=head.querySelector('tr[is="coral-table-row"] th[is="coral-table-headercell"]');if(firstHeaderCell){if(table._layoutStickyCellOnScroll||firstHeaderCell.content.offsetLeft===1){table._layoutStickyCellOnScroll=true;getRows([head]).forEach(function(row){getHeaderCells(row).forEach(function(headerCell){var paddingLeft=parseFloat(window.getComputedStyle(headerCell).paddingLeft);headerCell.content.style.marginLeft="-".concat(scrollLeft+paddingLeft,"px")})})}else{table._preventLayoutStickyCellOnScroll=true}}}})}}},{key:"_toggleSelectionCheckbox",value:function _toggleSelectionCheckbox(row){var cells=getContentCells(row);var renderCheckbox=function renderCheckbox(cell,process){cell._checkbox=cell._checkbox||cell.querySelector('coral-checkbox');if(!cell._checkbox){cell._checkbox=new Checkbox()}process(cell._checkbox);cell.insertBefore(cell._checkbox,cell.firstChild)};cells.forEach(function(cell,i){var isRowSelect=i===0&&cell.hasAttribute('coral-table-rowselect');var isCellSelect=cell.hasAttribute('coral-table-cellselect')||cell.querySelector('coral-checkbox[coral-table-cellselect]');if(isRowSelect||isCellSelect){var handle;if(isRowSelect){handle='coral-table-rowselect'}if(isCellSelect){handle='coral-table-cellselect'}renderCheckbox(cell,function(checkbox){if(isRowSelect){cell.classList.add('_coral-Table-cell--check');cell.removeAttribute(handle);checkbox.setAttribute(handle,'')}else{cell.setAttribute(handle,'');checkbox.removeAttribute(handle)}var isSelected=(isRowSelect?row:cell).hasAttribute('selected');checkbox[isSelected?'setAttribute':'removeAttribute']('checked','')})}})}},{key:"_setHeaderCellScope",value:function _setHeaderCellScope(headerCell,tableSection){var scope=tableSection.nodeName==='THEAD'||tableSection.nodeName==='TFOOT'?'col':'row';if(scope==='col'){if(this.head&&this.head.sticky){headerCell.setAttribute('role','presentation');headerCell._elements.content.setAttribute('role','columnheader')}else{headerCell.setAttribute('role','columnheader')}}else{headerCell.setAttribute('role','rowheader')}headerCell.setAttribute('scope',scope)}},{key:"_handleMutations",value:function _handleMutations(mutations){var _this8=this;mutations.forEach(function(mutation){for(var k=0;k<mutation.removedNodes.length;k+=1){var removedNode=mutation.removedNodes[k];if(isTableBody(removedNode)){if(!_this8.body){_this8.body=new TableBody()}_this8._onBodyContentChanged({target:removedNode,detail:{addedNodes:[],removedNodes:getRows([removedNode])}})}}});this._resetLayout()}},{key:"_getSelectableItems",value:function _getSelectableItems(){return this.items._getSelectableItems().filter(function(item){return!item.querySelector('[coral-table-rowselect][disabled]')})}},{key:"_toggleObserver",value:function _toggleObserver(enable){this._observer=this._observer||new MutationObserver(this._handleMutations.bind(this));if(enable){this._observer.observe(this,{childList:true,subtree:true})}else{this._observer.disconnect()}}},{key:"render",value:function render(){var _this9=this;_get(_getPrototypeOf(Table.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1x);this.setAttribute('role','presentation');if(!this._variant){this.variant=variant$m.DEFAULT}var head=this._elements.head;var body=this._elements.body;var foot=this._elements.foot;var columns=this._elements.columns;this._toggleObserver(false);this._elements.head.setAttribute('_observe','off');this._elements.body.setAttribute('_observe','off');var frag=document.createDocumentFragment();frag.appendChild(this._elements.container);frag.appendChild(this._elements.liveRegion);var wrapper=this.querySelector('._coral-Table-wrapper-container');if(wrapper){wrapper.remove()}var liveRegion=this.querySelector('._coral-Table-liveRegion');if(liveRegion){liveRegion.remove()}this.appendChild(frag);this.head=head;this.body=body;this.foot=foot;this.columns=columns;getRows([this._elements.table]).forEach(function(row){getHeaderCells(row).forEach(function(headerCell){_this9._setHeaderCellScope(headerCell,row.parentNode)})});if(this.head&&this.foot){var headRows=getRows([this.head]);var footRows=getRows([this.foot]);if(headRows.length===footRows.length){var redundantFooter=true;headRows.forEach(function(row,rowIndex){return getHeaderCells(row).forEach(function(headerCell,cellIndex){var footerCell=getHeaderCells(footRows[rowIndex])[cellIndex];if(!footerCell||headerCell.textContent.trim()!==footerCell.textContent.trim()){redundantFooter=false}})});if(redundantFooter){this.foot.setAttribute('aria-hidden','true')}}}commons.addResizeListener(this,this._resetLayout);var items=this._getSelectableItems();this._toggleInteractivity(items.length===0);if(this.selectable){var selectedItems=this.selectedItems;this._syncSelectAllHandle(selectedItems,items);if(selectedItems.length){this._oldSelection=selectedItems;this._lastSelectedItems.items=selectedItems}}this._allowSorting=true;var column=this._isSorted();if(column){column._doSort(true)}if(this.body){var rows=getRows([this.body]);rows.forEach(function(row){return _this9._toggleSelectionCheckbox(row)})}this._toggleObserver(true);if(!this.head||this.head&&!this.head.hasAttribute('sticky')){this.classList.add(IS_READY)}}},{key:"head",get:function get(){return this._getContentZone(this._elements.head)},set:function set(value){this._setContentZone('head',value,{handle:'head',tagName:'thead',insert:function insert(head){this._elements.table.tHead=head;head.setAttribute('_observe','on')}})}},{key:"body",get:function get(){return this._getContentZone(this._elements.body)},set:function set(value){this._setContentZone('body',value,{handle:'body',tagName:'tbody',insert:function insert(body){this._elements.table.appendChild(body);this.items._container=body;body.setAttribute('_observe','on')}})}},{key:"foot",get:function get(){return this._getContentZone(this._elements.foot)},set:function set(value){this._setContentZone('foot',value,{handle:'foot',tagName:'tfoot',insert:function insert(foot){this._elements.table.tFoot=foot}})}},{key:"columns",get:function get(){return this._getContentZone(this._elements.columns)},set:function set(value){this._setContentZone('columns',value,{handle:'columns',tagName:'colgroup',insert:function insert(content){this._elements.table.appendChild(content)}})}},{key:"variant",get:function get(){return this._variant||variant$m.DEFAULT},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$m)(value)&&value||variant$m.DEFAULT;this._reflectAttribute('variant',this._variant);(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$c);this.classList.add("".concat(CLASSNAME$1x,"--").concat(this._variant))}},{key:"selectable",get:function get(){return this._selectable||false},set:function set(value){this._selectable=transform.booleanAttr(value);this._reflectAttribute('selectable',this._selectable);var rows=getRows([this.body]);if(this._selectable){rows.forEach(function(row){row.setAttribute('_selectable','')})}else{rows.forEach(function(row){row.removeAttribute('_selectable')});this.trigger('coral-table:change',{selection:[],oldSelection:this._oldSelection});this._oldSelection=[];this._lastSelectedItems.items=[]}this._toggleFocusable()}},{key:"orderable",get:function get(){return this._orderable||false},set:function set(value){var _this10=this;this._orderable=transform.booleanAttr(value);this._reflectAttribute('orderable',this._orderable);getRows([this.body]).forEach(function(row){row[_this10._orderable?'setAttribute':'removeAttribute']('_orderable','')});this._toggleFocusable()}},{key:"multiple",get:function get(){return this._multiple||false},set:function set(value){this._multiple=transform.booleanAttr(value);this._reflectAttribute('multiple',this._multiple);this._elements.table.setAttribute('aria-multiselectable',this._multiple);if(!this.multiple){var selection=this.selectedItems;if(selection.length>1){selection.forEach(function(row,i){row.set('selected',i===selection.length-1,true)});var newSelection=this.selectedItems;if(newSelection.length){this._setSelectAllHandleState('indeterminate')}else{this._setSelectAllHandleState('unchecked')}this.trigger('coral-table:change',{selection:newSelection,oldSelection:selection});this._oldSelection=newSelection;this._lastSelectedItems.items=newSelection}}}},{key:"lockable",get:function get(){return this._lockable||false},set:function set(value){var _this11=this;this._lockable=transform.booleanAttr(value);this._reflectAttribute('lockable',this._lockable);getRows([this.body]).forEach(function(row){row[_this11._lockable?'setAttribute':'removeAttribute']('_lockable','')});this._toggleFocusable()}},{key:"labelledBy",get:function get(){return this._elements.table.getAttribute('aria-labelledby')},set:function set(value){value=transform.string(value);this._elements.table[value?'setAttribute':'removeAttribute']('aria-labelledby',value)}},{key:"labelled",get:function get(){return this._elements.table.getAttribute('aria-label')},set:function set(value){value=transform.string(value);this._elements.table[value?'setAttribute':'removeAttribute']('aria-label',value)}},{key:"selectedItems",get:function get(){return this.items._getAllSelected()}},{key:"selectedItem",get:function get(){return this.items._getFirstSelected()}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,container:this.body,itemBaseTagName:'tr',itemTagName:'coral-table-row'})}return this._items}},{key:"_contentZones",get:function get(){return{tbody:'body',thead:'head',tfoot:'foot',colgroup:'columns'}}}],[{key:"variant",get:function get(){return variant$m}},{key:"divider",get:function get(){return divider}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Table),"_attributePropertyMap",this),{labelledby:'labelledBy'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Table),"observedAttributes",this).concat(['variant','selectable','orderable','labelled','labelledby','multiple','lockable'])}}]);return Table}(BaseComponent(HTMLTableElement));var CLASSNAME$1y='_coral-Table-headerCell';var TableHeaderCell=function(_BaseComponent){_inherits(TableHeaderCell,_BaseComponent);var _super=_createSuper(TableHeaderCell);function TableHeaderCell(){var _this;_classCallCheck(this,TableHeaderCell);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-table-headercell-content')||document.createElement('coral-table-headercell-content')};_this._stickyCellObserver=new MutationObserver(_this._handleMutations.bind(_assertThisInitialized(_this)));_this._stickyCellObserver.observe(_this._elements.content,{childList:true,subtree:true});return _this}_createClass(TableHeaderCell,[{key:"_handleMutations",value:function _handleMutations(){this.trigger('coral-table-headercell:_contentchanged')}},{key:"render",value:function render(){_get(_getPrototypeOf(TableHeaderCell.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1y);var content=this._elements.content;if(!content.parentNode){while(this.firstChild){content.appendChild(this.firstChild)}}this.content=content}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-table-headercell-content',insert:function insert(content){this.appendChild(content)}})}},{key:"_contentZones",get:function get(){return{'coral-table-headercell-content':'content'}}}]);return TableHeaderCell}(BaseComponent(HTMLTableCellElement));var TableHeaderCellContent=(function(){return document.createElement('coral-table-headercell-content')});commons.extend(strings,{'coral-component-table':translations$l});commons._define('coral-table-column',TableColumn,{extends:'col'});commons._define('coral-table-cell',TableCell,{extends:'td'});commons._define('coral-table-headercell',TableHeaderCell,{extends:'th'});commons._define('coral-table-row',TableRow,{extends:'tr'});commons._define('coral-table-head',TableHead,{extends:'thead'});commons._define('coral-table-body',TableBody,{extends:'tbody'});commons._define('coral-table-foot',TableFoot,{extends:'tfoot'});commons._define('coral-table',Table,{extends:'table'});Table.Column=TableColumn;Table.Cell=TableCell;Table.HeaderCell=TableHeaderCell;Table.HeaderCell.Content=TableHeaderCellContent;Table.Row=TableRow;Table.Head=TableHead;Table.Body=TableBody;Table.Foot=TableFoot;var template$Y=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["icon"]=document.createElement("coral-icon");el0.setAttribute("handle","icon");el0.setAttribute("size","XS");el0.className+=" _coral-Tabs-item-icon";el0.setAttribute("alt","");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};function getTarget$1(targetValue){if(targetValue instanceof Node){return targetValue}var newTarget=null;if(typeof targetValue==='string'&&targetValue.trim()!==''){newTarget=document.querySelector(targetValue)}return newTarget}var CLASSNAME$1z='_coral-Tabs-item';var Tab=function(_BaseLabellable){_inherits(Tab,_BaseLabellable);var _super=_createSuper(Tab);function Tab(){var _thisSuper,_this;_classCallCheck(this,Tab);_this=_super.call(this);_this._elements={label:_this.querySelector('coral-tab-label')||document.createElement('coral-tab-label'),invalidIcon:_this.querySelector('._coral-Tabs-itemInvalidIcon')||_this._createInvalidIcon()};template$Y.call(_this._elements);_this._observer=new MutationObserver(function(){var icon=_this._elements.icon;if(icon){icon.size=_this._elements.label.textContent.trim().length?Icon.size.EXTRA_SMALL:Icon.size.SMALL}_get((_thisSuper=_assertThisInitialized(_this),_getPrototypeOf(Tab.prototype)),"_toggleIconAriaHidden",_thisSuper).call(_thisSuper);_this.trigger('coral-tab:_sizechanged')});_this._observer.observe(_this._elements.label,{childList:true,characterData:true,subtree:true});return _this}_createClass(Tab,[{key:"_toggleEllipsis",value:function _toggleEllipsis(){var _this2=this;requestAnimationFrame(function(){_this2.classList.toggle('is-overflowing',_this2._elements.label.clientWidth>_this2.clientWidth)})}},{key:"_selectTarget",value:function _selectTarget(){var realTarget=getTarget$1(this.target);if(realTarget){realTarget.setAttribute('selected','')}else{var tabList=this.parentNode;if(tabList&&tabList.target){realTarget=getTarget$1(tabList.target);if(realTarget){var currentIndex=tabList.items.getAll().indexOf(this);var targetItem=(realTarget.items?realTarget.items.getAll():realTarget.children)[currentIndex];if(targetItem){targetItem.setAttribute('selected','')}}}}}},{key:"_createInvalidIcon",value:function _createInvalidIcon(){var iconElement=document.createElement('coral-icon');iconElement.icon='alert';iconElement.size=Icon.size.EXTRA_SMALL;iconElement.setAttribute('aria-hidden','true');iconElement.classList.add('_coral-Tabs-itemInvalidIcon');if(!this._invalid){iconElement.setAttribute('hidden','true')}return iconElement}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(Tab.prototype),"connectedCallback",this).call(this);if(this.selected){this._selectTarget()}}},{key:"render",value:function render(){_get(_getPrototypeOf(Tab.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1z);this.setAttribute('role','tab');this.setAttribute('id',this.id||commons.getUID());var frag=document.createDocumentFragment();if(this.icon){frag.appendChild(this._elements.icon)}if(this._elements.invalidIcon){frag.append(this._elements.invalidIcon)}var label=this._elements.label;if(label.parentNode){label.parentNode.removeChild(label)}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&child.getAttribute('handle')!=='icon'){label.appendChild(child)}else{this.removeChild(child)}}this.appendChild(frag);this.label=label}},{key:"label",get:function get(){return this._getContentZone(this._elements.label)},set:function set(value){this._setContentZone('label',value,{handle:'label',tagName:'coral-tab-label',insert:function insert(label){label.classList.add("".concat(CLASSNAME$1z,"Label"));this.appendChild(label);this._toggleEllipsis()}})}},{key:"icon",get:function get(){var iconElement=this._elements.icon;return iconElement?iconElement.icon:''},set:function set(value){var iconElement=this._elements.icon;iconElement.icon=value;if(this.icon===''){iconElement.remove();this.trigger('coral-tab:_sizechanged')}else if(!iconElement.parentElement){if(!this._elements.label.textContent.trim().length){iconElement.size=Icon.size.SMALL}_get(_getPrototypeOf(Tab.prototype),"_toggleIconAriaHidden",this).call(this);this.insertBefore(iconElement,this.firstChild);this.trigger('coral-tab:_sizechanged')}}},{key:"invalid",get:function get(){return this._invalid||false},set:function set(value){this._invalid=transform.booleanAttr(value);this._reflectAttribute('invalid',this._invalid);this.classList.toggle('is-invalid',this._invalid);this.setAttribute('aria-invalid',this._invalid);if(this._invalid){this._elements.invalidIcon.removeAttribute('hidden')}else{this._elements.invalidIcon.setAttribute('hidden','true')}}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this.classList.toggle('is-disabled',this._disabled);this[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);if(this._disabled&&this.selected){this.selected=false}if(!this._disabled&&!this.selected){this.trigger('coral-tab:_validateselection')}}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){value=transform.booleanAttr(value);if(!value||value&&!this.disabled){this._selected=value;this._reflectAttribute('selected',this.disabled?false:this._selected);this.classList.toggle('is-selected',this._selected);this.setAttribute('tabindex',this._selected?'0':'-1');this.setAttribute('aria-selected',this._selected);if(this._selected){this._selectTarget()}this.trigger('coral-tab:_selectedchanged')}}},{key:"target",get:function get(){return typeof this._target==='string'?this._target:this._target||null},set:function set(value){if(value===null||typeof value==='string'||value instanceof Node){this._target=value;var realTarget=getTarget$1(this.target);if(realTarget){this.setAttribute('aria-controls',realTarget.id);realTarget.setAttribute('aria-labelledby',this.id);realTarget.setAttribute('role','tabpanel')}}}},{key:"trackingElement",get:function get(){return typeof this._trackingElement==='undefined'?(this.label||this).textContent.replace(/\s{2,}/g,' ').trim():this._trackingElement},set:function set(value){_set(_getPrototypeOf(Tab.prototype),"trackingElement",value,this,true)}},{key:"_contentZones",get:function get(){return{'coral-tab-label':'label'}}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Tab),"observedAttributes",this).concat(['selected','disabled','icon','invalid','target'])}}]);return Tab}(BaseLabellable(BaseComponent(HTMLElement)));var TabLabel=(function(){return document.createElement('coral-tab-label')});var template$Z=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["line"]=document.createElement("div");el0.setAttribute("handle","line");el0.setAttribute("hidden","");el0.className+=" _coral-Tabs-selectionIndicator";frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);return frag};var size$8={SMALL:'S',MEDIUM:'M',LARGE:'L'};var orientation$3={HORIZONTAL:'horizontal',VERTICAL:'vertical'};var CLASSNAME$1A='_coral-Tabs';var TabList=function(_BaseComponent){_inherits(TabList,_BaseComponent);var _super=_createSuper(TabList);function TabList(){var _this;_classCallCheck(this,TabList);_this=_super.call(this);_this._elements={};template$Z.call(_this._elements);_this._delegateEvents({'click > coral-tab':'_onTabClick','key:home > coral-tab':'_onHomeKey','key:end > coral-tab':'_onEndKey','key:pagedown > coral-tab':'_selectNextItem','key:right > coral-tab':'_selectNextItem','key:down > coral-tab':'_selectNextItem','key:pageup > coral-tab':'_selectPreviousItem','key:left > coral-tab':'_selectPreviousItem','key:up > coral-tab':'_selectPreviousItem','global:coral-commons:_webfontactive':'_setLine','coral-tab:_selectedchanged':'_onItemSelectedChanged','coral-tab:_validateselection':'_onValidateSelection','coral-tab:_sizechanged':'_setLine'});_this._oldSelection=null;_this._timeout=null;_this._wait=50;_this._setLine=_this._setLine.bind(_assertThisInitialized(_this));_this.items._startHandlingItems(true);return _this}_createClass(TabList,[{key:"_onItemAdded",value:function _onItemAdded(item){if(!this.selectedItem){item.setAttribute('selected','')}else{this._validateSelection(item)}}},{key:"_onItemRemoved",value:function _onItemRemoved(){if(!this.selectedItem){this._selectFirstItem()}}},{key:"_onTabClick",value:function _onTabClick(event){event.preventDefault();var item=event.matchedTarget;this._toggleItemSelectionAndFocus(item);this._trackEvent('click','coral-tab',event,item)}},{key:"_onHomeKey",value:function _onHomeKey(event){event.preventDefault();var item=this.items._getFirstSelectable();this._toggleItemSelectionAndFocus(item)}},{key:"_onEndKey",value:function _onEndKey(event){event.preventDefault();var item=this.items._getLastSelectable();this._toggleItemSelectionAndFocus(item)}},{key:"_selectNextItem",value:function _selectNextItem(event){event.preventDefault();var item=this.selectedItem;this._toggleItemSelectionAndFocus(this.items._getNextSelectable(item))}},{key:"_selectPreviousItem",value:function _selectPreviousItem(event){event.preventDefault();var item=this.selectedItem;this._toggleItemSelectionAndFocus(this.items._getPreviousSelectable(item))}},{key:"_toggleItemSelectionAndFocus",value:function _toggleItemSelectionAndFocus(item){if(item&&!item.hasAttribute('selected')){item.setAttribute('selected','');item.focus()}}},{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_onValidateSelection",value:function _onValidateSelection(event){event.stopImmediatePropagation();this._validateSelection()}},{key:"_selectFirstItem",value:function _selectFirstItem(){var item=this.items._getFirstSelectable();if(item){item.setAttribute('selected','')}}},{key:"_validateSelection",value:function _validateSelection(item){var _this2=this;var selectedItems=this.items._getAllSelected();if(item){if(!item.hasAttribute('selected')&&!selectedItems.length){var siblingItem=this.items._getNextSelectable(item);if(item!==siblingItem){siblingItem.setAttribute('selected','')}}else if(item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}}else if(selectedItems.length>1){item=selectedItems[selectedItems.length-1];selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}else if(!selectedItems.length){this._selectFirstItem()}this._setLine();this._triggerChangeEvent()}},{key:"_setLine",value:function _setLine(){var _this3=this;if(this._timeout!==null){window.clearTimeout(this._timeout)}this._timeout=window.setTimeout(function(){_this3._timeout=null;var selectedItem=_this3.selectedItem;if(selectedItem){if(_this3.orientation===orientation$3.HORIZONTAL){var padding=window.parseInt(window.getComputedStyle(selectedItem).paddingLeft);var left=selectedItem.offsetLeft+padding;var width=selectedItem.clientWidth-padding*2;if(_this3._previousOrientation!==_this3.orientation){_this3._elements.line.style.height=''}_this3._elements.line.style.width="".concat(width,"px");_this3._elements.line.style.transform="translate(".concat(left,"px, 0)")}else if(_this3.orientation===orientation$3.VERTICAL){var top=selectedItem.offsetTop;var height=selectedItem.clientHeight;if(_this3._previousOrientation!==_this3.orientation){_this3._elements.line.style.width=''}_this3._elements.line.style.height="".concat(height,"px");_this3._elements.line.style.transform="translate(0, ".concat(top,"px)")}_this3._elements.line.hidden=false}else{_this3._elements.line.hidden=true}_this3._previousOrientation=_this3.orientation},this._wait)}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItem=this.selectedItem;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&selectedItem!==oldSelection){this.trigger('coral-tablist:change',{oldSelection:oldSelection,selection:selectedItem});this._oldSelection=selectedItem}}},{key:"render",value:function render(){_get(_getPrototypeOf(TabList.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1A);this.setAttribute('role','tablist');this.setAttribute('aria-multiselectable','false');if(!this._size){this.size=size$8.MEDIUM}if(!this._orientation){this.orientation=orientation$3.HORIZONTAL}var template=this.querySelector('._coral-Tabs-selectionIndicator');if(template){template.remove()}this.appendChild(this._elements.line);this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItem;commons.addResizeListener(this,this._setLine)}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-tab',onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved})}return this._items}},{key:"selectedItem",get:function get(){return this.items._getLastSelected()}},{key:"target",get:function get(){return typeof this._target==='string'?this._target:this._target||null},set:function set(value){var _this4=this;if(value===null||typeof value==='string'||value instanceof Node){this._target=value;window.requestAnimationFrame(function(){var realTarget=getTarget$1(_this4._target);if(realTarget){var tabItems=_this4.items.getAll();var panelItems=realTarget.items?realTarget.items.getAll():realTarget.children;var maxItems=Math.max(tabItems.length,panelItems.length);var tab;var panel;for(var i=0;i<maxItems;i+=1){tab=tabItems[i];panel=panelItems[i];if(tab&&tab.target&&tab.target.trim()!==''){continue}if(tab&&panel){tab.id=tab.id||commons.getUID();panel.id=panel.id||commons.getUID();tab.setAttribute('aria-controls',panel.id);panel.setAttribute('aria-labelledby',tab.id);panel.setAttribute('role','tabpanel')}else if(tab){tab.removeAttribute('aria-controls')}else{panel.removeAttribute('aria-labelledby')}}}})}}},{key:"size",get:function get(){return this._size||size$8.MEDIUM},set:function set(value){value=transform.string(value).toUpperCase();this._size=validate.enumeration(size$8)(value)&&value||size$8.MEDIUM;this._reflectAttribute('size',this._size);this.classList.remove("".concat(CLASSNAME$1A,"--compact"),"".concat(CLASSNAME$1A,"--quiet"));if(this._size===size$8.SMALL){this.classList.add("".concat(CLASSNAME$1A,"--compact"))}else if(this._size===size$8.LARGE){this.classList.add("".concat(CLASSNAME$1A,"--quiet"))}}},{key:"orientation",get:function get(){return this._orientation||orientation$3.HORIZONTAL},set:function set(value){value=transform.string(value).toLowerCase();var newValue=typeof this._orientation==='undefined';this._orientation=validate.enumeration(orientation$3)(value)&&value||orientation$3.HORIZONTAL;if(newValue){this._previousOrientation=this._orientation}this._reflectAttribute('orientation',this._orientation);this.classList.toggle("".concat(CLASSNAME$1A,"--vertical"),this._orientation===orientation$3.VERTICAL);this.classList.toggle("".concat(CLASSNAME$1A,"--horizontal"),this._orientation===orientation$3.HORIZONTAL);this._setLine()}}],[{key:"size",get:function get(){return size$8}},{key:"orientation",get:function get(){return orientation$3}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(TabList),"observedAttributes",this).concat(['target','size','orientation'])}}]);return TabList}(BaseComponent(HTMLElement));commons._define('coral-tab',Tab);commons._define('coral-tablist',TabList);Tab.Label=TabLabel;var orientation$4={HORIZONTAL:'horizontal',VERTICAL:'vertical'};var CLASSNAME$1B='_coral-TabView';var TabView=function(_BaseComponent){_inherits(TabView,_BaseComponent);var _super=_createSuper(TabView);function TabView(){var _this;_classCallCheck(this,TabView);_this=_super.call(this);_this._elements={tabList:_this.querySelector('coral-tablist')||document.createElement('coral-tablist'),panelStack:_this.querySelector('coral-panelstack')||document.createElement('coral-panelstack')};_this._delegateEvents({'coral-tablist:change > coral-tablist':'_onTabListChange','coral-panelstack:change > coral-panelstack':'_onPanelStackChange','coral-collection:add > coral-tablist':'_syncTabListAndPanelStack','coral-collection:remove > coral-tablist':'_syncTabListAndPanelStack','coral-collection:add > coral-panelstack':'_syncTabListAndPanelStack','coral-collection:remove > coral-panelstack':'_syncTabListAndPanelStack'});return _this}_createClass(TabView,[{key:"_onTabListChange",value:function _onTabListChange(event){this.trigger('coral-tabview:change',{selection:event.detail.selection,oldSelection:event.detail.oldSelection})}},{key:"_onPanelStackChange",value:function _onPanelStackChange(event){if(event.detail.selection){var tabSelector=event.detail.selection.getAttribute('aria-labelledby');var tab=document.getElementById(tabSelector);if(tab){if(!tab.hasAttribute('selected')){tab.setAttribute('selected','')}else{this._trackEvent('display','coral-tab',event,event.detail.selection)}}}}},{key:"_syncTabListAndPanelStack",value:function _syncTabListAndPanelStack(){this._elements.tabList.target=this._elements.tabList.target}},{key:"render",value:function render(){_get(_getPrototypeOf(TabView.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1B);if(!this._orientation){this.orientation=this.orientation}var tabs=this._elements.tabList;var panels=this._elements.panelStack;panels.id=panels.id||commons.getUID();tabs.setAttribute('target',"#".concat(panels.id));this.panelStack=panels;this.tabList=tabs}},{key:"orientation",get:function get(){return this._elements.tabList.getAttribute('orientation')||orientation$4.HORIZONTAL},set:function set(value){this._elements.tabList.setAttribute('orientation',value);this._reflectAttribute('orientation',this.orientation);this.classList[this.orientation===orientation$4.VERTICAL?'add':'remove']("".concat(CLASSNAME$1B,"--vertical"))}},{key:"tabList",get:function get(){return this._getContentZone(this._elements.tabList)},set:function set(value){if(value instanceof HTMLElement&&!value.parentNode||value.parentNode===this){this._setContentZone('tabList',value,{handle:'tabList',tagName:'coral-tablist',insert:function insert(tabs){tabs.setAttribute('tracking','off');this.insertBefore(tabs,this._elements.panelStack||null)}})}}},{key:"panelStack",get:function get(){return this._getContentZone(this._elements.panelStack)},set:function set(value){if(value instanceof HTMLElement&&!value.parentNode||value.parentNode===this){this._setContentZone('panelStack',value,{handle:'panelStack',tagName:'coral-panelstack',insert:function insert(panels){this.appendChild(panels)}})}}},{key:"_contentZones",get:function get(){return{'coral-tablist':'tabList','coral-panelstack':'panelStack'}}}],[{key:"orientation",get:function get(){return orientation$4}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(TabView),"observedAttributes",this).concat(['orientation'])}}]);return TabView}(BaseComponent(HTMLElement));commons._define('coral-tabview',TabView);var template$_=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["body"]=document.createElement("div");el0.className+=" _coral-Toast-body";el0.setAttribute("handle","body");frag.appendChild(el0);var el1=document.createTextNode("\n");frag.appendChild(el1);var el2=this["buttons"]=document.createElement("div");el2.className+=" _coral-Toast-buttons";el2.setAttribute("handle","buttons");var el3=document.createTextNode("\n  ");el2.appendChild(el3);var el4=document.createElement("button","coral-button");el4.setAttribute("tracking","off");el4.setAttribute("is","coral-button");el4.setAttribute("type","button");el4.setAttribute("variant","_custom");el4.className+=" _coral-ClearButton _coral-ClearButton--medium _coral-ClearButton--overBackground";el4.setAttribute("coral-close","");var el5=document.createTextNode("\n    ");el4.appendChild(el5);var el6=document.createElement("coral-icon");el6.setAttribute("icon","spectrum-css-icon-CrossMedium");el6.className+=" _coral-UIIcon-CrossMedium";el4.appendChild(el6);var el7=document.createTextNode("\n    ");el4.appendChild(el7);var el8=this["buttonLabel"]=document.createElement("coral-button-label");el8.setAttribute("handle","buttonLabel");el4.appendChild(el8);var el9=document.createTextNode("\n  ");el4.appendChild(el9);el2.appendChild(el4);var el10=document.createTextNode("\n");el2.appendChild(el10);frag.appendChild(el2);var el11=document.createTextNode("\n");frag.appendChild(el11);return frag};var variant$n={DEFAULT:'default',ERROR:'error',SUCCESS:'success',INFO:'info'};var placement$3={LEFT:'left',CENTER:'center',RIGHT:'right'};var CLASSNAME$1C='_coral-Toast';var ALL_VARIANT_CLASSES$d=[];for(var variantValue$b in variant$n){ALL_VARIANT_CLASSES$d.push("".concat(CLASSNAME$1C,"--").concat(variant$n[variantValue$b]))}var PRIORITY_QUEUE=[];var queue$1=function queue(el){var priority;var type=transform.string(el.getAttribute('variant')).toLowerCase();if(type===variant$n.ERROR){priority=el.action?1:2}else if(type===variant$n.SUCCESS){priority=el.action?3:6}else if(type===variant$n.INFO){priority=el.action?4:7}else{priority=el.action?5:8}PRIORITY_QUEUE.push({el:el,priority:priority})};var unqueue=function unqueue(){var next=null;[1,2,3,4,5,6,7,8].some(function(priority){return PRIORITY_QUEUE.some(function(item,index){if(item.priority===priority){next={el:item.el,index:index};return true}})});if(next!==null){PRIORITY_QUEUE.splice(next.index,1);next.el.open=true}};var capitalize$4=function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)};var isButton=function isButton(node){return node.nodeName==='BUTTON'&&node.getAttribute('is')==='coral-button'||node.nodeName==='A'&&node.getAttribute('is')==='coral-anchorbutton'};var Toast=function(_BaseOverlay){_inherits(Toast,_BaseOverlay);var _super=_createSuper(Toast);function Toast(){var _this;_classCallCheck(this,Toast);_this=_super.call(this);_this._wait=50;_this._overlayAnimationTime=_this.constructor.FADETIME;_this._focusOnShow=_this.constructor.focusOnShow.OFF;_this._returnFocus=_this.constructor.returnFocus.ON;_this._elements={content:_this.querySelector('coral-toast-content')||document.createElement('coral-toast-content')};template$_.call(_this._elements);_this._delegateEvents({'global:resize':'_debounceLayout','global:key:escape':'_onEscape','click [coral-close]':'_onCloseClick','coral-overlay:close':'_onClose'});_this._observer=new MutationObserver(function(){_this._debounceLayout()});_this._observer.observe(_assertThisInitialized(_this),{childList:true,subtree:true});return _this}_createClass(Toast,[{key:"_renderVariantIcon",value:function _renderVariantIcon(){if(this._elements.icon){this._elements.icon.remove()}var variantValue=this.variant;if(variantValue===variant$n.DEFAULT){return}var iconName=variantValue===variant$n.ERROR?'Alert':capitalize$4(variantValue);var icon=Icon._renderSVG("spectrum-css-icon-".concat(iconName,"Medium"),['_coral-Toast-typeIcon',"_coral-UIIcon-".concat(iconName,"Medium")]);this.insertAdjacentHTML('afterbegin',icon);this._elements.icon=this.querySelector('._coral-Toast-typeIcon')}},{key:"_moveToDocumentBody",value:function _moveToDocumentBody(){if(!document.body.contains(this)){document.body.appendChild(this )}else if(this.parentNode!==document.body){this._ignoreConnectedCallback=true;this._repositioned=true;document.body.appendChild(this);this._ignoreConnectedCallback=false}}},{key:"_debounceLayout",value:function _debounceLayout(){var _this2=this;if(this._layoutTimeout!==null){clearTimeout(this._layoutTimeout)}this._layoutTimeout=window.setTimeout(function(){_this2._layoutTimeout=null;_this2._position()},this._wait)}},{key:"_position",value:function _position(){var _this3=this;if(this.open){requestAnimationFrame(function(){if(_this3.placement===placement$3.CENTER){_this3.style.left="".concat(document.body.clientWidth/2-_this3.clientWidth/2,"px");_this3.style.right=''}else if(_this3.placement===placement$3.LEFT){_this3.style.left=0;_this3.style.right=''}else if(_this3.placement===placement$3.RIGHT){_this3.style.left='';_this3.style.right=0}})}}},{key:"_onEscape",value:function _onEscape(event){if(this.open&&this.classList.contains('is-open')&&this._isTopOverlay()){event.stopPropagation();this.open=false}}},{key:"_onCloseClick",value:function _onCloseClick(event){var dismissTarget=event.matchedTarget;var dismissValue=dismissTarget.getAttribute('coral-close');if(!dismissValue||this.matches(dismissValue)){this.open=false;event.stopPropagation()}}},{key:"_onClose",value:function _onClose(){this._queued=false;unqueue()}},{key:"connectedCallback",value:function connectedCallback(){if(this._ignoreConnectedCallback){return}_get(_getPrototypeOf(Toast.prototype),"connectedCallback",this).call(this)}},{key:"render",value:function render(){_get(_getPrototypeOf(Toast.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1C);if(!this._variant){this.variant=variant$n.DEFAULT}var fragment=document.createDocumentFragment();var templateHandleNames=['body','buttons'];fragment.appendChild(this._elements.body);fragment.appendChild(this._elements.buttons);var content=this._elements.content;if(content.parentNode){content.remove()}var action=this.action;if(action){action.remove()}while(this.firstChild){var child=this.firstChild;if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){content.appendChild(child)}else{this.removeChild(child)}}this.appendChild(fragment);this._renderVariantIcon();this.content=this._elements.content;this.action=action}},{key:"disconnectedCallback",value:function disconnectedCallback(){var _this4=this;if(this._ignoreConnectedCallback){return}_get(_getPrototypeOf(Toast.prototype),"disconnectedCallback",this).call(this);if(this._queued){var el=null;PRIORITY_QUEUE.some(function(item,index){if(item.el===_this4){_this4._queued=false;el=index;return true}});if(el!==null){PRIORITY_QUEUE.splice(el,1)}}}},{key:"autoDismiss",get:function get(){return typeof this._autoDismiss==='number'?this._autoDismiss:5000},set:function set(value){value=transform.number(value);if(value!==null){value=Math.abs(value);if(value!==0&&value<5000){commons._log('warn','Coral.Toast: the value for autoDismiss has to be 5 seconds minimum.');value=5000}this._autoDismiss=value}}},{key:"action",get:function get(){return this._elements.action||this.querySelector('[coral-toast-action]')},set:function set(el){if(!el){return}if(isButton(el)){this._elements.action=el;el.setAttribute('coral-toast-action','');el.setAttribute('variant',Button.variant._CUSTOM);el.classList.add('_coral-Button','_coral-Button--overBackground','_coral-Button--quiet');this._elements.body.appendChild(el)}else{commons._log('warn','Coral.Toast: provided action is not a Coral.Button or Coral.AnchorButton.')}}},{key:"open",get:function get(){return _get(_getPrototypeOf(Toast.prototype),"open",this)},set:function set(value){var _this5=this;value=transform.booleanAttr(value);if(value&&!this._queued){this._open=value;this._queued=true;if(this._dimissTimeout){clearTimeout(this._dimissTimeout)}queue$1(this);requestAnimationFrame(function(){_this5._reflectAttribute('open',true);_this5._moveToDocumentBody();requestAnimationFrame(function(){if(document.querySelectorAll('coral-toast[open]').length===PRIORITY_QUEUE.length){unqueue()}})});return}_set(_getPrototypeOf(Toast.prototype),"open",value,this,true);if(this.open){this._position();this._handleFocus();requestAnimationFrame(function(){if(_this5.autoDismiss!==0){_this5._dimissTimeout=window.setTimeout(function(){if(_this5.open&&!_this5.contains(document.activeElement)){_this5.open=false}},_this5.autoDismiss)}})}}},{key:"variant",get:function get(){return this._variant||variant$n.DEFAULT},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$n)(value)&&value||variant$n.DEFAULT;this._reflectAttribute('variant',this._variant);this._renderVariantIcon();(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$d);this.classList.add("".concat(CLASSNAME$1C,"--").concat(this._variant));this.setAttribute('role',this._variant)}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-toast-content',insert:function insert(content){content.classList.add("".concat(CLASSNAME$1C,"-content"));this._elements.body.insertBefore(content,this._elements.body.firstChild)}})}},{key:"placement",get:function get(){return this._placement||placement$3.CENTER},set:function set(value){value=transform.string(value).toLowerCase();this._placement=validate.enumeration(placement$3)(value)&&value||placement$3.CENTER;this._debounceLayout()}},{key:"_contentZones",get:function get(){return{'coral-toast-content':'content'}}}],[{key:"_queue",get:function get(){return PRIORITY_QUEUE}},{key:"placement",get:function get(){return placement$3}},{key:"variant",get:function get(){return variant$n}},{key:"_attributePropertyMap",get:function get(){return commons.extend(_get(_getPrototypeOf(Toast),"_attributePropertyMap",this),{autodismiss:'autoDismiss'})}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Toast),"observedAttributes",this).concat(['variant','placement','autodismiss'])}}]);return Toast}(BaseOverlay(BaseComponent(HTMLElement)));var ToastContent=(function(){return document.createElement('coral-toast-content')});commons._define('coral-toast',Toast);Toast.Content=ToastContent;var template$$=function anonymous(data_0){var frag=document.createDocumentFragment();var data=data_0=typeof data_0==="undefined"?{}:data_0;var el0=this["header"]=document.createElement("div");el0.className+=" _coral-TreeView-itemLink";el0.setAttribute("tabindex","-1");el0.id=data_0["commons"]["getUID"]();el0.setAttribute("handle","header");el0.setAttribute("role","treeitem");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["selectedState"]=document.createElement("span");el2.className+=" u-coral-screenReaderOnly";el2.setAttribute("handle","selectedState");el2.setAttribute("role","presentation");el2.id=data_0["commons"]["getUID"]();el0.appendChild(el2);var el3=document.createTextNode("\n");el0.appendChild(el3);frag.appendChild(el0);var el4=document.createTextNode("\n");frag.appendChild(el4);data=data_0;this.header.insertAdjacentHTML('afterbegin',data.Icon._renderSVG('spectrum-css-icon-ChevronRightMedium',['_coral-TreeView-indicator','_coral-UIIcon-ChevronRightMedium']));data_0=data;var el6=document.createTextNode("\n");frag.appendChild(el6);var el7=this["subTreeContainer"]=document.createElement("div");el7.className+=" _coral-TreeView";el7.setAttribute("handle","subTreeContainer");el7.id=data_0["commons"]["getUID"]();el7.setAttribute("role","group");frag.appendChild(el7);var el8=document.createTextNode("\n");frag.appendChild(el8);return frag};var CLASSNAME$1D='_coral-TreeView-item';var variant$o={DRILLDOWN:'drilldown',LEAF:'leaf'};var ALL_VARIANT_CLASSES$e=[];for(var variantValue$c in variant$o){ALL_VARIANT_CLASSES$e.push("".concat(CLASSNAME$1D,"--").concat(variant$o[variantValue$c]))}var IS_TOUCH_DEVICE='ontouchstart'in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;var TreeItem=function(_BaseComponent){_inherits(TreeItem,_BaseComponent);var _super=_createSuper(TreeItem);function TreeItem(){var _this;_classCallCheck(this,TreeItem);_this=_super.call(this);_this._elements={content:_this.querySelector('coral-tree-item-content')||document.createElement('coral-tree-item-content')};template$$.call(_this._elements,{Icon:Icon,commons:commons});if(!_this._elements.icon){_this._elements.icon=_this._elements.header.querySelector('._coral-TreeView-indicator')}_this.items._startHandlingItems();return _this}_createClass(TreeItem,[{key:"_filterItem",value:function _filterItem(item){return item.parentNode&&item.parentNode.parentNode===this||item._parent===this}},{key:"_onItemAdded",value:function _onItemAdded(item){item._parent=this;var header=this._elements.header;var subTreeContainer=this._elements.subTreeContainer;if(!header.hasAttribute('aria-owns')){header.setAttribute('aria-owns',subTreeContainer.id)}}},{key:"_onItemRemoved",value:function _onItemRemoved(item){item._parent=undefined;if(!this.items.length){this._elements.header.removeAttribute('aria-owns')}}},{key:"focus",value:function focus(){this._elements.header.setAttribute('tabindex','0');this._elements.header.focus()}},{key:"render",value:function render(){_get(_getPrototypeOf(TreeItem.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1D);var header=this._elements.header;var subTreeContainer=this._elements.subTreeContainer;var content=this._elements.content;var selectedState=this._elements.selectedState;content.id=content.id||commons.getUID();this.setAttribute('role','presentation');header.setAttribute('aria-labelledby',"".concat(content.id," ").concat(selectedState.id));header.setAttribute('aria-selected',this.selected);subTreeContainer.setAttribute('aria-labelledby',content.id);selectedState.textContent=i18n.get(this.selected?'selected':'not selected');if(IS_TOUCH_DEVICE){var icon=this._elements.icon||header.querySelector('._coral-TreeView-indicator');if(icon&&!icon.id){icon.id=commons.getUID()}icon.setAttribute('role','button');icon.setAttribute('tabindex','-1');icon.setAttribute('aria-labelledby',icon.id+' '+content.id);icon.setAttribute('aria-label',i18n.get(this.expanded?'Collapse':'Expand'));icon.setAttribute('style','outline: none !important');icon.removeAttribute('aria-hidden');selectedState.setAttribute('role','button');selectedState.setAttribute('tabindex','-1');selectedState.setAttribute('aria-labelledby',content.id+' '+selectedState.id);selectedState.setAttribute('aria-pressed',this.selected);selectedState.setAttribute('style','outline: none !important')}if(!this._variant){this.variant=variant$o.DRILLDOWN}this.expanded=this.expanded;var frag=document.createDocumentFragment();var templateHandleNames=['header','icon','subTreeContainer'];var subTree=this.querySelector('._coral-TreeView');if(subTree){var items=subTree.querySelectorAll('coral-tree-item');for(var i=0;i<items.length;i+=1){subTreeContainer.appendChild(items[i])}}frag.appendChild(header);frag.appendChild(subTreeContainer);this.content=content;while(this.firstChild){var child=this.firstChild;if(child.nodeName==='CORAL-TREE-ITEM'){child._parent=this;subTreeContainer.appendChild(child)}else if(child.nodeType===Node.TEXT_NODE||child.nodeType===Node.ELEMENT_NODE&&templateHandleNames.indexOf(child.getAttribute('handle'))===-1){content.appendChild(child)}else{this.removeChild(child)}}if(this.variant===variant$o.DRILLDOWN&&this.items.length&&!header.hasAttribute('aria-owns')){header.setAttribute('aria-owns',subTreeContainer.id)}this.appendChild(frag)}},{key:"parent",get:function get(){return this._parent||null}},{key:"content",get:function get(){return this._getContentZone(this._elements.content)},set:function set(value){this._setContentZone('content',value,{handle:'content',tagName:'coral-tree-item-content',insert:function insert(content){this._elements.header.appendChild(content)}})}},{key:"items",get:function get(){if(!this._items){this._items=new Collection$1({host:this,itemTagName:'coral-tree-item',itemSelector:':scope > coral-tree-item',container:this._elements.subTreeContainer,filter:this._filterItem.bind(this),onItemAdded:this._onItemAdded,onItemRemoved:this._onItemRemoved})}return this._items}},{key:"expanded",get:function get(){return this._expanded||false},set:function set(value){var _this2=this;value=transform.booleanAttr(value);var triggerEvent=this.expanded!==value;this._expanded=value;this._reflectAttribute('expanded',this._expanded);var header=this._elements.header;var subTreeContainer=this._elements.subTreeContainer;this.classList.toggle('is-open',this._expanded);this.classList.toggle('is-collapsed',!this._expanded);if(this.variant!==variant$o.DRILLDOWN){header.removeAttribute('aria-expanded');header.removeAttribute('aria-owns')}else if(this.items.length>0){header.setAttribute('aria-expanded',this._expanded);header.setAttribute('aria-owns',subTreeContainer.id)}if(this._expanded){subTreeContainer.removeAttribute('aria-hidden')}else{subTreeContainer.setAttribute('aria-hidden',!this._expanded)}if(IS_TOUCH_DEVICE){var icon=header.querySelector('._coral-TreeView-indicator');icon.setAttribute('aria-label',i18n.get(this._expanded?'Collapse':'Expand'))}this.trigger('coral-tree-item:_expandedchanged');window.requestAnimationFrame(function(){if(_this2._animate){commons.transitionEnd(subTreeContainer,function(){if(_this2.expanded){subTreeContainer.style.height=''}else{subTreeContainer.hidden=true}if(triggerEvent){_this2.trigger('coral-tree-item:_afterexpandedchanged')}});if(!_this2.expanded){subTreeContainer.style.height="".concat(subTreeContainer.scrollHeight,"px")}else{subTreeContainer.hidden=false}var offsetHeight=subTreeContainer.offsetHeight;subTreeContainer.style.height=_this2.expanded?"".concat(subTreeContainer.scrollHeight,"px"):0}else{_this2._animate=true;if(!_this2.expanded){subTreeContainer.style.height=0;subTreeContainer.hidden=true}}})}},{key:"variant",get:function get(){return this._variant||variant$o.DRILLDOWN},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._variant=validate.enumeration(variant$o,value)&&value||variant$o.DRILLDOWN;(_this$classList=this.classList).remove.apply(_this$classList,ALL_VARIANT_CLASSES$e);this.classList.add("".concat(CLASSNAME$1D,"--").concat(this._variant))}},{key:"selected",get:function get(){return this._selected||false},set:function set(value){this._selected=transform.booleanAttr(value);this._reflectAttribute('selected',this._selected);this._elements.header.classList.toggle('is-selected',this._selected);this._elements.header.setAttribute('aria-selected',this._selected);var selectedState=this._elements.selectedState;selectedState.textContent=i18n.get(this._selected?'selected':'not selected');if(IS_TOUCH_DEVICE){selectedState.setAttribute('aria-pressed',this._selected)}this.trigger('coral-tree-item:_selectedchanged')}},{key:"disabled",get:function get(){return this._disabled||false},set:function set(value){this._disabled=transform.booleanAttr(value);this._reflectAttribute('disabled',this._disabled);this._elements.header.classList.toggle('is-disabled',this._disabled);this._elements.header[this._disabled?'setAttribute':'removeAttribute']('aria-disabled',this._disabled);this.trigger('coral-tree-item:_disabledchanged')}},{key:"hidden",get:function get(){return this.hasAttribute('hidden')},set:function set(value){this._reflectAttribute('hidden',transform.booleanAttr(value));this.trigger('coral-tree-item:_hiddenchanged')}},{key:"_contentZones",get:function get(){return{'coral-tree-item-content':'content'}}}],[{key:"variant",get:function get(){return variant$o}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(TreeItem),"observedAttributes",this).concat(['selected','disabled','variant','expanded','hidden'])}}]);return TreeItem}(BaseComponent(HTMLElement));var CLASSNAME$1E='_coral-TreeView';var Tree=function(_BaseComponent){_inherits(Tree,_BaseComponent);var _super=_createSuper(Tree);function Tree(){var _this;_classCallCheck(this,Tree);_this=_super.call(this);_this._delegateEvents({'click ._coral-TreeView-itemLink':'_onItemClick','click ._coral-TreeView-indicator':'_onExpandCollapseClick','coral-collection:add coral-tree-item':'_onCollectionChange','coral-collection:remove coral-tree-item':'_onCollectionChange','key:space ._coral-TreeView-itemLink':'_onItemClick','key:space ._coral-TreeView-indicator':'_onExpandCollapseClick','key:return ._coral-TreeView-itemLink, ._coral-TreeView-indicator':'_onExpandCollapseClick','key:pageup ._coral-TreeView-itemLink, ._coral-TreeView-indicator':'_onFocusPreviousItem','key:left ._coral-TreeView-itemLink, ._coral-TreeView-indicator':'_onCollapseItem','key:up ._coral-TreeView-itemLink, ._coral-TreeView-indicator':'_onFocusPreviousItem','key:pagedown ._coral-TreeView-itemLink, ._coral-TreeView-indicator':'_onFocusNextItem','key:right ._coral-TreeView-itemLink, ._coral-TreeView-indicator':'_onExpandItem','key:down ._coral-TreeView-itemLink, ._coral-TreeView-indicator':'_onFocusNextItem','key:home ._coral-TreeView-itemLink, ._coral-TreeView-indicator':'_onFocusFirstItem','key:end ._coral-TreeView-itemLink, ._coral-TreeView-indicator':'_onFocusLastItem','capture:blur ._coral-TreeView-itemLink[tabindex="0"]':'_onItemBlur','coral-tree-item:_selectedchanged':'_onItemSelectedChanged','coral-tree-item:_disabledchanged':'_onFocusableChanged','coral-tree-item:_expandedchanged':'_onFocusableChanged','coral-tree-item:_afterexpandedchanged':'_onExpandedChanged','coral-tree-item:_hiddenchanged':'_onFocusableChanged'});_this._oldSelection=[];_this.items._startHandlingItems(true);var observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){for(var i=0;i<mutation.addedNodes.length;i+=1){var addedNode=mutation.addedNodes[i];if(addedNode.tagName==='CORAL-TREE-ITEM'){if(addedNode.parentNode.tagName===addedNode.tagName){addedNode.parentNode._elements.subTreeContainer.appendChild(addedNode)}}}})});observer.observe(_assertThisInitialized(_this),{childList:true,subtree:true});return _this}_createClass(Tree,[{key:"_onItemSelectedChanged",value:function _onItemSelectedChanged(event){event.stopImmediatePropagation();this._validateSelection(event.target)}},{key:"_validateSelection",value:function _validateSelection(item){var _this2=this;var selectedItems=this.selectedItems;if(!this.multiple){item=item||selectedItems[selectedItems.length-1];if(item&&item.hasAttribute('selected')&&selectedItems.length>1){selectedItems.forEach(function(selectedItem){if(selectedItem!==item){_this2._preventTriggeringEvents=true;selectedItem.removeAttribute('selected')}});this._preventTriggeringEvents=false}}this._triggerChangeEvent()}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(){var selectedItems=this.selectedItems;var oldSelection=this._oldSelection;if(!this._preventTriggeringEvents&&this._arraysAreDifferent(selectedItems,oldSelection)){if(this.multiple){this.trigger('coral-tree:change',{oldSelection:oldSelection,selection:selectedItems})}else{this.trigger('coral-tree:change',{oldSelection:oldSelection.length>1?oldSelection:oldSelection[0]||null,selection:selectedItems[0]||null})}this._oldSelection=selectedItems}}},{key:"_arraysAreDifferent",value:function _arraysAreDifferent(selection,oldSelection){var diff=[];if(oldSelection.length===selection.length){diff=oldSelection.filter(function(item){return selection.indexOf(item)===-1})}return oldSelection.length!==selection.length||diff.length!==0}},{key:"_toggleItemAttribute",value:function _toggleItemAttribute(item,attributeName){if(item){item[item.hasAttribute(attributeName)?'removeAttribute':'setAttribute'](attributeName,'')}}},{key:"_onCollectionChange",value:function _onCollectionChange(event){event.stopImmediatePropagation()}},{key:"_onItemClick",value:function _onItemClick(event){if(event.target.hasAttribute('coral-interactive')||event.target.closest('[coral-interactive]')){return}if(event.target.closest('._coral-TreeView-indicator')){this._onExpandCollapseClick(event);return}var item=event.target.closest('coral-tree-item');if(item&&!item.hasAttribute('disabled')){event.preventDefault();event.stopPropagation();this._toggleItemAttribute(item,'selected');var focusable=this._getFocusable();if(focusable){focusable.setAttribute('tabindex','-1')}item._elements.header.setAttribute('tabindex','0');item._elements.header.focus()}}},{key:"_onExpandCollapseClick",value:function _onExpandCollapseClick(event){event.preventDefault();event.stopPropagation();var item=event.target.closest('coral-tree-item');if(item){if(item.hasAttribute('disabled')){return}this._toggleItemAttribute(item,'expanded')}}},{key:"_onExpandItem",value:function _onExpandItem(event){event.preventDefault();event.stopPropagation();var item=event.target.closest('coral-tree-item');if(item){if(item.hasAttribute('disabled')){return}if(!item.expanded&&item.variant===TreeItem.variant.DRILLDOWN){item.expanded=!item.expanded;item._elements.header.classList.add('focus-ring')}else if(item.items.length>0){this._onFocusNextItem(event)}}}},{key:"_onCollapseItem",value:function _onCollapseItem(event){event.preventDefault();event.stopPropagation();var item=event.target.closest('coral-tree-item');if(item){if(item.hasAttribute('disabled')){return}if(item.expanded&&item.variant===TreeItem.variant.DRILLDOWN){item.expanded=!item.expanded;item._elements.header.classList.add('focus-ring')}else if(item.parent){item._elements.header.setAttribute('tabindex','-1');item._elements.header.classList.remove('focus-ring');item.parent.focus();item.parent._elements.header.classList.add('focus-ring')}}}},{key:"_focusSiblingItem",value:function _focusSiblingItem(item,next){var focusableItems=this._getFocusableItems();if(focusableItems.length<2){return}var index=focusableItems.indexOf(item)+(next?1:-1);var siblingItem=null;if(index>focusableItems.length-1){siblingItem=focusableItems[0]}else if(index<0){siblingItem=focusableItems[focusableItems.length-1]}while(!siblingItem){siblingItem=focusableItems[index];if(siblingItem.parentNode.closest('coral-tree-item.is-collapsed')){if(next){index+=1;siblingItem=index>focusableItems.length-1?item:null}else{index-=1;siblingItem=index<0?item:null}}}if(siblingItem!==item){item._elements.header.setAttribute('tabindex','-1');item._elements.header.classList.remove('focus-ring');siblingItem._elements.header.setAttribute('tabindex','0');siblingItem._elements.header.classList.add('focus-ring');siblingItem._elements.header.focus()}}},{key:"_focusEdgeItem",value:function _focusEdgeItem(last){var focusable=this._getFocusable();if(focusable){var focusableItems=this._getFocusableItems();var edgeItem=focusableItems[last?focusableItems.length-1:0];if(edgeItem!==focusable){focusable.setAttribute('tabindex','-1');edgeItem._elements.header.setAttribute('tabindex','0');edgeItem._elements.header.focus()}}}},{key:"_onFocusNextItem",value:function _onFocusNextItem(event){event.preventDefault();event.stopPropagation();var item=event.target.closest('coral-tree-item');if(item){this._focusSiblingItem(item,true)}}},{key:"_onFocusPreviousItem",value:function _onFocusPreviousItem(event){event.preventDefault();event.stopPropagation();var item=event.target.closest('coral-tree-item');if(item){this._focusSiblingItem(item,false)}}},{key:"_onFocusFirstItem",value:function _onFocusFirstItem(event){event.preventDefault();event.stopPropagation();this._focusEdgeItem(false)}},{key:"_onFocusLastItem",value:function _onFocusLastItem(event){event.preventDefault();event.stopPropagation();this._focusEdgeItem(true)}},{key:"_onFocusableChanged",value:function _onFocusableChanged(event){event.preventDefault();event.stopPropagation();if(event.target.contains(this._getFocusable())){this._resetFocusableItem()}}},{key:"_onExpandedChanged",value:function _onExpandedChanged(event){event.stopImmediatePropagation();var item=event.target;this.trigger("coral-tree:".concat(item.expanded?'expand':'collapse'),{item:item})}},{key:"_getFocusable",value:function _getFocusable(){return this.querySelector('coral-tree-item > ._coral-TreeView-itemLink[tabindex="0"]')}},{key:"_getFocusableItems",value:function _getFocusableItems(){return this.items.getAll().filter(function(item){return!item.closest('coral-tree-item[disabled]')&&!item.closest('coral-tree-item[hidden]')})}},{key:"_onItemBlur",value:function _onItemBlur(){var focused=this.querySelector('._coral-TreeView-itemLink.focus-ring');if(focused){focused.classList.remove('focus-ring')}}},{key:"_resetFocusableItem",value:function _resetFocusableItem(item){var focusable=this._getFocusable();if(focusable){focusable.setAttribute('tabindex','-1');focusable.classList.remove('focus-ring')}item=item||this._getFocusableItems()[0];if(item){item._elements.header.setAttribute('tabindex','0')}}},{key:"_expandCollapseAll",value:function _expandCollapseAll(expand){var coralTreeItems=this.querySelectorAll('coral-tree-item');if(coralTreeItems){var item;var length=coralTreeItems.length;if(length>0){for(var index=0;index<length;index+=1){item=coralTreeItems[index];if(item){item.expanded=expand}}}}}},{key:"expandAll",value:function expandAll(){this._expandCollapseAll(true)}},{key:"collapseAll",value:function collapseAll(){this._expandCollapseAll(false)}},{key:"render",value:function render(){var _this3=this;_get(_getPrototypeOf(Tree.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1E);this.setAttribute('role','tree');this.setAttribute('aria-multiselectable',this.multiple);requestAnimationFrame(function(){_this3._resetFocusableItem()});this._preventTriggeringEvents=true;this._validateSelection();this._preventTriggeringEvents=false;this._oldSelection=this.selectedItems}},{key:"items",get:function get(){if(!this._items){this._items=new SelectableCollection({host:this,itemTagName:'coral-tree-item'})}return this._items}},{key:"multiple",get:function get(){return this._multiple||false},set:function set(value){this._multiple=transform.booleanAttr(value);this._reflectAttribute('multiple',this._multiple);this.setAttribute('aria-multiselectable',this._multiple);this._validateSelection()}},{key:"selectedItems",get:function get(){return this.items._getAllSelected()}},{key:"selectedItem",get:function get(){return this.items._getAllSelected()[0]||null}}],[{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Tree),"observedAttributes",this).concat(['multiple'])}}]);return Tree}(BaseComponent(HTMLElement));var TreeItemContent=(function(){return document.createElement('coral-tree-item-content')});commons._define('coral-tree-item',TreeItem);commons._define('coral-tree',Tree);Tree.Item=TreeItem;Tree.Item.Content=TreeItemContent;var CLASSNAME$1F='_coral-WizardView';var WizardView=function(_BaseComponent){_inherits(WizardView,_BaseComponent);var _super=_createSuper(WizardView);function WizardView(){var _this;_classCallCheck(this,WizardView);_this=_super.call(this);_this._delegateEvents({'capture:click coral-steplist[coral-wizardview-steplist] > coral-step':'_onStepClick','coral-steplist:change coral-steplist[coral-wizardview-steplist]':'_onStepListChange','click [coral-wizardview-previous]':'_onPreviousClick','click [coral-wizardview-next]':'_onNextClick'});_this.stepLists._startHandlingItems(true);_this.panelStacks._startHandlingItems(true);_this._observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){for(var i=0;i<mutation.addedNodes.length;i+=1){var addedNode=mutation.addedNodes[i];if(addedNode.setAttribute&&(addedNode.hasAttribute('coral-wizardview-next')||addedNode.hasAttribute('coral-wizardview-previous')||addedNode.hasAttribute('coral-wizardview-steplist')||addedNode.hasAttribute('coral-wizardview-panelstack'))){addedNode.setAttribute('tracking','off')}}})});_this._observer.observe(_assertThisInitialized(_this),{childList:true,subtree:true});return _this}_createClass(WizardView,[{key:"_onItemAdded",value:function _onItemAdded(item){this._selectItemByIndex(item,this._getSelectedIndex())}},{key:"_onStepClick",value:function _onStepClick(event){this._trackEvent('click','coral-wizardview-steplist-step',event,event.matchedTarget)}},{key:"_onNextClick",value:function _onNextClick(event){event.stopPropagation();this.next();var stepList=this.stepLists.first();var step=stepList.items.getAll()[this._getSelectedIndex()];this._trackEvent('click','coral-wizardview-next',event,step)}},{key:"_onPreviousClick",value:function _onPreviousClick(event){event.stopPropagation();this.previous();var stepList=this.stepLists.first();var step=stepList.items.getAll()[this._getSelectedIndex()];this._trackEvent('click','coral-wizardview-previous',event,step)}},{key:"_onStepListChange",value:function _onStepListChange(event){event.stopPropagation();var index=event.target.items.getAll().indexOf(event.detail.selection);this._selectStep(index);this.trigger('coral-wizardview:change',{selection:event.detail.selection,oldSelection:event.detail.oldSelection});this._trackEvent('change','coral-wizardview',event)}},{key:"_getSelectedIndex",value:function _getSelectedIndex(){var stepList=this.stepLists.first();if(!stepList){return -1}var stepIndex=-1;if(stepList.items){stepIndex=stepList.items.getAll().indexOf(stepList.selectedItem)}else{var steps=stepList.querySelectorAll('coral-step');for(var i=steps.length-1;i>=0;i-=1){if(steps[i].hasAttribute('selected')){stepIndex=i;break}}}return stepIndex}},{key:"_selectItemByIndex",value:function _selectItemByIndex(component,index){var item=null;component.id=component.id||commons.getUID();if(component.items){item=component.items.getAll()[index ]}else if(component.tagName==='CORAL-STEPLIST'){item=component.querySelectorAll("#".concat(component.id," > coral-step"))[index]}else if(component.tagName==='CORAL-PANELSTACK'){item=component.querySelectorAll("#".concat(component.id," > coral-panel"))[index]}if(item){if(!item.hasAttribute('selected')){item.setAttribute('selected','')}}else{if(component.tagName==='CORAL-STEPLIST'){item=component.querySelector("#".concat(component.id," > coral-step[selected]"))}else if(component.tagName==='CORAL-PANELSTACK'){item=component.querySelector("#".concat(component.id," > coral-panel[selected]"))}if(item){item.removeAttribute('selected')}}}},{key:"_selectStep",value:function _selectStep(index){var _this2=this;this.stepLists.getAll().forEach(function(stepList){_this2._selectItemByIndex(stepList,index)});this.panelStacks.getAll().forEach(function(panelStack){_this2._selectItemByIndex(panelStack,index)})}},{key:"_syncPanelStackSelection",value:function _syncPanelStackSelection(defaultIndex){var _this3=this;var index=this._getSelectedIndex();if(index===-1){if(typeof defaultIndex!=='undefined'){index=defaultIndex}else{return}}this.panelStacks.getAll().forEach(function(panelStack){_this3._selectItemByIndex(panelStack,index)})}},{key:"_syncStepListSelection",value:function _syncStepListSelection(defaultIndex){var _this4=this;var index=this._getSelectedIndex();if(index===-1){if(typeof defaultIndex!=='undefined'){index=defaultIndex}else{return}}this.stepLists.getAll().forEach(function(stepList){_this4._selectItemByIndex(stepList,index)})}},{key:"next",value:function next(){var stepList=this.stepLists.first();if(!stepList){return}stepList.next();this._selectStep(stepList.items.getAll().indexOf(stepList.selectedItem))}},{key:"previous",value:function previous(){var stepList=this.stepLists.first();if(!stepList){return}stepList.previous();this._selectStep(stepList.items.getAll().indexOf(stepList.selectedItem))}},{key:"render",value:function render(){_get(_getPrototypeOf(WizardView.prototype),"render",this).call(this);this.classList.add(CLASSNAME$1F);this._syncStepListSelection(0);this._syncPanelStackSelection(0);var selector='[coral-wizardview-next],[coral-wizardview-previous],[coral-wizardview-steplist],[coral-wizardview-panelstack]';var items=this.querySelectorAll(selector);for(var i=0;i<items.length;i+=1){items[i].setAttribute('tracking','off')}}},{key:"panelStacks",get:function get(){if(!this._panelStacks){this._panelStacks=new Collection$1({host:this,itemTagName:'coral-panelstack',itemSelector:':scope > coral-panelstack[coral-wizardview-panelstack]',onItemAdded:this._onItemAdded})}return this._panelStacks}},{key:"stepLists",get:function get(){if(!this._stepLists){this._stepLists=new Collection$1({host:this,itemTagName:'coral-steplist',itemSelector:':scope > coral-steplist[coral-wizardview-steplist]',onItemAdded:this._onItemAdded})}return this._stepLists}}]);return WizardView}(BaseComponent(HTMLElement));commons._define('coral-wizardview',WizardView);var name="@adobe/coral-spectrum";var description="Coral Spectrum is a JavaScript library of Web Components following Spectrum design patterns.";var version$1="4.8.10";var homepage="https://github.com/adobe/coral-spectrum#readme";var license="Apache-2.0";var repository={type:"git",url:"https://github.com/adobe/coral-spectrum"};var author={name:"Stephan Ringel",url:"https://github.com/icaraps"};var contributors=[{name:"Larry Davis",url:"https://github.com/lazd"},{name:"Oscar Bolanos",url:"https://github.com/joekukish"},{name:"Frank Karstens",url:"https://github.com/karstens"},{name:"Aaron Brownlee",url:"https://github.com/misterbrownlee"}];var bugs={url:"https://github.com/adobe/coral-spectrum/issues"};var scripts={postinstall:"node scripts/spectrum-css.js"};var dependencies={"@adobe/focus-ring-polyfill":"0.1.5","@adobe/spectrum-css":"2.18.0","@adobe/vent":"1.0.0","core-js":"3.6.4","document-register-element":"1.14.3","normalize.css":"8.0.1","popper.js":"1.16.1","resize-observer-polyfill":"1.5.1"};var devDependencies={"@babel/core":"^7.10.2","@babel/preset-env":"^7.10.2","babel-eslint":"^10.0.3",browserslist:"^4.8.5",chai:"^4.0.2",codemirror:"^5.52.2","deflate-js":"0.2.3",del:"^4.1.1",esdoc:"^1.0.3","esdoc-accessor-plugin":"^1.0.0","esdoc-importpath-plugin":"^1.0.1","esdoc-inject-script-plugin":"^1.0.0","esdoc-inject-style-plugin":"^1.0.0","esdoc-member-plugin":"^1.0.0","esdoc-standard-plugin":"^1.0.0","eslint-config-standard":"^12.0.0","eslint-plugin-babel":"^5.3.0","eslint-plugin-import":"^2.20.0","eslint-plugin-node":"^8.0.1","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","fancy-log":"^1.3.3","fs-extra":"^7.0.1","glob-all":"^3.2.1",gulp:"^4.0.2","gulp-axe-webdriver":"^3.1.3","gulp-bump":"^3.1.3","gulp-clean-css":"^4.2.0","gulp-domly":"^0.1.0","gulp-eslint":"^6.0.0","gulp-gh-pages":"^0.6.0-6","gulp-git":"^2.10.0","gulp-merge-json":"^1.0.0","gulp-modify-file":"^1.0.0","gulp-plumber":"^1.1.0","gulp-postcss":"^8.0.0","gulp-rename":"^1.2.2","gulp-stylus":"^2.6.0","http-server":"^0.12.3",inquirer:"^6.5.2",karma:"^5.0.9","karma-chrome-launcher":"^2.2.0","karma-coverage-istanbul-reporter":"^2.1.1","karma-firefox-launcher":"^1.3.0","karma-html2js-preprocessor":"^1.1.0","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-rollup-preprocessor":"^7.0.3","karma-sinon-chai":"^2.0.2",minimist:"^1.2.0",mocha:"^7.2.0",moment:"^2.24.0","plugin-error":"^1.0.1","postcss-css-variables":"^0.13.0","postcss-merge-rules":"^4.0.3",request:"^2.81.0",rollup:"^1.29.1","rollup-plugin-babel":"^4.3.3","rollup-plugin-commonjs":"^9.3.4","rollup-plugin-istanbul":"^2.0.1","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^4.2.4","rollup-plugin-postcss":"^2.0.4","rollup-plugin-terser":"^5.2.0","rollup-pluginutils":"^2.8.2",semver:"^6.3.0",sinon:"^7.5.0","sinon-chai":"^3.4.0","stylus-svg":"^1.1.2",through2:"^3.0.1"};var PACKAGE={name:name,description:description,version:version$1,homepage:homepage,license:license,repository:repository,author:author,contributors:contributors,bugs:bugs,scripts:scripts,dependencies:dependencies,devDependencies:devDependencies};var version$2=PACKAGE.version;var components=Object.freeze({__proto__:null,commons:commons,events:events,i18n:i18n,keys:keys$1,Keys:Keys,strings:strings,transform:transform,validate:validate,tracking:tracking,Collection:Collection$1,SelectableCollection:SelectableCollection,DateTime:DateTime,DragAction:DragAction,Accordion:Accordion,ActionBar:ActionBar,Alert:Alert,AnchorButton:AnchorButton,Autocomplete:Autocomplete,Banner:Banner,Button:Button,ButtonGroup:ButtonGroup,Calendar:Calendar,Card:Card,CharacterCount:CharacterCount,Checkbox:Checkbox,CheckboxGroup:CheckboxGroup,Clock:Clock,CoachMark:CoachMark,Color:Color,ColorInput:ColorInput,ColumnView:ColumnView,CycleButton:CycleButton,Datepicker:Datepicker,Dialog:Dialog,Drawer:Drawer,FileUpload:FileUpload,Icon:Icon,List:List,AnchorList:AnchorList,ButtonList:ButtonList,SelectList:SelectList,Masonry:Masonry,Multifield:Multifield,NumberInput:NumberInput,Overlay:Overlay,Panel:Panel,PanelStack:PanelStack,Popover:Popover,Progress:Progress,QuickActions:QuickActions,Radio:Radio,RadioGroup:RadioGroup,Shell:Shell,Select:Select,Search:Search,SideNav:SideNav,Slider:Slider,RangedSlider:RangedSlider,SplitButton:SplitButton,Status:Status,StepList:StepList,Step:Step,Switch:Switch,Table:Table,Tab:Tab,TabList:TabList,TabView:TabView,Tag:Tag,TagList:TagList,Textarea:Textarea,Textfield:Textfield,Toast:Toast,Tooltip:Tooltip,Tree:Tree,TreeItem:TreeItem,Wait:Wait,WizardView:WizardView,register:register,property:property,Component:Component,version:version$2});var template$10=function anonymous(data_0){var frag=document.createDocumentFragment();var el0=this["wrapper"]=document.createElement("div");el0.setAttribute("handle","wrapper");var el1=document.createTextNode("\n  ");el0.appendChild(el1);var el2=this["copy"]=document.createElement("textarea");el2.setAttribute("handle","copy");el0.appendChild(el2);var el3=document.createTextNode("\n  ");el0.appendChild(el3);var el4=this["preview"]=document.createElement("div");el4.setAttribute("handle","preview");el4.className+=" _coral-Playground-preview";var el5=document.createTextNode("\n    ");el4.appendChild(el5);var el6=this["loading"]=document.createElement("coral-wait");el6.setAttribute("hidden","");el6.className+=" _coral-Playground-loading";el6.setAttribute("handle","loading");el6.setAttribute("size","L");el6.setAttribute("variant","dots");el4.appendChild(el6);var el7=document.createTextNode("\n    ");el4.appendChild(el7);var el8=this["frame"]=document.createElement("iframe");el8.setAttribute("sandbox","allow-same-origin allow-scripts allow-modals");el8.setAttribute("handle","frame");el8.className+=" _coral-Playground-preview-frame";el4.appendChild(el8);var el9=document.createTextNode("\n  ");el4.appendChild(el9);el0.appendChild(el4);var el10=document.createTextNode("\n  ");el0.appendChild(el10);var el11=document.createElement("div");el11.className+=" _coral-Playground-settings";var el12=document.createTextNode("\n    ");el11.appendChild(el12);var el13=this["run"]=document.createElement("button","coral-button");el13.setAttribute("handle","run");el13.className+=" _coral-Playground-settings-button";el13.setAttribute("type","button");el13.setAttribute("is","coral-button");el13.setAttribute("icon","play");el13.setAttribute("variant","minimal");el11.appendChild(el13);var el14=document.createTextNode("\n    ");el11.appendChild(el14);var el15=this["share"]=document.createElement("button","coral-button");el15.setAttribute("handle","share");el15.className+=" _coral-Playground-settings-button";el15.setAttribute("type","button");el15.setAttribute("is","coral-button");el15.setAttribute("icon","share");el15.setAttribute("variant","minimal");el11.appendChild(el15);var el16=document.createTextNode("\n    ");el11.appendChild(el16);var el17=this["sharetip"]=document.createElement("coral-tooltip");el17.setAttribute("handle","sharetip");el17.setAttribute("placement","left");el17.setAttribute("interaction","off");el17.setAttribute("target","_prev");el17.textContent="URL copied to your clipboard";el11.appendChild(el17);var el18=document.createTextNode("\n    ");el11.appendChild(el18);var el19=this["gear"]=document.createElement("button","coral-button");el19.className+=" _coral-Playground-settings-button _coral-Playground-settings-action";el19.setAttribute("variant","minimal");el19.setAttribute("handle","gear");el19.setAttribute("type","button");el19.setAttribute("is","coral-button");el19.setAttribute("role","combobox");el19.setAttribute("aria-expanded","false");el19.setAttribute("aria-haspopup","true");el19.setAttribute("icon","gear");el11.appendChild(el19);var el20=document.createTextNode("\n    ");el11.appendChild(el20);var el21=this["overlay"]=document.createElement("coral-popover");el21.id=data_0["commons"]["getUID"]();el21.setAttribute("handle","overlay");el21.className+=" _coral-Playground-overlay";el21.setAttribute("trapfocus","on");el21.setAttribute("focusonshow","on");el21.setAttribute("target","._coral-Playground-settings-action");el21.setAttribute("role","presentation");el21.setAttribute("placement","bottom");el21.setAttribute("smart","");var el22=document.createTextNode("\n      ");el21.appendChild(el22);var el23=document.createElement("coral-popover-content");el23.className+=" u-coral-padding";var el24=document.createTextNode("\n        ");el23.appendChild(el24);var el25=document.createElement("div");el25.className+=" _coral-Playground-field";var el26=document.createTextNode("\n          ");el25.appendChild(el26);var el27=document.createElement("div");el27.className+=" _coral-Playground-field-label";el27.textContent="Live reload";el25.appendChild(el27);var el28=document.createTextNode("\n          ");el25.appendChild(el28);var el29=this["livereload"]=document.createElement("coral-switch");el29.setAttribute("handle","livereload");el25.appendChild(el29);var el30=document.createTextNode("\n        ");el25.appendChild(el30);el23.appendChild(el25);var el31=document.createTextNode("\n        ");el23.appendChild(el31);var el32=document.createElement("div");el32.className+=" _coral-Playground-field";var el33=document.createTextNode("\n          ");el32.appendChild(el33);var el34=document.createElement("div");el34.className+=" _coral-Playground-field-label";el34.textContent="Screen";el32.appendChild(el34);var el35=document.createTextNode("\n          ");el32.appendChild(el35);var el36=this["screen"]=document.createElement("coral-buttongroup");el36.setAttribute("handle","screen");el36.setAttribute("selectionmode","single");var el37=document.createTextNode("\n            ");el36.appendChild(el37);var el38=document.createElement("button","coral-button");el38.setAttribute("is","coral-button");el38.setAttribute("icon","separator");el38.setAttribute("value","vertical");el36.appendChild(el38);var el39=document.createTextNode("\n            ");el36.appendChild(el39);var el40=document.createElement("button","coral-button");el40.setAttribute("is","coral-button");el40.setAttribute("icon","separator");el40.setAttribute("value","horizontal");el36.appendChild(el40);var el41=document.createTextNode("\n            ");el36.appendChild(el41);var el42=document.createElement("button","coral-button");el42.setAttribute("is","coral-button");el42.setAttribute("icon","fullScreen");el42.setAttribute("value","fullscreen");el36.appendChild(el42);var el43=document.createTextNode("\n          ");el36.appendChild(el43);el32.appendChild(el36);var el44=document.createTextNode("\n        ");el32.appendChild(el44);el23.appendChild(el32);var el45=document.createTextNode("\n      ");el23.appendChild(el45);el21.appendChild(el23);var el46=document.createTextNode("\n    ");el21.appendChild(el46);el11.appendChild(el21);var el47=document.createTextNode("\n  ");el11.appendChild(el47);el0.appendChild(el11);var el48=document.createTextNode("\n  ");el0.appendChild(el48);var el49=this["editor"]=document.createElement("div");el49.className+=" _coral-Playground-editor";el49.setAttribute("handle","editor");el0.appendChild(el49);var el50=document.createTextNode("\n");el0.appendChild(el50);frag.appendChild(el0);var el51=document.createTextNode("\n");frag.appendChild(el51);return frag};var rawinflate=createCommonjsModule(function(module){(function(){var WSIZE=32768,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,lbits=9,dbits=6,slide,wp,fixed_tl=null,fixed_td,fixed_bl,fixed_bd,bit_buf,bit_len,method,eof,copy_leng,copy_dist,tl,td,bl,bd,inflate_data,inflate_pos,MASK_BITS=[0x0000,0x0001,0x0003,0x0007,0x000f,0x001f,0x003f,0x007f,0x00ff,0x01ff,0x03ff,0x07ff,0x0fff,0x1fff,0x3fff,0x7fff,0xffff],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function HuftList(){this.next=null;this.list=null}function HuftNode(){this.e=0;this.b=0;this.n=0;this.t=null;}function HuftBuild(b,n,s,d,e,mm){this.BMAX=16;this.N_MAX=288;this.status=0;this.root=null;this.m=0;var a;var c=[];var el;var f;var g;var h;var i;var j;var k;var lx=[];var p;var pidx;var q;var r=new HuftNode();var u=[];var v=[];var w;var x=[];var xp;var y;var z;var o;var tail;tail=this.root=null;for(i=0;i<this.BMAX+1;i+=1){c[i]=0}for(i=0;i<this.BMAX+1;i+=1){lx[i]=0}for(i=0;i<this.BMAX;i+=1){u[i]=null}for(i=0;i<this.N_MAX;i+=1){v[i]=0}for(i=0;i<this.BMAX+1;i+=1){x[i]=0}el=n>256?b[256]:this.BMAX;p=b;pidx=0;i=n;do{c[p[pidx]]+=1;pidx+=1}while(--i>0);if(c[0]===n){this.root=null;this.m=0;this.status=0;return}for(j=1;j<=this.BMAX;j+=1){if(c[j]!==0){break}}k=j;if(mm<j){mm=j}for(i=this.BMAX;i!==0;i-=1){if(c[i]!==0){break}}g=i;if(mm>i){mm=i}for(y=1<<j;j<i;j+=1,y<<=1){if((y-=c[j])<0){this.status=2;this.m=mm;return}}if((y-=c[i])<0){this.status=2;this.m=mm;return}c[i]+=y;x[1]=j=0;p=c;pidx=1;xp=2;while(--i>0){x[xp++]=j+=p[pidx++]}p=b;pidx=0;i=0;do{if((j=p[pidx++])!==0){v[x[j]++]=i}}while(++i<n);n=x[g];x[0]=i=0;p=v;pidx=0;h=-1;w=lx[0]=0;q=null;z=0;for(null;k<=g;k+=1){a=c[k];while(a-- >0){while(k>w+lx[1+h]){w+=lx[1+h];h+=1;z=(z=g-w)>mm?mm:z;if((f=1<<(j=k-w))>a+1){f-=a+1;xp=k;while(++j<z){if((f<<=1)<=c[xp+=1]){break;}f-=c[xp];}}if(w+j>el&&w<el){j=el-w;}z=1<<j;lx[1+h]=j;q=[];for(o=0;o<z;o+=1){q[o]=new HuftNode()}if(!tail){tail=this.root=new HuftList()}else{tail=tail.next=new HuftList()}tail.next=null;tail.list=q;u[h]=q;if(h>0){x[h]=i;r.b=lx[h];r.e=16+j;r.t=q;j=(i&(1<<w)-1)>>w-lx[h];u[h-1][j].e=r.e;u[h-1][j].b=r.b;u[h-1][j].n=r.n;u[h-1][j].t=r.t}}r.b=k-w;if(pidx>=n){r.e=99;}else if(p[pidx]<s){r.e=p[pidx]<256?16:15;r.n=p[pidx++];}else{r.e=e[p[pidx]-s];r.n=d[p[pidx++]-s]}f=1<<k-w;for(j=i>>w;j<z;j+=f){q[j].e=r.e;q[j].b=r.b;q[j].n=r.n;q[j].t=r.t}for(j=1<<k-1;(i&j)!==0;j>>=1){i^=j}i^=j;while((i&(1<<w)-1)!==x[h]){w-=lx[h];h-=1}}}this.m=lx[1];this.status=y!==0&&g!==1?1:0}function GET_BYTE(){if(inflate_data.length===inflate_pos){return -1}return inflate_data[inflate_pos++]&0xff}function NEEDBITS(n){while(bit_len<n){bit_buf|=GET_BYTE()<<bit_len;bit_len+=8}}function GETBITS(n){return bit_buf&MASK_BITS[n]}function DUMPBITS(n){bit_buf>>=n;bit_len-=n}function inflate_codes(buff,off,size){var e;var t;var n;if(size===0){return 0}n=0;for(;;){NEEDBITS(bl);t=tl.list[GETBITS(bl)];e=t.e;while(e>16){if(e===99){return -1}DUMPBITS(t.b);e-=16;NEEDBITS(e);t=t.t[GETBITS(e)];e=t.e}DUMPBITS(t.b);if(e===16){wp&=WSIZE-1;buff[off+n++]=slide[wp++]=t.n;if(n===size){return size}continue}if(e===15){break}NEEDBITS(e);copy_leng=t.n+GETBITS(e);DUMPBITS(e);NEEDBITS(bd);t=td.list[GETBITS(bd)];e=t.e;while(e>16){if(e===99){return -1}DUMPBITS(t.b);e-=16;NEEDBITS(e);t=t.t[GETBITS(e)];e=t.e}DUMPBITS(t.b);NEEDBITS(e);copy_dist=wp-t.n-GETBITS(e);DUMPBITS(e);while(copy_leng>0&&n<size){copy_leng-=1;copy_dist&=WSIZE-1;wp&=WSIZE-1;buff[off+n++]=slide[wp++]=slide[copy_dist++]}if(n===size){return size}}method=-1;return n}function inflate_stored(buff,off,size){var n;n=bit_len&7;DUMPBITS(n);NEEDBITS(16);n=GETBITS(16);DUMPBITS(16);NEEDBITS(16);if(n!==(~bit_buf&0xffff)){return -1;}DUMPBITS(16);copy_leng=n;n=0;while(copy_leng>0&&n<size){copy_leng-=1;wp&=WSIZE-1;NEEDBITS(8);buff[off+n++]=slide[wp++]=GETBITS(8);DUMPBITS(8)}if(copy_leng===0){method=-1;}return n}function inflate_fixed(buff,off,size){if(!fixed_tl){var i;var l=[];var h;for(i=0;i<144;i+=1){l[i]=8}for(null;i<256;i+=1){l[i]=9}for(null;i<280;i+=1){l[i]=7}for(null;i<288;i+=1){l[i]=8}fixed_bl=7;h=new HuftBuild(l,288,257,cplens,cplext,fixed_bl);if(h.status!==0){console.error("HufBuild error: "+h.status);return -1}fixed_tl=h.root;fixed_bl=h.m;for(i=0;i<30;i+=1){l[i]=5}fixed_bd=5;h=new HuftBuild(l,30,0,cpdist,cpdext,fixed_bd);if(h.status>1){fixed_tl=null;console.error("HufBuild error: "+h.status);return -1}fixed_td=h.root;fixed_bd=h.m}tl=fixed_tl;td=fixed_td;bl=fixed_bl;bd=fixed_bd;return inflate_codes(buff,off,size)}function inflate_dynamic(buff,off,size){var i;var j;var l;var n;var t;var nb;var nl;var nd;var ll=[];var h;for(i=0;i<286+30;i+=1){ll[i]=0}NEEDBITS(5);nl=257+GETBITS(5);DUMPBITS(5);NEEDBITS(5);nd=1+GETBITS(5);DUMPBITS(5);NEEDBITS(4);nb=4+GETBITS(4);DUMPBITS(4);if(nl>286||nd>30){return -1;}for(j=0;j<nb;j+=1){NEEDBITS(3);ll[border[j]]=GETBITS(3);DUMPBITS(3)}for(null;j<19;j+=1){ll[border[j]]=0}bl=7;h=new HuftBuild(ll,19,19,null,null,bl);if(h.status!==0){return -1;}tl=h.root;bl=h.m;n=nl+nd;i=l=0;while(i<n){NEEDBITS(bl);t=tl.list[GETBITS(bl)];j=t.b;DUMPBITS(j);j=t.n;if(j<16){ll[i++]=l=j;}else if(j===16){NEEDBITS(2);j=3+GETBITS(2);DUMPBITS(2);if(i+j>n){return -1}while(j-- >0){ll[i++]=l}}else if(j===17){NEEDBITS(3);j=3+GETBITS(3);DUMPBITS(3);if(i+j>n){return -1}while(j-- >0){ll[i++]=0}l=0}else{NEEDBITS(7);j=11+GETBITS(7);DUMPBITS(7);if(i+j>n){return -1}while(j-- >0){ll[i++]=0}l=0}}bl=lbits;h=new HuftBuild(ll,nl,257,cplens,cplext,bl);if(bl===0){h.status=1}if(h.status!==0){if(h.status!==1){return -1;}}tl=h.root;bl=h.m;for(i=0;i<nd;i+=1){ll[i]=ll[i+nl]}bd=dbits;h=new HuftBuild(ll,nd,0,cpdist,cpdext,bd);td=h.root;bd=h.m;if(bd===0&&nl>257){return -1}if(h.status!==0){return -1}return inflate_codes(buff,off,size)}function inflate_start(){if(!slide){slide=[];}wp=0;bit_buf=0;bit_len=0;method=-1;eof=false;copy_leng=copy_dist=0;tl=null}function inflate_internal(buff,off,size){var n,i;n=0;while(n<size){if(eof&&method===-1){return n}if(copy_leng>0){if(method!==STORED_BLOCK){while(copy_leng>0&&n<size){copy_leng-=1;copy_dist&=WSIZE-1;wp&=WSIZE-1;buff[off+n++]=slide[wp++]=slide[copy_dist++]}}else{while(copy_leng>0&&n<size){copy_leng-=1;wp&=WSIZE-1;NEEDBITS(8);buff[off+n++]=slide[wp++]=GETBITS(8);DUMPBITS(8)}if(copy_leng===0){method=-1;}}if(n===size){return n}}if(method===-1){if(eof){break}NEEDBITS(1);if(GETBITS(1)!==0){eof=true}DUMPBITS(1);NEEDBITS(2);method=GETBITS(2);DUMPBITS(2);tl=null;copy_leng=0}switch(method){case STORED_BLOCK:i=inflate_stored(buff,off+n,size-n);break;case STATIC_TREES:if(tl){i=inflate_codes(buff,off+n,size-n)}else{i=inflate_fixed(buff,off+n,size-n)}break;case DYN_TREES:if(tl){i=inflate_codes(buff,off+n,size-n)}else{i=inflate_dynamic(buff,off+n,size-n)}break;default:i=-1;break}if(i===-1){if(eof){return 0}return -1}n+=i}return n}function inflate(arr){var buff=[],i;inflate_start();inflate_data=arr;inflate_pos=0;do{i=inflate_internal(buff,buff.length,1024)}while(i>0);inflate_data=null;return buff}module.exports=inflate})()});var rawdeflate=createCommonjsModule(function(module){(function(){var WSIZE=32768,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,DEFAULT_LEVEL=6,OUTBUFSIZ=1024*8,window_size=2*WSIZE,MIN_MATCH=3,MAX_MATCH=258,LIT_BUFSIZE=0x2000,HASH_BITS=15,DIST_BUFSIZE=LIT_BUFSIZE,HASH_SIZE=1<<HASH_BITS,HASH_MASK=HASH_SIZE-1,WMASK=WSIZE-1,NIL=0,TOO_FAR=4096,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,MAX_DIST=WSIZE-MIN_LOOKAHEAD,SMALLEST=1,MAX_BITS=15,MAX_BL_BITS=7,LENGTH_CODES=29,LITERALS=256,END_BLOCK=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,HEAP_SIZE=2*L_CODES+1,H_SHIFT=parseInt((HASH_BITS+MIN_MATCH-1)/MIN_MATCH,10),free_queue,qhead,qtail,initflag,outbuf=null,outcnt,outoff,complete,window,d_buf,l_buf,prev,bi_buf,bi_valid,block_start,ins_h,hash_head,prev_match,match_available,match_length,prev_length,strstart,match_start,eofile,lookahead,max_chain_length,max_lazy_match,compr_level,good_match,nice_match,dyn_ltree,dyn_dtree,static_ltree,static_dtree,bl_tree,l_desc,d_desc,bl_desc,bl_count,heap,heap_len,heap_max,depth,length_code,dist_code,base_length,base_dist,flag_buf,last_lit,last_dist,last_flags,flags,flag_bit,opt_len,static_len,deflate_data,deflate_pos;function DeflateCT(){this.fc=0;this.dl=0;}function DeflateTreeDesc(){this.dyn_tree=null;this.static_tree=null;this.extra_bits=null;this.extra_base=0;this.elems=0;this.max_length=0;this.max_code=0;}function DeflateConfiguration(a,b,c,d){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d}function DeflateBuffer(){this.next=null;this.len=0;this.ptr=[];this.off=0}var extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var configuration_table=[new DeflateConfiguration(0,0,0,0),new DeflateConfiguration(4,4,8,4),new DeflateConfiguration(4,5,16,8),new DeflateConfiguration(4,6,32,32),new DeflateConfiguration(4,4,16,16),new DeflateConfiguration(8,16,32,32),new DeflateConfiguration(8,16,128,128),new DeflateConfiguration(8,32,128,256),new DeflateConfiguration(32,128,258,1024),new DeflateConfiguration(32,258,258,4096)];function deflate_start(level){var i;if(!level){level=DEFAULT_LEVEL}else if(level<1){level=1}else if(level>9){level=9}compr_level=level;initflag=false;eofile=false;if(outbuf!==null){return}free_queue=qhead=qtail=null;outbuf=[];window=[];d_buf=[];l_buf=[];prev=[];dyn_ltree=[];for(i=0;i<HEAP_SIZE;i+=1){dyn_ltree[i]=new DeflateCT()}dyn_dtree=[];for(i=0;i<2*D_CODES+1;i+=1){dyn_dtree[i]=new DeflateCT()}static_ltree=[];for(i=0;i<L_CODES+2;i+=1){static_ltree[i]=new DeflateCT()}static_dtree=[];for(i=0;i<D_CODES;i+=1){static_dtree[i]=new DeflateCT()}bl_tree=[];for(i=0;i<2*BL_CODES+1;i+=1){bl_tree[i]=new DeflateCT()}l_desc=new DeflateTreeDesc();d_desc=new DeflateTreeDesc();bl_desc=new DeflateTreeDesc();bl_count=[];heap=[];depth=[];length_code=[];dist_code=[];base_length=[];base_dist=[];flag_buf=[];}function reuse_queue(p){p.next=free_queue;free_queue=p}function new_queue(){var p;if(free_queue!==null){p=free_queue;free_queue=free_queue.next}else{p=new DeflateBuffer()}p.next=null;p.len=p.off=0;return p}function head1(i){return prev[WSIZE+i]}function head2(i,val){return prev[WSIZE+i]=val}function put_byte(c){outbuf[outoff+outcnt++]=c;if(outoff+outcnt===OUTBUFSIZ){qoutbuf()}}function put_short(w){w&=0xffff;if(outoff+outcnt<OUTBUFSIZ-2){outbuf[outoff+outcnt++]=w&0xff;outbuf[outoff+outcnt++]=w>>>8}else{put_byte(w&0xff);put_byte(w>>>8)}}function INSERT_STRING(){ins_h=(ins_h<<H_SHIFT^window[strstart+MIN_MATCH-1]&0xff)&HASH_MASK;hash_head=head1(ins_h);prev[strstart&WMASK]=hash_head;head2(ins_h,strstart)}function SEND_CODE(c,tree){send_bits(tree[c].fc,tree[c].dl)}function D_CODE(dist){return(dist<256?dist_code[dist]:dist_code[256+(dist>>7)])&0xff}function SMALLER(tree,n,m){return tree[n].fc<tree[m].fc||tree[n].fc===tree[m].fc&&depth[n]<=depth[m]}function read_buff(buff,offset,n){var i;for(i=0;i<n&&deflate_pos<deflate_data.length;i+=1){buff[offset+i]=deflate_data[deflate_pos++]&0xff}return i}function lm_init(){var j;for(j=0;j<HASH_SIZE;j+=1){prev[WSIZE+j]=0}max_lazy_match=configuration_table[compr_level].max_lazy;good_match=configuration_table[compr_level].good_length;{nice_match=configuration_table[compr_level].nice_length}max_chain_length=configuration_table[compr_level].max_chain;strstart=0;block_start=0;lookahead=read_buff(window,0,2*WSIZE);if(lookahead<=0){eofile=true;lookahead=0;return}eofile=false;while(lookahead<MIN_LOOKAHEAD&&!eofile){fill_window()}ins_h=0;for(j=0;j<MIN_MATCH-1;j+=1){ins_h=(ins_h<<H_SHIFT^window[j]&0xff)&HASH_MASK}}function longest_match(cur_match){var chain_length=max_chain_length;var scanp=strstart;var matchp;var len;var best_len=prev_length;var limit=strstart>MAX_DIST?strstart-MAX_DIST:NIL;var strendp=strstart+MAX_MATCH;var scan_end1=window[scanp+best_len-1];var scan_end=window[scanp+best_len];var i,broke;if(prev_length>=good_match){chain_length>>=2}do{matchp=cur_match;if(window[matchp+best_len]!==scan_end||window[matchp+best_len-1]!==scan_end1||window[matchp]!==window[scanp]||window[matchp+=1]!==window[scanp+1]){continue}scanp+=2;matchp+=1;while(scanp<strendp){broke=false;for(i=0;i<8;i+=1){scanp+=1;matchp+=1;if(window[scanp]!==window[matchp]){broke=true;break}}if(broke){break}}len=MAX_MATCH-(strendp-scanp);scanp=strendp-MAX_MATCH;if(len>best_len){match_start=cur_match;best_len=len;{if(len>=nice_match){break}}scan_end1=window[scanp+best_len-1];scan_end=window[scanp+best_len]}}while((cur_match=prev[cur_match&WMASK])>limit&& --chain_length!==0);return best_len}function fill_window(){var n,m;var more=window_size-lookahead-strstart;if(more===-1){more-=1}else if(strstart>=WSIZE+MAX_DIST){for(n=0;n<WSIZE;n+=1){window[n]=window[n+WSIZE]}match_start-=WSIZE;strstart-=WSIZE;block_start-=WSIZE;for(n=0;n<HASH_SIZE;n+=1){m=head1(n);head2(n,m>=WSIZE?m-WSIZE:NIL)}for(n=0;n<WSIZE;n+=1){m=prev[n];prev[n]=m>=WSIZE?m-WSIZE:NIL}more+=WSIZE}if(!eofile){n=read_buff(window,strstart+lookahead,more);if(n<=0){eofile=true}else{lookahead+=n}}}function deflate_fast(){while(lookahead!==0&&qhead===null){var flush;INSERT_STRING();if(hash_head!==NIL&&strstart-hash_head<=MAX_DIST){match_length=longest_match(hash_head);if(match_length>lookahead){match_length=lookahead}}if(match_length>=MIN_MATCH){flush=ct_tally(strstart-match_start,match_length-MIN_MATCH);lookahead-=match_length;if(match_length<=max_lazy_match){match_length-=1;do{strstart+=1;INSERT_STRING();}while(--match_length!==0);strstart+=1}else{strstart+=match_length;match_length=0;ins_h=window[strstart]&0xff;ins_h=(ins_h<<H_SHIFT^window[strstart+1]&0xff)&HASH_MASK;}}else{flush=ct_tally(0,window[strstart]&0xff);lookahead-=1;strstart+=1}if(flush){flush_block(0);block_start=strstart}while(lookahead<MIN_LOOKAHEAD&&!eofile){fill_window()}}}function deflate_better(){while(lookahead!==0&&qhead===null){INSERT_STRING();prev_length=match_length;prev_match=match_start;match_length=MIN_MATCH-1;if(hash_head!==NIL&&prev_length<max_lazy_match&&strstart-hash_head<=MAX_DIST){match_length=longest_match(hash_head);if(match_length>lookahead){match_length=lookahead}if(match_length===MIN_MATCH&&strstart-match_start>TOO_FAR){match_length-=1}}if(prev_length>=MIN_MATCH&&match_length<=prev_length){var flush;flush=ct_tally(strstart-1-prev_match,prev_length-MIN_MATCH);lookahead-=prev_length-1;prev_length-=2;do{strstart+=1;INSERT_STRING();}while(--prev_length!==0);match_available=false;match_length=MIN_MATCH-1;strstart+=1;if(flush){flush_block(0);block_start=strstart}}else if(match_available){if(ct_tally(0,window[strstart-1]&0xff)){flush_block(0);block_start=strstart}strstart+=1;lookahead-=1}else{match_available=true;strstart+=1;lookahead-=1}while(lookahead<MIN_LOOKAHEAD&&!eofile){fill_window()}}}function init_deflate(){if(eofile){return}bi_buf=0;bi_valid=0;ct_init();lm_init();qhead=null;outcnt=0;outoff=0;if(compr_level<=3){prev_length=MIN_MATCH-1;match_length=0}else{match_length=MIN_MATCH-1;match_available=false}complete=false}function deflate_internal(buff,off,buff_size){var n;if(!initflag){init_deflate();initflag=true;if(lookahead===0){complete=true;return 0}}n=qcopy(buff,off,buff_size);if(n===buff_size){return buff_size}if(complete){return n}if(compr_level<=3){deflate_fast()}else{deflate_better()}if(lookahead===0){if(match_available){ct_tally(0,window[strstart-1]&0xff)}flush_block(1);complete=true}return n+qcopy(buff,n+off,buff_size-n)}function qcopy(buff,off,buff_size){var n,i,j;n=0;while(qhead!==null&&n<buff_size){i=buff_size-n;if(i>qhead.len){i=qhead.len}for(j=0;j<i;j+=1){buff[off+n+j]=qhead.ptr[qhead.off+j]}qhead.off+=i;qhead.len-=i;n+=i;if(qhead.len===0){var p;p=qhead;qhead=qhead.next;reuse_queue(p)}}if(n===buff_size){return n}if(outoff<outcnt){i=buff_size-n;if(i>outcnt-outoff){i=outcnt-outoff}for(j=0;j<i;j+=1){buff[off+n+j]=outbuf[outoff+j]}outoff+=i;n+=i;if(outcnt===outoff){outcnt=outoff=0}}return n}function ct_init(){var n;var bits;var length;var code;var dist;if(static_dtree[0].dl!==0){return;}l_desc.dyn_tree=dyn_ltree;l_desc.static_tree=static_ltree;l_desc.extra_bits=extra_lbits;l_desc.extra_base=LITERALS+1;l_desc.elems=L_CODES;l_desc.max_length=MAX_BITS;l_desc.max_code=0;d_desc.dyn_tree=dyn_dtree;d_desc.static_tree=static_dtree;d_desc.extra_bits=extra_dbits;d_desc.extra_base=0;d_desc.elems=D_CODES;d_desc.max_length=MAX_BITS;d_desc.max_code=0;bl_desc.dyn_tree=bl_tree;bl_desc.static_tree=null;bl_desc.extra_bits=extra_blbits;bl_desc.extra_base=0;bl_desc.elems=BL_CODES;bl_desc.max_length=MAX_BL_BITS;bl_desc.max_code=0;length=0;for(code=0;code<LENGTH_CODES-1;code+=1){base_length[code]=length;for(n=0;n<1<<extra_lbits[code];n+=1){length_code[length++]=code}}length_code[length-1]=code;dist=0;for(code=0;code<16;code+=1){base_dist[code]=dist;for(n=0;n<1<<extra_dbits[code];n+=1){dist_code[dist++]=code}}for(dist>>=7;code<D_CODES;code+=1){base_dist[code]=dist<<7;for(n=0;n<1<<extra_dbits[code]-7;n+=1){dist_code[256+dist++]=code}}for(bits=0;bits<=MAX_BITS;bits+=1){bl_count[bits]=0}n=0;while(n<=143){static_ltree[n++].dl=8;bl_count[8]+=1}while(n<=255){static_ltree[n++].dl=9;bl_count[9]+=1}while(n<=279){static_ltree[n++].dl=7;bl_count[7]+=1}while(n<=287){static_ltree[n++].dl=8;bl_count[8]+=1}gen_codes(static_ltree,L_CODES+1);for(n=0;n<D_CODES;n+=1){static_dtree[n].dl=5;static_dtree[n].fc=bi_reverse(n,5)}init_block()}function init_block(){var n;for(n=0;n<L_CODES;n+=1){dyn_ltree[n].fc=0}for(n=0;n<D_CODES;n+=1){dyn_dtree[n].fc=0}for(n=0;n<BL_CODES;n+=1){bl_tree[n].fc=0}dyn_ltree[END_BLOCK].fc=1;opt_len=static_len=0;last_lit=last_dist=last_flags=0;flags=0;flag_bit=1}function pqdownheap(tree,k){var v=heap[k],j=k<<1;while(j<=heap_len){if(j<heap_len&&SMALLER(tree,heap[j+1],heap[j])){j+=1}if(SMALLER(tree,v,heap[j])){break}heap[k]=heap[j];k=j;j<<=1}heap[k]=v}function gen_bitlen(desc){var tree=desc.dyn_tree;var extra=desc.extra_bits;var base=desc.extra_base;var max_code=desc.max_code;var max_length=desc.max_length;var stree=desc.static_tree;var h;var n,m;var bits;var xbits;var f;var overflow=0;for(bits=0;bits<=MAX_BITS;bits+=1){bl_count[bits]=0}tree[heap[heap_max]].dl=0;for(h=heap_max+1;h<HEAP_SIZE;h+=1){n=heap[h];bits=tree[tree[n].dl].dl+1;if(bits>max_length){bits=max_length;overflow+=1}tree[n].dl=bits;if(n>max_code){continue;}bl_count[bits]+=1;xbits=0;if(n>=base){xbits=extra[n-base]}f=tree[n].fc;opt_len+=f*(bits+xbits);if(stree!==null){static_len+=f*(stree[n].dl+xbits)}}if(overflow===0){return}do{bits=max_length-1;while(bl_count[bits]===0){bits-=1}bl_count[bits]-=1;bl_count[bits+1]+=2;bl_count[max_length]-=1;overflow-=2}while(overflow>0);for(bits=max_length;bits!==0;bits-=1){n=bl_count[bits];while(n!==0){m=heap[h-=1];if(m>max_code){continue}if(tree[m].dl!==bits){opt_len+=(bits-tree[m].dl)*tree[m].fc;tree[m].fc=bits}n-=1}}}function gen_codes(tree,max_code){var next_code=[];var code=0;var bits;var n;for(bits=1;bits<=MAX_BITS;bits+=1){code=code+bl_count[bits-1]<<1;next_code[bits]=code}for(n=0;n<=max_code;n+=1){var len=tree[n].dl;if(len===0){continue}tree[n].fc=bi_reverse(next_code[len]++,len);}}function build_tree(desc){var tree=desc.dyn_tree;var stree=desc.static_tree;var elems=desc.elems;var n,m;var max_code=-1;var node=elems;heap_len=0;heap_max=HEAP_SIZE;for(n=0;n<elems;n+=1){if(tree[n].fc!==0){heap[heap_len+=1]=max_code=n;depth[n]=0}else{tree[n].dl=0}}while(heap_len<2){var xnew=heap[heap_len+=1]=max_code<2? ++max_code:0;tree[xnew].fc=1;depth[xnew]=0;opt_len-=1;if(stree!==null){static_len-=stree[xnew].dl}}desc.max_code=max_code;for(n=heap_len>>1;n>=1;n-=1){pqdownheap(tree,n)}do{n=heap[SMALLEST];heap[SMALLEST]=heap[heap_len--];pqdownheap(tree,SMALLEST);m=heap[SMALLEST];heap[heap_max-=1]=n;heap[heap_max-=1]=m;tree[node].fc=tree[n].fc+tree[m].fc;if(depth[n]>depth[m]+1){depth[node]=depth[n]}else{depth[node]=depth[m]+1}tree[n].dl=tree[m].dl=node;heap[SMALLEST]=node++;pqdownheap(tree,SMALLEST)}while(heap_len>=2);heap[heap_max-=1]=heap[SMALLEST];gen_bitlen(desc);gen_codes(tree,max_code)}function scan_tree(tree,max_code){var n,prevlen=-1,curlen,nextlen=tree[0].dl,count=0,max_count=7,min_count=4;if(nextlen===0){max_count=138;min_count=3}tree[max_code+1].dl=0xffff;for(n=0;n<=max_code;n+=1){curlen=nextlen;nextlen=tree[n+1].dl;if(++count<max_count&&curlen===nextlen){continue}else if(count<min_count){bl_tree[curlen].fc+=count}else if(curlen!==0){if(curlen!==prevlen){bl_tree[curlen].fc+=1}bl_tree[REP_3_6].fc+=1}else if(count<=10){bl_tree[REPZ_3_10].fc+=1}else{bl_tree[REPZ_11_138].fc+=1}count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=3}else if(curlen===nextlen){max_count=6;min_count=3}else{max_count=7;min_count=4}}}function send_tree(tree,max_code){var n;var prevlen=-1;var curlen;var nextlen=tree[0].dl;var count=0;var max_count=7;var min_count=4;if(nextlen===0){max_count=138;min_count=3}for(n=0;n<=max_code;n+=1){curlen=nextlen;nextlen=tree[n+1].dl;if(++count<max_count&&curlen===nextlen){continue}else if(count<min_count){do{SEND_CODE(curlen,bl_tree)}while(--count!==0)}else if(curlen!==0){if(curlen!==prevlen){SEND_CODE(curlen,bl_tree);count-=1}SEND_CODE(REP_3_6,bl_tree);send_bits(count-3,2)}else if(count<=10){SEND_CODE(REPZ_3_10,bl_tree);send_bits(count-3,3)}else{SEND_CODE(REPZ_11_138,bl_tree);send_bits(count-11,7)}count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=3}else if(curlen===nextlen){max_count=6;min_count=3}else{max_count=7;min_count=4}}}function build_bl_tree(){var max_blindex;scan_tree(dyn_ltree,l_desc.max_code);scan_tree(dyn_dtree,d_desc.max_code);build_tree(bl_desc);for(max_blindex=BL_CODES-1;max_blindex>=3;max_blindex-=1){if(bl_tree[bl_order[max_blindex]].dl!==0){break}}opt_len+=3*(max_blindex+1)+5+5+4;return max_blindex}function send_all_trees(lcodes,dcodes,blcodes){var rank;send_bits(lcodes-257,5);send_bits(dcodes-1,5);send_bits(blcodes-4,4);for(rank=0;rank<blcodes;rank+=1){send_bits(bl_tree[bl_order[rank]].dl,3)}send_tree(dyn_ltree,lcodes-1);send_tree(dyn_dtree,dcodes-1)}function flush_block(eof){var opt_lenb,static_lenb,max_blindex,stored_len,i;stored_len=strstart-block_start;flag_buf[last_flags]=flags;build_tree(l_desc);build_tree(d_desc);max_blindex=build_bl_tree();opt_lenb=opt_len+3+7>>3;static_lenb=static_len+3+7>>3;if(static_lenb<=opt_lenb){opt_lenb=static_lenb}if(stored_len+4<=opt_lenb&&block_start>=0){send_bits((STORED_BLOCK<<1)+eof,3);bi_windup();put_short(stored_len);put_short(~stored_len);for(i=0;i<stored_len;i+=1){put_byte(window[block_start+i])}}else if(static_lenb===opt_lenb){send_bits((STATIC_TREES<<1)+eof,3);compress_block(static_ltree,static_dtree)}else{send_bits((DYN_TREES<<1)+eof,3);send_all_trees(l_desc.max_code+1,d_desc.max_code+1,max_blindex+1);compress_block(dyn_ltree,dyn_dtree)}init_block();if(eof!==0){bi_windup()}}function ct_tally(dist,lc){l_buf[last_lit++]=lc;if(dist===0){dyn_ltree[lc].fc+=1}else{dist-=1;dyn_ltree[length_code[lc]+LITERALS+1].fc+=1;dyn_dtree[D_CODE(dist)].fc+=1;d_buf[last_dist++]=dist;flags|=flag_bit}flag_bit<<=1;if((last_lit&7)===0){flag_buf[last_flags++]=flags;flags=0;flag_bit=1}if(compr_level>2&&(last_lit&0xfff)===0){var out_length=last_lit*8;var in_length=strstart-block_start;var dcode;for(dcode=0;dcode<D_CODES;dcode+=1){out_length+=dyn_dtree[dcode].fc*(5+extra_dbits[dcode])}out_length>>=3;if(last_dist<parseInt(last_lit/2,10)&&out_length<parseInt(in_length/2,10)){return true}}return last_lit===LIT_BUFSIZE-1||last_dist===DIST_BUFSIZE;}function compress_block(ltree,dtree){var dist;var lc;var lx=0;var dx=0;var fx=0;var flag=0;var code;var extra;if(last_lit!==0){do{if((lx&7)===0){flag=flag_buf[fx++]}lc=l_buf[lx++]&0xff;if((flag&1)===0){SEND_CODE(lc,ltree);}else{code=length_code[lc];SEND_CODE(code+LITERALS+1,ltree);extra=extra_lbits[code];if(extra!==0){lc-=base_length[code];send_bits(lc,extra);}dist=d_buf[dx++];code=D_CODE(dist);SEND_CODE(code,dtree);extra=extra_dbits[code];if(extra!==0){dist-=base_dist[code];send_bits(dist,extra);}}flag>>=1}while(lx<last_lit)}SEND_CODE(END_BLOCK,ltree)}var Buf_size=16;function send_bits(value,length){if(bi_valid>Buf_size-length){bi_buf|=value<<bi_valid;put_short(bi_buf);bi_buf=value>>Buf_size-bi_valid;bi_valid+=length-Buf_size}else{bi_buf|=value<<bi_valid;bi_valid+=length}}function bi_reverse(code,len){var res=0;do{res|=code&1;code>>=1;res<<=1}while(--len>0);return res>>1}function bi_windup(){if(bi_valid>8){put_short(bi_buf)}else if(bi_valid>0){put_byte(bi_buf)}bi_buf=0;bi_valid=0}function qoutbuf(){var q,i;if(outcnt!==0){q=new_queue();if(qhead===null){qhead=qtail=q}else{qtail=qtail.next=q}q.len=outcnt-outoff;for(i=0;i<q.len;i+=1){q.ptr[i]=outbuf[outoff+i]}outcnt=outoff=0}}function deflate(arr,level){var i,buff;deflate_data=arr;deflate_pos=0;if(typeof level==="undefined"){level=DEFAULT_LEVEL}deflate_start(level);buff=[];do{i=deflate_internal(buff,buff.length,1024)}while(i>0);deflate_data=null;return buff}module.exports=deflate;module.exports.DEFAULT_LEVEL=DEFAULT_LEVEL})()});var rawdeflate_1=rawdeflate.DEFAULT_LEVEL;var codemirror=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){var userAgent=navigator.userAgent;var platform=navigator.platform;var gecko=/gecko\/\d/i.test(userAgent);var ie_upto10=/MSIE \d/.test(userAgent);var ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);var edge=/Edge\/(\d+)/.exec(userAgent);var ie=ie_upto10||ie_11up||edge;var ie_version=ie&&(ie_upto10?document.documentMode||6: +(edge||ie_11up)[1]);var webkit=!edge&&/WebKit\//.test(userAgent);var qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(userAgent);var chrome=!edge&&/Chrome\//.test(userAgent);var presto=/Opera\//.test(userAgent);var safari=/Apple Computer/.test(navigator.vendor);var mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);var phantom=/PhantomJS/.test(userAgent);var ios=!edge&&/AppleWebKit/.test(userAgent)&&/Mobile\/\w+/.test(userAgent);var android=/Android/.test(userAgent);var mobile=ios||android||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);var mac=ios||/Mac/.test(platform);var chromeOS=/\bCrOS\b/.test(userAgent);var windows=/win/i.test(platform);var presto_version=presto&&userAgent.match(/Version\/(\d*\.\d*)/);if(presto_version){presto_version=Number(presto_version[1])}if(presto_version&&presto_version>=15){presto=false;webkit=true}var flipCtrlCmd=mac&&(qtwebkit||presto&&(presto_version==null||presto_version<12.11));var captureRightClick=gecko||ie&&ie_version>=9;function classTest(cls){return new RegExp("(^|\\s)"+cls+"(?:$|\\s)\\s*")}var rmClass=function rmClass(node,cls){var current=node.className;var match=classTest(cls).exec(current);if(match){var after=current.slice(match.index+match[0].length);node.className=current.slice(0,match.index)+(after?match[1]+after:"")}};function removeChildren(e){for(var count=e.childNodes.length;count>0;count-=1){e.removeChild(e.firstChild)}return e}function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e)}function elt(tag,content,className,style){var e=document.createElement(tag);if(className){e.className=className}if(style){e.style.cssText=style}if(typeof content=="string"){e.appendChild(document.createTextNode(content))}else if(content){for(var i=0;i<content.length;i+=1){e.appendChild(content[i])}}return e}function eltP(tag,content,className,style){var e=elt(tag,content,className,style);e.setAttribute("role","presentation");return e}var range;if(document.createRange){range=function range(node,start,end,endNode){var r=document.createRange();r.setEnd(endNode||node,end);r.setStart(node,start);return r}}else{range=function range(node,start,end){var r=document.body.createTextRange();try{r.moveToElementText(node.parentNode)}catch(e){return r}r.collapse(true);r.moveEnd("character",end);r.moveStart("character",start);return r}}function contains(parent,child){if(child.nodeType==3){child=child.parentNode}if(parent.contains){return parent.contains(child)}do{if(child.nodeType==11){child=child.host}if(child==parent){return true}}while(child=child.parentNode)}function activeElt(){var activeElement;try{activeElement=document.activeElement}catch(e){activeElement=document.body||null}while(activeElement&&activeElement.shadowRoot&&activeElement.shadowRoot.activeElement){activeElement=activeElement.shadowRoot.activeElement}return activeElement}function addClass(node,cls){var current=node.className;if(!classTest(cls).test(current)){node.className+=(current?" ":"")+cls}}function joinClasses(a,b){var as=a.split(" ");for(var i=0;i<as.length;i+=1){if(as[i]&&!classTest(as[i]).test(b)){b+=" "+as[i]}}return b}var selectInput=function selectInput(node){node.select()};if(ios){selectInput=function selectInput(node){node.selectionStart=0;node.selectionEnd=node.value.length}}else if(ie){selectInput=function selectInput(node){try{node.select()}catch(_e){}}}function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}}function copyObj(obj,target,overwrite){if(!target){target={}}for(var prop in obj){if(obj.hasOwnProperty(prop)&&(overwrite!==false||!target.hasOwnProperty(prop))){target[prop]=obj[prop]}}return target}function countColumn(string,end,tabSize,startIndex,startValue){if(end==null){end=string.search(/[^\s\u00a0]/);if(end==-1){end=string.length}}for(var i=startIndex||0,n=startValue||0;;){var nextTab=string.indexOf("\t",i);if(nextTab<0||nextTab>=end){return n+(end-i)}n+=nextTab-i;n+=tabSize-n%tabSize;i=nextTab+1}}var Delayed=function Delayed(){this.id=null;this.f=null;this.time=0;this.handler=bind(this.onTimeout,this)};Delayed.prototype.onTimeout=function(self){self.id=0;if(self.time<= +new Date()){self.f()}else{setTimeout(self.handler,self.time- +new Date())}};Delayed.prototype.set=function(ms,f){this.f=f;var time= +new Date()+ms;if(!this.id||time<this.time){clearTimeout(this.id);this.id=setTimeout(this.handler,ms);this.time=time}};function indexOf(array,elt){for(var i=0;i<array.length;i+=1){if(array[i]==elt){return i}}return -1}var scrollerGap=30;var Pass={toString:function toString(){return "CodeMirror.Pass"}};var sel_dontScroll={scroll:false},sel_mouse={origin:"*mouse"},sel_move={origin:"+move"};function findColumn(string,goal,tabSize){for(var pos=0,col=0;;){var nextTab=string.indexOf("\t",pos);if(nextTab==-1){nextTab=string.length}var skipped=nextTab-pos;if(nextTab==string.length||col+skipped>=goal){return pos+Math.min(skipped,goal-col)}col+=nextTab-pos;col+=tabSize-col%tabSize;pos=nextTab+1;if(col>=goal){return pos}}}var spaceStrs=[""];function spaceStr(n){while(spaceStrs.length<=n){spaceStrs.push(lst(spaceStrs)+" ")}return spaceStrs[n]}function lst(arr){return arr[arr.length-1]}function map(array,f){var out=[];for(var i=0;i<array.length;i+=1){out[i]=f(array[i],i)}return out}function insertSorted(array,value,score){var pos=0,priority=score(value);while(pos<array.length&&score(array[pos])<=priority){pos+=1}array.splice(pos,0,value)}function nothing(){}function createObj(base,props){var inst;if(Object.create){inst=Object.create(base)}else{nothing.prototype=base;inst=new nothing()}if(props){copyObj(props,inst)}return inst}var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function isWordCharBasic(ch){return/\w/.test(ch)||ch>"\x80"&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))}function isWordChar(ch,helper){if(!helper){return isWordCharBasic(ch)}if(helper.source.indexOf("\\w")>-1&&isWordCharBasic(ch)){return true}return helper.test(ch)}function isEmpty(obj){for(var n in obj){if(obj.hasOwnProperty(n)&&obj[n]){return false}}return true}var extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function isExtendingChar(ch){return ch.charCodeAt(0)>=768&&extendingChars.test(ch)}function skipExtendingChars(str,pos,dir){while((dir<0?pos>0:pos<str.length)&&isExtendingChar(str.charAt(pos))){pos+=dir}return pos}function findFirst(pred,from,to){var dir=from>to?-1:1;for(;;){if(from==to){return from}var midF=(from+to)/2,mid=dir<0?Math.ceil(midF):Math.floor(midF);if(mid==from){return pred(mid)?from:to}if(pred(mid)){to=mid}else{from=mid+dir}}}function iterateBidiSections(order,from,to,f){if(!order){return f(from,to,"ltr",0)}var found=false;for(var i=0;i<order.length;i+=1){var part=order[i];if(part.from<to&&part.to>from||from==to&&part.to==from){f(Math.max(part.from,from),Math.min(part.to,to),part.level==1?"rtl":"ltr",i);found=true}}if(!found){f(from,to,"ltr")}}var bidiOther=null;function getBidiPartAt(order,ch,sticky){var found;bidiOther=null;for(var i=0;i<order.length;i+=1){var cur=order[i];if(cur.from<ch&&cur.to>ch){return i}if(cur.to==ch){if(cur.from!=cur.to&&sticky=="before"){found=i}else{bidiOther=i}}if(cur.from==ch){if(cur.from!=cur.to&&sticky!="before"){found=i}else{bidiOther=i}}}return found!=null?found:bidiOther}var bidiOrdering=function(){var lowTypes="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var arabicTypes="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function charType(code){if(code<=0xf7){return lowTypes.charAt(code)}else if(0x590<=code&&code<=0x5f4){return "R"}else if(0x600<=code&&code<=0x6f9){return arabicTypes.charAt(code-0x600)}else if(0x6ee<=code&&code<=0x8ac){return "r"}else if(0x2000<=code&&code<=0x200b){return "w"}else if(code==0x200c){return "b"}else{return "L"}}var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;function BidiSpan(level,from,to){this.level=level;this.from=from;this.to=to}return function(str,direction){var outerType=direction=="ltr"?"L":"R";if(str.length==0||direction=="ltr"&&!bidiRE.test(str)){return false}var len=str.length,types=[];for(var i=0;i<len;i+=1){types.push(charType(str.charCodeAt(i)))}for(var i$1=0,prev=outerType;i$1<len;i$1+=1){var type=types[i$1];if(type=="m"){types[i$1]=prev}else{prev=type}}for(var i$2=0,cur=outerType;i$2<len;i$2+=1){var type$1=types[i$2];if(type$1=="1"&&cur=="r"){types[i$2]="n"}else if(isStrong.test(type$1)){cur=type$1;if(type$1=="r"){types[i$2]="R"}}}for(var i$3=1,prev$1=types[0];i$3<len-1;i$3+=1){var type$2=types[i$3];if(type$2=="+"&&prev$1=="1"&&types[i$3+1]=="1"){types[i$3]="1"}else if(type$2==","&&prev$1==types[i$3+1]&&(prev$1=="1"||prev$1=="n")){types[i$3]=prev$1}prev$1=type$2}for(var i$4=0;i$4<len;i$4+=1){var type$3=types[i$4];if(type$3==","){types[i$4]="N"}else if(type$3=="%"){var end=void 0;for(end=i$4+1;end<len&&types[end]=="%";end+=1){}var replace=i$4&&types[i$4-1]=="!"||end<len&&types[end]=="1"?"1":"N";for(var j=i$4;j<end;j+=1){types[j]=replace}i$4=end-1}}for(var i$5=0,cur$1=outerType;i$5<len;i$5+=1){var type$4=types[i$5];if(cur$1=="L"&&type$4=="1"){types[i$5]="L"}else if(isStrong.test(type$4)){cur$1=type$4}}for(var i$6=0;i$6<len;i$6+=1){if(isNeutral.test(types[i$6])){var end$1=void 0;for(end$1=i$6+1;end$1<len&&isNeutral.test(types[end$1]);end$1+=1){}var before=(i$6?types[i$6-1]:outerType)=="L";var after=(end$1<len?types[end$1]:outerType)=="L";var replace$1=before==after?before?"L":"R":outerType;for(var j$1=i$6;j$1<end$1;j$1+=1){types[j$1]=replace$1}i$6=end$1-1}}var order=[],m;for(var i$7=0;i$7<len;){if(countsAsLeft.test(types[i$7])){var start=i$7;for(i$7+=1;i$7<len&&countsAsLeft.test(types[i$7]);i$7+=1){}order.push(new BidiSpan(0,start,i$7))}else{var pos=i$7,at=order.length,isRTL=direction=="rtl"?1:0;for(i$7+=1;i$7<len&&types[i$7]!="L";i$7+=1){}for(var j$2=pos;j$2<i$7;){if(countsAsNum.test(types[j$2])){if(pos<j$2){order.splice(at,0,new BidiSpan(1,pos,j$2));at+=isRTL}var nstart=j$2;for(j$2+=1;j$2<i$7&&countsAsNum.test(types[j$2]);j$2+=1){}order.splice(at,0,new BidiSpan(2,nstart,j$2));at+=isRTL;pos=j$2}else{j$2+=1}}if(pos<i$7){order.splice(at,0,new BidiSpan(1,pos,i$7))}}}if(direction=="ltr"){if(order[0].level==1&&(m=str.match(/^\s+/))){order[0].from=m[0].length;order.unshift(new BidiSpan(0,0,m[0].length))}if(lst(order).level==1&&(m=str.match(/\s+$/))){lst(order).to-=m[0].length;order.push(new BidiSpan(0,len-m[0].length,len))}}return direction=="rtl"?order.reverse():order}}();function getOrder(line,direction){var order=line.order;if(order==null){order=line.order=bidiOrdering(line.text,direction)}return order}var noHandlers=[];var on=function on(emitter,type,f){if(emitter.addEventListener){emitter.addEventListener(type,f,false)}else if(emitter.attachEvent){emitter.attachEvent("on"+type,f)}else{var map=emitter._handlers||(emitter._handlers={});map[type]=(map[type]||noHandlers).concat(f)}};function getHandlers(emitter,type){return emitter._handlers&&emitter._handlers[type]||noHandlers}function off(emitter,type,f){if(emitter.removeEventListener){emitter.removeEventListener(type,f,false)}else if(emitter.detachEvent){emitter.detachEvent("on"+type,f)}else{var map=emitter._handlers,arr=map&&map[type];if(arr){var index=indexOf(arr,f);if(index>-1){map[type]=arr.slice(0,index).concat(arr.slice(index+1))}}}}function signal(emitter,type ){var handlers=getHandlers(emitter,type);if(!handlers.length){return}var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<handlers.length;i+=1){handlers[i].apply(null,args)}}function signalDOMEvent(cm,e,override){if(typeof e=="string"){e={type:e,preventDefault:function preventDefault(){this.defaultPrevented=true}}}signal(cm,override||e.type,cm,e);return e_defaultPrevented(e)||e.codemirrorIgnore}function signalCursorActivity(cm){var arr=cm._handlers&&cm._handlers.cursorActivity;if(!arr){return}var set=cm.curOp.cursorActivityHandlers||(cm.curOp.cursorActivityHandlers=[]);for(var i=0;i<arr.length;i+=1){if(indexOf(set,arr[i])==-1){set.push(arr[i])}}}function hasHandler(emitter,type){return getHandlers(emitter,type).length>0}function eventMixin(ctor){ctor.prototype.on=function(type,f){on(this,type,f)};ctor.prototype.off=function(type,f){off(this,type,f)}}function e_preventDefault(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}function e_stopPropagation(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}function e_defaultPrevented(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==false}function e_stop(e){e_preventDefault(e);e_stopPropagation(e)}function e_target(e){return e.target||e.srcElement}function e_button(e){var b=e.which;if(b==null){if(e.button&1){b=1}else if(e.button&2){b=3}else if(e.button&4){b=2}}if(mac&&e.ctrlKey&&b==1){b=3}return b}var dragAndDrop=function(){if(ie&&ie_version<9){return false}var div=elt('div');return "draggable"in div||"dragDrop"in div}();var zwspSupported;function zeroWidthElement(measure){if(zwspSupported==null){var test=elt("span","\u200B");removeChildrenAndAdd(measure,elt("span",[test,document.createTextNode("x")]));if(measure.firstChild.offsetHeight!=0){zwspSupported=test.offsetWidth<=1&&test.offsetHeight>2&&!(ie&&ie_version<8)}}var node=zwspSupported?elt("span","\u200B"):elt("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");node.setAttribute("cm-text","");return node}var badBidiRects;function hasBadBidiRects(measure){if(badBidiRects!=null){return badBidiRects}var txt=removeChildrenAndAdd(measure,document.createTextNode("A\u062EA"));var r0=range(txt,0,1).getBoundingClientRect();var r1=range(txt,1,2).getBoundingClientRect();removeChildren(measure);if(!r0||r0.left==r0.right){return false}return badBidiRects=r1.right-r0.right<3}var splitLinesAuto="\n\nb".split(/\n/).length!=3?function(string){var pos=0,result=[],l=string.length;while(pos<=l){var nl=string.indexOf("\n",pos);if(nl==-1){nl=string.length}var line=string.slice(pos,string.charAt(nl-1)=="\r"?nl-1:nl);var rt=line.indexOf("\r");if(rt!=-1){result.push(line.slice(0,rt));pos+=rt+1}else{result.push(line);pos=nl+1}}return result}:function(string){return string.split(/\r\n?|\n/)};var hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return false}}:function(te){var range;try{range=te.ownerDocument.selection.createRange()}catch(e){}if(!range||range.parentElement()!=te){return false}return range.compareEndPoints("StartToEnd",range)!=0};var hasCopyEvent=function(){var e=elt("div");if("oncopy"in e){return true}e.setAttribute("oncopy","return;");return typeof e.oncopy=="function"}();var badZoomedRects=null;function hasBadZoomedRects(measure){if(badZoomedRects!=null){return badZoomedRects}var node=removeChildrenAndAdd(measure,elt("span","x"));var normal=node.getBoundingClientRect();var fromRange=range(node,0,1).getBoundingClientRect();return badZoomedRects=Math.abs(normal.left-fromRange.left)>1}var modes={},mimeModes={};function defineMode(name,mode){if(arguments.length>2){mode.dependencies=Array.prototype.slice.call(arguments,2)}modes[name]=mode}function defineMIME(mime,spec){mimeModes[mime]=spec}function resolveMode(spec){if(typeof spec=="string"&&mimeModes.hasOwnProperty(spec)){spec=mimeModes[spec]}else if(spec&&typeof spec.name=="string"&&mimeModes.hasOwnProperty(spec.name)){var found=mimeModes[spec.name];if(typeof found=="string"){found={name:found}}spec=createObj(found,spec);spec.name=found.name}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec)){return resolveMode("application/xml")}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(spec)){return resolveMode("application/json")}if(typeof spec=="string"){return{name:spec}}else{return spec||{name:"null"}}}function getMode(options,spec){spec=resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory){return getMode(options,"text/plain")}var modeObj=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){var exts=modeExtensions[spec.name];for(var prop in exts){if(!exts.hasOwnProperty(prop)){continue}if(modeObj.hasOwnProperty(prop)){modeObj["_"+prop]=modeObj[prop]}modeObj[prop]=exts[prop]}}modeObj.name=spec.name;if(spec.helperType){modeObj.helperType=spec.helperType}if(spec.modeProps){for(var prop$1 in spec.modeProps){modeObj[prop$1]=spec.modeProps[prop$1]}}return modeObj}var modeExtensions={};function extendMode(mode,properties){var exts=modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:modeExtensions[mode]={};copyObj(properties,exts)}function copyState(mode,state){if(state===true){return state}if(mode.copyState){return mode.copyState(state)}var nstate={};for(var n in state){var val=state[n];if(val instanceof Array){val=val.concat([])}nstate[n]=val}return nstate}function innerMode(mode,state){var info;while(mode.innerMode){info=mode.innerMode(state);if(!info||info.mode==mode){break}state=info.state;mode=info.mode}return info||{mode:mode,state:state}}function startState(mode,a1,a2){return mode.startState?mode.startState(a1,a2):true}var StringStream=function StringStream(string,tabSize,lineOracle){this.pos=this.start=0;this.string=string;this.tabSize=tabSize||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=lineOracle};StringStream.prototype.eol=function(){return this.pos>=this.string.length};StringStream.prototype.sol=function(){return this.pos==this.lineStart};StringStream.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};StringStream.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};StringStream.prototype.eat=function(match){var ch=this.string.charAt(this.pos);var ok;if(typeof match=="string"){ok=ch==match}else{ok=ch&&(match.test?match.test(ch):match(ch))}if(ok){++this.pos;return ch}};StringStream.prototype.eatWhile=function(match){var start=this.pos;while(this.eat(match)){}return this.pos>start};StringStream.prototype.eatSpace=function(){var start=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>start};StringStream.prototype.skipToEnd=function(){this.pos=this.string.length};StringStream.prototype.skipTo=function(ch){var found=this.string.indexOf(ch,this.pos);if(found>-1){this.pos=found;return true}};StringStream.prototype.backUp=function(n){this.pos-=n};StringStream.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)};StringStream.prototype.indentation=function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)};StringStream.prototype.match=function(pattern,consume,caseInsensitive){if(typeof pattern=="string"){var cased=function cased(str){return caseInsensitive?str.toLowerCase():str};var substr=this.string.substr(this.pos,pattern.length);if(cased(substr)==cased(pattern)){if(consume!==false){this.pos+=pattern.length}return true}}else{var match=this.string.slice(this.pos).match(pattern);if(match&&match.index>0){return null}if(match&&consume!==false){this.pos+=match[0].length}return match}};StringStream.prototype.current=function(){return this.string.slice(this.start,this.pos)};StringStream.prototype.hideFirstChars=function(n,inner){this.lineStart+=n;try{return inner()}finally{this.lineStart-=n}};StringStream.prototype.lookAhead=function(n){var oracle=this.lineOracle;return oracle&&oracle.lookAhead(n)};StringStream.prototype.baseToken=function(){var oracle=this.lineOracle;return oracle&&oracle.baseToken(this.pos)};function getLine(doc,n){n-=doc.first;if(n<0||n>=doc.size){throw new Error("There is no line "+(n+doc.first)+" in the document.")}var chunk=doc;while(!chunk.lines){for(var i=0;;i+=1){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break}n-=sz}}return chunk.lines[n]}function getBetween(doc,start,end){var out=[],n=start.line;doc.iter(start.line,end.line+1,function(line){var text=line.text;if(n==end.line){text=text.slice(0,end.ch)}if(n==start.line){text=text.slice(start.ch)}out.push(text);n+=1});return out}function getLines(doc,from,to){var out=[];doc.iter(from,to,function(line){out.push(line.text)});return out}function updateLineHeight(line,height){var diff=height-line.height;if(diff){for(var n=line;n;n=n.parent){n.height+=diff}}}function lineNo(line){if(line.parent==null){return null}var cur=line.parent,no=indexOf(cur.lines,line);for(var chunk=cur.parent;chunk;cur=chunk,chunk=chunk.parent){for(var i=0;;i+=1){if(chunk.children[i]==cur){break}no+=chunk.children[i].chunkSize()}}return no+cur.first}function _lineAtHeight(chunk,h){var n=chunk.first;outer:do{for(var i$1=0;i$1<chunk.children.length;i$1+=1){var child=chunk.children[i$1],ch=child.height;if(h<ch){chunk=child;continue outer}h-=ch;n+=child.chunkSize()}return n}while(!chunk.lines);var i=0;for(;i<chunk.lines.length;i+=1){var line=chunk.lines[i],lh=line.height;if(h<lh){break}h-=lh}return n+i}function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size}function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber))}function Pos(line,ch,sticky){if(sticky===void 0){sticky=null}if(!(this instanceof Pos)){return new Pos(line,ch,sticky)}this.line=line;this.ch=ch;this.sticky=sticky}function cmp(a,b){return a.line-b.line||a.ch-b.ch}function equalCursorPos(a,b){return a.sticky==b.sticky&&cmp(a,b)==0}function copyPos(x){return Pos(x.line,x.ch)}function maxPos(a,b){return cmp(a,b)<0?b:a}function minPos(a,b){return cmp(a,b)<0?a:b}function clipLine(doc,n){return Math.max(doc.first,Math.min(n,doc.first+doc.size-1))}function _clipPos(doc,pos){if(pos.line<doc.first){return Pos(doc.first,0)}var last=doc.first+doc.size-1;if(pos.line>last){return Pos(last,getLine(doc,last).text.length)}return clipToLen(pos,getLine(doc,pos.line).text.length)}function clipToLen(pos,linelen){var ch=pos.ch;if(ch==null||ch>linelen){return Pos(pos.line,linelen)}else if(ch<0){return Pos(pos.line,0)}else{return pos}}function clipPosArray(doc,array){var out=[];for(var i=0;i<array.length;i+=1){out[i]=_clipPos(doc,array[i])}return out}var SavedContext=function SavedContext(state,lookAhead){this.state=state;this.lookAhead=lookAhead};var Context=function Context(doc,state,line,lookAhead){this.state=state;this.doc=doc;this.line=line;this.maxLookAhead=lookAhead||0;this.baseTokens=null;this.baseTokenPos=1};Context.prototype.lookAhead=function(n){var line=this.doc.getLine(this.line+n);if(line!=null&&n>this.maxLookAhead){this.maxLookAhead=n}return line};Context.prototype.baseToken=function(n){if(!this.baseTokens){return null}while(this.baseTokens[this.baseTokenPos]<=n){this.baseTokenPos+=2}var type=this.baseTokens[this.baseTokenPos+1];return{type:type&&type.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-n}};Context.prototype.nextLine=function(){this.line+=1;if(this.maxLookAhead>0){this.maxLookAhead-=1}};Context.fromSaved=function(doc,saved,line){if(saved instanceof SavedContext){return new Context(doc,copyState(doc.mode,saved.state),line,saved.lookAhead)}else{return new Context(doc,copyState(doc.mode,saved),line)}};Context.prototype.save=function(copy){var state=copy!==false?copyState(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new SavedContext(state,this.maxLookAhead):state};function highlightLine(cm,line,context,forceToEnd){var st=[cm.state.modeGen],lineClasses={};runMode(cm,line.text,cm.doc.mode,context,function(end,style){return st.push(end,style)},lineClasses,forceToEnd);var state=context.state;var loop=function loop(o){context.baseTokens=st;var overlay=cm.state.overlays[o],i=1,at=0;context.state=true;runMode(cm,line.text,overlay.mode,context,function(end,style){var start=i;while(at<end){var i_end=st[i];if(i_end>end){st.splice(i,1,end,st[i+1],i_end)}i+=2;at=Math.min(end,i_end)}if(!style){return}if(overlay.opaque){st.splice(start,i-start,end,"overlay "+style);i=start+2}else{for(;start<i;start+=2){var cur=st[start+1];st[start+1]=(cur?cur+" ":"")+"overlay "+style}}},lineClasses);context.state=state;context.baseTokens=null;context.baseTokenPos=1};for(var o=0;o<cm.state.overlays.length;o+=1){loop(o)}return{styles:st,classes:lineClasses.bgClass||lineClasses.textClass?lineClasses:null}}function getLineStyles(cm,line,updateFrontier){if(!line.styles||line.styles[0]!=cm.state.modeGen){var context=getContextBefore(cm,lineNo(line));var resetState=line.text.length>cm.options.maxHighlightLength&&copyState(cm.doc.mode,context.state);var result=highlightLine(cm,line,context);if(resetState){context.state=resetState}line.stateAfter=context.save(!resetState);line.styles=result.styles;if(result.classes){line.styleClasses=result.classes}else if(line.styleClasses){line.styleClasses=null}if(updateFrontier===cm.doc.highlightFrontier){cm.doc.modeFrontier=Math.max(cm.doc.modeFrontier,++cm.doc.highlightFrontier)}}return line.styles}function getContextBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState){return new Context(doc,true,n)}var start=findStartLine(cm,n,precise);var saved=start>doc.first&&getLine(doc,start-1).stateAfter;var context=saved?Context.fromSaved(doc,saved,start):new Context(doc,startState(doc.mode),start);doc.iter(start,n,function(line){processLine(cm,line.text,context);var pos=context.line;line.stateAfter=pos==n-1||pos%5==0||pos>=display.viewFrom&&pos<display.viewTo?context.save():null;context.nextLine()});if(precise){doc.modeFrontier=context.line}return context}function processLine(cm,text,context,startAt){var mode=cm.doc.mode;var stream=new StringStream(text,cm.options.tabSize,context);stream.start=stream.pos=startAt||0;if(text==""){callBlankLine(mode,context.state)}while(!stream.eol()){readToken(mode,stream,context.state);stream.start=stream.pos}}function callBlankLine(mode,state){if(mode.blankLine){return mode.blankLine(state)}if(!mode.innerMode){return}var inner=innerMode(mode,state);if(inner.mode.blankLine){return inner.mode.blankLine(inner.state)}}function readToken(mode,stream,state,inner){for(var i=0;i<10;i+=1){if(inner){inner[0]=innerMode(mode,state).mode}var style=mode.token(stream,state);if(stream.pos>stream.start){return style}}throw new Error("Mode "+mode.name+" failed to advance stream.")}var Token=function Token(stream,type,state){this.start=stream.start;this.end=stream.pos;this.string=stream.current();this.type=type||null;this.state=state};function takeToken(cm,pos,precise,asArray){var doc=cm.doc,mode=doc.mode,style;pos=_clipPos(doc,pos);var line=getLine(doc,pos.line),context=getContextBefore(cm,pos.line,precise);var stream=new StringStream(line.text,cm.options.tabSize,context),tokens;if(asArray){tokens=[]}while((asArray||stream.pos<pos.ch)&&!stream.eol()){stream.start=stream.pos;style=readToken(mode,stream,context.state);if(asArray){tokens.push(new Token(stream,style,copyState(doc.mode,context.state)))}}return asArray?tokens:new Token(stream,style,context.state)}function extractLineClasses(type,output){if(type){for(;;){var lineClass=type.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!lineClass){break}type=type.slice(0,lineClass.index)+type.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";if(output[prop]==null){output[prop]=lineClass[2]}else if(!new RegExp("(?:^|\s)"+lineClass[2]+"(?:$|\s)").test(output[prop])){output[prop]+=" "+lineClass[2]}}}return type}function runMode(cm,text,mode,context,f,lineClasses,forceToEnd){var flattenSpans=mode.flattenSpans;if(flattenSpans==null){flattenSpans=cm.options.flattenSpans}var curStart=0,curStyle=null;var stream=new StringStream(text,cm.options.tabSize,context),style;var inner=cm.options.addModeClass&&[null];if(text==""){extractLineClasses(callBlankLine(mode,context.state),lineClasses)}while(!stream.eol()){if(stream.pos>cm.options.maxHighlightLength){flattenSpans=false;if(forceToEnd){processLine(cm,text,context,stream.pos)}stream.pos=text.length;style=null}else{style=extractLineClasses(readToken(mode,stream,context.state,inner),lineClasses)}if(inner){var mName=inner[0].name;if(mName){style="m-"+(style?mName+" "+style:mName)}}if(!flattenSpans||curStyle!=style){while(curStart<stream.start){curStart=Math.min(stream.start,curStart+5000);f(curStart,curStyle)}curStyle=style}stream.start=stream.pos}while(curStart<stream.pos){var pos=Math.min(stream.pos,curStart+5000);f(pos,curStyle);curStart=pos}}function findStartLine(cm,n,precise){var minindent,minline,doc=cm.doc;var lim=precise?-1:n-(cm.doc.mode.innerMode?1000:100);for(var search=n;search>lim;search-=1){if(search<=doc.first){return doc.first}var line=getLine(doc,search-1),after=line.stateAfter;if(after&&(!precise||search+(after instanceof SavedContext?after.lookAhead:0)<=doc.modeFrontier)){return search}var indented=countColumn(line.text,null,cm.options.tabSize);if(minline==null||minindent>indented){minline=search-1;minindent=indented}}return minline}function retreatFrontier(doc,n){doc.modeFrontier=Math.min(doc.modeFrontier,n);if(doc.highlightFrontier<n-10){return}var start=doc.first;for(var line=n-1;line>start;line-=1){var saved=getLine(doc,line).stateAfter;if(saved&&(!(saved instanceof SavedContext)||line+saved.lookAhead<n)){start=line+1;break}}doc.highlightFrontier=Math.min(doc.highlightFrontier,start)}var sawReadOnlySpans=false,sawCollapsedSpans=false;function seeReadOnlySpans(){sawReadOnlySpans=true}function seeCollapsedSpans(){sawCollapsedSpans=true}function MarkedSpan(marker,from,to){this.marker=marker;this.from=from;this.to=to}function getMarkedSpanFor(spans,marker){if(spans){for(var i=0;i<spans.length;i+=1){var span=spans[i];if(span.marker==marker){return span}}}}function removeMarkedSpan(spans,span){var r;for(var i=0;i<spans.length;i+=1){if(spans[i]!=span){(r||(r=[])).push(spans[i])}}return r}function addMarkedSpan(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span];span.marker.attachLine(line)}function markedSpansBefore(old,startCh,isInsert){var nw;if(old){for(var i=0;i<old.length;i+=1){var span=old[i],marker=span.marker;var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=startCh:span.from<startCh);if(startsBefore||span.from==startCh&&marker.type=="bookmark"&&(!isInsert||!span.marker.insertLeft)){var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=startCh:span.to>startCh);(nw||(nw=[])).push(new MarkedSpan(marker,span.from,endsAfter?null:span.to))}}}return nw}function markedSpansAfter(old,endCh,isInsert){var nw;if(old){for(var i=0;i<old.length;i+=1){var span=old[i],marker=span.marker;var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=endCh:span.to>endCh);if(endsAfter||span.from==endCh&&marker.type=="bookmark"&&(!isInsert||span.marker.insertLeft)){var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=endCh:span.from<endCh);(nw||(nw=[])).push(new MarkedSpan(marker,startsBefore?null:span.from-endCh,span.to==null?null:span.to-endCh))}}}return nw}function stretchSpansOverChange(doc,change){if(change.full){return null}var oldFirst=isLine(doc,change.from.line)&&getLine(doc,change.from.line).markedSpans;var oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast){return null}var startCh=change.from.ch,endCh=change.to.ch,isInsert=cmp(change.from,change.to)==0;var first=markedSpansBefore(oldFirst,startCh,isInsert);var last=markedSpansAfter(oldLast,endCh,isInsert);var sameLine=change.text.length==1,offset=lst(change.text).length+(sameLine?startCh:0);if(first){for(var i=0;i<first.length;i+=1){var span=first[i];if(span.to==null){var found=getMarkedSpanFor(last,span.marker);if(!found){span.to=startCh}else if(sameLine){span.to=found.to==null?null:found.to+offset}}}}if(last){for(var i$1=0;i$1<last.length;i$1+=1){var span$1=last[i$1];if(span$1.to!=null){span$1.to+=offset}if(span$1.from==null){var found$1=getMarkedSpanFor(first,span$1.marker);if(!found$1){span$1.from=offset;if(sameLine){(first||(first=[])).push(span$1)}}}else{span$1.from+=offset;if(sameLine){(first||(first=[])).push(span$1)}}}}if(first){first=clearEmptySpans(first)}if(last&&last!=first){last=clearEmptySpans(last)}var newMarkers=[first];if(!sameLine){var gap=change.text.length-2,gapMarkers;if(gap>0&&first){for(var i$2=0;i$2<first.length;i$2+=1){if(first[i$2].to==null){(gapMarkers||(gapMarkers=[])).push(new MarkedSpan(first[i$2].marker,null,null))}}}for(var i$3=0;i$3<gap;i$3+=1){newMarkers.push(gapMarkers)}newMarkers.push(last)}return newMarkers}function clearEmptySpans(spans){for(var i=0;i<spans.length;i+=1){var span=spans[i];if(span.from!=null&&span.from==span.to&&span.marker.clearWhenEmpty!==false){spans.splice(i--,1)}}if(!spans.length){return null}return spans}function removeReadOnlyRanges(doc,from,to){var markers=null;doc.iter(from.line,to.line+1,function(line){if(line.markedSpans){for(var i=0;i<line.markedSpans.length;i+=1){var mark=line.markedSpans[i].marker;if(mark.readOnly&&(!markers||indexOf(markers,mark)==-1)){(markers||(markers=[])).push(mark)}}}});if(!markers){return null}var parts=[{from:from,to:to}];for(var i=0;i<markers.length;i+=1){var mk=markers[i],m=mk.find(0);for(var j=0;j<parts.length;j+=1){var p=parts[j];if(cmp(p.to,m.from)<0||cmp(p.from,m.to)>0){continue}var newParts=[j,1],dfrom=cmp(p.from,m.from),dto=cmp(p.to,m.to);if(dfrom<0||!mk.inclusiveLeft&&!dfrom){newParts.push({from:p.from,to:m.from})}if(dto>0||!mk.inclusiveRight&&!dto){newParts.push({from:m.to,to:p.to})}parts.splice.apply(parts,newParts);j+=newParts.length-3}}return parts}function detachMarkedSpans(line){var spans=line.markedSpans;if(!spans){return}for(var i=0;i<spans.length;i+=1){spans[i].marker.detachLine(line)}line.markedSpans=null}function attachMarkedSpans(line,spans){if(!spans){return}for(var i=0;i<spans.length;i+=1){spans[i].marker.attachLine(line)}line.markedSpans=spans}function extraLeft(marker){return marker.inclusiveLeft?-1:0}function extraRight(marker){return marker.inclusiveRight?1:0}function compareCollapsedMarkers(a,b){var lenDiff=a.lines.length-b.lines.length;if(lenDiff!=0){return lenDiff}var aPos=a.find(),bPos=b.find();var fromCmp=cmp(aPos.from,bPos.from)||extraLeft(a)-extraLeft(b);if(fromCmp){return-fromCmp}var toCmp=cmp(aPos.to,bPos.to)||extraRight(a)-extraRight(b);if(toCmp){return toCmp}return b.id-a.id}function collapsedSpanAtSide(line,start){var sps=sawCollapsedSpans&&line.markedSpans,found;if(sps){for(var sp=void 0,i=0;i<sps.length;i+=1){sp=sps[i];if(sp.marker.collapsed&&(start?sp.from:sp.to)==null&&(!found||compareCollapsedMarkers(found,sp.marker)<0)){found=sp.marker}}}return found}function collapsedSpanAtStart(line){return collapsedSpanAtSide(line,true)}function collapsedSpanAtEnd(line){return collapsedSpanAtSide(line,false)}function collapsedSpanAround(line,ch){var sps=sawCollapsedSpans&&line.markedSpans,found;if(sps){for(var i=0;i<sps.length;i+=1){var sp=sps[i];if(sp.marker.collapsed&&(sp.from==null||sp.from<ch)&&(sp.to==null||sp.to>ch)&&(!found||compareCollapsedMarkers(found,sp.marker)<0)){found=sp.marker}}}return found}function conflictingCollapsedRange(doc,lineNo,from,to,marker){var line=getLine(doc,lineNo);var sps=sawCollapsedSpans&&line.markedSpans;if(sps){for(var i=0;i<sps.length;i+=1){var sp=sps[i];if(!sp.marker.collapsed){continue}var found=sp.marker.find(0);var fromCmp=cmp(found.from,from)||extraLeft(sp.marker)-extraLeft(marker);var toCmp=cmp(found.to,to)||extraRight(sp.marker)-extraRight(marker);if(fromCmp>=0&&toCmp<=0||fromCmp<=0&&toCmp>=0){continue}if(fromCmp<=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.to,from)>=0:cmp(found.to,from)>0)||fromCmp>=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.from,to)<=0:cmp(found.from,to)<0)){return true}}}}function visualLine(line){var merged;while(merged=collapsedSpanAtStart(line)){line=merged.find(-1,true).line}return line}function visualLineEnd(line){var merged;while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line}return line}function visualLineContinued(line){var merged,lines;while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line;(lines||(lines=[])).push(line)}return lines}function visualLineNo(doc,lineN){var line=getLine(doc,lineN),vis=visualLine(line);if(line==vis){return lineN}return lineNo(vis)}function visualLineEndNo(doc,lineN){if(lineN>doc.lastLine()){return lineN}var line=getLine(doc,lineN),merged;if(!lineIsHidden(doc,line)){return lineN}while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line}return lineNo(line)+1}function lineIsHidden(doc,line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps){for(var sp=void 0,i=0;i<sps.length;i+=1){sp=sps[i];if(!sp.marker.collapsed){continue}if(sp.from==null){return true}if(sp.marker.widgetNode){continue}if(sp.from==0&&sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp)){return true}}}}function lineIsHiddenInner(doc,line,span){if(span.to==null){var end=span.marker.find(1,true);return lineIsHiddenInner(doc,end.line,getMarkedSpanFor(end.line.markedSpans,span.marker))}if(span.marker.inclusiveRight&&span.to==line.text.length){return true}for(var sp=void 0,i=0;i<line.markedSpans.length;i+=1){sp=line.markedSpans[i];if(sp.marker.collapsed&&!sp.marker.widgetNode&&sp.from==span.to&&(sp.to==null||sp.to!=span.from)&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp)){return true}}}function _heightAtLine(lineObj){lineObj=visualLine(lineObj);var h=0,chunk=lineObj.parent;for(var i=0;i<chunk.lines.length;i+=1){var line=chunk.lines[i];if(line==lineObj){break}else{h+=line.height}}for(var p=chunk.parent;p;chunk=p,p=chunk.parent){for(var i$1=0;i$1<p.children.length;i$1+=1){var cur=p.children[i$1];if(cur==chunk){break}else{h+=cur.height}}}return h}function lineLength(line){if(line.height==0){return 0}var len=line.text.length,merged,cur=line;while(merged=collapsedSpanAtStart(cur)){var found=merged.find(0,true);cur=found.from.line;len+=found.from.ch-found.to.ch}cur=line;while(merged=collapsedSpanAtEnd(cur)){var found$1=merged.find(0,true);len-=cur.text.length-found$1.from.ch;cur=found$1.to.line;len+=cur.text.length-found$1.to.ch}return len}function findMaxLine(cm){var d=cm.display,doc=cm.doc;d.maxLine=getLine(doc,doc.first);d.maxLineLength=lineLength(d.maxLine);d.maxLineChanged=true;doc.iter(function(line){var len=lineLength(line);if(len>d.maxLineLength){d.maxLineLength=len;d.maxLine=line}})}var Line=function Line(text,markedSpans,estimateHeight){this.text=text;attachMarkedSpans(this,markedSpans);this.height=estimateHeight?estimateHeight(this):1};Line.prototype.lineNo=function(){return lineNo(this)};eventMixin(Line);function updateLine(line,text,markedSpans,estimateHeight){line.text=text;if(line.stateAfter){line.stateAfter=null}if(line.styles){line.styles=null}if(line.order!=null){line.order=null}detachMarkedSpans(line);attachMarkedSpans(line,markedSpans);var estHeight=estimateHeight?estimateHeight(line):1;if(estHeight!=line.height){updateLineHeight(line,estHeight)}}function cleanUpLine(line){line.parent=null;detachMarkedSpans(line)}var styleToClassCache={},styleToClassCacheWithMode={};function interpretTokenStyle(style,options){if(!style||/^\s*$/.test(style)){return null}var cache=options.addModeClass?styleToClassCacheWithMode:styleToClassCache;return cache[style]||(cache[style]=style.replace(/\S+/g,"cm-$&"))}function buildLineContent(cm,lineView){var content=eltP("span",null,null,webkit?"padding-right: .1px":null);var builder={pre:eltP("pre",[content],"CodeMirror-line"),content:content,col:0,pos:0,cm:cm,trailingSpace:false,splitSpaces:cm.getOption("lineWrapping")};lineView.measure={};for(var i=0;i<=(lineView.rest?lineView.rest.length:0);i+=1){var line=i?lineView.rest[i-1]:lineView.line,order=void 0;builder.pos=0;builder.addToken=buildToken;if(hasBadBidiRects(cm.display.measure)&&(order=getOrder(line,cm.doc.direction))){builder.addToken=buildTokenBadBidi(builder.addToken,order)}builder.map=[];var allowFrontierUpdate=lineView!=cm.display.externalMeasured&&lineNo(line);insertLineContent(line,builder,getLineStyles(cm,line,allowFrontierUpdate));if(line.styleClasses){if(line.styleClasses.bgClass){builder.bgClass=joinClasses(line.styleClasses.bgClass,builder.bgClass||"")}if(line.styleClasses.textClass){builder.textClass=joinClasses(line.styleClasses.textClass,builder.textClass||"")}}if(builder.map.length==0){builder.map.push(0,0,builder.content.appendChild(zeroWidthElement(cm.display.measure)))}if(i==0){lineView.measure.map=builder.map;lineView.measure.cache={}}else{(lineView.measure.maps||(lineView.measure.maps=[])).push(builder.map);(lineView.measure.caches||(lineView.measure.caches=[])).push({})}}if(webkit){var last=builder.content.lastChild;if(/\bcm-tab\b/.test(last.className)||last.querySelector&&last.querySelector(".cm-tab")){builder.content.className="cm-tab-wrap-hack"}}signal(cm,"renderLine",cm,lineView.line,builder.pre);if(builder.pre.className){builder.textClass=joinClasses(builder.pre.className,builder.textClass||"")}return builder}function defaultSpecialCharPlaceholder(ch){var token=elt("span","\u2022","cm-invalidchar");token.title="\\u"+ch.charCodeAt(0).toString(16);token.setAttribute("aria-label",token.title);return token}function buildToken(builder,text,style,startStyle,endStyle,css,attributes){if(!text){return}var displayText=builder.splitSpaces?splitSpaces(text,builder.trailingSpace):text;var special=builder.cm.state.specialChars,mustWrap=false;var content;if(!special.test(text)){builder.col+=text.length;content=document.createTextNode(displayText);builder.map.push(builder.pos,builder.pos+text.length,content);if(ie&&ie_version<9){mustWrap=true}builder.pos+=text.length}else{content=document.createDocumentFragment();var pos=0;while(true){special.lastIndex=pos;var m=special.exec(text);var skipped=m?m.index-pos:text.length-pos;if(skipped){var txt=document.createTextNode(displayText.slice(pos,pos+skipped));if(ie&&ie_version<9){content.appendChild(elt("span",[txt]))}else{content.appendChild(txt)}builder.map.push(builder.pos,builder.pos+skipped,txt);builder.col+=skipped;builder.pos+=skipped}if(!m){break}pos+=skipped+1;var txt$1=void 0;if(m[0]=="\t"){var tabSize=builder.cm.options.tabSize,tabWidth=tabSize-builder.col%tabSize;txt$1=content.appendChild(elt("span",spaceStr(tabWidth),"cm-tab"));txt$1.setAttribute("role","presentation");txt$1.setAttribute("cm-text","\t");builder.col+=tabWidth}else if(m[0]=="\r"||m[0]=="\n"){txt$1=content.appendChild(elt("span",m[0]=="\r"?"\u240D":"\u2424","cm-invalidchar"));txt$1.setAttribute("cm-text",m[0]);builder.col+=1}else{txt$1=builder.cm.options.specialCharPlaceholder(m[0]);txt$1.setAttribute("cm-text",m[0]);if(ie&&ie_version<9){content.appendChild(elt("span",[txt$1]))}else{content.appendChild(txt$1)}builder.col+=1}builder.map.push(builder.pos,builder.pos+1,txt$1);builder.pos+=1}}builder.trailingSpace=displayText.charCodeAt(text.length-1)==32;if(style||startStyle||endStyle||mustWrap||css){var fullStyle=style||"";if(startStyle){fullStyle+=startStyle}if(endStyle){fullStyle+=endStyle}var token=elt("span",[content],fullStyle,css);if(attributes){for(var attr in attributes){if(attributes.hasOwnProperty(attr)&&attr!="style"&&attr!="class"){token.setAttribute(attr,attributes[attr])}}}return builder.content.appendChild(token)}builder.content.appendChild(content)}function splitSpaces(text,trailingBefore){if(text.length>1&&!/  /.test(text)){return text}var spaceBefore=trailingBefore,result="";for(var i=0;i<text.length;i+=1){var ch=text.charAt(i);if(ch==" "&&spaceBefore&&(i==text.length-1||text.charCodeAt(i+1)==32)){ch="\xA0"}result+=ch;spaceBefore=ch==" "}return result}function buildTokenBadBidi(inner,order){return function(builder,text,style,startStyle,endStyle,css,attributes){style=style?style+" cm-force-border":"cm-force-border";var start=builder.pos,end=start+text.length;for(;;){var part=void 0;for(var i=0;i<order.length;i+=1){part=order[i];if(part.to>start&&part.from<=start){break}}if(part.to>=end){return inner(builder,text,style,startStyle,endStyle,css,attributes)}inner(builder,text.slice(0,part.to-start),style,startStyle,null,css,attributes);startStyle=null;text=text.slice(part.to-start);start=part.to}}}function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.widgetNode;if(widget){builder.map.push(builder.pos,builder.pos+size,widget)}if(!ignoreWidget&&builder.cm.display.input.needsContentAttribute){if(!widget){widget=builder.content.appendChild(document.createElement("span"))}widget.setAttribute("cm-marker",marker.id)}if(widget){builder.cm.display.input.setUneditable(widget);builder.content.appendChild(widget)}builder.pos+=size;builder.trailingSpace=false}function insertLineContent(line,builder,styles){var spans=line.markedSpans,allText=line.text,at=0;if(!spans){for(var i$1=1;i$1<styles.length;i$1+=2){builder.addToken(builder,allText.slice(at,at=styles[i$1]),interpretTokenStyle(styles[i$1+1],builder.cm.options))}return}var len=allText.length,pos=0,i=1,text="",style,css;var nextChange=0,spanStyle,spanEndStyle,spanStartStyle,collapsed,attributes;for(;;){if(nextChange==pos){spanStyle=spanEndStyle=spanStartStyle=css="";attributes=null;collapsed=null;nextChange=Infinity;var foundBookmarks=[],endStyles=void 0;for(var j=0;j<spans.length;j+=1){var sp=spans[j],m=sp.marker;if(m.type=="bookmark"&&sp.from==pos&&m.widgetNode){foundBookmarks.push(m)}else if(sp.from<=pos&&(sp.to==null||sp.to>pos||m.collapsed&&sp.to==pos&&sp.from==pos)){if(sp.to!=null&&sp.to!=pos&&nextChange>sp.to){nextChange=sp.to;spanEndStyle=""}if(m.className){spanStyle+=" "+m.className}if(m.css){css=(css?css+";":"")+m.css}if(m.startStyle&&sp.from==pos){spanStartStyle+=" "+m.startStyle}if(m.endStyle&&sp.to==nextChange){(endStyles||(endStyles=[])).push(m.endStyle,sp.to)}if(m.title){(attributes||(attributes={})).title=m.title}if(m.attributes){for(var attr in m.attributes){(attributes||(attributes={}))[attr]=m.attributes[attr]}}if(m.collapsed&&(!collapsed||compareCollapsedMarkers(collapsed.marker,m)<0)){collapsed=sp}}else if(sp.from>pos&&nextChange>sp.from){nextChange=sp.from}}if(endStyles){for(var j$1=0;j$1<endStyles.length;j$1+=2){if(endStyles[j$1+1]==nextChange){spanEndStyle+=" "+endStyles[j$1]}}}if(!collapsed||collapsed.from==pos){for(var j$2=0;j$2<foundBookmarks.length;j$2+=1){buildCollapsedSpan(builder,0,foundBookmarks[j$2])}}if(collapsed&&(collapsed.from||0)==pos){buildCollapsedSpan(builder,(collapsed.to==null?len+1:collapsed.to)-pos,collapsed.marker,collapsed.from==null);if(collapsed.to==null){return}if(collapsed.to==pos){collapsed=false}}}if(pos>=len){break}var upto=Math.min(len,nextChange);while(true){if(text){var end=pos+text.length;if(!collapsed){var tokenText=end>upto?text.slice(0,upto-pos):text;builder.addToken(builder,tokenText,style?style+spanStyle:spanStyle,spanStartStyle,pos+tokenText.length==nextChange?spanEndStyle:"",css,attributes)}if(end>=upto){text=text.slice(upto-pos);pos=upto;break}pos=end;spanStartStyle=""}text=allText.slice(at,at=styles[i++]);style=interpretTokenStyle(styles[i++],builder.cm.options)}}}function LineView(doc,line,lineN){this.line=line;this.rest=visualLineContinued(line);this.size=this.rest?lineNo(lst(this.rest))-lineN+1:1;this.node=this.text=null;this.hidden=lineIsHidden(doc,line)}function buildViewArray(cm,from,to){var array=[],nextPos;for(var pos=from;pos<to;pos=nextPos){var view=new LineView(cm.doc,getLine(cm.doc,pos),pos);nextPos=pos+view.size;array.push(view)}return array}var operationGroup=null;function pushOperation(op){if(operationGroup){operationGroup.ops.push(op)}else{op.ownsGroup=operationGroup={ops:[op],delayedCallbacks:[]}}}function fireCallbacksForOps(group){var callbacks=group.delayedCallbacks,i=0;do{for(;i<callbacks.length;i+=1){callbacks[i].call(null)}for(var j=0;j<group.ops.length;j+=1){var op=group.ops[j];if(op.cursorActivityHandlers){while(op.cursorActivityCalled<op.cursorActivityHandlers.length){op.cursorActivityHandlers[op.cursorActivityCalled++].call(null,op.cm)}}}}while(i<callbacks.length)}function finishOperation(op,endCb){var group=op.ownsGroup;if(!group){return}try{fireCallbacksForOps(group)}finally{operationGroup=null;endCb(group)}}var orphanDelayedCallbacks=null;function signalLater(emitter,type ){var arr=getHandlers(emitter,type);if(!arr.length){return}var args=Array.prototype.slice.call(arguments,2),list;if(operationGroup){list=operationGroup.delayedCallbacks}else if(orphanDelayedCallbacks){list=orphanDelayedCallbacks}else{list=orphanDelayedCallbacks=[];setTimeout(fireOrphanDelayed,0)}var loop=function loop(i){list.push(function(){return arr[i].apply(null,args)})};for(var i=0;i<arr.length;i+=1){loop(i)}}function fireOrphanDelayed(){var delayed=orphanDelayedCallbacks;orphanDelayedCallbacks=null;for(var i=0;i<delayed.length;i+=1){delayed[i]()}}function updateLineForChanges(cm,lineView,lineN,dims){for(var j=0;j<lineView.changes.length;j+=1){var type=lineView.changes[j];if(type=="text"){updateLineText(cm,lineView)}else if(type=="gutter"){updateLineGutter(cm,lineView,lineN,dims)}else if(type=="class"){updateLineClasses(cm,lineView)}else if(type=="widget"){updateLineWidgets(cm,lineView,dims)}}lineView.changes=null}function ensureLineWrapped(lineView){if(lineView.node==lineView.text){lineView.node=elt("div",null,null,"position: relative");if(lineView.text.parentNode){lineView.text.parentNode.replaceChild(lineView.node,lineView.text)}lineView.node.appendChild(lineView.text);if(ie&&ie_version<8){lineView.node.style.zIndex=2}}return lineView.node}function updateLineBackground(cm,lineView){var cls=lineView.bgClass?lineView.bgClass+" "+(lineView.line.bgClass||""):lineView.line.bgClass;if(cls){cls+=" CodeMirror-linebackground"}if(lineView.background){if(cls){lineView.background.className=cls}else{lineView.background.parentNode.removeChild(lineView.background);lineView.background=null}}else if(cls){var wrap=ensureLineWrapped(lineView);lineView.background=wrap.insertBefore(elt("div",null,cls),wrap.firstChild);cm.display.input.setUneditable(lineView.background)}}function getLineContent(cm,lineView){var ext=cm.display.externalMeasured;if(ext&&ext.line==lineView.line){cm.display.externalMeasured=null;lineView.measure=ext.measure;return ext.built}return buildLineContent(cm,lineView)}function updateLineText(cm,lineView){var cls=lineView.text.className;var built=getLineContent(cm,lineView);if(lineView.text==lineView.node){lineView.node=built.pre}lineView.text.parentNode.replaceChild(built.pre,lineView.text);lineView.text=built.pre;if(built.bgClass!=lineView.bgClass||built.textClass!=lineView.textClass){lineView.bgClass=built.bgClass;lineView.textClass=built.textClass;updateLineClasses(cm,lineView)}else if(cls){lineView.text.className=cls}}function updateLineClasses(cm,lineView){updateLineBackground(cm,lineView);if(lineView.line.wrapClass){ensureLineWrapped(lineView).className=lineView.line.wrapClass}else if(lineView.node!=lineView.text){lineView.node.className=""}var textClass=lineView.textClass?lineView.textClass+" "+(lineView.line.textClass||""):lineView.line.textClass;lineView.text.className=textClass||""}function updateLineGutter(cm,lineView,lineN,dims){if(lineView.gutter){lineView.node.removeChild(lineView.gutter);lineView.gutter=null}if(lineView.gutterBackground){lineView.node.removeChild(lineView.gutterBackground);lineView.gutterBackground=null}if(lineView.line.gutterClass){var wrap=ensureLineWrapped(lineView);lineView.gutterBackground=elt("div",null,"CodeMirror-gutter-background "+lineView.line.gutterClass,"left: "+(cm.options.fixedGutter?dims.fixedPos: -dims.gutterTotalWidth)+"px; width: "+dims.gutterTotalWidth+"px");cm.display.input.setUneditable(lineView.gutterBackground);wrap.insertBefore(lineView.gutterBackground,lineView.text)}var markers=lineView.line.gutterMarkers;if(cm.options.lineNumbers||markers){var wrap$1=ensureLineWrapped(lineView);var gutterWrap=lineView.gutter=elt("div",null,"CodeMirror-gutter-wrapper","left: "+(cm.options.fixedGutter?dims.fixedPos: -dims.gutterTotalWidth)+"px");cm.display.input.setUneditable(gutterWrap);wrap$1.insertBefore(gutterWrap,lineView.text);if(lineView.line.gutterClass){gutterWrap.className+=" "+lineView.line.gutterClass}if(cm.options.lineNumbers&&(!markers||!markers["CodeMirror-linenumbers"])){lineView.lineNumber=gutterWrap.appendChild(elt("div",lineNumberFor(cm.options,lineN),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+cm.display.lineNumInnerWidth+"px"))}if(markers){for(var k=0;k<cm.display.gutterSpecs.length;k+=1){var id=cm.display.gutterSpecs[k].className,found=markers.hasOwnProperty(id)&&markers[id];if(found){gutterWrap.appendChild(elt("div",[found],"CodeMirror-gutter-elt","left: "+dims.gutterLeft[id]+"px; width: "+dims.gutterWidth[id]+"px"))}}}}}function updateLineWidgets(cm,lineView,dims){if(lineView.alignable){lineView.alignable=null}var isWidget=classTest("CodeMirror-linewidget");for(var node=lineView.node.firstChild,next=void 0;node;node=next){next=node.nextSibling;if(isWidget.test(node.className)){lineView.node.removeChild(node)}}insertLineWidgets(cm,lineView,dims)}function buildLineElement(cm,lineView,lineN,dims){var built=getLineContent(cm,lineView);lineView.text=lineView.node=built.pre;if(built.bgClass){lineView.bgClass=built.bgClass}if(built.textClass){lineView.textClass=built.textClass}updateLineClasses(cm,lineView);updateLineGutter(cm,lineView,lineN,dims);insertLineWidgets(cm,lineView,dims);return lineView.node}function insertLineWidgets(cm,lineView,dims){insertLineWidgetsFor(cm,lineView.line,lineView,dims,true);if(lineView.rest){for(var i=0;i<lineView.rest.length;i+=1){insertLineWidgetsFor(cm,lineView.rest[i],lineView,dims,false)}}}function insertLineWidgetsFor(cm,line,lineView,dims,allowAbove){if(!line.widgets){return}var wrap=ensureLineWrapped(lineView);for(var i=0,ws=line.widgets;i<ws.length;i+=1){var widget=ws[i],node=elt("div",[widget.node],"CodeMirror-linewidget"+(widget.className?" "+widget.className:""));if(!widget.handleMouseEvents){node.setAttribute("cm-ignore-events","true")}positionLineWidget(widget,node,lineView,dims);cm.display.input.setUneditable(node);if(allowAbove&&widget.above){wrap.insertBefore(node,lineView.gutter||lineView.text)}else{wrap.appendChild(node)}signalLater(widget,"redraw")}}function positionLineWidget(widget,node,lineView,dims){if(widget.noHScroll){(lineView.alignable||(lineView.alignable=[])).push(node);var width=dims.wrapperWidth;node.style.left=dims.fixedPos+"px";if(!widget.coverGutter){width-=dims.gutterTotalWidth;node.style.paddingLeft=dims.gutterTotalWidth+"px"}node.style.width=width+"px"}if(widget.coverGutter){node.style.zIndex=5;node.style.position="relative";if(!widget.noHScroll){node.style.marginLeft= -dims.gutterTotalWidth+"px"}}}function widgetHeight(widget){if(widget.height!=null){return widget.height}var cm=widget.doc.cm;if(!cm){return 0}if(!contains(document.body,widget.node)){var parentStyle="position: relative;";if(widget.coverGutter){parentStyle+="margin-left: -"+cm.display.gutters.offsetWidth+"px;"}if(widget.noHScroll){parentStyle+="width: "+cm.display.wrapper.clientWidth+"px;"}removeChildrenAndAdd(cm.display.measure,elt("div",[widget.node],null,parentStyle))}return widget.height=widget.node.parentNode.offsetHeight}function eventInWidget(display,e){for(var n=e_target(e);n!=display.wrapper;n=n.parentNode){if(!n||n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true"||n.parentNode==display.sizer&&n!=display.mover){return true}}}function paddingTop(display){return display.lineSpace.offsetTop}function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight}function paddingH(display){if(display.cachedPaddingH){return display.cachedPaddingH}var e=removeChildrenAndAdd(display.measure,elt("pre","x","CodeMirror-line-like"));var style=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;var data={left:parseInt(style.paddingLeft),right:parseInt(style.paddingRight)};if(!isNaN(data.left)&&!isNaN(data.right)){display.cachedPaddingH=data}return data}function scrollGap(cm){return scrollerGap-cm.display.nativeBarWidth}function displayWidth(cm){return cm.display.scroller.clientWidth-scrollGap(cm)-cm.display.barWidth}function displayHeight(cm){return cm.display.scroller.clientHeight-scrollGap(cm)-cm.display.barHeight}function ensureLineHeights(cm,lineView,rect){var wrapping=cm.options.lineWrapping;var curWidth=wrapping&&displayWidth(cm);if(!lineView.measure.heights||wrapping&&lineView.measure.width!=curWidth){var heights=lineView.measure.heights=[];if(wrapping){lineView.measure.width=curWidth;var rects=lineView.text.firstChild.getClientRects();for(var i=0;i<rects.length-1;i+=1){var cur=rects[i],next=rects[i+1];if(Math.abs(cur.bottom-next.bottom)>2){heights.push((cur.bottom+next.top)/2-rect.top)}}}heights.push(rect.bottom-rect.top)}}function mapFromLineView(lineView,line,lineN){if(lineView.line==line){return{map:lineView.measure.map,cache:lineView.measure.cache}}for(var i=0;i<lineView.rest.length;i+=1){if(lineView.rest[i]==line){return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i]}}}for(var i$1=0;i$1<lineView.rest.length;i$1+=1){if(lineNo(lineView.rest[i$1])>lineN){return{map:lineView.measure.maps[i$1],cache:lineView.measure.caches[i$1],before:true}}}}function updateExternalMeasurement(cm,line){line=visualLine(line);var lineN=lineNo(line);var view=cm.display.externalMeasured=new LineView(cm.doc,line,lineN);view.lineN=lineN;var built=view.built=buildLineContent(cm,view);view.text=built.pre;removeChildrenAndAdd(cm.display.lineMeasure,built.pre);return view}function measureChar(cm,line,ch,bias){return measureCharPrepared(cm,prepareMeasureForLine(cm,line),ch,bias)}function findViewForLine(cm,lineN){if(lineN>=cm.display.viewFrom&&lineN<cm.display.viewTo){return cm.display.view[findViewIndex(cm,lineN)]}var ext=cm.display.externalMeasured;if(ext&&lineN>=ext.lineN&&lineN<ext.lineN+ext.size){return ext}}function prepareMeasureForLine(cm,line){var lineN=lineNo(line);var view=findViewForLine(cm,lineN);if(view&&!view.text){view=null}else if(view&&view.changes){updateLineForChanges(cm,view,lineN,getDimensions(cm));cm.curOp.forceUpdate=true}if(!view){view=updateExternalMeasurement(cm,line)}var info=mapFromLineView(view,line,lineN);return{line:line,view:view,rect:null,map:info.map,cache:info.cache,before:info.before,hasHeights:false}}function measureCharPrepared(cm,prepared,ch,bias,varHeight){if(prepared.before){ch=-1}var key=ch+(bias||""),found;if(prepared.cache.hasOwnProperty(key)){found=prepared.cache[key]}else{if(!prepared.rect){prepared.rect=prepared.view.text.getBoundingClientRect()}if(!prepared.hasHeights){ensureLineHeights(cm,prepared.view,prepared.rect);prepared.hasHeights=true}found=measureCharInner(cm,prepared,ch,bias);if(!found.bogus){prepared.cache[key]=found}}return{left:found.left,right:found.right,top:varHeight?found.rtop:found.top,bottom:varHeight?found.rbottom:found.bottom}}var nullRect={left:0,right:0,top:0,bottom:0};function nodeAndOffsetInLineMap(map,ch,bias){var node,start,end,collapse,mStart,mEnd;for(var i=0;i<map.length;i+=3){mStart=map[i];mEnd=map[i+1];if(ch<mStart){start=0;end=1;collapse="left"}else if(ch<mEnd){start=ch-mStart;end=start+1}else if(i==map.length-3||ch==mEnd&&map[i+3]>ch){end=mEnd-mStart;start=end-1;if(ch>=mEnd){collapse="right"}}if(start!=null){node=map[i+2];if(mStart==mEnd&&bias==(node.insertLeft?"left":"right")){collapse=bias}if(bias=="left"&&start==0){while(i&&map[i-2]==map[i-3]&&map[i-1].insertLeft){node=map[(i-=3)+2];collapse="left"}}if(bias=="right"&&start==mEnd-mStart){while(i<map.length-3&&map[i+3]==map[i+4]&&!map[i+5].insertLeft){node=map[(i+=3)+2];collapse="right"}}break}}return{node:node,start:start,end:end,collapse:collapse,coverStart:mStart,coverEnd:mEnd}}function getUsefulRect(rects,bias){var rect=nullRect;if(bias=="left"){for(var i=0;i<rects.length;i+=1){if((rect=rects[i]).left!=rect.right){break}}}else{for(var i$1=rects.length-1;i$1>=0;i$1-=1){if((rect=rects[i$1]).left!=rect.right){break}}}return rect}function measureCharInner(cm,prepared,ch,bias){var place=nodeAndOffsetInLineMap(prepared.map,ch,bias);var node=place.node,start=place.start,end=place.end,collapse=place.collapse;var rect;if(node.nodeType==3){for(var i$1=0;i$1<4;i$1+=1){while(start&&isExtendingChar(prepared.line.text.charAt(place.coverStart+start))){start-=1}while(place.coverStart+end<place.coverEnd&&isExtendingChar(prepared.line.text.charAt(place.coverStart+end))){end+=1}if(ie&&ie_version<9&&start==0&&end==place.coverEnd-place.coverStart){rect=node.parentNode.getBoundingClientRect()}else{rect=getUsefulRect(range(node,start,end).getClientRects(),bias)}if(rect.left||rect.right||start==0){break}end=start;start=start-1;collapse="right"}if(ie&&ie_version<11){rect=maybeUpdateRectForZooming(cm.display.measure,rect)}}else{if(start>0){collapse=bias="right"}var rects;if(cm.options.lineWrapping&&(rects=node.getClientRects()).length>1){rect=rects[bias=="right"?rects.length-1:0]}else{rect=node.getBoundingClientRect()}}if(ie&&ie_version<9&&!start&&(!rect||!rect.left&&!rect.right)){var rSpan=node.parentNode.getClientRects()[0];if(rSpan){rect={left:rSpan.left,right:rSpan.left+charWidth(cm.display),top:rSpan.top,bottom:rSpan.bottom}}else{rect=nullRect}}var rtop=rect.top-prepared.rect.top,rbot=rect.bottom-prepared.rect.top;var mid=(rtop+rbot)/2;var heights=prepared.view.measure.heights;var i=0;for(;i<heights.length-1;i+=1){if(mid<heights[i]){break}}var top=i?heights[i-1]:0,bot=heights[i];var result={left:(collapse=="right"?rect.right:rect.left)-prepared.rect.left,right:(collapse=="left"?rect.left:rect.right)-prepared.rect.left,top:top,bottom:bot};if(!rect.left&&!rect.right){result.bogus=true}if(!cm.options.singleCursorHeightPerLine){result.rtop=rtop;result.rbottom=rbot}return result}function maybeUpdateRectForZooming(measure,rect){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!hasBadZoomedRects(measure)){return rect}var scaleX=screen.logicalXDPI/screen.deviceXDPI;var scaleY=screen.logicalYDPI/screen.deviceYDPI;return{left:rect.left*scaleX,right:rect.right*scaleX,top:rect.top*scaleY,bottom:rect.bottom*scaleY}}function clearLineMeasurementCacheFor(lineView){if(lineView.measure){lineView.measure.cache={};lineView.measure.heights=null;if(lineView.rest){for(var i=0;i<lineView.rest.length;i+=1){lineView.measure.caches[i]={}}}}}function clearLineMeasurementCache(cm){cm.display.externalMeasure=null;removeChildren(cm.display.lineMeasure);for(var i=0;i<cm.display.view.length;i+=1){clearLineMeasurementCacheFor(cm.display.view[i])}}function clearCaches(cm){clearLineMeasurementCache(cm);cm.display.cachedCharWidth=cm.display.cachedTextHeight=cm.display.cachedPaddingH=null;if(!cm.options.lineWrapping){cm.display.maxLineChanged=true}cm.display.lineNumChars=null}function pageScrollX(){if(chrome&&android){return-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft))}return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pageScrollY(){if(chrome&&android){return-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop))}return window.pageYOffset||(document.documentElement||document.body).scrollTop}function widgetTopHeight(lineObj){var height=0;if(lineObj.widgets){for(var i=0;i<lineObj.widgets.length;i+=1){if(lineObj.widgets[i].above){height+=widgetHeight(lineObj.widgets[i])}}}return height}function intoCoordSystem(cm,lineObj,rect,context,includeWidgets){if(!includeWidgets){var height=widgetTopHeight(lineObj);rect.top+=height;rect.bottom+=height}if(context=="line"){return rect}if(!context){context="local"}var yOff=_heightAtLine(lineObj);if(context=="local"){yOff+=paddingTop(cm.display)}else{yOff-=cm.display.viewOffset}if(context=="page"||context=="window"){var lOff=cm.display.lineSpace.getBoundingClientRect();yOff+=lOff.top+(context=="window"?0:pageScrollY());var xOff=lOff.left+(context=="window"?0:pageScrollX());rect.left+=xOff;rect.right+=xOff}rect.top+=yOff;rect.bottom+=yOff;return rect}function fromCoordSystem(cm,coords,context){if(context=="div"){return coords}var left=coords.left,top=coords.top;if(context=="page"){left-=pageScrollX();top-=pageScrollY()}else if(context=="local"||!context){var localBox=cm.display.sizer.getBoundingClientRect();left+=localBox.left;top+=localBox.top}var lineSpaceBox=cm.display.lineSpace.getBoundingClientRect();return{left:left-lineSpaceBox.left,top:top-lineSpaceBox.top}}function _charCoords(cm,pos,context,lineObj,bias){if(!lineObj){lineObj=getLine(cm.doc,pos.line)}return intoCoordSystem(cm,lineObj,measureChar(cm,lineObj,pos.ch,bias),context)}function _cursorCoords(cm,pos,context,lineObj,preparedMeasure,varHeight){lineObj=lineObj||getLine(cm.doc,pos.line);if(!preparedMeasure){preparedMeasure=prepareMeasureForLine(cm,lineObj)}function get(ch,right){var m=measureCharPrepared(cm,preparedMeasure,ch,right?"right":"left",varHeight);if(right){m.left=m.right}else{m.right=m.left}return intoCoordSystem(cm,lineObj,m,context)}var order=getOrder(lineObj,cm.doc.direction),ch=pos.ch,sticky=pos.sticky;if(ch>=lineObj.text.length){ch=lineObj.text.length;sticky="before"}else if(ch<=0){ch=0;sticky="after"}if(!order){return get(sticky=="before"?ch-1:ch,sticky=="before")}function getBidi(ch,partPos,invert){var part=order[partPos],right=part.level==1;return get(invert?ch-1:ch,right!=invert)}var partPos=getBidiPartAt(order,ch,sticky);var other=bidiOther;var val=getBidi(ch,partPos,sticky=="before");if(other!=null){val.other=getBidi(ch,other,sticky!="before")}return val}function estimateCoords(cm,pos){var left=0;pos=_clipPos(cm.doc,pos);if(!cm.options.lineWrapping){left=charWidth(cm.display)*pos.ch}var lineObj=getLine(cm.doc,pos.line);var top=_heightAtLine(lineObj)+paddingTop(cm.display);return{left:left,right:left,top:top,bottom:top+lineObj.height}}function PosWithInfo(line,ch,sticky,outside,xRel){var pos=Pos(line,ch,sticky);pos.xRel=xRel;if(outside){pos.outside=outside}return pos}function _coordsChar(cm,x,y){var doc=cm.doc;y+=cm.display.viewOffset;if(y<0){return PosWithInfo(doc.first,0,null,-1,-1)}var lineN=_lineAtHeight(doc,y),last=doc.first+doc.size-1;if(lineN>last){return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,null,1,1)}if(x<0){x=0}var lineObj=getLine(doc,lineN);for(;;){var found=coordsCharInner(cm,lineObj,lineN,x,y);var collapsed=collapsedSpanAround(lineObj,found.ch+(found.xRel>0||found.outside>0?1:0));if(!collapsed){return found}var rangeEnd=collapsed.find(1);if(rangeEnd.line==lineN){return rangeEnd}lineObj=getLine(doc,lineN=rangeEnd.line)}}function wrappedLineExtent(cm,lineObj,preparedMeasure,y){y-=widgetTopHeight(lineObj);var end=lineObj.text.length;var begin=findFirst(function(ch){return measureCharPrepared(cm,preparedMeasure,ch-1).bottom<=y},end,0);end=findFirst(function(ch){return measureCharPrepared(cm,preparedMeasure,ch).top>y},begin,end);return{begin:begin,end:end}}function wrappedLineExtentChar(cm,lineObj,preparedMeasure,target){if(!preparedMeasure){preparedMeasure=prepareMeasureForLine(cm,lineObj)}var targetTop=intoCoordSystem(cm,lineObj,measureCharPrepared(cm,preparedMeasure,target),"line").top;return wrappedLineExtent(cm,lineObj,preparedMeasure,targetTop)}function boxIsAfter(box,x,y,left){return box.bottom<=y?false:box.top>y?true:(left?box.left:box.right)>x}function coordsCharInner(cm,lineObj,lineNo,x,y){y-=_heightAtLine(lineObj);var preparedMeasure=prepareMeasureForLine(cm,lineObj);var widgetHeight=widgetTopHeight(lineObj);var begin=0,end=lineObj.text.length,ltr=true;var order=getOrder(lineObj,cm.doc.direction);if(order){var part=(cm.options.lineWrapping?coordsBidiPartWrapped:coordsBidiPart)(cm,lineObj,lineNo,preparedMeasure,order,x,y);ltr=part.level!=1;begin=ltr?part.from:part.to-1;end=ltr?part.to:part.from-1}var chAround=null,boxAround=null;var ch=findFirst(function(ch){var box=measureCharPrepared(cm,preparedMeasure,ch);box.top+=widgetHeight;box.bottom+=widgetHeight;if(!boxIsAfter(box,x,y,false)){return false}if(box.top<=y&&box.left<=x){chAround=ch;boxAround=box}return true},begin,end);var baseX,sticky,outside=false;if(boxAround){var atLeft=x-boxAround.left<boxAround.right-x,atStart=atLeft==ltr;ch=chAround+(atStart?0:1);sticky=atStart?"after":"before";baseX=atLeft?boxAround.left:boxAround.right}else{if(!ltr&&(ch==end||ch==begin)){ch+=1}sticky=ch==0?"after":ch==lineObj.text.length?"before":measureCharPrepared(cm,preparedMeasure,ch-(ltr?1:0)).bottom+widgetHeight<=y==ltr?"after":"before";var coords=_cursorCoords(cm,Pos(lineNo,ch,sticky),"line",lineObj,preparedMeasure);baseX=coords.left;outside=y<coords.top?-1:y>=coords.bottom?1:0}ch=skipExtendingChars(lineObj.text,ch,1);return PosWithInfo(lineNo,ch,sticky,outside,x-baseX)}function coordsBidiPart(cm,lineObj,lineNo,preparedMeasure,order,x,y){var index=findFirst(function(i){var part=order[i],ltr=part.level!=1;return boxIsAfter(_cursorCoords(cm,Pos(lineNo,ltr?part.to:part.from,ltr?"before":"after"),"line",lineObj,preparedMeasure),x,y,true)},0,order.length-1);var part=order[index];if(index>0){var ltr=part.level!=1;var start=_cursorCoords(cm,Pos(lineNo,ltr?part.from:part.to,ltr?"after":"before"),"line",lineObj,preparedMeasure);if(boxIsAfter(start,x,y,true)&&start.top>y){part=order[index-1]}}return part}function coordsBidiPartWrapped(cm,lineObj,_lineNo,preparedMeasure,order,x,y){var ref=wrappedLineExtent(cm,lineObj,preparedMeasure,y);var begin=ref.begin;var end=ref.end;if(/\s/.test(lineObj.text.charAt(end-1))){end-=1}var part=null,closestDist=null;for(var i=0;i<order.length;i+=1){var p=order[i];if(p.from>=end||p.to<=begin){continue}var ltr=p.level!=1;var endX=measureCharPrepared(cm,preparedMeasure,ltr?Math.min(end,p.to)-1:Math.max(begin,p.from)).right;var dist=endX<x?x-endX+1e9:endX-x;if(!part||closestDist>dist){part=p;closestDist=dist}}if(!part){part=order[order.length-1]}if(part.from<begin){part={from:begin,to:part.to,level:part.level}}if(part.to>end){part={from:part.from,to:end,level:part.level}}return part}var measureText;function textHeight(display){if(display.cachedTextHeight!=null){return display.cachedTextHeight}if(measureText==null){measureText=elt("pre",null,"CodeMirror-line-like");for(var i=0;i<49;i+=1){measureText.appendChild(document.createTextNode("x"));measureText.appendChild(elt("br"))}measureText.appendChild(document.createTextNode("x"))}removeChildrenAndAdd(display.measure,measureText);var height=measureText.offsetHeight/50;if(height>3){display.cachedTextHeight=height}removeChildren(display.measure);return height||1}function charWidth(display){if(display.cachedCharWidth!=null){return display.cachedCharWidth}var anchor=elt("span","xxxxxxxxxx");var pre=elt("pre",[anchor],"CodeMirror-line-like");removeChildrenAndAdd(display.measure,pre);var rect=anchor.getBoundingClientRect(),width=(rect.right-rect.left)/10;if(width>2){display.cachedCharWidth=width}return width||10}function getDimensions(cm){var d=cm.display,left={},width={};var gutterLeft=d.gutters.clientLeft;for(var n=d.gutters.firstChild,i=0;n;n=n.nextSibling,i+=1){var id=cm.display.gutterSpecs[i].className;left[id]=n.offsetLeft+n.clientLeft+gutterLeft;width[id]=n.clientWidth}return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth}}function compensateForHScroll(display){return display.scroller.getBoundingClientRect().left-display.sizer.getBoundingClientRect().left}function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping;var perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line)){return 0}var widgetsHeight=0;if(line.widgets){for(var i=0;i<line.widgets.length;i+=1){if(line.widgets[i].height){widgetsHeight+=line.widgets[i].height}}}if(wrapping){return widgetsHeight+(Math.ceil(line.text.length/perLine)||1)*th}else{return widgetsHeight+th}}}function estimateLineHeights(cm){var doc=cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);if(estHeight!=line.height){updateLineHeight(line,estHeight)}})}function posFromMouse(cm,e,liberal,forRect){var display=cm.display;if(!liberal&&e_target(e).getAttribute("cm-not-content")=="true"){return null}var x,y,space=display.lineSpace.getBoundingClientRect();try{x=e.clientX-space.left;y=e.clientY-space.top}catch(e){return null}var coords=_coordsChar(cm,x,y),line;if(forRect&&coords.xRel>0&&(line=getLine(cm.doc,coords.line).text).length==coords.ch){var colDiff=countColumn(line,line.length,cm.options.tabSize)-line.length;coords=Pos(coords.line,Math.max(0,Math.round((x-paddingH(cm.display).left)/charWidth(cm.display))-colDiff))}return coords}function findViewIndex(cm,n){if(n>=cm.display.viewTo){return null}n-=cm.display.viewFrom;if(n<0){return null}var view=cm.display.view;for(var i=0;i<view.length;i+=1){n-=view[i].size;if(n<0){return i}}}function regChange(cm,from,to,lendiff){if(from==null){from=cm.doc.first}if(to==null){to=cm.doc.first+cm.doc.size}if(!lendiff){lendiff=0}var display=cm.display;if(lendiff&&to<display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>from)){display.updateLineNumbers=from}cm.curOp.viewChanged=true;if(from>=display.viewTo){if(sawCollapsedSpans&&visualLineNo(cm.doc,from)<display.viewTo){resetView(cm)}}else if(to<=display.viewFrom){if(sawCollapsedSpans&&visualLineEndNo(cm.doc,to+lendiff)>display.viewFrom){resetView(cm)}else{display.viewFrom+=lendiff;display.viewTo+=lendiff}}else if(from<=display.viewFrom&&to>=display.viewTo){resetView(cm)}else if(from<=display.viewFrom){var cut=viewCuttingPoint(cm,to,to+lendiff,1);if(cut){display.view=display.view.slice(cut.index);display.viewFrom=cut.lineN;display.viewTo+=lendiff}else{resetView(cm)}}else if(to>=display.viewTo){var cut$1=viewCuttingPoint(cm,from,from,-1);if(cut$1){display.view=display.view.slice(0,cut$1.index);display.viewTo=cut$1.lineN}else{resetView(cm)}}else{var cutTop=viewCuttingPoint(cm,from,from,-1);var cutBot=viewCuttingPoint(cm,to,to+lendiff,1);if(cutTop&&cutBot){display.view=display.view.slice(0,cutTop.index).concat(buildViewArray(cm,cutTop.lineN,cutBot.lineN)).concat(display.view.slice(cutBot.index));display.viewTo+=lendiff}else{resetView(cm)}}var ext=display.externalMeasured;if(ext){if(to<ext.lineN){ext.lineN+=lendiff}else if(from<ext.lineN+ext.size){display.externalMeasured=null}}}function regLineChange(cm,line,type){cm.curOp.viewChanged=true;var display=cm.display,ext=cm.display.externalMeasured;if(ext&&line>=ext.lineN&&line<ext.lineN+ext.size){display.externalMeasured=null}if(line<display.viewFrom||line>=display.viewTo){return}var lineView=display.view[findViewIndex(cm,line)];if(lineView.node==null){return}var arr=lineView.changes||(lineView.changes=[]);if(indexOf(arr,type)==-1){arr.push(type)}}function resetView(cm){cm.display.viewFrom=cm.display.viewTo=cm.doc.first;cm.display.view=[];cm.display.viewOffset=0}function viewCuttingPoint(cm,oldN,newN,dir){var index=findViewIndex(cm,oldN),diff,view=cm.display.view;if(!sawCollapsedSpans||newN==cm.doc.first+cm.doc.size){return{index:index,lineN:newN}}var n=cm.display.viewFrom;for(var i=0;i<index;i+=1){n+=view[i].size}if(n!=oldN){if(dir>0){if(index==view.length-1){return null}diff=n+view[index].size-oldN;index+=1}else{diff=n-oldN}oldN+=diff;newN+=diff}while(visualLineNo(cm.doc,newN)!=newN){if(index==(dir<0?0:view.length-1)){return null}newN+=dir*view[index-(dir<0?1:0)].size;index+=dir}return{index:index,lineN:newN}}function adjustView(cm,from,to){var display=cm.display,view=display.view;if(view.length==0||from>=display.viewTo||to<=display.viewFrom){display.view=buildViewArray(cm,from,to);display.viewFrom=from}else{if(display.viewFrom>from){display.view=buildViewArray(cm,from,display.viewFrom).concat(display.view)}else if(display.viewFrom<from){display.view=display.view.slice(findViewIndex(cm,from))}display.viewFrom=from;if(display.viewTo<to){display.view=display.view.concat(buildViewArray(cm,display.viewTo,to))}else if(display.viewTo>to){display.view=display.view.slice(0,findViewIndex(cm,to))}}display.viewTo=to}function countDirtyView(cm){var view=cm.display.view,dirty=0;for(var i=0;i<view.length;i+=1){var lineView=view[i];if(!lineView.hidden&&(!lineView.node||lineView.changes)){dirty+=1}}return dirty}function updateSelection(cm){cm.display.input.showSelection(cm.display.input.prepareSelection())}function prepareSelection(cm,primary){if(primary===void 0){primary=true}var doc=cm.doc,result={};var curFragment=result.cursors=document.createDocumentFragment();var selFragment=result.selection=document.createDocumentFragment();for(var i=0;i<doc.sel.ranges.length;i+=1){if(!primary&&i==doc.sel.primIndex){continue}var range=doc.sel.ranges[i];if(range.from().line>=cm.display.viewTo||range.to().line<cm.display.viewFrom){continue}var collapsed=range.empty();if(collapsed||cm.options.showCursorWhenSelecting){drawSelectionCursor(cm,range.head,curFragment)}if(!collapsed){drawSelectionRange(cm,range,selFragment)}}return result}function drawSelectionCursor(cm,head,output){var pos=_cursorCoords(cm,head,"div",null,null,!cm.options.singleCursorHeightPerLine);var cursor=output.appendChild(elt("div","\xA0","CodeMirror-cursor"));cursor.style.left=pos.left+"px";cursor.style.top=pos.top+"px";cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px";if(pos.other){var otherCursor=output.appendChild(elt("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));otherCursor.style.display="";otherCursor.style.left=pos.other.left+"px";otherCursor.style.top=pos.other.top+"px";otherCursor.style.height=(pos.other.bottom-pos.other.top)*.85+"px"}}function cmpCoords(a,b){return a.top-b.top||a.left-b.left}function drawSelectionRange(cm,range,output){var display=cm.display,doc=cm.doc;var fragment=document.createDocumentFragment();var padding=paddingH(cm.display),leftSide=padding.left;var rightSide=Math.max(display.sizerWidth,displayWidth(cm)-display.sizer.offsetLeft)-padding.right;var docLTR=doc.direction=="ltr";function add(left,top,width,bottom){if(top<0){top=0}top=Math.round(top);bottom=Math.round(bottom);fragment.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px;\n                             top: "+top+"px; width: "+(width==null?rightSide-left:width)+"px;\n                             height: "+(bottom-top)+"px"))}function drawForLine(line,fromArg,toArg){var lineObj=getLine(doc,line);var lineLen=lineObj.text.length;var start,end;function coords(ch,bias){return _charCoords(cm,Pos(line,ch),"div",lineObj,bias)}function wrapX(pos,dir,side){var extent=wrappedLineExtentChar(cm,lineObj,null,pos);var prop=dir=="ltr"==(side=="after")?"left":"right";var ch=side=="after"?extent.begin:extent.end-(/\s/.test(lineObj.text.charAt(extent.end-1))?2:1);return coords(ch,prop)[prop]}var order=getOrder(lineObj,doc.direction);iterateBidiSections(order,fromArg||0,toArg==null?lineLen:toArg,function(from,to,dir,i){var ltr=dir=="ltr";var fromPos=coords(from,ltr?"left":"right");var toPos=coords(to-1,ltr?"right":"left");var openStart=fromArg==null&&from==0,openEnd=toArg==null&&to==lineLen;var first=i==0,last=!order||i==order.length-1;if(toPos.top-fromPos.top<=3){var openLeft=(docLTR?openStart:openEnd)&&first;var openRight=(docLTR?openEnd:openStart)&&last;var left=openLeft?leftSide:(ltr?fromPos:toPos).left;var right=openRight?rightSide:(ltr?toPos:fromPos).right;add(left,fromPos.top,right-left,fromPos.bottom)}else{var topLeft,topRight,botLeft,botRight;if(ltr){topLeft=docLTR&&openStart&&first?leftSide:fromPos.left;topRight=docLTR?rightSide:wrapX(from,dir,"before");botLeft=docLTR?leftSide:wrapX(to,dir,"after");botRight=docLTR&&openEnd&&last?rightSide:toPos.right}else{topLeft=!docLTR?leftSide:wrapX(from,dir,"before");topRight=!docLTR&&openStart&&first?rightSide:fromPos.right;botLeft=!docLTR&&openEnd&&last?leftSide:toPos.left;botRight=!docLTR?rightSide:wrapX(to,dir,"after")}add(topLeft,fromPos.top,topRight-topLeft,fromPos.bottom);if(fromPos.bottom<toPos.top){add(leftSide,fromPos.bottom,null,toPos.top)}add(botLeft,toPos.top,botRight-botLeft,toPos.bottom)}if(!start||cmpCoords(fromPos,start)<0){start=fromPos}if(cmpCoords(toPos,start)<0){start=toPos}if(!end||cmpCoords(fromPos,end)<0){end=fromPos}if(cmpCoords(toPos,end)<0){end=toPos}});return{start:start,end:end}}var sFrom=range.from(),sTo=range.to();if(sFrom.line==sTo.line){drawForLine(sFrom.line,sFrom.ch,sTo.ch)}else{var fromLine=getLine(doc,sFrom.line),toLine=getLine(doc,sTo.line);var singleVLine=visualLine(fromLine)==visualLine(toLine);var leftEnd=drawForLine(sFrom.line,sFrom.ch,singleVLine?fromLine.text.length+1:null).end;var rightStart=drawForLine(sTo.line,singleVLine?0:null,sTo.ch).start;if(singleVLine){if(leftEnd.top<rightStart.top-2){add(leftEnd.right,leftEnd.top,null,leftEnd.bottom);add(leftSide,rightStart.top,rightStart.left,rightStart.bottom)}else{add(leftEnd.right,leftEnd.top,rightStart.left-leftEnd.right,leftEnd.bottom)}}if(leftEnd.bottom<rightStart.top){add(leftSide,leftEnd.bottom,null,rightStart.top)}}output.appendChild(fragment)}function restartBlink(cm){if(!cm.state.focused){return}var display=cm.display;clearInterval(display.blinker);var on=true;display.cursorDiv.style.visibility="";if(cm.options.cursorBlinkRate>0){display.blinker=setInterval(function(){return display.cursorDiv.style.visibility=(on=!on)?"":"hidden"},cm.options.cursorBlinkRate)}else if(cm.options.cursorBlinkRate<0){display.cursorDiv.style.visibility="hidden"}}function ensureFocus(cm){if(!cm.state.focused){cm.display.input.focus();onFocus(cm)}}function delayBlurEvent(cm){cm.state.delayingBlurEvent=true;setTimeout(function(){if(cm.state.delayingBlurEvent){cm.state.delayingBlurEvent=false;onBlur(cm)}},100)}function onFocus(cm,e){if(cm.state.delayingBlurEvent){cm.state.delayingBlurEvent=false}if(cm.options.readOnly=="nocursor"){return}if(!cm.state.focused){signal(cm,"focus",cm,e);cm.state.focused=true;addClass(cm.display.wrapper,"CodeMirror-focused");if(!cm.curOp&&cm.display.selForContextMenu!=cm.doc.sel){cm.display.input.reset();if(webkit){setTimeout(function(){return cm.display.input.reset(true)},20)}}cm.display.input.receivedFocus()}restartBlink(cm)}function onBlur(cm,e){if(cm.state.delayingBlurEvent){return}if(cm.state.focused){signal(cm,"blur",cm,e);cm.state.focused=false;rmClass(cm.display.wrapper,"CodeMirror-focused")}clearInterval(cm.display.blinker);setTimeout(function(){if(!cm.state.focused){cm.display.shift=false}},150)}function updateHeightsInViewport(cm){var display=cm.display;var prevBottom=display.lineDiv.offsetTop;for(var i=0;i<display.view.length;i+=1){var cur=display.view[i],wrapping=cm.options.lineWrapping;var height=void 0,width=0;if(cur.hidden){continue}if(ie&&ie_version<8){var bot=cur.node.offsetTop+cur.node.offsetHeight;height=bot-prevBottom;prevBottom=bot}else{var box=cur.node.getBoundingClientRect();height=box.bottom-box.top;if(!wrapping&&cur.text.firstChild){width=cur.text.firstChild.getBoundingClientRect().right-box.left-1}}var diff=cur.line.height-height;if(diff>.005||diff<-.005){updateLineHeight(cur.line,height);updateWidgetHeight(cur.line);if(cur.rest){for(var j=0;j<cur.rest.length;j+=1){updateWidgetHeight(cur.rest[j])}}}if(width>cm.display.sizerWidth){var chWidth=Math.ceil(width/charWidth(cm.display));if(chWidth>cm.display.maxLineLength){cm.display.maxLineLength=chWidth;cm.display.maxLine=cur.line;cm.display.maxLineChanged=true}}}}function updateWidgetHeight(line){if(line.widgets){for(var i=0;i<line.widgets.length;i+=1){var w=line.widgets[i],parent=w.node.parentNode;if(parent){w.height=parent.offsetHeight}}}}function visibleLines(display,doc,viewport){var top=viewport&&viewport.top!=null?Math.max(0,viewport.top):display.scroller.scrollTop;top=Math.floor(top-paddingTop(display));var bottom=viewport&&viewport.bottom!=null?viewport.bottom:top+display.wrapper.clientHeight;var from=_lineAtHeight(doc,top),to=_lineAtHeight(doc,bottom);if(viewport&&viewport.ensure){var ensureFrom=viewport.ensure.from.line,ensureTo=viewport.ensure.to.line;if(ensureFrom<from){from=ensureFrom;to=_lineAtHeight(doc,_heightAtLine(getLine(doc,ensureFrom))+display.wrapper.clientHeight)}else if(Math.min(ensureTo,doc.lastLine())>=to){from=_lineAtHeight(doc,_heightAtLine(getLine(doc,ensureTo))-display.wrapper.clientHeight);to=ensureTo}}return{from:from,to:Math.max(to,from+1)}}function maybeScrollWindow(cm,rect){if(signalDOMEvent(cm,"scrollCursorIntoView")){return}var display=cm.display,box=display.sizer.getBoundingClientRect(),doScroll=null;if(rect.top+box.top<0){doScroll=true}else if(rect.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight)){doScroll=false}if(doScroll!=null&&!phantom){var scrollNode=elt("div","\u200B",null,"position: absolute;\n                         top: "+(rect.top-display.viewOffset-paddingTop(cm.display))+"px;\n                         height: "+(rect.bottom-rect.top+scrollGap(cm)+display.barHeight)+"px;\n                         left: "+rect.left+"px; width: "+Math.max(2,rect.right-rect.left)+"px;");cm.display.lineSpace.appendChild(scrollNode);scrollNode.scrollIntoView(doScroll);cm.display.lineSpace.removeChild(scrollNode)}}function scrollPosIntoView(cm,pos,end,margin){if(margin==null){margin=0}var rect;if(!cm.options.lineWrapping&&pos==end){pos=pos.ch?Pos(pos.line,pos.sticky=="before"?pos.ch-1:pos.ch,"after"):pos;end=pos.sticky=="before"?Pos(pos.line,pos.ch+1,"before"):pos}for(var limit=0;limit<5;limit+=1){var changed=false;var coords=_cursorCoords(cm,pos);var endCoords=!end||end==pos?coords:_cursorCoords(cm,end);rect={left:Math.min(coords.left,endCoords.left),top:Math.min(coords.top,endCoords.top)-margin,right:Math.max(coords.left,endCoords.left),bottom:Math.max(coords.bottom,endCoords.bottom)+margin};var scrollPos=calculateScrollPos(cm,rect);var startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;if(scrollPos.scrollTop!=null){updateScrollTop(cm,scrollPos.scrollTop);if(Math.abs(cm.doc.scrollTop-startTop)>1){changed=true}}if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft);if(Math.abs(cm.doc.scrollLeft-startLeft)>1){changed=true}}if(!changed){break}}return rect}function scrollIntoView(cm,rect){var scrollPos=calculateScrollPos(cm,rect);if(scrollPos.scrollTop!=null){updateScrollTop(cm,scrollPos.scrollTop)}if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft)}}function calculateScrollPos(cm,rect){var display=cm.display,snapMargin=textHeight(cm.display);if(rect.top<0){rect.top=0}var screentop=cm.curOp&&cm.curOp.scrollTop!=null?cm.curOp.scrollTop:display.scroller.scrollTop;var screen=displayHeight(cm),result={};if(rect.bottom-rect.top>screen){rect.bottom=rect.top+screen}var docBottom=cm.doc.height+paddingVert(display);var atTop=rect.top<snapMargin,atBottom=rect.bottom>docBottom-snapMargin;if(rect.top<screentop){result.scrollTop=atTop?0:rect.top}else if(rect.bottom>screentop+screen){var newTop=Math.min(rect.top,(atBottom?docBottom:rect.bottom)-screen);if(newTop!=screentop){result.scrollTop=newTop}}var screenleft=cm.curOp&&cm.curOp.scrollLeft!=null?cm.curOp.scrollLeft:display.scroller.scrollLeft;var screenw=displayWidth(cm)-(cm.options.fixedGutter?display.gutters.offsetWidth:0);var tooWide=rect.right-rect.left>screenw;if(tooWide){rect.right=rect.left+screenw}if(rect.left<10){result.scrollLeft=0}else if(rect.left<screenleft){result.scrollLeft=Math.max(0,rect.left-(tooWide?0:10))}else if(rect.right>screenw+screenleft-3){result.scrollLeft=rect.right+(tooWide?0:10)-screenw}return result}function addToScrollTop(cm,top){if(top==null){return}resolveScrollToPos(cm);cm.curOp.scrollTop=(cm.curOp.scrollTop==null?cm.doc.scrollTop:cm.curOp.scrollTop)+top}function ensureCursorVisible(cm){resolveScrollToPos(cm);var cur=cm.getCursor();cm.curOp.scrollToPos={from:cur,to:cur,margin:cm.options.cursorScrollMargin}}function scrollToCoords(cm,x,y){if(x!=null||y!=null){resolveScrollToPos(cm)}if(x!=null){cm.curOp.scrollLeft=x}if(y!=null){cm.curOp.scrollTop=y}}function scrollToRange(cm,range){resolveScrollToPos(cm);cm.curOp.scrollToPos=range}function resolveScrollToPos(cm){var range=cm.curOp.scrollToPos;if(range){cm.curOp.scrollToPos=null;var from=estimateCoords(cm,range.from),to=estimateCoords(cm,range.to);scrollToCoordsRange(cm,from,to,range.margin)}}function scrollToCoordsRange(cm,from,to,margin){var sPos=calculateScrollPos(cm,{left:Math.min(from.left,to.left),top:Math.min(from.top,to.top)-margin,right:Math.max(from.right,to.right),bottom:Math.max(from.bottom,to.bottom)+margin});scrollToCoords(cm,sPos.scrollLeft,sPos.scrollTop)}function updateScrollTop(cm,val){if(Math.abs(cm.doc.scrollTop-val)<2){return}if(!gecko){updateDisplaySimple(cm,{top:val})}setScrollTop(cm,val,true);if(gecko){updateDisplaySimple(cm)}startWorker(cm,100)}function setScrollTop(cm,val,forceScroll){val=Math.max(0,Math.min(cm.display.scroller.scrollHeight-cm.display.scroller.clientHeight,val));if(cm.display.scroller.scrollTop==val&&!forceScroll){return}cm.doc.scrollTop=val;cm.display.scrollbars.setScrollTop(val);if(cm.display.scroller.scrollTop!=val){cm.display.scroller.scrollTop=val}}function setScrollLeft(cm,val,isScroller,forceScroll){val=Math.max(0,Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth));if((isScroller?val==cm.doc.scrollLeft:Math.abs(cm.doc.scrollLeft-val)<2)&&!forceScroll){return}cm.doc.scrollLeft=val;alignHorizontally(cm);if(cm.display.scroller.scrollLeft!=val){cm.display.scroller.scrollLeft=val}cm.display.scrollbars.setScrollLeft(val)}function measureForScrollbars(cm){var d=cm.display,gutterW=d.gutters.offsetWidth;var docH=Math.round(cm.doc.height+paddingVert(cm.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:cm.options.fixedGutter?gutterW:0,docHeight:docH,scrollHeight:docH+scrollGap(cm)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:gutterW}}var NativeScrollbars=function NativeScrollbars(place,scroll,cm){this.cm=cm;var vert=this.vert=elt("div",[elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var horiz=this.horiz=elt("div",[elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");vert.tabIndex=horiz.tabIndex=-1;place(vert);place(horiz);on(vert,"scroll",function(){if(vert.clientHeight){scroll(vert.scrollTop,"vertical")}});on(horiz,"scroll",function(){if(horiz.clientWidth){scroll(horiz.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(ie&&ie_version<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};NativeScrollbars.prototype.update=function(measure){var needsH=measure.scrollWidth>measure.clientWidth+1;var needsV=measure.scrollHeight>measure.clientHeight+1;var sWidth=measure.nativeBarWidth;if(needsV){this.vert.style.display="block";this.vert.style.bottom=needsH?sWidth+"px":"0";var totalHeight=measure.viewHeight-(needsH?sWidth:0);this.vert.firstChild.style.height=Math.max(0,measure.scrollHeight-measure.clientHeight+totalHeight)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(needsH){this.horiz.style.display="block";this.horiz.style.right=needsV?sWidth+"px":"0";this.horiz.style.left=measure.barLeft+"px";var totalWidth=measure.viewWidth-measure.barLeft-(needsV?sWidth:0);this.horiz.firstChild.style.width=Math.max(0,measure.scrollWidth-measure.clientWidth+totalWidth)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&measure.clientHeight>0){if(sWidth==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:needsV?sWidth:0,bottom:needsH?sWidth:0}};NativeScrollbars.prototype.setScrollLeft=function(pos){if(this.horiz.scrollLeft!=pos){this.horiz.scrollLeft=pos}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")}};NativeScrollbars.prototype.setScrollTop=function(pos){if(this.vert.scrollTop!=pos){this.vert.scrollTop=pos}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert,"vert")}};NativeScrollbars.prototype.zeroWidthHack=function(){var w=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.height=this.vert.style.width=w;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new Delayed();this.disableVert=new Delayed()};NativeScrollbars.prototype.enableZeroWidthBar=function(bar,delay,type){bar.style.pointerEvents="auto";function maybeDisable(){var box=bar.getBoundingClientRect();var elt=type=="vert"?document.elementFromPoint(box.right-1,(box.top+box.bottom)/2):document.elementFromPoint((box.right+box.left)/2,box.bottom-1);if(elt!=bar){bar.style.pointerEvents="none"}else{delay.set(1000,maybeDisable)}}delay.set(1000,maybeDisable)};NativeScrollbars.prototype.clear=function(){var parent=this.horiz.parentNode;parent.removeChild(this.horiz);parent.removeChild(this.vert)};var NullScrollbars=function NullScrollbars(){};NullScrollbars.prototype.update=function(){return{bottom:0,right:0}};NullScrollbars.prototype.setScrollLeft=function(){};NullScrollbars.prototype.setScrollTop=function(){};NullScrollbars.prototype.clear=function(){};function updateScrollbars(cm,measure){if(!measure){measure=measureForScrollbars(cm)}var startWidth=cm.display.barWidth,startHeight=cm.display.barHeight;updateScrollbarsInner(cm,measure);for(var i=0;i<4&&startWidth!=cm.display.barWidth||startHeight!=cm.display.barHeight;i+=1){if(startWidth!=cm.display.barWidth&&cm.options.lineWrapping){updateHeightsInViewport(cm)}updateScrollbarsInner(cm,measureForScrollbars(cm));startWidth=cm.display.barWidth;startHeight=cm.display.barHeight}}function updateScrollbarsInner(cm,measure){var d=cm.display;var sizes=d.scrollbars.update(measure);d.sizer.style.paddingRight=(d.barWidth=sizes.right)+"px";d.sizer.style.paddingBottom=(d.barHeight=sizes.bottom)+"px";d.heightForcer.style.borderBottom=sizes.bottom+"px solid transparent";if(sizes.right&&sizes.bottom){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=sizes.bottom+"px";d.scrollbarFiller.style.width=sizes.right+"px"}else{d.scrollbarFiller.style.display=""}if(sizes.bottom&&cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter){d.gutterFiller.style.display="block";d.gutterFiller.style.height=sizes.bottom+"px";d.gutterFiller.style.width=measure.gutterWidth+"px"}else{d.gutterFiller.style.display=""}}var scrollbarModel={"native":NativeScrollbars,"null":NullScrollbars};function initScrollbars(cm){if(cm.display.scrollbars){cm.display.scrollbars.clear();if(cm.display.scrollbars.addClass){rmClass(cm.display.wrapper,cm.display.scrollbars.addClass)}}cm.display.scrollbars=new scrollbarModel[cm.options.scrollbarStyle](function(node){cm.display.wrapper.insertBefore(node,cm.display.scrollbarFiller);on(node,"mousedown",function(){if(cm.state.focused){setTimeout(function(){return cm.display.input.focus()},0)}});node.setAttribute("cm-not-content","true")},function(pos,axis){if(axis=="horizontal"){setScrollLeft(cm,pos)}else{updateScrollTop(cm,pos)}},cm);if(cm.display.scrollbars.addClass){addClass(cm.display.wrapper,cm.display.scrollbars.addClass)}}var nextOpId=0;function _startOperation(cm){cm.curOp={cm:cm,viewChanged:false,startHeight:cm.doc.height,forceUpdate:false,updateInput:0,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id: ++nextOpId };pushOperation(cm.curOp)}function _endOperation(cm){var op=cm.curOp;if(op){finishOperation(op,function(group){for(var i=0;i<group.ops.length;i+=1){group.ops[i].cm.curOp=null}endOperations(group)})}}function endOperations(group){var ops=group.ops;for(var i=0;i<ops.length;i+=1){endOperation_R1(ops[i])}for(var i$1=0;i$1<ops.length;i$1+=1){endOperation_W1(ops[i$1])}for(var i$2=0;i$2<ops.length;i$2+=1){endOperation_R2(ops[i$2])}for(var i$3=0;i$3<ops.length;i$3+=1){endOperation_W2(ops[i$3])}for(var i$4=0;i$4<ops.length;i$4+=1){endOperation_finish(ops[i$4])}}function endOperation_R1(op){var cm=op.cm,display=cm.display;maybeClipScrollbars(cm);if(op.updateMaxLine){findMaxLine(cm)}op.mustUpdate=op.viewChanged||op.forceUpdate||op.scrollTop!=null||op.scrollToPos&&(op.scrollToPos.from.line<display.viewFrom||op.scrollToPos.to.line>=display.viewTo)||display.maxLineChanged&&cm.options.lineWrapping;op.update=op.mustUpdate&&new DisplayUpdate(cm,op.mustUpdate&&{top:op.scrollTop,ensure:op.scrollToPos},op.forceUpdate)}function endOperation_W1(op){op.updatedDisplay=op.mustUpdate&&updateDisplayIfNeeded(op.cm,op.update)}function endOperation_R2(op){var cm=op.cm,display=cm.display;if(op.updatedDisplay){updateHeightsInViewport(cm)}op.barMeasure=measureForScrollbars(cm);if(display.maxLineChanged&&!cm.options.lineWrapping){op.adjustWidthTo=measureChar(cm,display.maxLine,display.maxLine.text.length).left+3;cm.display.sizerWidth=op.adjustWidthTo;op.barMeasure.scrollWidth=Math.max(display.scroller.clientWidth,display.sizer.offsetLeft+op.adjustWidthTo+scrollGap(cm)+cm.display.barWidth);op.maxScrollLeft=Math.max(0,display.sizer.offsetLeft+op.adjustWidthTo-displayWidth(cm))}if(op.updatedDisplay||op.selectionChanged){op.preparedSelection=display.input.prepareSelection()}}function endOperation_W2(op){var cm=op.cm;if(op.adjustWidthTo!=null){cm.display.sizer.style.minWidth=op.adjustWidthTo+"px";if(op.maxScrollLeft<cm.doc.scrollLeft){setScrollLeft(cm,Math.min(cm.display.scroller.scrollLeft,op.maxScrollLeft),true)}cm.display.maxLineChanged=false}var takeFocus=op.focus&&op.focus==activeElt();if(op.preparedSelection){cm.display.input.showSelection(op.preparedSelection,takeFocus)}if(op.updatedDisplay||op.startHeight!=cm.doc.height){updateScrollbars(cm,op.barMeasure)}if(op.updatedDisplay){setDocumentHeight(cm,op.barMeasure)}if(op.selectionChanged){restartBlink(cm)}if(cm.state.focused&&op.updateInput){cm.display.input.reset(op.typing)}if(takeFocus){ensureFocus(op.cm)}}function endOperation_finish(op){var cm=op.cm,display=cm.display,doc=cm.doc;if(op.updatedDisplay){postUpdateDisplay(cm,op.update)}if(display.wheelStartX!=null&&(op.scrollTop!=null||op.scrollLeft!=null||op.scrollToPos)){display.wheelStartX=display.wheelStartY=null}if(op.scrollTop!=null){setScrollTop(cm,op.scrollTop,op.forceScroll)}if(op.scrollLeft!=null){setScrollLeft(cm,op.scrollLeft,true,true)}if(op.scrollToPos){var rect=scrollPosIntoView(cm,_clipPos(doc,op.scrollToPos.from),_clipPos(doc,op.scrollToPos.to),op.scrollToPos.margin);maybeScrollWindow(cm,rect)}var hidden=op.maybeHiddenMarkers,unhidden=op.maybeUnhiddenMarkers;if(hidden){for(var i=0;i<hidden.length;i+=1){if(!hidden[i].lines.length){signal(hidden[i],"hide")}}}if(unhidden){for(var i$1=0;i$1<unhidden.length;i$1+=1){if(unhidden[i$1].lines.length){signal(unhidden[i$1],"unhide")}}}if(display.wrapper.offsetHeight){doc.scrollTop=cm.display.scroller.scrollTop}if(op.changeObjs){signal(cm,"changes",cm,op.changeObjs)}if(op.update){op.update.finish()}}function runInOp(cm,f){if(cm.curOp){return f()}_startOperation(cm);try{return f()}finally{_endOperation(cm)}}function operation(cm,f){return function(){if(cm.curOp){return f.apply(cm,arguments)}_startOperation(cm);try{return f.apply(cm,arguments)}finally{_endOperation(cm)}}}function methodOp(f){return function(){if(this.curOp){return f.apply(this,arguments)}_startOperation(this);try{return f.apply(this,arguments)}finally{_endOperation(this)}}}function docMethodOp(f){return function(){var cm=this.cm;if(!cm||cm.curOp){return f.apply(this,arguments)}_startOperation(cm);try{return f.apply(this,arguments)}finally{_endOperation(cm)}}}function startWorker(cm,time){if(cm.doc.highlightFrontier<cm.display.viewTo){cm.state.highlight.set(time,bind(highlightWorker,cm))}}function highlightWorker(cm){var doc=cm.doc;if(doc.highlightFrontier>=cm.display.viewTo){return}var end= +new Date()+cm.options.workTime;var context=getContextBefore(cm,doc.highlightFrontier);var changedLines=[];doc.iter(context.line,Math.min(doc.first+doc.size,cm.display.viewTo+500),function(line){if(context.line>=cm.display.viewFrom){var oldStyles=line.styles;var resetState=line.text.length>cm.options.maxHighlightLength?copyState(doc.mode,context.state):null;var highlighted=highlightLine(cm,line,context,true);if(resetState){context.state=resetState}line.styles=highlighted.styles;var oldCls=line.styleClasses,newCls=highlighted.classes;if(newCls){line.styleClasses=newCls}else if(oldCls){line.styleClasses=null}var ischange=!oldStyles||oldStyles.length!=line.styles.length||oldCls!=newCls&&(!oldCls||!newCls||oldCls.bgClass!=newCls.bgClass||oldCls.textClass!=newCls.textClass);for(var i=0;!ischange&&i<oldStyles.length;i+=1){ischange=oldStyles[i]!=line.styles[i]}if(ischange){changedLines.push(context.line)}line.stateAfter=context.save();context.nextLine()}else{if(line.text.length<=cm.options.maxHighlightLength){processLine(cm,line.text,context)}line.stateAfter=context.line%5==0?context.save():null;context.nextLine()}if(+new Date()>end){startWorker(cm,cm.options.workDelay);return true}});doc.highlightFrontier=context.line;doc.modeFrontier=Math.max(doc.modeFrontier,context.line);if(changedLines.length){runInOp(cm,function(){for(var i=0;i<changedLines.length;i+=1){regLineChange(cm,changedLines[i],"text")}})}}var DisplayUpdate=function DisplayUpdate(cm,viewport,force){var display=cm.display;this.viewport=viewport;this.visible=visibleLines(display,cm.doc,viewport);this.editorIsHidden=!display.wrapper.offsetWidth;this.wrapperHeight=display.wrapper.clientHeight;this.wrapperWidth=display.wrapper.clientWidth;this.oldDisplayWidth=displayWidth(cm);this.force=force;this.dims=getDimensions(cm);this.events=[]};DisplayUpdate.prototype.signal=function(emitter,type){if(hasHandler(emitter,type)){this.events.push(arguments)}};DisplayUpdate.prototype.finish=function(){for(var i=0;i<this.events.length;i+=1){signal.apply(null,this.events[i])}};function maybeClipScrollbars(cm){var display=cm.display;if(!display.scrollbarsClipped&&display.scroller.offsetWidth){display.nativeBarWidth=display.scroller.offsetWidth-display.scroller.clientWidth;display.heightForcer.style.height=scrollGap(cm)+"px";display.sizer.style.marginBottom= -display.nativeBarWidth+"px";display.sizer.style.borderRightWidth=scrollGap(cm)+"px";display.scrollbarsClipped=true}}function selectionSnapshot(cm){if(cm.hasFocus()){return null}var active=activeElt();if(!active||!contains(cm.display.lineDiv,active)){return null}var result={activeElt:active};if(window.getSelection){var sel=window.getSelection();if(sel.anchorNode&&sel.extend&&contains(cm.display.lineDiv,sel.anchorNode)){result.anchorNode=sel.anchorNode;result.anchorOffset=sel.anchorOffset;result.focusNode=sel.focusNode;result.focusOffset=sel.focusOffset}}return result}function restoreSelection(snapshot){if(!snapshot||!snapshot.activeElt||snapshot.activeElt==activeElt()){return}snapshot.activeElt.focus();if(snapshot.anchorNode&&contains(document.body,snapshot.anchorNode)&&contains(document.body,snapshot.focusNode)){var sel=window.getSelection(),range=document.createRange();range.setEnd(snapshot.anchorNode,snapshot.anchorOffset);range.collapse(false);sel.removeAllRanges();sel.addRange(range);sel.extend(snapshot.focusNode,snapshot.focusOffset)}}function updateDisplayIfNeeded(cm,update){var display=cm.display,doc=cm.doc;if(update.editorIsHidden){resetView(cm);return false}if(!update.force&&update.visible.from>=display.viewFrom&&update.visible.to<=display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)&&display.renderedView==display.view&&countDirtyView(cm)==0){return false}if(maybeUpdateLineNumberWidth(cm)){resetView(cm);update.dims=getDimensions(cm)}var end=doc.first+doc.size;var from=Math.max(update.visible.from-cm.options.viewportMargin,doc.first);var to=Math.min(end,update.visible.to+cm.options.viewportMargin);if(display.viewFrom<from&&from-display.viewFrom<20){from=Math.max(doc.first,display.viewFrom)}if(display.viewTo>to&&display.viewTo-to<20){to=Math.min(end,display.viewTo)}if(sawCollapsedSpans){from=visualLineNo(cm.doc,from);to=visualLineEndNo(cm.doc,to)}var different=from!=display.viewFrom||to!=display.viewTo||display.lastWrapHeight!=update.wrapperHeight||display.lastWrapWidth!=update.wrapperWidth;adjustView(cm,from,to);display.viewOffset=_heightAtLine(getLine(cm.doc,display.viewFrom));cm.display.mover.style.top=display.viewOffset+"px";var toUpdate=countDirtyView(cm);if(!different&&toUpdate==0&&!update.force&&display.renderedView==display.view&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)){return false}var selSnapshot=selectionSnapshot(cm);if(toUpdate>4){display.lineDiv.style.display="none"}patchDisplay(cm,display.updateLineNumbers,update.dims);if(toUpdate>4){display.lineDiv.style.display=""}display.renderedView=display.view;restoreSelection(selSnapshot);removeChildren(display.cursorDiv);removeChildren(display.selectionDiv);display.gutters.style.height=display.sizer.style.minHeight=0;if(different){display.lastWrapHeight=update.wrapperHeight;display.lastWrapWidth=update.wrapperWidth;startWorker(cm,400)}display.updateLineNumbers=null;return true}function postUpdateDisplay(cm,update){var viewport=update.viewport;for(var first=true;;first=false){if(!first||!cm.options.lineWrapping||update.oldDisplayWidth==displayWidth(cm)){if(viewport&&viewport.top!=null){viewport={top:Math.min(cm.doc.height+paddingVert(cm.display)-displayHeight(cm),viewport.top)}}update.visible=visibleLines(cm.display,cm.doc,viewport);if(update.visible.from>=cm.display.viewFrom&&update.visible.to<=cm.display.viewTo){break}}else if(first){update.visible=visibleLines(cm.display,cm.doc,viewport)}if(!updateDisplayIfNeeded(cm,update)){break}updateHeightsInViewport(cm);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure);update.force=false}update.signal(cm,"update",cm);if(cm.display.viewFrom!=cm.display.reportedViewFrom||cm.display.viewTo!=cm.display.reportedViewTo){update.signal(cm,"viewportChange",cm,cm.display.viewFrom,cm.display.viewTo);cm.display.reportedViewFrom=cm.display.viewFrom;cm.display.reportedViewTo=cm.display.viewTo}}function updateDisplaySimple(cm,viewport){var update=new DisplayUpdate(cm,viewport);if(updateDisplayIfNeeded(cm,update)){updateHeightsInViewport(cm);postUpdateDisplay(cm,update);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure);update.finish()}}function patchDisplay(cm,updateNumbersFrom,dims){var display=cm.display,lineNumbers=cm.options.lineNumbers;var container=display.lineDiv,cur=container.firstChild;function rm(node){var next=node.nextSibling;if(webkit&&mac&&cm.display.currentWheelTarget==node){node.style.display="none"}else{node.parentNode.removeChild(node)}return next}var view=display.view,lineN=display.viewFrom;for(var i=0;i<view.length;i+=1){var lineView=view[i];if(lineView.hidden){};else if(!lineView.node||lineView.node.parentNode!=container){var node=buildLineElement(cm,lineView,lineN,dims);container.insertBefore(node,cur)}else{while(cur!=lineView.node){cur=rm(cur)}var updateNumber=lineNumbers&&updateNumbersFrom!=null&&updateNumbersFrom<=lineN&&lineView.lineNumber;if(lineView.changes){if(indexOf(lineView.changes,"gutter")>-1){updateNumber=false}updateLineForChanges(cm,lineView,lineN,dims)}if(updateNumber){removeChildren(lineView.lineNumber);lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options,lineN)))}cur=lineView.node.nextSibling}lineN+=lineView.size}while(cur){cur=rm(cur)}}function updateGutterSpace(display){var width=display.gutters.offsetWidth;display.sizer.style.marginLeft=width+"px"}function setDocumentHeight(cm,measure){cm.display.sizer.style.minHeight=measure.docHeight+"px";cm.display.heightForcer.style.top=measure.docHeight+"px";cm.display.gutters.style.height=measure.docHeight+cm.display.barHeight+scrollGap(cm)+"px"}function alignHorizontally(cm){var display=cm.display,view=display.view;if(!display.alignWidgets&&(!display.gutters.firstChild||!cm.options.fixedGutter)){return}var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft;var gutterW=display.gutters.offsetWidth,left=comp+"px";for(var i=0;i<view.length;i+=1){if(!view[i].hidden){if(cm.options.fixedGutter){if(view[i].gutter){view[i].gutter.style.left=left}if(view[i].gutterBackground){view[i].gutterBackground.style.left=left}}var align=view[i].alignable;if(align){for(var j=0;j<align.length;j+=1){align[j].style.left=left}}}}if(cm.options.fixedGutter){display.gutters.style.left=comp+gutterW+"px"}}function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers){return false}var doc=cm.doc,last=lineNumberFor(cm.options,doc.first+doc.size-1),display=cm.display;if(last.length!=display.lineNumChars){var test=display.measure.appendChild(elt("div",[elt("div",last)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var innerW=test.firstChild.offsetWidth,padding=test.offsetWidth-innerW;display.lineGutter.style.width="";display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-padding)+1;display.lineNumWidth=display.lineNumInnerWidth+padding;display.lineNumChars=display.lineNumInnerWidth?last.length:-1;display.lineGutter.style.width=display.lineNumWidth+"px";updateGutterSpace(cm.display);return true}return false}function getGutters(gutters,lineNumbers){var result=[],sawLineNumbers=false;for(var i=0;i<gutters.length;i+=1){var name=gutters[i],style=null;if(typeof name!="string"){style=name.style;name=name.className}if(name=="CodeMirror-linenumbers"){if(!lineNumbers){continue}else{sawLineNumbers=true}}result.push({className:name,style:style})}if(lineNumbers&&!sawLineNumbers){result.push({className:"CodeMirror-linenumbers",style:null})}return result}function renderGutters(display){var gutters=display.gutters,specs=display.gutterSpecs;removeChildren(gutters);display.lineGutter=null;for(var i=0;i<specs.length;i+=1){var ref=specs[i];var className=ref.className;var style=ref.style;var gElt=gutters.appendChild(elt("div",null,"CodeMirror-gutter "+className));if(style){gElt.style.cssText=style}if(className=="CodeMirror-linenumbers"){display.lineGutter=gElt;gElt.style.width=(display.lineNumWidth||1)+"px"}}gutters.style.display=specs.length?"":"none";updateGutterSpace(display)}function updateGutters(cm){renderGutters(cm.display);regChange(cm);alignHorizontally(cm)}function Display(place,doc,input,options){var d=this;this.input=input;d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler");d.scrollbarFiller.setAttribute("cm-not-content","true");d.gutterFiller=elt("div",null,"CodeMirror-gutter-filler");d.gutterFiller.setAttribute("cm-not-content","true");d.lineDiv=eltP("div",null,"CodeMirror-code");d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1");d.cursorDiv=elt("div",null,"CodeMirror-cursors");d.measure=elt("div",null,"CodeMirror-measure");d.lineMeasure=elt("div",null,"CodeMirror-measure");d.lineSpace=eltP("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");var lines=eltP("div",[d.lineSpace],"CodeMirror-lines");d.mover=elt("div",[lines],null,"position: relative");d.sizer=elt("div",[d.mover],"CodeMirror-sizer");d.sizerWidth=null;d.heightForcer=elt("div",null,null,"position: absolute; height: "+scrollerGap+"px; width: 1px;");d.gutters=elt("div",null,"CodeMirror-gutters");d.lineGutter=null;d.scroller=elt("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=elt("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror");if(ie&&ie_version<8){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0}if(!webkit&&!(gecko&&mobile)){d.scroller.draggable=true}if(place){if(place.appendChild){place.appendChild(d.wrapper)}else{place(d.wrapper)}}d.viewFrom=d.viewTo=doc.first;d.reportedViewFrom=d.reportedViewTo=doc.first;d.view=[];d.renderedView=null;d.externalMeasured=null;d.viewOffset=0;d.lastWrapHeight=d.lastWrapWidth=0;d.updateLineNumbers=null;d.nativeBarWidth=d.barHeight=d.barWidth=0;d.scrollbarsClipped=false;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.alignWidgets=false;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.maxLine=null;d.maxLineLength=0;d.maxLineChanged=false;d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null;d.shift=false;d.selForContextMenu=null;d.activeTouch=null;d.gutterSpecs=getGutters(options.gutters,options.lineNumbers);renderGutters(d);input.init(d)}var wheelSamples=0,wheelPixelsPerUnit=null;if(ie){wheelPixelsPerUnit=-.53}else if(gecko){wheelPixelsPerUnit=15}else if(chrome){wheelPixelsPerUnit=-.7}else if(safari){wheelPixelsPerUnit=-1/3}function wheelEventDelta(e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;if(dx==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS){dx=e.detail}if(dy==null&&e.detail&&e.axis==e.VERTICAL_AXIS){dy=e.detail}else if(dy==null){dy=e.wheelDelta}return{x:dx,y:dy}}function wheelEventPixels(e){var delta=wheelEventDelta(e);delta.x*=wheelPixelsPerUnit;delta.y*=wheelPixelsPerUnit;return delta}function onScrollWheel(cm,e){var delta=wheelEventDelta(e),dx=delta.x,dy=delta.y;var display=cm.display,scroll=display.scroller;var canScrollX=scroll.scrollWidth>scroll.clientWidth;var canScrollY=scroll.scrollHeight>scroll.clientHeight;if(!(dx&&canScrollX||dy&&canScrollY)){return}if(dy&&mac&&webkit){outer:for(var cur=e.target,view=display.view;cur!=scroll;cur=cur.parentNode){for(var i=0;i<view.length;i+=1){if(view[i].node==cur){cm.display.currentWheelTarget=cur;break outer}}}}if(dx&&!gecko&&!presto&&wheelPixelsPerUnit!=null){if(dy&&canScrollY){updateScrollTop(cm,Math.max(0,scroll.scrollTop+dy*wheelPixelsPerUnit))}setScrollLeft(cm,Math.max(0,scroll.scrollLeft+dx*wheelPixelsPerUnit));if(!dy||dy&&canScrollY){e_preventDefault(e)}display.wheelStartX=null;return}if(dy&&wheelPixelsPerUnit!=null){var pixels=dy*wheelPixelsPerUnit;var top=cm.doc.scrollTop,bot=top+display.wrapper.clientHeight;if(pixels<0){top=Math.max(0,top+pixels-50)}else{bot=Math.min(cm.doc.height,bot+pixels+50)}updateDisplaySimple(cm,{top:top,bottom:bot})}if(wheelSamples<20){if(display.wheelStartX==null){display.wheelStartX=scroll.scrollLeft;display.wheelStartY=scroll.scrollTop;display.wheelDX=dx;display.wheelDY=dy;setTimeout(function(){if(display.wheelStartX==null){return}var movedX=scroll.scrollLeft-display.wheelStartX;var movedY=scroll.scrollTop-display.wheelStartY;var sample=movedY&&display.wheelDY&&movedY/display.wheelDY||movedX&&display.wheelDX&&movedX/display.wheelDX;display.wheelStartX=display.wheelStartY=null;if(!sample){return}wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+sample)/(wheelSamples+1);wheelSamples+=1},200)}else{display.wheelDX+=dx;display.wheelDY+=dy}}}var Selection=function Selection(ranges,primIndex){this.ranges=ranges;this.primIndex=primIndex};Selection.prototype.primary=function(){return this.ranges[this.primIndex]};Selection.prototype.equals=function(other){if(other==this){return true}if(other.primIndex!=this.primIndex||other.ranges.length!=this.ranges.length){return false}for(var i=0;i<this.ranges.length;i+=1){var here=this.ranges[i],there=other.ranges[i];if(!equalCursorPos(here.anchor,there.anchor)||!equalCursorPos(here.head,there.head)){return false}}return true};Selection.prototype.deepCopy=function(){var out=[];for(var i=0;i<this.ranges.length;i+=1){out[i]=new Range(copyPos(this.ranges[i].anchor),copyPos(this.ranges[i].head))}return new Selection(out,this.primIndex)};Selection.prototype.somethingSelected=function(){for(var i=0;i<this.ranges.length;i+=1){if(!this.ranges[i].empty()){return true}}return false};Selection.prototype.contains=function(pos,end){if(!end){end=pos}for(var i=0;i<this.ranges.length;i+=1){var range=this.ranges[i];if(cmp(end,range.from())>=0&&cmp(pos,range.to())<=0){return i}}return -1};var Range=function Range(anchor,head){this.anchor=anchor;this.head=head};Range.prototype.from=function(){return minPos(this.anchor,this.head)};Range.prototype.to=function(){return maxPos(this.anchor,this.head)};Range.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function normalizeSelection(cm,ranges,primIndex){var mayTouch=cm&&cm.options.selectionsMayTouch;var prim=ranges[primIndex];ranges.sort(function(a,b){return cmp(a.from(),b.from())});primIndex=indexOf(ranges,prim);for(var i=1;i<ranges.length;i+=1){var cur=ranges[i],prev=ranges[i-1];var diff=cmp(prev.to(),cur.from());if(mayTouch&&!cur.empty()?diff>0:diff>=0){var from=minPos(prev.from(),cur.from()),to=maxPos(prev.to(),cur.to());var inv=prev.empty()?cur.from()==cur.head:prev.from()==prev.head;if(i<=primIndex){primIndex-=1}ranges.splice(i-=1,2,new Range(inv?to:from,inv?from:to))}}return new Selection(ranges,primIndex)}function simpleSelection(anchor,head){return new Selection([new Range(anchor,head||anchor)],0)}function changeEnd(change){if(!change.text){return change.to}return Pos(change.from.line+change.text.length-1,lst(change.text).length+(change.text.length==1?change.from.ch:0))}function adjustForChange(pos,change){if(cmp(pos,change.from)<0){return pos}if(cmp(pos,change.to)<=0){return changeEnd(change)}var line=pos.line+change.text.length-(change.to.line-change.from.line)-1,ch=pos.ch;if(pos.line==change.to.line){ch+=changeEnd(change).ch-change.to.ch}return Pos(line,ch)}function computeSelAfterChange(doc,change){var out=[];for(var i=0;i<doc.sel.ranges.length;i+=1){var range=doc.sel.ranges[i];out.push(new Range(adjustForChange(range.anchor,change),adjustForChange(range.head,change)))}return normalizeSelection(doc.cm,out,doc.sel.primIndex)}function offsetPos(pos,old,nw){if(pos.line==old.line){return Pos(nw.line,pos.ch-old.ch+nw.ch)}else{return Pos(nw.line+(pos.line-old.line),pos.ch)}}function computeReplacedSel(doc,changes,hint){var out=[];var oldPrev=Pos(doc.first,0),newPrev=oldPrev;for(var i=0;i<changes.length;i+=1){var change=changes[i];var from=offsetPos(change.from,oldPrev,newPrev);var to=offsetPos(changeEnd(change),oldPrev,newPrev);oldPrev=change.to;newPrev=to;if(hint=="around"){var range=doc.sel.ranges[i],inv=cmp(range.head,range.anchor)<0;out[i]=new Range(inv?to:from,inv?from:to)}else{out[i]=new Range(from,from)}}return new Selection(out,doc.sel.primIndex)}function loadMode(cm){cm.doc.mode=getMode(cm.options,cm.doc.modeOption);resetModeState(cm)}function resetModeState(cm){cm.doc.iter(function(line){if(line.stateAfter){line.stateAfter=null}if(line.styles){line.styles=null}});cm.doc.modeFrontier=cm.doc.highlightFrontier=cm.doc.first;startWorker(cm,100);cm.state.modeGen+=1;if(cm.curOp){regChange(cm)}}function isWholeLineUpdate(doc,change){return change.from.ch==0&&change.to.ch==0&&lst(change.text)==""&&(!doc.cm||doc.cm.options.wholeLineUpdateBefore)}function updateDoc(doc,change,markedSpans,estimateHeight){function spansFor(n){return markedSpans?markedSpans[n]:null}function update(line,text,spans){updateLine(line,text,spans,estimateHeight);signalLater(line,"change",line,change)}function linesFor(start,end){var result=[];for(var i=start;i<end;i+=1){result.push(new Line(text[i],spansFor(i),estimateHeight))}return result}var from=change.from,to=change.to,text=change.text;var firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line);var lastText=lst(text),lastSpans=spansFor(text.length-1),nlines=to.line-from.line;if(change.full){doc.insert(0,linesFor(0,text.length));doc.remove(text.length,doc.size-text.length)}else if(isWholeLineUpdate(doc,change)){var added=linesFor(0,text.length-1);update(lastLine,lastLine.text,lastSpans);if(nlines){doc.remove(from.line,nlines)}if(added.length){doc.insert(from.line,added)}}else if(firstLine==lastLine){if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans)}else{var added$1=linesFor(1,text.length-1);added$1.push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight));update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));doc.insert(from.line+1,added$1)}}else if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+text[0]+lastLine.text.slice(to.ch),spansFor(0));doc.remove(from.line+1,nlines)}else{update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans);var added$2=linesFor(1,text.length-1);if(nlines>1){doc.remove(from.line+1,nlines-1)}doc.insert(from.line+1,added$2)}signalLater(doc,"change",doc,change)}function linkedDocs(doc,f,sharedHistOnly){function propagate(doc,skip,sharedHist){if(doc.linked){for(var i=0;i<doc.linked.length;i+=1){var rel=doc.linked[i];if(rel.doc==skip){continue}var shared=sharedHist&&rel.sharedHist;if(sharedHistOnly&&!shared){continue}f(rel.doc,shared);propagate(rel.doc,doc,shared)}}}propagate(doc,null,true)}function attachDoc(cm,doc){if(doc.cm){throw new Error("This document is already in use.")}cm.doc=doc;doc.cm=cm;estimateLineHeights(cm);loadMode(cm);setDirectionClass(cm);if(!cm.options.lineWrapping){findMaxLine(cm)}cm.options.mode=doc.modeOption;regChange(cm)}function setDirectionClass(cm){(cm.doc.direction=="rtl"?addClass:rmClass)(cm.display.lineDiv,"CodeMirror-rtl")}function directionChanged(cm){runInOp(cm,function(){setDirectionClass(cm);regChange(cm)})}function History(startGen){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=startGen||1}function historyChangeFromChange(doc,change){var histChange={from:copyPos(change.from),to:changeEnd(change),text:getBetween(doc,change.from,change.to)};attachLocalSpans(doc,histChange,change.from.line,change.to.line+1);linkedDocs(doc,function(doc){return attachLocalSpans(doc,histChange,change.from.line,change.to.line+1)},true);return histChange}function clearSelectionEvents(array){while(array.length){var last=lst(array);if(last.ranges){array.pop()}else{break}}}function lastChangeEvent(hist,force){if(force){clearSelectionEvents(hist.done);return lst(hist.done)}else if(hist.done.length&&!lst(hist.done).ranges){return lst(hist.done)}else if(hist.done.length>1&&!hist.done[hist.done.length-2].ranges){hist.done.pop();return lst(hist.done)}}function addChangeToHistory(doc,change,selAfter,opId){var hist=doc.history;hist.undone.length=0;var time= +new Date(),cur;var last;if((hist.lastOp==opId||hist.lastOrigin==change.origin&&change.origin&&(change.origin.charAt(0)=="+"&&hist.lastModTime>time-(doc.cm?doc.cm.options.historyEventDelay:500)||change.origin.charAt(0)=="*"))&&(cur=lastChangeEvent(hist,hist.lastOp==opId))){last=lst(cur.changes);if(cmp(change.from,change.to)==0&&cmp(change.from,last.to)==0){last.to=changeEnd(change)}else{cur.changes.push(historyChangeFromChange(doc,change))}}else{var before=lst(hist.done);if(!before||!before.ranges){pushSelectionToHistory(doc.sel,hist.done)}cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation};hist.done.push(cur);while(hist.done.length>hist.undoDepth){hist.done.shift();if(!hist.done[0].ranges){hist.done.shift()}}}hist.done.push(selAfter);hist.generation= ++hist.maxGeneration;hist.lastModTime=hist.lastSelTime=time;hist.lastOp=hist.lastSelOp=opId;hist.lastOrigin=hist.lastSelOrigin=change.origin;if(!last){signal(doc,"historyAdded")}}function selectionEventCanBeMerged(doc,origin,prev,sel){var ch=origin.charAt(0);return ch=="*"||ch=="+"&&prev.ranges.length==sel.ranges.length&&prev.somethingSelected()==sel.somethingSelected()&&new Date()-doc.history.lastSelTime<=(doc.cm?doc.cm.options.historyEventDelay:500)}function addSelectionToHistory(doc,sel,opId,options){var hist=doc.history,origin=options&&options.origin;if(opId==hist.lastSelOp||origin&&hist.lastSelOrigin==origin&&(hist.lastModTime==hist.lastSelTime&&hist.lastOrigin==origin||selectionEventCanBeMerged(doc,origin,lst(hist.done),sel))){hist.done[hist.done.length-1]=sel}else{pushSelectionToHistory(sel,hist.done)}hist.lastSelTime= +new Date();hist.lastSelOrigin=origin;hist.lastSelOp=opId;if(options&&options.clearRedo!==false){clearSelectionEvents(hist.undone)}}function pushSelectionToHistory(sel,dest){var top=lst(dest);if(!(top&&top.ranges&&top.equals(sel))){dest.push(sel)}}function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){if(line.markedSpans){(existing||(existing=change["spans_"+doc.id]={}))[n]=line.markedSpans}n+=1})}function removeClearedSpans(spans){if(!spans){return null}var out;for(var i=0;i<spans.length;i+=1){if(spans[i].marker.explicitlyCleared){if(!out){out=spans.slice(0,i)}}else if(out){out.push(spans[i])}}return!out?spans:out.length?out:null}function getOldSpans(doc,change){var found=change["spans_"+doc.id];if(!found){return null}var nw=[];for(var i=0;i<change.text.length;i+=1){nw.push(removeClearedSpans(found[i]))}return nw}function mergeOldSpans(doc,change){var old=getOldSpans(doc,change);var stretched=stretchSpansOverChange(doc,change);if(!old){return stretched}if(!stretched){return old}for(var i=0;i<old.length;i+=1){var oldCur=old[i],stretchCur=stretched[i];if(oldCur&&stretchCur){spans:for(var j=0;j<stretchCur.length;j+=1){var span=stretchCur[j];for(var k=0;k<oldCur.length;k+=1){if(oldCur[k].marker==span.marker){continue spans}}oldCur.push(span)}}else if(stretchCur){old[i]=stretchCur}}return old}function copyHistoryArray(events,newGroup,instantiateSel){var copy=[];for(var i=0;i<events.length;i+=1){var event=events[i];if(event.ranges){copy.push(instantiateSel?Selection.prototype.deepCopy.call(event):event);continue}var changes=event.changes,newChanges=[];copy.push({changes:newChanges});for(var j=0;j<changes.length;j+=1){var change=changes[j],m=void 0;newChanges.push({from:change.from,to:change.to,text:change.text});if(newGroup){for(var prop in change){if(m=prop.match(/^spans_(\d+)$/)){if(indexOf(newGroup,Number(m[1]))>-1){lst(newChanges)[prop]=change[prop];delete change[prop]}}}}}}return copy}function extendRange(range,head,other,extend){if(extend){var anchor=range.anchor;if(other){var posBefore=cmp(head,anchor)<0;if(posBefore!=cmp(other,anchor)<0){anchor=head;head=other}else if(posBefore!=cmp(head,other)<0){head=other}}return new Range(anchor,head)}else{return new Range(other||head,head)}}function extendSelection(doc,head,other,options,extend){if(extend==null){extend=doc.cm&&(doc.cm.display.shift||doc.extend)}setSelection(doc,new Selection([extendRange(doc.sel.primary(),head,other,extend)],0),options)}function extendSelections(doc,heads,options){var out=[];var extend=doc.cm&&(doc.cm.display.shift||doc.extend);for(var i=0;i<doc.sel.ranges.length;i+=1){out[i]=extendRange(doc.sel.ranges[i],heads[i],null,extend)}var newSel=normalizeSelection(doc.cm,out,doc.sel.primIndex);setSelection(doc,newSel,options)}function replaceOneSelection(doc,i,range,options){var ranges=doc.sel.ranges.slice(0);ranges[i]=range;setSelection(doc,normalizeSelection(doc.cm,ranges,doc.sel.primIndex),options)}function setSimpleSelection(doc,anchor,head,options){setSelection(doc,simpleSelection(anchor,head),options)}function filterSelectionChange(doc,sel,options){var obj={ranges:sel.ranges,update:function update(ranges){this.ranges=[];for(var i=0;i<ranges.length;i+=1){this.ranges[i]=new Range(_clipPos(doc,ranges[i].anchor),_clipPos(doc,ranges[i].head))}},origin:options&&options.origin};signal(doc,"beforeSelectionChange",doc,obj);if(doc.cm){signal(doc.cm,"beforeSelectionChange",doc.cm,obj)}if(obj.ranges!=sel.ranges){return normalizeSelection(doc.cm,obj.ranges,obj.ranges.length-1)}else{return sel}}function setSelectionReplaceHistory(doc,sel,options){var done=doc.history.done,last=lst(done);if(last&&last.ranges){done[done.length-1]=sel;setSelectionNoUndo(doc,sel,options)}else{setSelection(doc,sel,options)}}function setSelection(doc,sel,options){setSelectionNoUndo(doc,sel,options);addSelectionToHistory(doc,doc.sel,doc.cm?doc.cm.curOp.id:NaN,options)}function setSelectionNoUndo(doc,sel,options){if(hasHandler(doc,"beforeSelectionChange")||doc.cm&&hasHandler(doc.cm,"beforeSelectionChange")){sel=filterSelectionChange(doc,sel,options)}var bias=options&&options.bias||(cmp(sel.primary().head,doc.sel.primary().head)<0?-1:1);setSelectionInner(doc,skipAtomicInSelection(doc,sel,bias,true));if(!(options&&options.scroll===false)&&doc.cm){ensureCursorVisible(doc.cm)}}function setSelectionInner(doc,sel){if(sel.equals(doc.sel)){return}doc.sel=sel;if(doc.cm){doc.cm.curOp.updateInput=1;doc.cm.curOp.selectionChanged=true;signalCursorActivity(doc.cm)}signalLater(doc,"cursorActivity",doc)}function reCheckSelection(doc){setSelectionInner(doc,skipAtomicInSelection(doc,doc.sel,null,false))}function skipAtomicInSelection(doc,sel,bias,mayClear){var out;for(var i=0;i<sel.ranges.length;i+=1){var range=sel.ranges[i];var old=sel.ranges.length==doc.sel.ranges.length&&doc.sel.ranges[i];var newAnchor=skipAtomic(doc,range.anchor,old&&old.anchor,bias,mayClear);var newHead=skipAtomic(doc,range.head,old&&old.head,bias,mayClear);if(out||newAnchor!=range.anchor||newHead!=range.head){if(!out){out=sel.ranges.slice(0,i)}out[i]=new Range(newAnchor,newHead)}}return out?normalizeSelection(doc.cm,out,sel.primIndex):sel}function skipAtomicInner(doc,pos,oldPos,dir,mayClear){var line=getLine(doc,pos.line);if(line.markedSpans){for(var i=0;i<line.markedSpans.length;i+=1){var sp=line.markedSpans[i],m=sp.marker;var preventCursorLeft="selectLeft"in m?!m.selectLeft:m.inclusiveLeft;var preventCursorRight="selectRight"in m?!m.selectRight:m.inclusiveRight;if((sp.from==null||(preventCursorLeft?sp.from<=pos.ch:sp.from<pos.ch))&&(sp.to==null||(preventCursorRight?sp.to>=pos.ch:sp.to>pos.ch))){if(mayClear){signal(m,"beforeCursorEnter");if(m.explicitlyCleared){if(!line.markedSpans){break}else{i-=1;continue}}}if(!m.atomic){continue}if(oldPos){var near=m.find(dir<0?1:-1),diff=void 0;if(dir<0?preventCursorRight:preventCursorLeft){near=movePos(doc,near,-dir,near&&near.line==pos.line?line:null)}if(near&&near.line==pos.line&&(diff=cmp(near,oldPos))&&(dir<0?diff<0:diff>0)){return skipAtomicInner(doc,near,pos,dir,mayClear)}}var far=m.find(dir<0?-1:1);if(dir<0?preventCursorLeft:preventCursorRight){far=movePos(doc,far,dir,far.line==pos.line?line:null)}return far?skipAtomicInner(doc,far,pos,dir,mayClear):null}}}return pos}function skipAtomic(doc,pos,oldPos,bias,mayClear){var dir=bias||1;var found=skipAtomicInner(doc,pos,oldPos,dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,dir,true)||skipAtomicInner(doc,pos,oldPos,-dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,-dir,true);if(!found){doc.cantEdit=true;return Pos(doc.first,0)}return found}function movePos(doc,pos,dir,line){if(dir<0&&pos.ch==0){if(pos.line>doc.first){return _clipPos(doc,Pos(pos.line-1))}else{return null}}else if(dir>0&&pos.ch==(line||getLine(doc,pos.line)).text.length){if(pos.line<doc.first+doc.size-1){return Pos(pos.line+1,0)}else{return null}}else{return new Pos(pos.line,pos.ch+dir)}}function selectAll(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()),sel_dontScroll)}function filterChange(doc,change,update){var obj={canceled:false,from:change.from,to:change.to,text:change.text,origin:change.origin,cancel:function cancel(){return obj.canceled=true}};if(update){obj.update=function(from,to,text,origin){if(from){obj.from=_clipPos(doc,from)}if(to){obj.to=_clipPos(doc,to)}if(text){obj.text=text}if(origin!==undefined){obj.origin=origin}}}signal(doc,"beforeChange",doc,obj);if(doc.cm){signal(doc.cm,"beforeChange",doc.cm,obj)}if(obj.canceled){if(doc.cm){doc.cm.curOp.updateInput=2}return null}return{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin}}function makeChange(doc,change,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp){return operation(doc.cm,makeChange)(doc,change,ignoreReadOnly)}if(doc.cm.state.suppressEdits){return}}if(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange")){change=filterChange(doc,change,true);if(!change){return}}var split=sawReadOnlySpans&&!ignoreReadOnly&&removeReadOnlyRanges(doc,change.from,change.to);if(split){for(var i=split.length-1;i>=0;i-=1){makeChangeInner(doc,{from:split[i].from,to:split[i].to,text:i?[""]:change.text,origin:change.origin})}}else{makeChangeInner(doc,change)}}function makeChangeInner(doc,change){if(change.text.length==1&&change.text[0]==""&&cmp(change.from,change.to)==0){return}var selAfter=computeSelAfterChange(doc,change);addChangeToHistory(doc,change,selAfter,doc.cm?doc.cm.curOp.id:NaN);makeChangeSingleDoc(doc,change,selAfter,stretchSpansOverChange(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change))})}function makeChangeFromHistory(doc,type,allowSelectionOnly){var suppress=doc.cm&&doc.cm.state.suppressEdits;if(suppress&&!allowSelectionOnly){return}var hist=doc.history,event,selAfter=doc.sel;var source=type=="undo"?hist.done:hist.undone,dest=type=="undo"?hist.undone:hist.done;var i=0;for(;i<source.length;i+=1){event=source[i];if(allowSelectionOnly?event.ranges&&!event.equals(doc.sel):!event.ranges){break}}if(i==source.length){return}hist.lastOrigin=hist.lastSelOrigin=null;for(;;){event=source.pop();if(event.ranges){pushSelectionToHistory(event,dest);if(allowSelectionOnly&&!event.equals(doc.sel)){setSelection(doc,event,{clearRedo:false});return}selAfter=event}else if(suppress){source.push(event);return}else{break}}var antiChanges=[];pushSelectionToHistory(selAfter,dest);dest.push({changes:antiChanges,generation:hist.generation});hist.generation=event.generation|| ++hist.maxGeneration;var filter=hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange");var loop=function loop(i){var change=event.changes[i];change.origin=type;if(filter&&!filterChange(doc,change,false)){source.length=0;return{}}antiChanges.push(historyChangeFromChange(doc,change));var after=i?computeSelAfterChange(doc,change):lst(source);makeChangeSingleDoc(doc,change,after,mergeOldSpans(doc,change));if(!i&&doc.cm){doc.cm.scrollIntoView({from:change.from,to:changeEnd(change)})}var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change))})};for(var i$1=event.changes.length-1;i$1>=0;i$1-=1){var returned=loop(i$1);if(returned){return returned.v}}}function shiftDoc(doc,distance){if(distance==0){return}doc.first+=distance;doc.sel=new Selection(map(doc.sel.ranges,function(range){return new Range(Pos(range.anchor.line+distance,range.anchor.ch),Pos(range.head.line+distance,range.head.ch))}),doc.sel.primIndex);if(doc.cm){regChange(doc.cm,doc.first,doc.first-distance,distance);for(var d=doc.cm.display,l=d.viewFrom;l<d.viewTo;l+=1){regLineChange(doc.cm,l,"gutter")}}}function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp){return operation(doc.cm,makeChangeSingleDoc)(doc,change,selAfter,spans)}if(change.to.line<doc.first){shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));return}if(change.from.line>doc.lastLine()){return}if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift);change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin}}var last=doc.lastLine();if(change.to.line>last){change={from:change.from,to:Pos(last,getLine(doc,last).text.length),text:[change.text[0]],origin:change.origin}}change.removed=getBetween(doc,change.from,change.to);if(!selAfter){selAfter=computeSelAfterChange(doc,change)}if(doc.cm){makeChangeSingleDocInEditor(doc.cm,change,spans)}else{updateDoc(doc,change,spans)}setSelectionNoUndo(doc,selAfter,sel_dontScroll);if(doc.cantEdit&&skipAtomic(doc,Pos(doc.firstLine(),0))){doc.cantEdit=false}}function makeChangeSingleDocInEditor(cm,change,spans){var doc=cm.doc,display=cm.display,from=change.from,to=change.to;var recomputeMaxLength=false,checkWidthStart=from.line;if(!cm.options.lineWrapping){checkWidthStart=lineNo(visualLine(getLine(doc,from.line)));doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine){recomputeMaxLength=true;return true}})}if(doc.sel.contains(change.from,change.to)>-1){signalCursorActivity(cm)}updateDoc(doc,change,spans,estimateHeight(cm));if(!cm.options.lineWrapping){doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(line);if(len>display.maxLineLength){display.maxLine=line;display.maxLineLength=len;display.maxLineChanged=true;recomputeMaxLength=false}});if(recomputeMaxLength){cm.curOp.updateMaxLine=true}}retreatFrontier(doc,from.line);startWorker(cm,400);var lendiff=change.text.length-(to.line-from.line)-1;if(change.full){regChange(cm)}else if(from.line==to.line&&change.text.length==1&&!isWholeLineUpdate(cm.doc,change)){regLineChange(cm,from.line,"text")}else{regChange(cm,from.line,to.line+1,lendiff)}var changesHandler=hasHandler(cm,"changes"),changeHandler=hasHandler(cm,"change");if(changeHandler||changesHandler){var obj={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin};if(changeHandler){signalLater(cm,"change",cm,obj)}if(changesHandler){(cm.curOp.changeObjs||(cm.curOp.changeObjs=[])).push(obj)}}cm.display.selForContextMenu=null}function _replaceRange(doc,code,from,to,origin){var assign;if(!to){to=from}if(cmp(to,from)<0){assign=[to,from],from=assign[0],to=assign[1]}if(typeof code=="string"){code=doc.splitLines(code)}makeChange(doc,{from:from,to:to,text:code,origin:origin})}function rebaseHistSelSingle(pos,from,to,diff){if(to<pos.line){pos.line+=diff}else if(from<pos.line){pos.line=from;pos.ch=0}}function rebaseHistArray(array,from,to,diff){for(var i=0;i<array.length;i+=1){var sub=array[i],ok=true;if(sub.ranges){if(!sub.copied){sub=array[i]=sub.deepCopy();sub.copied=true}for(var j=0;j<sub.ranges.length;j+=1){rebaseHistSelSingle(sub.ranges[j].anchor,from,to,diff);rebaseHistSelSingle(sub.ranges[j].head,from,to,diff)}continue}for(var j$1=0;j$1<sub.changes.length;j$1+=1){var cur=sub.changes[j$1];if(to<cur.from.line){cur.from=Pos(cur.from.line+diff,cur.from.ch);cur.to=Pos(cur.to.line+diff,cur.to.ch)}else if(from<=cur.to.line){ok=false;break}}if(!ok){array.splice(0,i+1);i=0}}}function rebaseHist(hist,change){var from=change.from.line,to=change.to.line,diff=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,diff);rebaseHistArray(hist.undone,from,to,diff)}function changeLine(doc,handle,changeType,op){var no=handle,line=handle;if(typeof handle=="number"){line=getLine(doc,clipLine(doc,handle))}else{no=lineNo(handle)}if(no==null){return null}if(op(line,no)&&doc.cm){regLineChange(doc.cm,no,changeType)}return line}function LeafChunk(lines){this.lines=lines;this.parent=null;var height=0;for(var i=0;i<lines.length;i+=1){lines[i].parent=this;height+=lines[i].height}this.height=height}LeafChunk.prototype={chunkSize:function chunkSize(){return this.lines.length},removeInner:function removeInner(at,n){for(var i=at,e=at+n;i<e;i+=1){var line=this.lines[i];this.height-=line.height;cleanUpLine(line);signalLater(line,"delete")}this.lines.splice(at,n)},collapse:function collapse(lines){lines.push.apply(lines,this.lines)},insertInner:function insertInner(at,lines,height){this.height+=height;this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(var i=0;i<lines.length;i+=1){lines[i].parent=this}},iterN:function iterN(at,n,op){for(var e=at+n;at<e;at+=1){if(op(this.lines[at])){return true}}}};function BranchChunk(children){this.children=children;var size=0,height=0;for(var i=0;i<children.length;i+=1){var ch=children[i];size+=ch.chunkSize();height+=ch.height;ch.parent=this}this.size=size;this.height=height;this.parent=null}BranchChunk.prototype={chunkSize:function chunkSize(){return this.size},removeInner:function removeInner(at,n){this.size-=n;for(var i=0;i<this.children.length;i+=1){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;child.removeInner(at,rm);this.height-=oldHeight-child.height;if(sz==rm){this.children.splice(i--,1);child.parent=null}if((n-=rm)==0){break}at=0}else{at-=sz}}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof LeafChunk))){var lines=[];this.collapse(lines);this.children=[new LeafChunk(lines)];this.children[0].parent=this}},collapse:function collapse(lines){for(var i=0;i<this.children.length;i+=1){this.children[i].collapse(lines)}},insertInner:function insertInner(at,lines,height){this.size+=lines.length;this.height+=height;for(var i=0;i<this.children.length;i+=1){var child=this.children[i],sz=child.chunkSize();if(at<=sz){child.insertInner(at,lines,height);if(child.lines&&child.lines.length>50){var remaining=child.lines.length%25+25;for(var pos=remaining;pos<child.lines.length;){var leaf=new LeafChunk(child.lines.slice(pos,pos+=25));child.height-=leaf.height;this.children.splice(i+=1,0,leaf);leaf.parent=this}child.lines=child.lines.slice(0,remaining);this.maybeSpill()}break}at-=sz}},maybeSpill:function maybeSpill(){if(this.children.length<=10){return}var me=this;do{var spilled=me.children.splice(me.children.length-5,5);var sibling=new BranchChunk(spilled);if(!me.parent){var copy=new BranchChunk(me.children);copy.parent=me;me.children=[copy,sibling];me=copy}else{me.size-=sibling.size;me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling)}sibling.parent=me.parent}while(me.children.length>10);me.parent.maybeSpill()},iterN:function iterN(at,n,op){for(var i=0;i<this.children.length;i+=1){var child=this.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op)){return true}if((n-=used)==0){break}at=0}else{at-=sz}}}};var LineWidget=function LineWidget(doc,node,options){if(options){for(var opt in options){if(options.hasOwnProperty(opt)){this[opt]=options[opt]}}}this.doc=doc;this.node=node};LineWidget.prototype.clear=function(){var cm=this.doc.cm,ws=this.line.widgets,line=this.line,no=lineNo(line);if(no==null||!ws){return}for(var i=0;i<ws.length;i+=1){if(ws[i]==this){ws.splice(i--,1)}}if(!ws.length){line.widgets=null}var height=widgetHeight(this);updateLineHeight(line,Math.max(0,line.height-height));if(cm){runInOp(cm,function(){adjustScrollWhenAboveVisible(cm,line,-height);regLineChange(cm,no,"widget")});signalLater(cm,"lineWidgetCleared",cm,this,no)}};LineWidget.prototype.changed=function(){var this$1=this;var oldH=this.height,cm=this.doc.cm,line=this.line;this.height=null;var diff=widgetHeight(this)-oldH;if(!diff){return}if(!lineIsHidden(this.doc,line)){updateLineHeight(line,line.height+diff)}if(cm){runInOp(cm,function(){cm.curOp.forceUpdate=true;adjustScrollWhenAboveVisible(cm,line,diff);signalLater(cm,"lineWidgetChanged",cm,this$1,lineNo(line))})}};eventMixin(LineWidget);function adjustScrollWhenAboveVisible(cm,line,diff){if(_heightAtLine(line)<(cm.curOp&&cm.curOp.scrollTop||cm.doc.scrollTop)){addToScrollTop(cm,diff)}}function addLineWidget(doc,handle,node,options){var widget=new LineWidget(doc,node,options);var cm=doc.cm;if(cm&&widget.noHScroll){cm.display.alignWidgets=true}changeLine(doc,handle,"widget",function(line){var widgets=line.widgets||(line.widgets=[]);if(widget.insertAt==null){widgets.push(widget)}else{widgets.splice(Math.min(widgets.length-1,Math.max(0,widget.insertAt)),0,widget)}widget.line=line;if(cm&&!lineIsHidden(doc,line)){var aboveVisible=_heightAtLine(line)<doc.scrollTop;updateLineHeight(line,line.height+widgetHeight(widget));if(aboveVisible){addToScrollTop(cm,widget.height)}cm.curOp.forceUpdate=true}return true});if(cm){signalLater(cm,"lineWidgetAdded",cm,widget,typeof handle=="number"?handle:lineNo(handle))}return widget}var nextMarkerId=0;var TextMarker=function TextMarker(doc,type){this.lines=[];this.type=type;this.doc=doc;this.id= ++nextMarkerId};TextMarker.prototype.clear=function(){if(this.explicitlyCleared){return}var cm=this.doc.cm,withOp=cm&&!cm.curOp;if(withOp){_startOperation(cm)}if(hasHandler(this,"clear")){var found=this.find();if(found){signalLater(this,"clear",found.from,found.to)}}var min=null,max=null;for(var i=0;i<this.lines.length;i+=1){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(cm&&!this.collapsed){regLineChange(cm,lineNo(line),"text")}else if(cm){if(span.to!=null){max=lineNo(line)}if(span.from!=null){min=lineNo(line)}}line.markedSpans=removeMarkedSpan(line.markedSpans,span);if(span.from==null&&this.collapsed&&!lineIsHidden(this.doc,line)&&cm){updateLineHeight(line,textHeight(cm.display))}}if(cm&&this.collapsed&&!cm.options.lineWrapping){for(var i$1=0;i$1<this.lines.length;i$1+=1){var visual=visualLine(this.lines[i$1]),len=lineLength(visual);if(len>cm.display.maxLineLength){cm.display.maxLine=visual;cm.display.maxLineLength=len;cm.display.maxLineChanged=true}}}if(min!=null&&cm&&this.collapsed){regChange(cm,min,max+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(cm){reCheckSelection(cm.doc)}}if(cm){signalLater(cm,"markerCleared",cm,this,min,max)}if(withOp){_endOperation(cm)}if(this.parent){this.parent.clear()}};TextMarker.prototype.find=function(side,lineObj){if(side==null&&this.type=="bookmark"){side=1}var from,to;for(var i=0;i<this.lines.length;i+=1){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(span.from!=null){from=Pos(lineObj?line:lineNo(line),span.from);if(side==-1){return from}}if(span.to!=null){to=Pos(lineObj?line:lineNo(line),span.to);if(side==1){return to}}}return from&&{from:from,to:to}};TextMarker.prototype.changed=function(){var this$1=this;var pos=this.find(-1,true),widget=this,cm=this.doc.cm;if(!pos||!cm){return}runInOp(cm,function(){var line=pos.line,lineN=lineNo(pos.line);var view=findViewForLine(cm,lineN);if(view){clearLineMeasurementCacheFor(view);cm.curOp.selectionChanged=cm.curOp.forceUpdate=true}cm.curOp.updateMaxLine=true;if(!lineIsHidden(widget.doc,line)&&widget.height!=null){var oldHeight=widget.height;widget.height=null;var dHeight=widgetHeight(widget)-oldHeight;if(dHeight){updateLineHeight(line,line.height+dHeight)}}signalLater(cm,"markerChanged",cm,this$1)})};TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;if(!op.maybeHiddenMarkers||indexOf(op.maybeHiddenMarkers,this)==-1){(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(line)};TextMarker.prototype.detachLine=function(line){this.lines.splice(indexOf(this.lines,line),1);if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;(op.maybeHiddenMarkers||(op.maybeHiddenMarkers=[])).push(this)}};eventMixin(TextMarker);function _markText(doc,from,to,options,type){if(options&&options.shared){return markTextShared(doc,from,to,options,type)}if(doc.cm&&!doc.cm.curOp){return operation(doc.cm,_markText)(doc,from,to,options,type)}var marker=new TextMarker(doc,type),diff=cmp(from,to);if(options){copyObj(options,marker,false)}if(diff>0||diff==0&&marker.clearWhenEmpty!==false){return marker}if(marker.replacedWith){marker.collapsed=true;marker.widgetNode=eltP("span",[marker.replacedWith],"CodeMirror-widget");if(!options.handleMouseEvents){marker.widgetNode.setAttribute("cm-ignore-events","true")}if(options.insertLeft){marker.widgetNode.insertLeft=true}}if(marker.collapsed){if(conflictingCollapsedRange(doc,from.line,from,to,marker)||from.line!=to.line&&conflictingCollapsedRange(doc,to.line,from,to,marker)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}seeCollapsedSpans()}if(marker.addToHistory){addChangeToHistory(doc,{from:from,to:to,origin:"markText"},doc.sel,NaN)}var curLine=from.line,cm=doc.cm,updateMaxLine;doc.iter(curLine,to.line+1,function(line){if(cm&&marker.collapsed&&!cm.options.lineWrapping&&visualLine(line)==cm.display.maxLine){updateMaxLine=true}if(marker.collapsed&&curLine!=from.line){updateLineHeight(line,0)}addMarkedSpan(line,new MarkedSpan(marker,curLine==from.line?from.ch:null,curLine==to.line?to.ch:null));curLine+=1});if(marker.collapsed){doc.iter(from.line,to.line+1,function(line){if(lineIsHidden(doc,line)){updateLineHeight(line,0)}})}if(marker.clearOnEnter){on(marker,"beforeCursorEnter",function(){return marker.clear()})}if(marker.readOnly){seeReadOnlySpans();if(doc.history.done.length||doc.history.undone.length){doc.clearHistory()}}if(marker.collapsed){marker.id= ++nextMarkerId;marker.atomic=true}if(cm){if(updateMaxLine){cm.curOp.updateMaxLine=true}if(marker.collapsed){regChange(cm,from.line,to.line+1)}else if(marker.className||marker.startStyle||marker.endStyle||marker.css||marker.attributes||marker.title){for(var i=from.line;i<=to.line;i+=1){regLineChange(cm,i,"text")}}if(marker.atomic){reCheckSelection(cm.doc)}signalLater(cm,"markerAdded",cm,marker)}return marker}var SharedTextMarker=function SharedTextMarker(markers,primary){this.markers=markers;this.primary=primary;for(var i=0;i<markers.length;i+=1){markers[i].parent=this}};SharedTextMarker.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var i=0;i<this.markers.length;i+=1){this.markers[i].clear()}signalLater(this,"clear")};SharedTextMarker.prototype.find=function(side,lineObj){return this.primary.find(side,lineObj)};eventMixin(SharedTextMarker);function markTextShared(doc,from,to,options,type){options=copyObj(options);options.shared=false;var markers=[_markText(doc,from,to,options,type)],primary=markers[0];var widget=options.widgetNode;linkedDocs(doc,function(doc){if(widget){options.widgetNode=widget.cloneNode(true)}markers.push(_markText(doc,_clipPos(doc,from),_clipPos(doc,to),options,type));for(var i=0;i<doc.linked.length;i+=1){if(doc.linked[i].isParent){return}}primary=lst(markers)});return new SharedTextMarker(markers,primary)}function findSharedMarkers(doc){return doc.findMarks(Pos(doc.first,0),doc.clipPos(Pos(doc.lastLine())),function(m){return m.parent})}function copySharedMarkers(doc,markers){for(var i=0;i<markers.length;i+=1){var marker=markers[i],pos=marker.find();var mFrom=doc.clipPos(pos.from),mTo=doc.clipPos(pos.to);if(cmp(mFrom,mTo)){var subMark=_markText(doc,mFrom,mTo,marker.primary,marker.primary.type);marker.markers.push(subMark);subMark.parent=marker}}}function detachSharedMarkers(markers){var loop=function loop(i){var marker=markers[i],linked=[marker.primary.doc];linkedDocs(marker.primary.doc,function(d){return linked.push(d)});for(var j=0;j<marker.markers.length;j+=1){var subMarker=marker.markers[j];if(indexOf(linked,subMarker.doc)==-1){subMarker.parent=null;marker.markers.splice(j--,1)}}};for(var i=0;i<markers.length;i+=1){loop(i)}}var nextDocId=0;var Doc=function Doc(text,mode,firstLine,lineSep,direction){if(!(this instanceof Doc)){return new Doc(text,mode,firstLine,lineSep,direction)}if(firstLine==null){firstLine=0}BranchChunk.call(this,[new LeafChunk([new Line("",null)])]);this.first=firstLine;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=firstLine;var start=Pos(firstLine,0);this.sel=simpleSelection(start);this.history=new History(null);this.id= ++nextDocId;this.modeOption=mode;this.lineSep=lineSep;this.direction=direction=="rtl"?"rtl":"ltr";this.extend=false;if(typeof text=="string"){text=this.splitLines(text)}updateDoc(this,{from:start,to:start,text:text});setSelection(this,simpleSelection(start),sel_dontScroll)};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function iter(from,to,op){if(op){this.iterN(from-this.first,to-from,op)}else{this.iterN(this.first,this.first+this.size,from)}},insert:function insert(at,lines){var height=0;for(var i=0;i<lines.length;i+=1){height+=lines[i].height}this.insertInner(at-this.first,lines,height)},remove:function remove(at,n){this.removeInner(at-this.first,n)},getValue:function getValue(lineSep){var lines=getLines(this,this.first,this.first+this.size);if(lineSep===false){return lines}return lines.join(lineSep||this.lineSeparator())},setValue:docMethodOp(function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:this.splitLines(code),origin:"setValue",full:true},true);if(this.cm){scrollToCoords(this.cm,0,0)}setSelection(this,simpleSelection(top),sel_dontScroll)}),replaceRange:function replaceRange(code,from,to,origin){from=_clipPos(this,from);to=to?_clipPos(this,to):from;_replaceRange(this,code,from,to,origin)},getRange:function getRange(from,to,lineSep){var lines=getBetween(this,_clipPos(this,from),_clipPos(this,to));if(lineSep===false){return lines}return lines.join(lineSep||this.lineSeparator())},getLine:function getLine(line){var l=this.getLineHandle(line);return l&&l.text},getLineHandle:function getLineHandle(line){if(isLine(this,line)){return getLine(this,line)}},getLineNumber:function getLineNumber(line){return lineNo(line)},getLineHandleVisualStart:function getLineHandleVisualStart(line){if(typeof line=="number"){line=getLine(this,line)}return visualLine(line)},lineCount:function lineCount(){return this.size},firstLine:function firstLine(){return this.first},lastLine:function lastLine(){return this.first+this.size-1},clipPos:function clipPos(pos){return _clipPos(this,pos)},getCursor:function getCursor(start){var range=this.sel.primary(),pos;if(start==null||start=="head"){pos=range.head}else if(start=="anchor"){pos=range.anchor}else if(start=="end"||start=="to"||start===false){pos=range.to()}else{pos=range.from()}return pos},listSelections:function listSelections(){return this.sel.ranges},somethingSelected:function somethingSelected(){return this.sel.somethingSelected()},setCursor:docMethodOp(function(line,ch,options){setSimpleSelection(this,_clipPos(this,typeof line=="number"?Pos(line,ch||0):line),null,options)}),setSelection:docMethodOp(function(anchor,head,options){setSimpleSelection(this,_clipPos(this,anchor),_clipPos(this,head||anchor),options)}),extendSelection:docMethodOp(function(head,other,options){extendSelection(this,_clipPos(this,head),other&&_clipPos(this,other),options)}),extendSelections:docMethodOp(function(heads,options){extendSelections(this,clipPosArray(this,heads),options)}),extendSelectionsBy:docMethodOp(function(f,options){var heads=map(this.sel.ranges,f);extendSelections(this,clipPosArray(this,heads),options)}),setSelections:docMethodOp(function(ranges,primary,options){if(!ranges.length){return}var out=[];for(var i=0;i<ranges.length;i+=1){out[i]=new Range(_clipPos(this,ranges[i].anchor),_clipPos(this,ranges[i].head))}if(primary==null){primary=Math.min(ranges.length-1,this.sel.primIndex)}setSelection(this,normalizeSelection(this.cm,out,primary),options)}),addSelection:docMethodOp(function(anchor,head,options){var ranges=this.sel.ranges.slice(0);ranges.push(new Range(_clipPos(this,anchor),_clipPos(this,head||anchor)));setSelection(this,normalizeSelection(this.cm,ranges,ranges.length-1),options)}),getSelection:function getSelection(lineSep){var ranges=this.sel.ranges,lines;for(var i=0;i<ranges.length;i+=1){var sel=getBetween(this,ranges[i].from(),ranges[i].to());lines=lines?lines.concat(sel):sel}if(lineSep===false){return lines}else{return lines.join(lineSep||this.lineSeparator())}},getSelections:function getSelections(lineSep){var parts=[],ranges=this.sel.ranges;for(var i=0;i<ranges.length;i+=1){var sel=getBetween(this,ranges[i].from(),ranges[i].to());if(lineSep!==false){sel=sel.join(lineSep||this.lineSeparator())}parts[i]=sel}return parts},replaceSelection:function replaceSelection(code,collapse,origin){var dup=[];for(var i=0;i<this.sel.ranges.length;i+=1){dup[i]=code}this.replaceSelections(dup,collapse,origin||"+input")},replaceSelections:docMethodOp(function(code,collapse,origin){var changes=[],sel=this.sel;for(var i=0;i<sel.ranges.length;i+=1){var range=sel.ranges[i];changes[i]={from:range.from(),to:range.to(),text:this.splitLines(code[i]),origin:origin}}var newSel=collapse&&collapse!="end"&&computeReplacedSel(this,changes,collapse);for(var i$1=changes.length-1;i$1>=0;i$1-=1){makeChange(this,changes[i$1])}if(newSel){setSelectionReplaceHistory(this,newSel)}else if(this.cm){ensureCursorVisible(this.cm)}}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo")}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo")}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",true)}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,"redo",true)}),setExtending:function setExtending(val){this.extend=val},getExtending:function getExtending(){return this.extend},historySize:function historySize(){var hist=this.history,done=0,undone=0;for(var i=0;i<hist.done.length;i+=1){if(!hist.done[i].ranges){done+=1}}for(var i$1=0;i$1<hist.undone.length;i$1+=1){if(!hist.undone[i$1].ranges){undone+=1}}return{undo:done,redo:undone}},clearHistory:function clearHistory(){var this$1=this;this.history=new History(this.history.maxGeneration);linkedDocs(this,function(doc){return doc.history=this$1.history},true)},markClean:function markClean(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function changeGeneration(forceSplit){if(forceSplit){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function isClean(gen){return this.history.generation==(gen||this.cleanGeneration)},getHistory:function getHistory(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)}},setHistory:function setHistory(histData){var hist=this.history=new History(this.history.maxGeneration);hist.done=copyHistoryArray(histData.done.slice(0),null,true);hist.undone=copyHistoryArray(histData.undone.slice(0),null,true)},setGutterMarker:docMethodOp(function(line,gutterID,value){return changeLine(this,line,"gutter",function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});markers[gutterID]=value;if(!value&&isEmpty(markers)){line.gutterMarkers=null}return true})}),clearGutter:docMethodOp(function(gutterID){var this$1=this;this.iter(function(line){if(line.gutterMarkers&&line.gutterMarkers[gutterID]){changeLine(this$1,line,"gutter",function(){line.gutterMarkers[gutterID]=null;if(isEmpty(line.gutterMarkers)){line.gutterMarkers=null}return true})}})}),lineInfo:function lineInfo(line){var n;if(typeof line=="number"){if(!isLine(this,line)){return null}n=line;line=getLine(this,line);if(!line){return null}}else{n=lineNo(line);if(n==null){return null}}return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets}},addLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";if(!line[prop]){line[prop]=cls}else if(classTest(cls).test(line[prop])){return false}else{line[prop]+=" "+cls}return true})}),removeLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";var cur=line[prop];if(!cur){return false}else if(cls==null){line[prop]=null}else{var found=cur.match(classTest(cls));if(!found){return false}var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(!found.index||end==cur.length?"":" ")+cur.slice(end)||null}return true})}),addLineWidget:docMethodOp(function(handle,node,options){return addLineWidget(this,handle,node,options)}),removeLineWidget:function removeLineWidget(widget){widget.clear()},markText:function markText(from,to,options){return _markText(this,_clipPos(this,from),_clipPos(this,to),options,options&&options.type||"range")},setBookmark:function setBookmark(pos,options){var realOpts={replacedWith:options&&(options.nodeType==null?options.widget:options),insertLeft:options&&options.insertLeft,clearWhenEmpty:false,shared:options&&options.shared,handleMouseEvents:options&&options.handleMouseEvents};pos=_clipPos(this,pos);return _markText(this,pos,pos,realOpts,"bookmark")},findMarksAt:function findMarksAt(pos){pos=_clipPos(this,pos);var markers=[],spans=getLine(this,pos.line).markedSpans;if(spans){for(var i=0;i<spans.length;i+=1){var span=spans[i];if((span.from==null||span.from<=pos.ch)&&(span.to==null||span.to>=pos.ch)){markers.push(span.marker.parent||span.marker)}}}return markers},findMarks:function findMarks(from,to,filter){from=_clipPos(this,from);to=_clipPos(this,to);var found=[],lineNo=from.line;this.iter(from.line,to.line+1,function(line){var spans=line.markedSpans;if(spans){for(var i=0;i<spans.length;i+=1){var span=spans[i];if(!(span.to!=null&&lineNo==from.line&&from.ch>=span.to||span.from==null&&lineNo!=from.line||span.from!=null&&lineNo==to.line&&span.from>=to.ch)&&(!filter||filter(span.marker))){found.push(span.marker.parent||span.marker)}}}lineNo+=1});return found},getAllMarks:function getAllMarks(){var markers=[];this.iter(function(line){var sps=line.markedSpans;if(sps){for(var i=0;i<sps.length;i+=1){if(sps[i].from!=null){markers.push(sps[i].marker)}}}});return markers},posFromIndex:function posFromIndex(off){var ch,lineNo=this.first,sepSize=this.lineSeparator().length;this.iter(function(line){var sz=line.text.length+sepSize;if(sz>off){ch=off;return true}off-=sz;lineNo+=1});return _clipPos(this,Pos(lineNo,ch))},indexFromPos:function indexFromPos(coords){coords=_clipPos(this,coords);var index=coords.ch;if(coords.line<this.first||coords.ch<0){return 0}var sepSize=this.lineSeparator().length;this.iter(this.first,coords.line,function(line){index+=line.text.length+sepSize});return index},copy:function copy(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);doc.scrollTop=this.scrollTop;doc.scrollLeft=this.scrollLeft;doc.sel=this.sel;doc.extend=false;if(copyHistory){doc.history.undoDepth=this.history.undoDepth;doc.setHistory(this.getHistory())}return doc},linkedDoc:function linkedDoc(options){if(!options){options={}}var from=this.first,to=this.first+this.size;if(options.from!=null&&options.from>from){from=options.from}if(options.to!=null&&options.to<to){to=options.to}var copy=new Doc(getLines(this,from,to),options.mode||this.modeOption,from,this.lineSep,this.direction);if(options.sharedHist){copy.history=this.history}(this.linked||(this.linked=[])).push({doc:copy,sharedHist:options.sharedHist});copy.linked=[{doc:this,isParent:true,sharedHist:options.sharedHist}];copySharedMarkers(copy,findSharedMarkers(this));return copy},unlinkDoc:function unlinkDoc(other){if(other instanceof CodeMirror){other=other.doc}if(this.linked){for(var i=0;i<this.linked.length;i+=1){var link=this.linked[i];if(link.doc!=other){continue}this.linked.splice(i,1);other.unlinkDoc(this);detachSharedMarkers(findSharedMarkers(this));break}}if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){return splitIds.push(doc.id)},true);other.history=new History(null);other.history.done=copyHistoryArray(this.history.done,splitIds);other.history.undone=copyHistoryArray(this.history.undone,splitIds)}},iterLinkedDocs:function iterLinkedDocs(f){linkedDocs(this,f)},getMode:function getMode(){return this.mode},getEditor:function getEditor(){return this.cm},splitLines:function splitLines(str){if(this.lineSep){return str.split(this.lineSep)}return splitLinesAuto(str)},lineSeparator:function lineSeparator(){return this.lineSep||"\n"},setDirection:docMethodOp(function(dir){if(dir!="rtl"){dir="ltr"}if(dir==this.direction){return}this.direction=dir;this.iter(function(line){return line.order=null});if(this.cm){directionChanged(this.cm)}})});Doc.prototype.eachLine=Doc.prototype.iter;var lastDrop=0;function onDrop(e){var cm=this;clearDragCursor(cm);if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e)){return}e_preventDefault(e);if(ie){lastDrop= +new Date()}var pos=posFromMouse(cm,e,true),files=e.dataTransfer.files;if(!pos||cm.isReadOnly()){return}if(files&&files.length&&window.FileReader&&window.File){var n=files.length,text=Array(n),read=0;var markAsReadAndPasteIfAllFilesAreRead=function markAsReadAndPasteIfAllFilesAreRead(){if(++read==n){operation(cm,function(){pos=_clipPos(cm.doc,pos);var change={from:pos,to:pos,text:cm.doc.splitLines(text.filter(function(t){return t!=null}).join(cm.doc.lineSeparator())),origin:"paste"};makeChange(cm.doc,change);setSelectionReplaceHistory(cm.doc,simpleSelection(_clipPos(cm.doc,pos),_clipPos(cm.doc,changeEnd(change))))})()}};var readTextFromFile=function readTextFromFile(file,i){if(cm.options.allowDropFileTypes&&indexOf(cm.options.allowDropFileTypes,file.type)==-1){markAsReadAndPasteIfAllFilesAreRead();return}var reader=new FileReader();reader.onerror=function(){return markAsReadAndPasteIfAllFilesAreRead()};reader.onload=function(){var content=reader.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(content)){markAsReadAndPasteIfAllFilesAreRead();return}text[i]=content;markAsReadAndPasteIfAllFilesAreRead()};reader.readAsText(file)};for(var i=0;i<files.length;i+=1){readTextFromFile(files[i],i)}}else{if(cm.state.draggingText&&cm.doc.sel.contains(pos)>-1){cm.state.draggingText(e);setTimeout(function(){return cm.display.input.focus()},20);return}try{var text$1=e.dataTransfer.getData("Text");if(text$1){var selected;if(cm.state.draggingText&&!cm.state.draggingText.copy){selected=cm.listSelections()}setSelectionNoUndo(cm.doc,simpleSelection(pos,pos));if(selected){for(var i$1=0;i$1<selected.length;i$1+=1){_replaceRange(cm.doc,"",selected[i$1].anchor,selected[i$1].head,"drag")}}cm.replaceSelection(text$1,"around","paste");cm.display.input.focus()}}catch(e){}}}function onDragStart(cm,e){if(ie&&(!cm.state.draggingText|| +new Date()-lastDrop<100)){e_stop(e);return}if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e)){return}e.dataTransfer.setData("Text",cm.getSelection());e.dataTransfer.effectAllowed="copyMove";if(e.dataTransfer.setDragImage&&!safari){var img=elt("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(presto){img.width=img.height=1;cm.display.wrapper.appendChild(img);img._top=img.offsetTop}e.dataTransfer.setDragImage(img,0,0);if(presto){img.parentNode.removeChild(img)}}}function onDragOver(cm,e){var pos=posFromMouse(cm,e);if(!pos){return}var frag=document.createDocumentFragment();drawSelectionCursor(cm,pos,frag);if(!cm.display.dragCursor){cm.display.dragCursor=elt("div",null,"CodeMirror-cursors CodeMirror-dragcursors");cm.display.lineSpace.insertBefore(cm.display.dragCursor,cm.display.cursorDiv)}removeChildrenAndAdd(cm.display.dragCursor,frag)}function clearDragCursor(cm){if(cm.display.dragCursor){cm.display.lineSpace.removeChild(cm.display.dragCursor);cm.display.dragCursor=null}}function forEachCodeMirror(f){if(!document.getElementsByClassName){return}var byClass=document.getElementsByClassName("CodeMirror"),editors=[];for(var i=0;i<byClass.length;i+=1){var cm=byClass[i].CodeMirror;if(cm){editors.push(cm)}}if(editors.length){editors[0].operation(function(){for(var i=0;i<editors.length;i+=1){f(editors[i])}})}}var globalsRegistered=false;function ensureGlobalHandlers(){if(globalsRegistered){return}registerGlobalHandlers();globalsRegistered=true}function registerGlobalHandlers(){var resizeTimer;on(window,"resize",function(){if(resizeTimer==null){resizeTimer=setTimeout(function(){resizeTimer=null;forEachCodeMirror(onResize)},100)}});on(window,"blur",function(){return forEachCodeMirror(onBlur)})}function onResize(cm){var d=cm.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.scrollbarsClipped=false;cm.setSize()}var keyNames={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var i=0;i<10;i+=1){keyNames[i+48]=keyNames[i+96]=String(i)}for(var i$1=65;i$1<=90;i$1+=1){keyNames[i$1]=String.fromCharCode(i$1)}for(var i$2=1;i$2<=12;i$2+=1){keyNames[i$2+111]=keyNames[i$2+63235]="F"+i$2}var keyMap={};keyMap.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Shift-Backspace":"delCharBefore","Tab":"defaultTab","Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite","Esc":"singleSelection"};keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection","fallthrough":"basic"};keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd","fallthrough":["basic","emacsy"]};keyMap["default"]=mac?keyMap.macDefault:keyMap.pcDefault;function normalizeKeyName(name){var parts=name.split(/-(?!$)/);name=parts[parts.length-1];var alt,ctrl,shift,cmd;for(var i=0;i<parts.length-1;i+=1){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod)){cmd=true}else if(/^a(lt)?$/i.test(mod)){alt=true}else if(/^(c|ctrl|control)$/i.test(mod)){ctrl=true}else if(/^s(hift)?$/i.test(mod)){shift=true}else{throw new Error("Unrecognized modifier name: "+mod)}}if(alt){name="Alt-"+name}if(ctrl){name="Ctrl-"+name}if(cmd){name="Cmd-"+name}if(shift){name="Shift-"+name}return name}function normalizeKeyMap(keymap){var copy={};for(var keyname in keymap){if(keymap.hasOwnProperty(keyname)){var value=keymap[keyname];if(/^(name|fallthrough|(de|at)tach)$/.test(keyname)){continue}if(value=="..."){delete keymap[keyname];continue}var keys=map(keyname.split(" "),normalizeKeyName);for(var i=0;i<keys.length;i+=1){var val=void 0,name=void 0;if(i==keys.length-1){name=keys.join(" ");val=value}else{name=keys.slice(0,i+1).join(" ");val="..."}var prev=copy[name];if(!prev){copy[name]=val}else if(prev!=val){throw new Error("Inconsistent bindings for "+name)}}delete keymap[keyname]}}for(var prop in copy){keymap[prop]=copy[prop]}return keymap}function lookupKey(key,map,handle,context){map=getKeyMap(map);var found=map.call?map.call(key,context):map[key];if(found===false){return "nothing"}if(found==="..."){return "multi"}if(found!=null&&handle(found)){return "handled"}if(map.fallthrough){if(Object.prototype.toString.call(map.fallthrough)!="[object Array]"){return lookupKey(key,map.fallthrough,handle,context)}for(var i=0;i<map.fallthrough.length;i+=1){var result=lookupKey(key,map.fallthrough[i],handle,context);if(result){return result}}}}function isModifierKey(value){var name=typeof value=="string"?value:keyNames[value.keyCode];return name=="Ctrl"||name=="Alt"||name=="Shift"||name=="Mod"}function addModifierNames(name,event,noShift){var base=name;if(event.altKey&&base!="Alt"){name="Alt-"+name}if((flipCtrlCmd?event.metaKey:event.ctrlKey)&&base!="Ctrl"){name="Ctrl-"+name}if((flipCtrlCmd?event.ctrlKey:event.metaKey)&&base!="Cmd"){name="Cmd-"+name}if(!noShift&&event.shiftKey&&base!="Shift"){name="Shift-"+name}return name}function keyName(event,noShift){if(presto&&event.keyCode==34&&event["char"]){return false}var name=keyNames[event.keyCode];if(name==null||event.altGraphKey){return false}if(event.keyCode==3&&event.code){name=event.code}return addModifierNames(name,event,noShift)}function getKeyMap(val){return typeof val=="string"?keyMap[val]:val}function deleteNearSelection(cm,compute){var ranges=cm.doc.sel.ranges,kill=[];for(var i=0;i<ranges.length;i+=1){var toKill=compute(ranges[i]);while(kill.length&&cmp(toKill.from,lst(kill).to)<=0){var replaced=kill.pop();if(cmp(replaced.from,toKill.from)<0){toKill.from=replaced.from;break}}kill.push(toKill)}runInOp(cm,function(){for(var i=kill.length-1;i>=0;i-=1){_replaceRange(cm.doc,"",kill[i].from,kill[i].to,"+delete")}ensureCursorVisible(cm)})}function moveCharLogically(line,ch,dir){var target=skipExtendingChars(line.text,ch+dir,dir);return target<0||target>line.text.length?null:target}function moveLogically(line,start,dir){var ch=moveCharLogically(line,start.ch,dir);return ch==null?null:new Pos(start.line,ch,dir<0?"after":"before")}function endOfLine(visually,cm,lineObj,lineNo,dir){if(visually){if(cm.doc.direction=="rtl"){dir= -dir}var order=getOrder(lineObj,cm.doc.direction);if(order){var part=dir<0?lst(order):order[0];var moveInStorageOrder=dir<0==(part.level==1);var sticky=moveInStorageOrder?"after":"before";var ch;if(part.level>0||cm.doc.direction=="rtl"){var prep=prepareMeasureForLine(cm,lineObj);ch=dir<0?lineObj.text.length-1:0;var targetTop=measureCharPrepared(cm,prep,ch).top;ch=findFirst(function(ch){return measureCharPrepared(cm,prep,ch).top==targetTop},dir<0==(part.level==1)?part.from:part.to-1,ch);if(sticky=="before"){ch=moveCharLogically(lineObj,ch,1)}}else{ch=dir<0?part.to:part.from}return new Pos(lineNo,ch,sticky)}}return new Pos(lineNo,dir<0?lineObj.text.length:0,dir<0?"before":"after")}function moveVisually(cm,line,start,dir){var bidi=getOrder(line,cm.doc.direction);if(!bidi){return moveLogically(line,start,dir)}if(start.ch>=line.text.length){start.ch=line.text.length;start.sticky="before"}else if(start.ch<=0){start.ch=0;start.sticky="after"}var partPos=getBidiPartAt(bidi,start.ch,start.sticky),part=bidi[partPos];if(cm.doc.direction=="ltr"&&part.level%2==0&&(dir>0?part.to>start.ch:part.from<start.ch)){return moveLogically(line,start,dir)}var mv=function mv(pos,dir){return moveCharLogically(line,pos instanceof Pos?pos.ch:pos,dir)};var prep;var getWrappedLineExtent=function getWrappedLineExtent(ch){if(!cm.options.lineWrapping){return{begin:0,end:line.text.length}}prep=prep||prepareMeasureForLine(cm,line);return wrappedLineExtentChar(cm,line,prep,ch)};var wrappedLineExtent=getWrappedLineExtent(start.sticky=="before"?mv(start,-1):start.ch);if(cm.doc.direction=="rtl"||part.level==1){var moveInStorageOrder=part.level==1==dir<0;var ch=mv(start,moveInStorageOrder?1:-1);if(ch!=null&&(!moveInStorageOrder?ch>=part.from&&ch>=wrappedLineExtent.begin:ch<=part.to&&ch<=wrappedLineExtent.end)){var sticky=moveInStorageOrder?"before":"after";return new Pos(start.line,ch,sticky)}}var searchInVisualLine=function searchInVisualLine(partPos,dir,wrappedLineExtent){var getRes=function getRes(ch,moveInStorageOrder){return moveInStorageOrder?new Pos(start.line,mv(ch,1),"before"):new Pos(start.line,ch,"after")};for(;partPos>=0&&partPos<bidi.length;partPos+=dir){var part=bidi[partPos];var moveInStorageOrder=dir>0==(part.level!=1);var ch=moveInStorageOrder?wrappedLineExtent.begin:mv(wrappedLineExtent.end,-1);if(part.from<=ch&&ch<part.to){return getRes(ch,moveInStorageOrder)}ch=moveInStorageOrder?part.from:mv(part.to,-1);if(wrappedLineExtent.begin<=ch&&ch<wrappedLineExtent.end){return getRes(ch,moveInStorageOrder)}}};var res=searchInVisualLine(partPos+dir,dir,wrappedLineExtent);if(res){return res}var nextCh=dir>0?wrappedLineExtent.end:mv(wrappedLineExtent.begin,-1);if(nextCh!=null&&!(dir>0&&nextCh==line.text.length)){res=searchInVisualLine(dir>0?0:bidi.length-1,dir,getWrappedLineExtent(nextCh));if(res){return res}}return null}var commands={selectAll:selectAll,singleSelection:function singleSelection(cm){return cm.setSelection(cm.getCursor("anchor"),cm.getCursor("head"),sel_dontScroll)},killLine:function killLine(cm){return deleteNearSelection(cm,function(range){if(range.empty()){var len=getLine(cm.doc,range.head.line).text.length;if(range.head.ch==len&&range.head.line<cm.lastLine()){return{from:range.head,to:Pos(range.head.line+1,0)}}else{return{from:range.head,to:Pos(range.head.line,len)}}}else{return{from:range.from(),to:range.to()}}})},deleteLine:function deleteLine(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:_clipPos(cm.doc,Pos(range.to().line+1,0))}})},delLineLeft:function delLineLeft(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:range.from()}})},delWrappedLineLeft:function delWrappedLineLeft(cm){return deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var leftPos=cm.coordsChar({left:0,top:top},"div");return{from:leftPos,to:range.from()}})},delWrappedLineRight:function delWrappedLineRight(cm){return deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var rightPos=cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");return{from:range.from(),to:rightPos}})},undo:function undo(cm){return cm.undo()},redo:function redo(cm){return cm.redo()},undoSelection:function undoSelection(cm){return cm.undoSelection()},redoSelection:function redoSelection(cm){return cm.redoSelection()},goDocStart:function goDocStart(cm){return cm.extendSelection(Pos(cm.firstLine(),0))},goDocEnd:function goDocEnd(cm){return cm.extendSelection(Pos(cm.lastLine()))},goLineStart:function goLineStart(cm){return cm.extendSelectionsBy(function(range){return lineStart(cm,range.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function goLineStartSmart(cm){return cm.extendSelectionsBy(function(range){return lineStartSmart(cm,range.head)},{origin:"+move",bias:1})},goLineEnd:function goLineEnd(cm){return cm.extendSelectionsBy(function(range){return lineEnd(cm,range.head.line)},{origin:"+move",bias:-1})},goLineRight:function goLineRight(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+5;return cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div")},sel_move)},goLineLeft:function goLineLeft(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+5;return cm.coordsChar({left:0,top:top},"div")},sel_move)},goLineLeftSmart:function goLineLeftSmart(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+5;var pos=cm.coordsChar({left:0,top:top},"div");if(pos.ch<cm.getLine(pos.line).search(/\S/)){return lineStartSmart(cm,range.head)}return pos},sel_move)},goLineUp:function goLineUp(cm){return cm.moveV(-1,"line")},goLineDown:function goLineDown(cm){return cm.moveV(1,"line")},goPageUp:function goPageUp(cm){return cm.moveV(-1,"page")},goPageDown:function goPageDown(cm){return cm.moveV(1,"page")},goCharLeft:function goCharLeft(cm){return cm.moveH(-1,"char")},goCharRight:function goCharRight(cm){return cm.moveH(1,"char")},goColumnLeft:function goColumnLeft(cm){return cm.moveH(-1,"column")},goColumnRight:function goColumnRight(cm){return cm.moveH(1,"column")},goWordLeft:function goWordLeft(cm){return cm.moveH(-1,"word")},goGroupRight:function goGroupRight(cm){return cm.moveH(1,"group")},goGroupLeft:function goGroupLeft(cm){return cm.moveH(-1,"group")},goWordRight:function goWordRight(cm){return cm.moveH(1,"word")},delCharBefore:function delCharBefore(cm){return cm.deleteH(-1,"char")},delCharAfter:function delCharAfter(cm){return cm.deleteH(1,"char")},delWordBefore:function delWordBefore(cm){return cm.deleteH(-1,"word")},delWordAfter:function delWordAfter(cm){return cm.deleteH(1,"word")},delGroupBefore:function delGroupBefore(cm){return cm.deleteH(-1,"group")},delGroupAfter:function delGroupAfter(cm){return cm.deleteH(1,"group")},indentAuto:function indentAuto(cm){return cm.indentSelection("smart")},indentMore:function indentMore(cm){return cm.indentSelection("add")},indentLess:function indentLess(cm){return cm.indentSelection("subtract")},insertTab:function insertTab(cm){return cm.replaceSelection("\t")},insertSoftTab:function insertSoftTab(cm){var spaces=[],ranges=cm.listSelections(),tabSize=cm.options.tabSize;for(var i=0;i<ranges.length;i+=1){var pos=ranges[i].from();var col=countColumn(cm.getLine(pos.line),pos.ch,tabSize);spaces.push(spaceStr(tabSize-col%tabSize))}cm.replaceSelections(spaces)},defaultTab:function defaultTab(cm){if(cm.somethingSelected()){cm.indentSelection("add")}else{cm.execCommand("insertTab")}},transposeChars:function transposeChars(cm){return runInOp(cm,function(){var ranges=cm.listSelections(),newSel=[];for(var i=0;i<ranges.length;i+=1){if(!ranges[i].empty()){continue}var cur=ranges[i].head,line=getLine(cm.doc,cur.line).text;if(line){if(cur.ch==line.length){cur=new Pos(cur.line,cur.ch-1)}if(cur.ch>0){cur=new Pos(cur.line,cur.ch+1);cm.replaceRange(line.charAt(cur.ch-1)+line.charAt(cur.ch-2),Pos(cur.line,cur.ch-2),cur,"+transpose")}else if(cur.line>cm.doc.first){var prev=getLine(cm.doc,cur.line-1).text;if(prev){cur=new Pos(cur.line,1);cm.replaceRange(line.charAt(0)+cm.doc.lineSeparator()+prev.charAt(prev.length-1),Pos(cur.line-1,prev.length-1),cur,"+transpose")}}}newSel.push(new Range(cur,cur))}cm.setSelections(newSel)})},newlineAndIndent:function newlineAndIndent(cm){return runInOp(cm,function(){var sels=cm.listSelections();for(var i=sels.length-1;i>=0;i-=1){cm.replaceRange(cm.doc.lineSeparator(),sels[i].anchor,sels[i].head,"+input")}sels=cm.listSelections();for(var i$1=0;i$1<sels.length;i$1+=1){cm.indentLine(sels[i$1].from().line,null,true)}ensureCursorVisible(cm)})},openLine:function openLine(cm){return cm.replaceSelection("\n","start")},toggleOverwrite:function toggleOverwrite(cm){return cm.toggleOverwrite()}};function lineStart(cm,lineN){var line=getLine(cm.doc,lineN);var visual=visualLine(line);if(visual!=line){lineN=lineNo(visual)}return endOfLine(true,cm,visual,lineN,1)}function lineEnd(cm,lineN){var line=getLine(cm.doc,lineN);var visual=visualLineEnd(line);if(visual!=line){lineN=lineNo(visual)}return endOfLine(true,cm,line,lineN,-1)}function lineStartSmart(cm,pos){var start=lineStart(cm,pos.line);var line=getLine(cm.doc,start.line);var order=getOrder(line,cm.doc.direction);if(!order||order[0].level==0){var firstNonWS=Math.max(start.ch,line.text.search(/\S/));var inWS=pos.line==start.line&&pos.ch<=firstNonWS&&pos.ch;return Pos(start.line,inWS?0:firstNonWS,start.sticky)}return start}function doHandleBinding(cm,bound,dropShift){if(typeof bound=="string"){bound=commands[bound];if(!bound){return false}}cm.display.input.ensurePolled();var prevShift=cm.display.shift,done=false;try{if(cm.isReadOnly()){cm.state.suppressEdits=true}if(dropShift){cm.display.shift=false}done=bound(cm)!=Pass}finally{cm.display.shift=prevShift;cm.state.suppressEdits=false}return done}function lookupKeyForEditor(cm,name,handle){for(var i=0;i<cm.state.keyMaps.length;i+=1){var result=lookupKey(name,cm.state.keyMaps[i],handle,cm);if(result){return result}}return cm.options.extraKeys&&lookupKey(name,cm.options.extraKeys,handle,cm)||lookupKey(name,cm.options.keyMap,handle,cm)}var stopSeq=new Delayed();function dispatchKey(cm,name,e,handle){var seq=cm.state.keySeq;if(seq){if(isModifierKey(name)){return "handled"}if(/\'$/.test(name)){cm.state.keySeq=null}else{stopSeq.set(50,function(){if(cm.state.keySeq==seq){cm.state.keySeq=null;cm.display.input.reset()}})}if(dispatchKeyInner(cm,seq+" "+name,e,handle)){return true}}return dispatchKeyInner(cm,name,e,handle)}function dispatchKeyInner(cm,name,e,handle){var result=lookupKeyForEditor(cm,name,handle);if(result=="multi"){cm.state.keySeq=name}if(result=="handled"){signalLater(cm,"keyHandled",cm,name,e)}if(result=="handled"||result=="multi"){e_preventDefault(e);restartBlink(cm)}return!!result}function handleKeyBinding(cm,e){var name=keyName(e,true);if(!name){return false}if(e.shiftKey&&!cm.state.keySeq){return dispatchKey(cm,"Shift-"+name,e,function(b){return doHandleBinding(cm,b,true)})||dispatchKey(cm,name,e,function(b){if(typeof b=="string"?/^go[A-Z]/.test(b):b.motion){return doHandleBinding(cm,b)}})}else{return dispatchKey(cm,name,e,function(b){return doHandleBinding(cm,b)})}}function handleCharBinding(cm,e,ch){return dispatchKey(cm,"'"+ch+"'",e,function(b){return doHandleBinding(cm,b,true)})}var lastStoppedKey=null;function onKeyDown(e){var cm=this;cm.curOp.focus=activeElt();if(signalDOMEvent(cm,e)){return}if(ie&&ie_version<11&&e.keyCode==27){e.returnValue=false}var code=e.keyCode;cm.display.shift=code==16||e.shiftKey;var handled=handleKeyBinding(cm,e);if(presto){lastStoppedKey=handled?code:null;if(!handled&&code==88&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey)){cm.replaceSelection("",null,"cut")}}if(gecko&&!mac&&!handled&&code==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand){document.execCommand("cut")}if(code==18&&!/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className)){showCrossHair(cm)}}function showCrossHair(cm){var lineDiv=cm.display.lineDiv;addClass(lineDiv,"CodeMirror-crosshair");function up(e){if(e.keyCode==18||!e.altKey){rmClass(lineDiv,"CodeMirror-crosshair");off(document,"keyup",up);off(document,"mouseover",up)}}on(document,"keyup",up);on(document,"mouseover",up)}function onKeyUp(e){if(e.keyCode==16){this.doc.sel.shift=false}signalDOMEvent(this,e)}function onKeyPress(e){var cm=this;if(eventInWidget(cm.display,e)||signalDOMEvent(cm,e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey){return}var keyCode=e.keyCode,charCode=e.charCode;if(presto&&keyCode==lastStoppedKey){lastStoppedKey=null;e_preventDefault(e);return}if(presto&&(!e.which||e.which<10)&&handleKeyBinding(cm,e)){return}var ch=String.fromCharCode(charCode==null?keyCode:charCode);if(ch=="\x08"){return}if(handleCharBinding(cm,e,ch)){return}cm.display.input.onKeyPress(e)}var DOUBLECLICK_DELAY=400;var PastClick=function PastClick(time,pos,button){this.time=time;this.pos=pos;this.button=button};PastClick.prototype.compare=function(time,pos,button){return this.time+DOUBLECLICK_DELAY>time&&cmp(pos,this.pos)==0&&button==this.button};var lastClick,lastDoubleClick;function clickRepeat(pos,button){var now= +new Date();if(lastDoubleClick&&lastDoubleClick.compare(now,pos,button)){lastClick=lastDoubleClick=null;return "triple"}else if(lastClick&&lastClick.compare(now,pos,button)){lastDoubleClick=new PastClick(now,pos,button);lastClick=null;return "double"}else{lastClick=new PastClick(now,pos,button);lastDoubleClick=null;return "single"}}function onMouseDown(e){var cm=this,display=cm.display;if(signalDOMEvent(cm,e)||display.activeTouch&&display.input.supportsTouch()){return}display.input.ensurePolled();display.shift=e.shiftKey;if(eventInWidget(display,e)){if(!webkit){display.scroller.draggable=false;setTimeout(function(){return display.scroller.draggable=true},100)}return}if(clickInGutter(cm,e)){return}var pos=posFromMouse(cm,e),button=e_button(e),repeat=pos?clickRepeat(pos,button):"single";window.focus();if(button==1&&cm.state.selectingText){cm.state.selectingText(e)}if(pos&&handleMappedButton(cm,button,pos,repeat,e)){return}if(button==1){if(pos){leftButtonDown(cm,pos,repeat,e)}else if(e_target(e)==display.scroller){e_preventDefault(e)}}else if(button==2){if(pos){extendSelection(cm.doc,pos)}setTimeout(function(){return display.input.focus()},20)}else if(button==3){if(captureRightClick){cm.display.input.onContextMenu(e)}else{delayBlurEvent(cm)}}}function handleMappedButton(cm,button,pos,repeat,event){var name="Click";if(repeat=="double"){name="Double"+name}else if(repeat=="triple"){name="Triple"+name}name=(button==1?"Left":button==2?"Middle":"Right")+name;return dispatchKey(cm,addModifierNames(name,event),event,function(bound){if(typeof bound=="string"){bound=commands[bound]}if(!bound){return false}var done=false;try{if(cm.isReadOnly()){cm.state.suppressEdits=true}done=bound(cm,pos)!=Pass}finally{cm.state.suppressEdits=false}return done})}function configureMouse(cm,repeat,event){var option=cm.getOption("configureMouse");var value=option?option(cm,repeat,event):{};if(value.unit==null){var rect=chromeOS?event.shiftKey&&event.metaKey:event.altKey;value.unit=rect?"rectangle":repeat=="single"?"char":repeat=="double"?"word":"line"}if(value.extend==null||cm.doc.extend){value.extend=cm.doc.extend||event.shiftKey}if(value.addNew==null){value.addNew=mac?event.metaKey:event.ctrlKey}if(value.moveOnDrag==null){value.moveOnDrag=!(mac?event.altKey:event.ctrlKey)}return value}function leftButtonDown(cm,pos,repeat,event){if(ie){setTimeout(bind(ensureFocus,cm),0)}else{cm.curOp.focus=activeElt()}var behavior=configureMouse(cm,repeat,event);var sel=cm.doc.sel,contained;if(cm.options.dragDrop&&dragAndDrop&&!cm.isReadOnly()&&repeat=="single"&&(contained=sel.contains(pos))>-1&&(cmp((contained=sel.ranges[contained]).from(),pos)<0||pos.xRel>0)&&(cmp(contained.to(),pos)>0||pos.xRel<0)){leftButtonStartDrag(cm,event,pos,behavior)}else{leftButtonSelect(cm,event,pos,behavior)}}function leftButtonStartDrag(cm,event,pos,behavior){var display=cm.display,moved=false;var dragEnd=operation(cm,function(e){if(webkit){display.scroller.draggable=false}cm.state.draggingText=false;off(display.wrapper.ownerDocument,"mouseup",dragEnd);off(display.wrapper.ownerDocument,"mousemove",mouseMove);off(display.scroller,"dragstart",dragStart);off(display.scroller,"drop",dragEnd);if(!moved){e_preventDefault(e);if(!behavior.addNew){extendSelection(cm.doc,pos,null,null,behavior.extend)}if(webkit||ie&&ie_version==9){setTimeout(function(){display.wrapper.ownerDocument.body.focus();display.input.focus()},20)}else{display.input.focus()}}});var mouseMove=function mouseMove(e2){moved=moved||Math.abs(event.clientX-e2.clientX)+Math.abs(event.clientY-e2.clientY)>=10};var dragStart=function dragStart(){return moved=true};if(webkit){display.scroller.draggable=true}cm.state.draggingText=dragEnd;dragEnd.copy=!behavior.moveOnDrag;if(display.scroller.dragDrop){display.scroller.dragDrop()}on(display.wrapper.ownerDocument,"mouseup",dragEnd);on(display.wrapper.ownerDocument,"mousemove",mouseMove);on(display.scroller,"dragstart",dragStart);on(display.scroller,"drop",dragEnd);delayBlurEvent(cm);setTimeout(function(){return display.input.focus()},20)}function rangeForUnit(cm,pos,unit){if(unit=="char"){return new Range(pos,pos)}if(unit=="word"){return cm.findWordAt(pos)}if(unit=="line"){return new Range(Pos(pos.line,0),_clipPos(cm.doc,Pos(pos.line+1,0)))}var result=unit(cm,pos);return new Range(result.from,result.to)}function leftButtonSelect(cm,event,start,behavior){var display=cm.display,doc=cm.doc;e_preventDefault(event);var ourRange,ourIndex,startSel=doc.sel,ranges=startSel.ranges;if(behavior.addNew&&!behavior.extend){ourIndex=doc.sel.contains(start);if(ourIndex>-1){ourRange=ranges[ourIndex]}else{ourRange=new Range(start,start)}}else{ourRange=doc.sel.primary();ourIndex=doc.sel.primIndex}if(behavior.unit=="rectangle"){if(!behavior.addNew){ourRange=new Range(start,start)}start=posFromMouse(cm,event,true,true);ourIndex=-1}else{var range=rangeForUnit(cm,start,behavior.unit);if(behavior.extend){ourRange=extendRange(ourRange,range.anchor,range.head,behavior.extend)}else{ourRange=range}}if(!behavior.addNew){ourIndex=0;setSelection(doc,new Selection([ourRange],0),sel_mouse);startSel=doc.sel}else if(ourIndex==-1){ourIndex=ranges.length;setSelection(doc,normalizeSelection(cm,ranges.concat([ourRange]),ourIndex),{scroll:false,origin:"*mouse"})}else if(ranges.length>1&&ranges[ourIndex].empty()&&behavior.unit=="char"&&!behavior.extend){setSelection(doc,normalizeSelection(cm,ranges.slice(0,ourIndex).concat(ranges.slice(ourIndex+1)),0),{scroll:false,origin:"*mouse"});startSel=doc.sel}else{replaceOneSelection(doc,ourIndex,ourRange,sel_mouse)}var lastPos=start;function extendTo(pos){if(cmp(lastPos,pos)==0){return}lastPos=pos;if(behavior.unit=="rectangle"){var ranges=[],tabSize=cm.options.tabSize;var startCol=countColumn(getLine(doc,start.line).text,start.ch,tabSize);var posCol=countColumn(getLine(doc,pos.line).text,pos.ch,tabSize);var left=Math.min(startCol,posCol),right=Math.max(startCol,posCol);for(var line=Math.min(start.line,pos.line),end=Math.min(cm.lastLine(),Math.max(start.line,pos.line));line<=end;line+=1){var text=getLine(doc,line).text,leftPos=findColumn(text,left,tabSize);if(left==right){ranges.push(new Range(Pos(line,leftPos),Pos(line,leftPos)))}else if(text.length>leftPos){ranges.push(new Range(Pos(line,leftPos),Pos(line,findColumn(text,right,tabSize))))}}if(!ranges.length){ranges.push(new Range(start,start))}setSelection(doc,normalizeSelection(cm,startSel.ranges.slice(0,ourIndex).concat(ranges),ourIndex),{origin:"*mouse",scroll:false});cm.scrollIntoView(pos)}else{var oldRange=ourRange;var range=rangeForUnit(cm,pos,behavior.unit);var anchor=oldRange.anchor,head;if(cmp(range.anchor,anchor)>0){head=range.head;anchor=minPos(oldRange.from(),range.anchor)}else{head=range.anchor;anchor=maxPos(oldRange.to(),range.head)}var ranges$1=startSel.ranges.slice(0);ranges$1[ourIndex]=bidiSimplify(cm,new Range(_clipPos(doc,anchor),head));setSelection(doc,normalizeSelection(cm,ranges$1,ourIndex),sel_mouse)}}var editorSize=display.wrapper.getBoundingClientRect();var counter=0;function extend(e){var curCount= ++counter;var cur=posFromMouse(cm,e,true,behavior.unit=="rectangle");if(!cur){return}if(cmp(cur,lastPos)!=0){cm.curOp.focus=activeElt();extendTo(cur);var visible=visibleLines(display,doc);if(cur.line>=visible.to||cur.line<visible.from){setTimeout(operation(cm,function(){if(counter==curCount){extend(e)}}),150)}}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;if(outside){setTimeout(operation(cm,function(){if(counter!=curCount){return}display.scroller.scrollTop+=outside;extend(e)}),50)}}}function done(e){cm.state.selectingText=false;counter=Infinity;if(e){e_preventDefault(e);display.input.focus()}off(display.wrapper.ownerDocument,"mousemove",move);off(display.wrapper.ownerDocument,"mouseup",up);doc.history.lastSelOrigin=null}var move=operation(cm,function(e){if(e.buttons===0||!e_button(e)){done(e)}else{extend(e)}});var up=operation(cm,done);cm.state.selectingText=up;on(display.wrapper.ownerDocument,"mousemove",move);on(display.wrapper.ownerDocument,"mouseup",up)}function bidiSimplify(cm,range){var anchor=range.anchor;var head=range.head;var anchorLine=getLine(cm.doc,anchor.line);if(cmp(anchor,head)==0&&anchor.sticky==head.sticky){return range}var order=getOrder(anchorLine);if(!order){return range}var index=getBidiPartAt(order,anchor.ch,anchor.sticky),part=order[index];if(part.from!=anchor.ch&&part.to!=anchor.ch){return range}var boundary=index+(part.from==anchor.ch==(part.level!=1)?0:1);if(boundary==0||boundary==order.length){return range}var leftSide;if(head.line!=anchor.line){leftSide=(head.line-anchor.line)*(cm.doc.direction=="ltr"?1:-1)>0}else{var headIndex=getBidiPartAt(order,head.ch,head.sticky);var dir=headIndex-index||(head.ch-anchor.ch)*(part.level==1?-1:1);if(headIndex==boundary-1||headIndex==boundary){leftSide=dir<0}else{leftSide=dir>0}}var usePart=order[boundary+(leftSide?-1:0)];var from=leftSide==(usePart.level==1);var ch=from?usePart.from:usePart.to,sticky=from?"after":"before";return anchor.ch==ch&&anchor.sticky==sticky?range:new Range(new Pos(anchor.line,ch,sticky),head)}function gutterEvent(cm,e,type,prevent){var mX,mY;if(e.touches){mX=e.touches[0].clientX;mY=e.touches[0].clientY}else{try{mX=e.clientX;mY=e.clientY}catch(e){return false}}if(mX>=Math.floor(cm.display.gutters.getBoundingClientRect().right)){return false}if(prevent){e_preventDefault(e)}var display=cm.display;var lineBox=display.lineDiv.getBoundingClientRect();if(mY>lineBox.bottom||!hasHandler(cm,type)){return e_defaultPrevented(e)}mY-=lineBox.top-display.viewOffset;for(var i=0;i<cm.display.gutterSpecs.length;i+=1){var g=display.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=mX){var line=_lineAtHeight(cm.doc,mY);var gutter=cm.display.gutterSpecs[i];signal(cm,type,cm,line,gutter.className,e);return e_defaultPrevented(e)}}}function clickInGutter(cm,e){return gutterEvent(cm,e,"gutterClick",true)}function onContextMenu(cm,e){if(eventInWidget(cm.display,e)||contextMenuInGutter(cm,e)){return}if(signalDOMEvent(cm,e,"contextmenu")){return}if(!captureRightClick){cm.display.input.onContextMenu(e)}}function contextMenuInGutter(cm,e){if(!hasHandler(cm,"gutterContextMenu")){return false}return gutterEvent(cm,e,"gutterContextMenu",false)}function themeChanged(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-");clearCaches(cm)}var Init={toString:function toString(){return "CodeMirror.Init"}};var defaults={};var optionHandlers={};function defineOptions(CodeMirror){var optionHandlers=CodeMirror.optionHandlers;function option(name,deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt;if(handle){optionHandlers[name]=notOnInit?function(cm,val,old){if(old!=Init){handle(cm,val,old)}}:handle}}CodeMirror.defineOption=option;CodeMirror.Init=Init;option("value","",function(cm,val){return cm.setValue(val)},true);option("mode",null,function(cm,val){cm.doc.modeOption=val;loadMode(cm)},true);option("indentUnit",2,loadMode,true);option("indentWithTabs",false);option("smartIndent",true);option("tabSize",4,function(cm){resetModeState(cm);clearCaches(cm);regChange(cm)},true);option("lineSeparator",null,function(cm,val){cm.doc.lineSep=val;if(!val){return}var newBreaks=[],lineNo=cm.doc.first;cm.doc.iter(function(line){for(var pos=0;;){var found=line.text.indexOf(val,pos);if(found==-1){break}pos=found+val.length;newBreaks.push(Pos(lineNo,found))}lineNo+=1});for(var i=newBreaks.length-1;i>=0;i-=1){_replaceRange(cm.doc,val,newBreaks[i],Pos(newBreaks[i].line,newBreaks[i].ch+val.length))}});option("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(cm,val,old){cm.state.specialChars=new RegExp(val.source+(val.test("\t")?"":"|\t"),"g");if(old!=Init){cm.refresh()}});option("specialCharPlaceholder",defaultSpecialCharPlaceholder,function(cm){return cm.refresh()},true);option("electricChars",true);option("inputStyle",mobile?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor");},true);option("spellcheck",false,function(cm,val){return cm.getInputField().spellcheck=val},true);option("autocorrect",false,function(cm,val){return cm.getInputField().autocorrect=val},true);option("autocapitalize",false,function(cm,val){return cm.getInputField().autocapitalize=val},true);option("rtlMoveVisually",!windows);option("wholeLineUpdateBefore",true);option("theme","default",function(cm){themeChanged(cm);updateGutters(cm)},true);option("keyMap","default",function(cm,val,old){var next=getKeyMap(val);var prev=old!=Init&&getKeyMap(old);if(prev&&prev.detach){prev.detach(cm,next)}if(next.attach){next.attach(cm,prev||null)}});option("extraKeys",null);option("configureMouse",null);option("lineWrapping",false,wrappingChanged,true);option("gutters",[],function(cm,val){cm.display.gutterSpecs=getGutters(val,cm.options.lineNumbers);updateGutters(cm)},true);option("fixedGutter",true,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0";cm.refresh()},true);option("coverGutterNextToScrollbar",false,function(cm){return updateScrollbars(cm)},true);option("scrollbarStyle","native",function(cm){initScrollbars(cm);updateScrollbars(cm);cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)},true);option("lineNumbers",false,function(cm,val){cm.display.gutterSpecs=getGutters(cm.options.gutters,val);updateGutters(cm)},true);option("firstLineNumber",1,updateGutters,true);option("lineNumberFormatter",function(integer){return integer},updateGutters,true);option("showCursorWhenSelecting",false,updateSelection,true);option("resetSelectionOnContextMenu",true);option("lineWiseCopyCut",true);option("pasteLinesPerSelection",true);option("selectionsMayTouch",false);option("readOnly",false,function(cm,val){if(val=="nocursor"){onBlur(cm);cm.display.input.blur()}cm.display.input.readOnlyChanged(val)});option("disableInput",false,function(cm,val){if(!val){cm.display.input.reset()}},true);option("dragDrop",true,dragDropChanged);option("allowDropFileTypes",null);option("cursorBlinkRate",530);option("cursorScrollMargin",0);option("cursorHeight",1,updateSelection,true);option("singleCursorHeightPerLine",true,updateSelection,true);option("workTime",100);option("workDelay",100);option("flattenSpans",true,resetModeState,true);option("addModeClass",false,resetModeState,true);option("pollInterval",100);option("undoDepth",200,function(cm,val){return cm.doc.history.undoDepth=val});option("historyEventDelay",1250);option("viewportMargin",10,function(cm){return cm.refresh()},true);option("maxHighlightLength",10000,resetModeState,true);option("moveInputWithCursor",true,function(cm,val){if(!val){cm.display.input.resetPosition()}});option("tabindex",null,function(cm,val){return cm.display.input.getField().tabIndex=val||""});option("autofocus",null);option("direction","ltr",function(cm,val){return cm.doc.setDirection(val)},true);option("phrases",null)}function dragDropChanged(cm,value,old){var wasOn=old&&old!=Init;if(!value!=!wasOn){var funcs=cm.display.dragFunctions;var toggle=value?on:off;toggle(cm.display.scroller,"dragstart",funcs.start);toggle(cm.display.scroller,"dragenter",funcs.enter);toggle(cm.display.scroller,"dragover",funcs.over);toggle(cm.display.scroller,"dragleave",funcs.leave);toggle(cm.display.scroller,"drop",funcs.drop)}}function wrappingChanged(cm){if(cm.options.lineWrapping){addClass(cm.display.wrapper,"CodeMirror-wrap");cm.display.sizer.style.minWidth="";cm.display.sizerWidth=null}else{rmClass(cm.display.wrapper,"CodeMirror-wrap");findMaxLine(cm)}estimateLineHeights(cm);regChange(cm);clearCaches(cm);setTimeout(function(){return updateScrollbars(cm)},100)}function CodeMirror(place,options){var this$1=this;if(!(this instanceof CodeMirror)){return new CodeMirror(place,options)}this.options=options=options?copyObj(options):{};copyObj(defaults,options,false);var doc=options.value;if(typeof doc=="string"){doc=new Doc(doc,options.mode,null,options.lineSeparator,options.direction)}else if(options.mode){doc.modeOption=options.mode}this.doc=doc;var input=new CodeMirror.inputStyles[options.inputStyle](this);var display=this.display=new Display(place,doc,input,options);display.wrapper.CodeMirror=this;themeChanged(this);if(options.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}initScrollbars(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:-1,cutIncoming:-1,selectingText:false,draggingText:false,highlight:new Delayed(),keySeq:null,specialChars:null};if(options.autofocus&&!mobile){display.input.focus()}if(ie&&ie_version<11){setTimeout(function(){return this$1.display.input.reset(true)},20)}registerEventHandlers(this);ensureGlobalHandlers();_startOperation(this);this.curOp.forceUpdate=true;attachDoc(this,doc);if(options.autofocus&&!mobile||this.hasFocus()){setTimeout(bind(onFocus,this),20)}else{onBlur(this)}for(var opt in optionHandlers){if(optionHandlers.hasOwnProperty(opt)){optionHandlers[opt](this,options[opt],Init)}}maybeUpdateLineNumberWidth(this);if(options.finishInit){options.finishInit(this)}for(var i=0;i<initHooks.length;i+=1){initHooks[i](this)}_endOperation(this);if(webkit&&options.lineWrapping&&getComputedStyle(display.lineDiv).textRendering=="optimizelegibility"){display.lineDiv.style.textRendering="auto"}}CodeMirror.defaults=defaults;CodeMirror.optionHandlers=optionHandlers;function registerEventHandlers(cm){var d=cm.display;on(d.scroller,"mousedown",operation(cm,onMouseDown));if(ie&&ie_version<11){on(d.scroller,"dblclick",operation(cm,function(e){if(signalDOMEvent(cm,e)){return}var pos=posFromMouse(cm,e);if(!pos||clickInGutter(cm,e)||eventInWidget(cm.display,e)){return}e_preventDefault(e);var word=cm.findWordAt(pos);extendSelection(cm.doc,word.anchor,word.head)}))}else{on(d.scroller,"dblclick",function(e){return signalDOMEvent(cm,e)||e_preventDefault(e)})}on(d.scroller,"contextmenu",function(e){return onContextMenu(cm,e)});on(d.input.getField(),"contextmenu",function(e){if(!d.scroller.contains(e.target)){onContextMenu(cm,e)}});var touchFinished,prevTouch={end:0};function finishTouch(){if(d.activeTouch){touchFinished=setTimeout(function(){return d.activeTouch=null},1000);prevTouch=d.activeTouch;prevTouch.end= +new Date()}}function isMouseLikeTouchEvent(e){if(e.touches.length!=1){return false}var touch=e.touches[0];return touch.radiusX<=1&&touch.radiusY<=1}function farAway(touch,other){if(other.left==null){return true}var dx=other.left-touch.left,dy=other.top-touch.top;return dx*dx+dy*dy>20*20}on(d.scroller,"touchstart",function(e){if(!signalDOMEvent(cm,e)&&!isMouseLikeTouchEvent(e)&&!clickInGutter(cm,e)){d.input.ensurePolled();clearTimeout(touchFinished);var now= +new Date();d.activeTouch={start:now,moved:false,prev:now-prevTouch.end<=300?prevTouch:null};if(e.touches.length==1){d.activeTouch.left=e.touches[0].pageX;d.activeTouch.top=e.touches[0].pageY}}});on(d.scroller,"touchmove",function(){if(d.activeTouch){d.activeTouch.moved=true}});on(d.scroller,"touchend",function(e){var touch=d.activeTouch;if(touch&&!eventInWidget(d,e)&&touch.left!=null&&!touch.moved&&new Date()-touch.start<300){var pos=cm.coordsChar(d.activeTouch,"page"),range;if(!touch.prev||farAway(touch,touch.prev)){range=new Range(pos,pos)}else if(!touch.prev.prev||farAway(touch,touch.prev.prev)){range=cm.findWordAt(pos)}else {range=new Range(Pos(pos.line,0),_clipPos(cm.doc,Pos(pos.line+1,0)))}cm.setSelection(range.anchor,range.head);cm.focus();e_preventDefault(e)}finishTouch()});on(d.scroller,"touchcancel",finishTouch);on(d.scroller,"scroll",function(){if(d.scroller.clientHeight){updateScrollTop(cm,d.scroller.scrollTop);setScrollLeft(cm,d.scroller.scrollLeft,true);signal(cm,"scroll",cm)}});on(d.scroller,"mousewheel",function(e){return onScrollWheel(cm,e)});on(d.scroller,"DOMMouseScroll",function(e){return onScrollWheel(cm,e)});on(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function enter(e){if(!signalDOMEvent(cm,e)){e_stop(e)}},over:function over(e){if(!signalDOMEvent(cm,e)){onDragOver(cm,e);e_stop(e)}},start:function start(e){return onDragStart(cm,e)},drop:operation(cm,onDrop),leave:function leave(e){if(!signalDOMEvent(cm,e)){clearDragCursor(cm)}}};var inp=d.input.getField();on(inp,"keyup",function(e){return onKeyUp.call(cm,e)});on(inp,"keydown",operation(cm,onKeyDown));on(inp,"keypress",operation(cm,onKeyPress));on(inp,"focus",function(e){return onFocus(cm,e)});on(inp,"blur",function(e){return onBlur(cm,e)})}var initHooks=[];CodeMirror.defineInitHook=function(f){return initHooks.push(f)};function indentLine(cm,n,how,aggressive){var doc=cm.doc,state;if(how==null){how="add"}if(how=="smart"){if(!doc.mode.indent){how="prev"}else{state=getContextBefore(cm,n).state}}var tabSize=cm.options.tabSize;var line=getLine(doc,n),curSpace=countColumn(line.text,null,tabSize);if(line.stateAfter){line.stateAfter=null}var curSpaceString=line.text.match(/^\s*/)[0],indentation;if(!aggressive&&!/\S/.test(line.text)){indentation=0;how="not"}else if(how=="smart"){indentation=doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text);if(indentation==Pass||indentation>150){if(!aggressive){return}how="prev"}}if(how=="prev"){if(n>doc.first){indentation=countColumn(getLine(doc,n-1).text,null,tabSize)}else{indentation=0}}else if(how=="add"){indentation=curSpace+cm.options.indentUnit}else if(how=="subtract"){indentation=curSpace-cm.options.indentUnit}else if(typeof how=="number"){indentation=curSpace+how}indentation=Math.max(0,indentation);var indentString="",pos=0;if(cm.options.indentWithTabs){for(var i=Math.floor(indentation/tabSize);i;i-=1){pos+=tabSize;indentString+="\t"}}if(pos<indentation){indentString+=spaceStr(indentation-pos)}if(indentString!=curSpaceString){_replaceRange(doc,indentString,Pos(n,0),Pos(n,curSpaceString.length),"+input");line.stateAfter=null;return true}else{for(var i$1=0;i$1<doc.sel.ranges.length;i$1+=1){var range=doc.sel.ranges[i$1];if(range.head.line==n&&range.head.ch<curSpaceString.length){var pos$1=Pos(n,curSpaceString.length);replaceOneSelection(doc,i$1,new Range(pos$1,pos$1));break}}}}var lastCopied=null;function setLastCopied(newLastCopied){lastCopied=newLastCopied}function applyTextInput(cm,inserted,deleted,sel,origin){var doc=cm.doc;cm.display.shift=false;if(!sel){sel=doc.sel}var recent= +new Date()-200;var paste=origin=="paste"||cm.state.pasteIncoming>recent;var textLines=splitLinesAuto(inserted),multiPaste=null;if(paste&&sel.ranges.length>1){if(lastCopied&&lastCopied.text.join("\n")==inserted){if(sel.ranges.length%lastCopied.text.length==0){multiPaste=[];for(var i=0;i<lastCopied.text.length;i+=1){multiPaste.push(doc.splitLines(lastCopied.text[i]))}}}else if(textLines.length==sel.ranges.length&&cm.options.pasteLinesPerSelection){multiPaste=map(textLines,function(l){return[l]})}}var updateInput=cm.curOp.updateInput;for(var i$1=sel.ranges.length-1;i$1>=0;i$1-=1){var range=sel.ranges[i$1];var from=range.from(),to=range.to();if(range.empty()){if(deleted&&deleted>0){from=Pos(from.line,from.ch-deleted)}else if(cm.state.overwrite&&!paste){to=Pos(to.line,Math.min(getLine(doc,to.line).text.length,to.ch+lst(textLines).length))}else if(paste&&lastCopied&&lastCopied.lineWise&&lastCopied.text.join("\n")==inserted){from=to=Pos(from.line,0)}}var changeEvent={from:from,to:to,text:multiPaste?multiPaste[i$1%multiPaste.length]:textLines,origin:origin||(paste?"paste":cm.state.cutIncoming>recent?"cut":"+input")};makeChange(cm.doc,changeEvent);signalLater(cm,"inputRead",cm,changeEvent)}if(inserted&&!paste){triggerElectric(cm,inserted)}ensureCursorVisible(cm);if(cm.curOp.updateInput<2){cm.curOp.updateInput=updateInput}cm.curOp.typing=true;cm.state.pasteIncoming=cm.state.cutIncoming=-1}function handlePaste(e,cm){var pasted=e.clipboardData&&e.clipboardData.getData("Text");if(pasted){e.preventDefault();if(!cm.isReadOnly()&&!cm.options.disableInput){runInOp(cm,function(){return applyTextInput(cm,pasted,0,null,"paste")})}return true}}function triggerElectric(cm,inserted){if(!cm.options.electricChars||!cm.options.smartIndent){return}var sel=cm.doc.sel;for(var i=sel.ranges.length-1;i>=0;i-=1){var range=sel.ranges[i];if(range.head.ch>100||i&&sel.ranges[i-1].head.line==range.head.line){continue}var mode=cm.getModeAt(range.head);var indented=false;if(mode.electricChars){for(var j=0;j<mode.electricChars.length;j+=1){if(inserted.indexOf(mode.electricChars.charAt(j))>-1){indented=indentLine(cm,range.head.line,"smart");break}}}else if(mode.electricInput){if(mode.electricInput.test(getLine(cm.doc,range.head.line).text.slice(0,range.head.ch))){indented=indentLine(cm,range.head.line,"smart")}}if(indented){signalLater(cm,"electricInput",cm,range.head.line)}}}function copyableRanges(cm){var text=[],ranges=[];for(var i=0;i<cm.doc.sel.ranges.length;i+=1){var line=cm.doc.sel.ranges[i].head.line;var lineRange={anchor:Pos(line,0),head:Pos(line+1,0)};ranges.push(lineRange);text.push(cm.getRange(lineRange.anchor,lineRange.head))}return{text:text,ranges:ranges}}function disableBrowserMagic(field,spellcheck,autocorrect,autocapitalize){field.setAttribute("autocorrect",autocorrect?"":"off");field.setAttribute("autocapitalize",autocapitalize?"":"off");field.setAttribute("spellcheck",!!spellcheck)}function hiddenTextarea(){var te=elt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var div=elt("div",[te],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(webkit){te.style.width="1000px"}else{te.setAttribute("wrap","off")}if(ios){te.style.border="1px solid black"}disableBrowserMagic(te);return div}function addEditorMethods(CodeMirror){var optionHandlers=CodeMirror.optionHandlers;var helpers=CodeMirror.helpers={};CodeMirror.prototype={constructor:CodeMirror,focus:function focus(){window.focus();this.display.input.focus()},setOption:function setOption(option,value){var options=this.options,old=options[option];if(options[option]==value&&option!="mode"){return}options[option]=value;if(optionHandlers.hasOwnProperty(option)){operation(this,optionHandlers[option])(this,value,old)}signal(this,"optionChange",this,option)},getOption:function getOption(option){return this.options[option]},getDoc:function getDoc(){return this.doc},addKeyMap:function addKeyMap(map,bottom){this.state.keyMaps[bottom?"push":"unshift"](getKeyMap(map))},removeKeyMap:function removeKeyMap(map){var maps=this.state.keyMaps;for(var i=0;i<maps.length;i+=1){if(maps[i]==map||maps[i].name==map){maps.splice(i,1);return true}}},addOverlay:methodOp(function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);if(mode.startState){throw new Error("Overlays may not be stateful.")}insertSorted(this.state.overlays,{mode:mode,modeSpec:spec,opaque:options&&options.opaque,priority:options&&options.priority||0},function(overlay){return overlay.priority});this.state.modeGen+=1;regChange(this)}),removeOverlay:methodOp(function(spec){var overlays=this.state.overlays;for(var i=0;i<overlays.length;i+=1){var cur=overlays[i].modeSpec;if(cur==spec||typeof spec=="string"&&cur.name==spec){overlays.splice(i,1);this.state.modeGen+=1;regChange(this);return}}}),indentLine:methodOp(function(n,dir,aggressive){if(typeof dir!="string"&&typeof dir!="number"){if(dir==null){dir=this.options.smartIndent?"smart":"prev"}else{dir=dir?"add":"subtract"}}if(isLine(this.doc,n)){indentLine(this,n,dir,aggressive)}}),indentSelection:methodOp(function(how){var ranges=this.doc.sel.ranges,end=-1;for(var i=0;i<ranges.length;i+=1){var range=ranges[i];if(!range.empty()){var from=range.from(),to=range.to();var start=Math.max(end,from.line);end=Math.min(this.lastLine(),to.line-(to.ch?0:1))+1;for(var j=start;j<end;j+=1){indentLine(this,j,how)}var newRanges=this.doc.sel.ranges;if(from.ch==0&&ranges.length==newRanges.length&&newRanges[i].from().ch>0){replaceOneSelection(this.doc,i,new Range(from,newRanges[i].to()),sel_dontScroll)}}else if(range.head.line>end){indentLine(this,range.head.line,how,true);end=range.head.line;if(i==this.doc.sel.primIndex){ensureCursorVisible(this)}}}}),getTokenAt:function getTokenAt(pos,precise){return takeToken(this,pos,precise)},getLineTokens:function getLineTokens(line,precise){return takeToken(this,Pos(line),precise,true)},getTokenTypeAt:function getTokenTypeAt(pos){pos=_clipPos(this.doc,pos);var styles=getLineStyles(this,getLine(this.doc,pos.line));var before=0,after=(styles.length-1)/2,ch=pos.ch;var type;if(ch==0){type=styles[2]}else{for(;;){var mid=before+after>>1;if((mid?styles[mid*2-1]:0)>=ch){after=mid}else if(styles[mid*2+1]<ch){before=mid+1}else{type=styles[mid*2+2];break}}}var cut=type?type.indexOf("overlay "):-1;return cut<0?type:cut==0?null:type.slice(0,cut-1)},getModeAt:function getModeAt(pos){var mode=this.doc.mode;if(!mode.innerMode){return mode}return CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode},getHelper:function getHelper(pos,type){return this.getHelpers(pos,type)[0]},getHelpers:function getHelpers(pos,type){var found=[];if(!helpers.hasOwnProperty(type)){return found}var help=helpers[type],mode=this.getModeAt(pos);if(typeof mode[type]=="string"){if(help[mode[type]]){found.push(help[mode[type]])}}else if(mode[type]){for(var i=0;i<mode[type].length;i+=1){var val=help[mode[type][i]];if(val){found.push(val)}}}else if(mode.helperType&&help[mode.helperType]){found.push(help[mode.helperType])}else if(help[mode.name]){found.push(help[mode.name])}for(var i$1=0;i$1<help._global.length;i$1+=1){var cur=help._global[i$1];if(cur.pred(mode,this)&&indexOf(found,cur.val)==-1){found.push(cur.val)}}return found},getStateAfter:function getStateAfter(line,precise){var doc=this.doc;line=clipLine(doc,line==null?doc.first+doc.size-1:line);return getContextBefore(this,line+1,precise).state},cursorCoords:function cursorCoords(start,mode){var pos,range=this.doc.sel.primary();if(start==null){pos=range.head}else if(_typeof(start)=="object"){pos=_clipPos(this.doc,start)}else{pos=start?range.from():range.to()}return _cursorCoords(this,pos,mode||"page")},charCoords:function charCoords(pos,mode){return _charCoords(this,_clipPos(this.doc,pos),mode||"page")},coordsChar:function coordsChar(coords,mode){coords=fromCoordSystem(this,coords,mode||"page");return _coordsChar(this,coords.left,coords.top)},lineAtHeight:function lineAtHeight(height,mode){height=fromCoordSystem(this,{top:height,left:0},mode||"page").top;return _lineAtHeight(this.doc,height+this.display.viewOffset)},heightAtLine:function heightAtLine(line,mode,includeWidgets){var end=false,lineObj;if(typeof line=="number"){var last=this.doc.first+this.doc.size-1;if(line<this.doc.first){line=this.doc.first}else if(line>last){line=last;end=true}lineObj=getLine(this.doc,line)}else{lineObj=line}return intoCoordSystem(this,lineObj,{top:0,left:0},mode||"page",includeWidgets||end).top+(end?this.doc.height-_heightAtLine(lineObj):0)},defaultTextHeight:function defaultTextHeight(){return textHeight(this.display)},defaultCharWidth:function defaultCharWidth(){return charWidth(this.display)},getViewport:function getViewport(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function addWidget(pos,node,scroll,vert,horiz){var display=this.display;pos=_cursorCoords(this,_clipPos(this.doc,pos));var top=pos.bottom,left=pos.left;node.style.position="absolute";node.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(node);display.sizer.appendChild(node);if(vert=="over"){top=pos.top}else if(vert=="above"||vert=="near"){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);if((vert=='above'||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight){top=pos.top-node.offsetHeight}else if(pos.bottom+node.offsetHeight<=vspace){top=pos.bottom}if(left+node.offsetWidth>hspace){left=hspace-node.offsetWidth}}node.style.top=top+"px";node.style.left=node.style.right="";if(horiz=="right"){left=display.sizer.clientWidth-node.offsetWidth;node.style.right="0px"}else{if(horiz=="left"){left=0}else if(horiz=="middle"){left=(display.sizer.clientWidth-node.offsetWidth)/2}node.style.left=left+"px"}if(scroll){scrollIntoView(this,{left:left,top:top,right:left+node.offsetWidth,bottom:top+node.offsetHeight})}},triggerOnKeyDown:methodOp(onKeyDown),triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,triggerOnMouseDown:methodOp(onMouseDown),execCommand:function execCommand(cmd){if(commands.hasOwnProperty(cmd)){return commands[cmd].call(null,this)}},triggerElectric:methodOp(function(text){triggerElectric(this,text)}),findPosH:function findPosH(from,amount,unit,visually){var dir=1;if(amount<0){dir=-1;amount= -amount}var cur=_clipPos(this.doc,from);for(var i=0;i<amount;i+=1){cur=_findPosH(this.doc,cur,dir,unit,visually);if(cur.hitSide){break}}return cur},moveH:methodOp(function(dir,unit){var this$1=this;this.extendSelectionsBy(function(range){if(this$1.display.shift||this$1.doc.extend||range.empty()){return _findPosH(this$1.doc,range.head,dir,unit,this$1.options.rtlMoveVisually)}else{return dir<0?range.from():range.to()}},sel_move)}),deleteH:methodOp(function(dir,unit){var sel=this.doc.sel,doc=this.doc;if(sel.somethingSelected()){doc.replaceSelection("",null,"+delete")}else{deleteNearSelection(this,function(range){var other=_findPosH(doc,range.head,dir,unit,false);return dir<0?{from:other,to:range.head}:{from:range.head,to:other}})}}),findPosV:function findPosV(from,amount,unit,goalColumn){var dir=1,x=goalColumn;if(amount<0){dir=-1;amount= -amount}var cur=_clipPos(this.doc,from);for(var i=0;i<amount;i+=1){var coords=_cursorCoords(this,cur,"div");if(x==null){x=coords.left}else{coords.left=x}cur=_findPosV(this,coords,dir,unit);if(cur.hitSide){break}}return cur},moveV:methodOp(function(dir,unit){var this$1=this;var doc=this.doc,goals=[];var collapse=!this.display.shift&&!doc.extend&&doc.sel.somethingSelected();doc.extendSelectionsBy(function(range){if(collapse){return dir<0?range.from():range.to()}var headPos=_cursorCoords(this$1,range.head,"div");if(range.goalColumn!=null){headPos.left=range.goalColumn}goals.push(headPos.left);var pos=_findPosV(this$1,headPos,dir,unit);if(unit=="page"&&range==doc.sel.primary()){addToScrollTop(this$1,_charCoords(this$1,pos,"div").top-headPos.top)}return pos},sel_move);if(goals.length){for(var i=0;i<doc.sel.ranges.length;i+=1){doc.sel.ranges[i].goalColumn=goals[i]}}}),findWordAt:function findWordAt(pos){var doc=this.doc,line=getLine(doc,pos.line).text;var start=pos.ch,end=pos.ch;if(line){var helper=this.getHelper(pos,"wordChars");if((pos.sticky=="before"||end==line.length)&&start){start-=1}else{end+=1}var startChar=line.charAt(start);var check=isWordChar(startChar,helper)?function(ch){return isWordChar(ch,helper)}:/\s/.test(startChar)?function(ch){return/\s/.test(ch)}:function(ch){return!/\s/.test(ch)&&!isWordChar(ch)};while(start>0&&check(line.charAt(start-1))){start-=1}while(end<line.length&&check(line.charAt(end))){end+=1}}return new Range(Pos(pos.line,start),Pos(pos.line,end))},toggleOverwrite:function toggleOverwrite(value){if(value!=null&&value==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){addClass(this.display.cursorDiv,"CodeMirror-overwrite")}else{rmClass(this.display.cursorDiv,"CodeMirror-overwrite")}signal(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function hasFocus(){return this.display.input.getField()==activeElt()},isReadOnly:function isReadOnly(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:methodOp(function(x,y){scrollToCoords(this,x,y)}),getScrollInfo:function getScrollInfo(){var scroller=this.display.scroller;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-scrollGap(this)-this.display.barHeight,width:scroller.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)}},scrollIntoView:methodOp(function(range,margin){if(range==null){range={from:this.doc.sel.primary().head,to:null};if(margin==null){margin=this.options.cursorScrollMargin}}else if(typeof range=="number"){range={from:Pos(range,0),to:null}}else if(range.from==null){range={from:range,to:null}}if(!range.to){range.to=range.from}range.margin=margin||0;if(range.from.line!=null){scrollToRange(this,range)}else{scrollToCoordsRange(this,range.from,range.to,range.margin)}}),setSize:methodOp(function(width,height){var this$1=this;var interpret=function interpret(val){return typeof val=="number"||/^\d+$/.test(String(val))?val+"px":val};if(width!=null){this.display.wrapper.style.width=interpret(width)}if(height!=null){this.display.wrapper.style.height=interpret(height)}if(this.options.lineWrapping){clearLineMeasurementCache(this)}var lineNo=this.display.viewFrom;this.doc.iter(lineNo,this.display.viewTo,function(line){if(line.widgets){for(var i=0;i<line.widgets.length;i+=1){if(line.widgets[i].noHScroll){regLineChange(this$1,lineNo,"widget");break}}}lineNo+=1});this.curOp.forceUpdate=true;signal(this,"refresh",this)}),operation:function operation(f){return runInOp(this,f)},startOperation:function startOperation(){return _startOperation(this)},endOperation:function endOperation(){return _endOperation(this)},refresh:methodOp(function(){var oldHeight=this.display.cachedTextHeight;regChange(this);this.curOp.forceUpdate=true;clearCaches(this);scrollToCoords(this,this.doc.scrollLeft,this.doc.scrollTop);updateGutterSpace(this.display);if(oldHeight==null||Math.abs(oldHeight-textHeight(this.display))>.5){estimateLineHeights(this)}signal(this,"refresh",this)}),swapDoc:methodOp(function(doc){var old=this.doc;old.cm=null;if(this.state.selectingText){this.state.selectingText()}attachDoc(this,doc);clearCaches(this);this.display.input.reset();scrollToCoords(this,doc.scrollLeft,doc.scrollTop);this.curOp.forceScroll=true;signalLater(this,"swapDoc",this,old);return old}),phrase:function phrase(phraseText){var phrases=this.options.phrases;return phrases&&Object.prototype.hasOwnProperty.call(phrases,phraseText)?phrases[phraseText]:phraseText},getInputField:function getInputField(){return this.display.input.getField()},getWrapperElement:function getWrapperElement(){return this.display.wrapper},getScrollerElement:function getScrollerElement(){return this.display.scroller},getGutterElement:function getGutterElement(){return this.display.gutters}};eventMixin(CodeMirror);CodeMirror.registerHelper=function(type,name,value){if(!helpers.hasOwnProperty(type)){helpers[type]=CodeMirror[type]={_global:[]}}helpers[type][name]=value};CodeMirror.registerGlobalHelper=function(type,name,predicate,value){CodeMirror.registerHelper(type,name,value);helpers[type]._global.push({pred:predicate,val:value})}}function _findPosH(doc,pos,dir,unit,visually){var oldPos=pos;var origDir=dir;var lineObj=getLine(doc,pos.line);var lineDir=visually&&doc.direction=="rtl"? -dir:dir;function findNextLine(){var l=pos.line+lineDir;if(l<doc.first||l>=doc.first+doc.size){return false}pos=new Pos(l,pos.ch,pos.sticky);return lineObj=getLine(doc,l)}function moveOnce(boundToLine){var next;if(visually){next=moveVisually(doc.cm,lineObj,pos,dir)}else{next=moveLogically(lineObj,pos,dir)}if(next==null){if(!boundToLine&&findNextLine()){pos=endOfLine(visually,doc.cm,lineObj,pos.line,lineDir)}else{return false}}else{pos=next}return true}if(unit=="char"){moveOnce()}else if(unit=="column"){moveOnce(true)}else if(unit=="word"||unit=="group"){var sawType=null,group=unit=="group";var helper=doc.cm&&doc.cm.getHelper(pos,"wordChars");for(var first=true;;first=false){if(dir<0&&!moveOnce(!first)){break}var cur=lineObj.text.charAt(pos.ch)||"\n";var type=isWordChar(cur,helper)?"w":group&&cur=="\n"?"n":!group||/\s/.test(cur)?null:"p";if(group&&!first&&!type){type="s"}if(sawType&&sawType!=type){if(dir<0){dir=1;moveOnce();pos.sticky="after"}break}if(type){sawType=type}if(dir>0&&!moveOnce(!first)){break}}}var result=skipAtomic(doc,pos,oldPos,origDir,true);if(equalCursorPos(oldPos,result)){result.hitSide=true}return result}function _findPosV(cm,pos,dir,unit){var doc=cm.doc,x=pos.left,y;if(unit=="page"){var pageSize=Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var moveAmount=Math.max(pageSize-.5*textHeight(cm.display),3);y=(dir>0?pos.bottom:pos.top)+dir*moveAmount}else if(unit=="line"){y=dir>0?pos.bottom+3:pos.top-3}var target;for(;;){target=_coordsChar(cm,x,y);if(!target.outside){break}if(dir<0?y<=0:y>=doc.height){target.hitSide=true;break}y+=dir*5}return target}var ContentEditableInput=function ContentEditableInput(cm){this.cm=cm;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Delayed();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};ContentEditableInput.prototype.init=function(display){var this$1=this;var input=this,cm=input.cm;var div=input.div=display.lineDiv;disableBrowserMagic(div,cm.options.spellcheck,cm.options.autocorrect,cm.options.autocapitalize);on(div,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm)){return}if(ie_version<=11){setTimeout(operation(cm,function(){return this$1.updateFromDOM()}),20)}});on(div,"compositionstart",function(e){this$1.composing={data:e.data,done:false}});on(div,"compositionupdate",function(e){if(!this$1.composing){this$1.composing={data:e.data,done:false}}});on(div,"compositionend",function(e){if(this$1.composing){if(e.data!=this$1.composing.data){this$1.readFromDOMSoon()}this$1.composing.done=true}});on(div,"touchstart",function(){return input.forceCompositionEnd()});on(div,"input",function(){if(!this$1.composing){this$1.readFromDOMSoon()}});function onCopyCut(e){if(signalDOMEvent(cm,e)){return}if(cm.somethingSelected()){setLastCopied({lineWise:false,text:cm.getSelections()});if(e.type=="cut"){cm.replaceSelection("",null,"cut")}}else if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);setLastCopied({lineWise:true,text:ranges.text});if(e.type=="cut"){cm.operation(function(){cm.setSelections(ranges.ranges,0,sel_dontScroll);cm.replaceSelection("",null,"cut")})}}if(e.clipboardData){e.clipboardData.clearData();var content=lastCopied.text.join("\n");e.clipboardData.setData("Text",content);if(e.clipboardData.getData("Text")==content){e.preventDefault();return}}var kludge=hiddenTextarea(),te=kludge.firstChild;cm.display.lineSpace.insertBefore(kludge,cm.display.lineSpace.firstChild);te.value=lastCopied.text.join("\n");var hadFocus=document.activeElement;selectInput(te);setTimeout(function(){cm.display.lineSpace.removeChild(kludge);hadFocus.focus();if(hadFocus==div){input.showPrimarySelection()}},50)}on(div,"copy",onCopyCut);on(div,"cut",onCopyCut)};ContentEditableInput.prototype.prepareSelection=function(){var result=prepareSelection(this.cm,false);result.focus=document.activeElement==this.div;return result};ContentEditableInput.prototype.showSelection=function(info,takeFocus){if(!info||!this.cm.display.view.length){return}if(info.focus||takeFocus){this.showPrimarySelection()}this.showMultipleSelections(info)};ContentEditableInput.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()};ContentEditableInput.prototype.showPrimarySelection=function(){var sel=this.getSelection(),cm=this.cm,prim=cm.doc.sel.primary();var from=prim.from(),to=prim.to();if(cm.display.viewTo==cm.display.viewFrom||from.line>=cm.display.viewTo||to.line<cm.display.viewFrom){sel.removeAllRanges();return}var curAnchor=domToPos(cm,sel.anchorNode,sel.anchorOffset);var curFocus=domToPos(cm,sel.focusNode,sel.focusOffset);if(curAnchor&&!curAnchor.bad&&curFocus&&!curFocus.bad&&cmp(minPos(curAnchor,curFocus),from)==0&&cmp(maxPos(curAnchor,curFocus),to)==0){return}var view=cm.display.view;var start=from.line>=cm.display.viewFrom&&posToDOM(cm,from)||{node:view[0].measure.map[2],offset:0};var end=to.line<cm.display.viewTo&&posToDOM(cm,to);if(!end){var measure=view[view.length-1].measure;var map=measure.maps?measure.maps[measure.maps.length-1]:measure.map;end={node:map[map.length-1],offset:map[map.length-2]-map[map.length-3]}}if(!start||!end){sel.removeAllRanges();return}var old=sel.rangeCount&&sel.getRangeAt(0),rng;try{rng=range(start.node,start.offset,end.offset,end.node)}catch(e){}if(rng){if(!gecko&&cm.state.focused){sel.collapse(start.node,start.offset);if(!rng.collapsed){sel.removeAllRanges();sel.addRange(rng)}}else{sel.removeAllRanges();sel.addRange(rng)}if(old&&sel.anchorNode==null){sel.addRange(old)}else if(gecko){this.startGracePeriod()}}this.rememberSelection()};ContentEditableInput.prototype.startGracePeriod=function(){var this$1=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){this$1.gracePeriod=false;if(this$1.selectionChanged()){this$1.cm.operation(function(){return this$1.cm.curOp.selectionChanged=true})}},20)};ContentEditableInput.prototype.showMultipleSelections=function(info){removeChildrenAndAdd(this.cm.display.cursorDiv,info.cursors);removeChildrenAndAdd(this.cm.display.selectionDiv,info.selection)};ContentEditableInput.prototype.rememberSelection=function(){var sel=this.getSelection();this.lastAnchorNode=sel.anchorNode;this.lastAnchorOffset=sel.anchorOffset;this.lastFocusNode=sel.focusNode;this.lastFocusOffset=sel.focusOffset};ContentEditableInput.prototype.selectionInEditor=function(){var sel=this.getSelection();if(!sel.rangeCount){return false}var node=sel.getRangeAt(0).commonAncestorContainer;return contains(this.div,node)};ContentEditableInput.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()||document.activeElement!=this.div){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};ContentEditableInput.prototype.blur=function(){this.div.blur()};ContentEditableInput.prototype.getField=function(){return this.div};ContentEditableInput.prototype.supportsTouch=function(){return true};ContentEditableInput.prototype.receivedFocus=function(){var input=this;if(this.selectionInEditor()){this.pollSelection()}else{runInOp(this.cm,function(){return input.cm.curOp.selectionChanged=true})}function poll(){if(input.cm.state.focused){input.pollSelection();input.polling.set(input.cm.options.pollInterval,poll)}}this.polling.set(this.cm.options.pollInterval,poll)};ContentEditableInput.prototype.selectionChanged=function(){var sel=this.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastFocusNode||sel.focusOffset!=this.lastFocusOffset};ContentEditableInput.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return}var sel=this.getSelection(),cm=this.cm;if(android&&chrome&&this.cm.display.gutterSpecs.length&&isInGutter(sel.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing){return}this.rememberSelection();var anchor=domToPos(cm,sel.anchorNode,sel.anchorOffset);var head=domToPos(cm,sel.focusNode,sel.focusOffset);if(anchor&&head){runInOp(cm,function(){setSelection(cm.doc,simpleSelection(anchor,head),sel_dontScroll);if(anchor.bad||head.bad){cm.curOp.selectionChanged=true}})}};ContentEditableInput.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var cm=this.cm,display=cm.display,sel=cm.doc.sel.primary();var from=sel.from(),to=sel.to();if(from.ch==0&&from.line>cm.firstLine()){from=Pos(from.line-1,getLine(cm.doc,from.line-1).length)}if(to.ch==getLine(cm.doc,to.line).text.length&&to.line<cm.lastLine()){to=Pos(to.line+1,0)}if(from.line<display.viewFrom||to.line>display.viewTo-1){return false}var fromIndex,fromLine,fromNode;if(from.line==display.viewFrom||(fromIndex=findViewIndex(cm,from.line))==0){fromLine=lineNo(display.view[0].line);fromNode=display.view[0].node}else{fromLine=lineNo(display.view[fromIndex].line);fromNode=display.view[fromIndex-1].node.nextSibling}var toIndex=findViewIndex(cm,to.line);var toLine,toNode;if(toIndex==display.view.length-1){toLine=display.viewTo-1;toNode=display.lineDiv.lastChild}else{toLine=lineNo(display.view[toIndex+1].line)-1;toNode=display.view[toIndex+1].node.previousSibling}if(!fromNode){return false}var newText=cm.doc.splitLines(domTextBetween(cm,fromNode,toNode,fromLine,toLine));var oldText=getBetween(cm.doc,Pos(fromLine,0),Pos(toLine,getLine(cm.doc,toLine).text.length));while(newText.length>1&&oldText.length>1){if(lst(newText)==lst(oldText)){newText.pop();oldText.pop();toLine-=1}else if(newText[0]==oldText[0]){newText.shift();oldText.shift();fromLine+=1}else{break}}var cutFront=0,cutEnd=0;var newTop=newText[0],oldTop=oldText[0],maxCutFront=Math.min(newTop.length,oldTop.length);while(cutFront<maxCutFront&&newTop.charCodeAt(cutFront)==oldTop.charCodeAt(cutFront)){cutFront+=1}var newBot=lst(newText),oldBot=lst(oldText);var maxCutEnd=Math.min(newBot.length-(newText.length==1?cutFront:0),oldBot.length-(oldText.length==1?cutFront:0));while(cutEnd<maxCutEnd&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1)){cutEnd+=1}if(newText.length==1&&oldText.length==1&&fromLine==from.line){while(cutFront&&cutFront>from.ch&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1)){cutFront-=1;cutEnd+=1}}newText[newText.length-1]=newBot.slice(0,newBot.length-cutEnd).replace(/^\u200b+/,"");newText[0]=newText[0].slice(cutFront).replace(/\u200b+$/,"");var chFrom=Pos(fromLine,cutFront);var chTo=Pos(toLine,oldText.length?lst(oldText).length-cutEnd:0);if(newText.length>1||newText[0]||cmp(chFrom,chTo)){_replaceRange(cm.doc,newText,chFrom,chTo,"+input");return true}};ContentEditableInput.prototype.ensurePolled=function(){this.forceCompositionEnd()};ContentEditableInput.prototype.reset=function(){this.forceCompositionEnd()};ContentEditableInput.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};ContentEditableInput.prototype.readFromDOMSoon=function(){var this$1=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){this$1.readDOMTimeout=null;if(this$1.composing){if(this$1.composing.done){this$1.composing=null}else{return}}this$1.updateFromDOM()},80)};ContentEditableInput.prototype.updateFromDOM=function(){var this$1=this;if(this.cm.isReadOnly()||!this.pollContent()){runInOp(this.cm,function(){return regChange(this$1.cm)})}};ContentEditableInput.prototype.setUneditable=function(node){node.contentEditable="false"};ContentEditableInput.prototype.onKeyPress=function(e){if(e.charCode==0||this.composing){return}e.preventDefault();if(!this.cm.isReadOnly()){operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0)}};ContentEditableInput.prototype.readOnlyChanged=function(val){this.div.contentEditable=String(val!="nocursor")};ContentEditableInput.prototype.onContextMenu=function(){};ContentEditableInput.prototype.resetPosition=function(){};ContentEditableInput.prototype.needsContentAttribute=true;function posToDOM(cm,pos){var view=findViewForLine(cm,pos.line);if(!view||view.hidden){return null}var line=getLine(cm.doc,pos.line);var info=mapFromLineView(view,line,pos.line);var order=getOrder(line,cm.doc.direction),side="left";if(order){var partPos=getBidiPartAt(order,pos.ch);side=partPos%2?"right":"left"}var result=nodeAndOffsetInLineMap(info.map,pos.ch,side);result.offset=result.collapse=="right"?result.end:result.start;return result}function isInGutter(node){for(var scan=node;scan;scan=scan.parentNode){if(/CodeMirror-gutter-wrapper/.test(scan.className)){return true}}return false}function badPos(pos,bad){if(bad){pos.bad=true}return pos}function domTextBetween(cm,from,to,fromLine,toLine){var text="",closing=false,lineSep=cm.doc.lineSeparator(),extraLinebreak=false;function recognizeMarker(id){return function(marker){return marker.id==id}}function close(){if(closing){text+=lineSep;if(extraLinebreak){text+=lineSep}closing=extraLinebreak=false}}function addText(str){if(str){close();text+=str}}function walk(node){if(node.nodeType==1){var cmText=node.getAttribute("cm-text");if(cmText){addText(cmText);return}var markerID=node.getAttribute("cm-marker"),range;if(markerID){var found=cm.findMarks(Pos(fromLine,0),Pos(toLine+1,0),recognizeMarker(+markerID));if(found.length&&(range=found[0].find(0))){addText(getBetween(cm.doc,range.from,range.to).join(lineSep))}return}if(node.getAttribute("contenteditable")=="false"){return}var isBlock=/^(pre|div|p|li|table|br)$/i.test(node.nodeName);if(!/^br$/i.test(node.nodeName)&&node.textContent.length==0){return}if(isBlock){close()}for(var i=0;i<node.childNodes.length;i+=1){walk(node.childNodes[i])}if(/^(pre|p)$/i.test(node.nodeName)){extraLinebreak=true}if(isBlock){closing=true}}else if(node.nodeType==3){addText(node.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}}for(;;){walk(from);if(from==to){break}from=from.nextSibling;extraLinebreak=false}return text}function domToPos(cm,node,offset){var lineNode;if(node==cm.display.lineDiv){lineNode=cm.display.lineDiv.childNodes[offset];if(!lineNode){return badPos(cm.clipPos(Pos(cm.display.viewTo-1)),true)}node=null;offset=0}else{for(lineNode=node;;lineNode=lineNode.parentNode){if(!lineNode||lineNode==cm.display.lineDiv){return null}if(lineNode.parentNode&&lineNode.parentNode==cm.display.lineDiv){break}}}for(var i=0;i<cm.display.view.length;i+=1){var lineView=cm.display.view[i];if(lineView.node==lineNode){return locateNodeInLineView(lineView,node,offset)}}}function locateNodeInLineView(lineView,node,offset){var wrapper=lineView.text.firstChild,bad=false;if(!node||!contains(wrapper,node)){return badPos(Pos(lineNo(lineView.line),0),true)}if(node==wrapper){bad=true;node=wrapper.childNodes[offset];offset=0;if(!node){var line=lineView.rest?lst(lineView.rest):lineView.line;return badPos(Pos(lineNo(line),line.text.length),bad)}}var textNode=node.nodeType==3?node:null,topNode=node;if(!textNode&&node.childNodes.length==1&&node.firstChild.nodeType==3){textNode=node.firstChild;if(offset){offset=textNode.nodeValue.length}}while(topNode.parentNode!=wrapper){topNode=topNode.parentNode}var measure=lineView.measure,maps=measure.maps;function find(textNode,topNode,offset){for(var i=-1;i<(maps?maps.length:0);i+=1){var map=i<0?measure.map:maps[i];for(var j=0;j<map.length;j+=3){var curNode=map[j+2];if(curNode==textNode||curNode==topNode){var line=lineNo(i<0?lineView.line:lineView.rest[i]);var ch=map[j]+offset;if(offset<0||curNode!=textNode){ch=map[j+(offset?1:0)]}return Pos(line,ch)}}}}var found=find(textNode,topNode,offset);if(found){return badPos(found,bad)}for(var after=topNode.nextSibling,dist=textNode?textNode.nodeValue.length-offset:0;after;after=after.nextSibling){found=find(after,after.firstChild,0);if(found){return badPos(Pos(found.line,found.ch-dist),bad)}else{dist+=after.textContent.length}}for(var before=topNode.previousSibling,dist$1=offset;before;before=before.previousSibling){found=find(before,before.firstChild,-1);if(found){return badPos(Pos(found.line,found.ch+dist$1),bad)}else{dist$1+=before.textContent.length}}}var TextareaInput=function TextareaInput(cm){this.cm=cm;this.prevInput="";this.pollingFast=false;this.polling=new Delayed();this.hasSelection=false;this.composing=null};TextareaInput.prototype.init=function(display){var this$1=this;var input=this,cm=this.cm;this.createField(display);var te=this.textarea;display.wrapper.insertBefore(this.wrapper,display.wrapper.firstChild);if(ios){te.style.width="0px"}on(te,"input",function(){if(ie&&ie_version>=9&&this$1.hasSelection){this$1.hasSelection=null}input.poll()});on(te,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm)){return}cm.state.pasteIncoming= +new Date();input.fastPoll()});function prepareCopyCut(e){if(signalDOMEvent(cm,e)){return}if(cm.somethingSelected()){setLastCopied({lineWise:false,text:cm.getSelections()})}else if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);setLastCopied({lineWise:true,text:ranges.text});if(e.type=="cut"){cm.setSelections(ranges.ranges,null,sel_dontScroll)}else{input.prevInput="";te.value=ranges.text.join("\n");selectInput(te)}}if(e.type=="cut"){cm.state.cutIncoming= +new Date()}}on(te,"cut",prepareCopyCut);on(te,"copy",prepareCopyCut);on(display.scroller,"paste",function(e){if(eventInWidget(display,e)||signalDOMEvent(cm,e)){return}if(!te.dispatchEvent){cm.state.pasteIncoming= +new Date();input.focus();return}var event=new Event("paste");event.clipboardData=e.clipboardData;te.dispatchEvent(event)});on(display.lineSpace,"selectstart",function(e){if(!eventInWidget(display,e)){e_preventDefault(e)}});on(te,"compositionstart",function(){var start=cm.getCursor("from");if(input.composing){input.composing.range.clear()}input.composing={start:start,range:cm.markText(start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});on(te,"compositionend",function(){if(input.composing){input.poll();input.composing.range.clear();input.composing=null}})};TextareaInput.prototype.createField=function(_display){this.wrapper=hiddenTextarea();this.textarea=this.wrapper.firstChild};TextareaInput.prototype.prepareSelection=function(){var cm=this.cm,display=cm.display,doc=cm.doc;var result=prepareSelection(cm);if(cm.options.moveInputWithCursor){var headPos=_cursorCoords(cm,doc.sel.primary().head,"div");var wrapOff=display.wrapper.getBoundingClientRect(),lineOff=display.lineDiv.getBoundingClientRect();result.teTop=Math.max(0,Math.min(display.wrapper.clientHeight-10,headPos.top+lineOff.top-wrapOff.top));result.teLeft=Math.max(0,Math.min(display.wrapper.clientWidth-10,headPos.left+lineOff.left-wrapOff.left))}return result};TextareaInput.prototype.showSelection=function(drawn){var cm=this.cm,display=cm.display;removeChildrenAndAdd(display.cursorDiv,drawn.cursors);removeChildrenAndAdd(display.selectionDiv,drawn.selection);if(drawn.teTop!=null){this.wrapper.style.top=drawn.teTop+"px";this.wrapper.style.left=drawn.teLeft+"px"}};TextareaInput.prototype.reset=function(typing){if(this.contextMenuPending||this.composing){return}var cm=this.cm;if(cm.somethingSelected()){this.prevInput="";var content=cm.getSelection();this.textarea.value=content;if(cm.state.focused){selectInput(this.textarea)}if(ie&&ie_version>=9){this.hasSelection=content}}else if(!typing){this.prevInput=this.textarea.value="";if(ie&&ie_version>=9){this.hasSelection=null}}};TextareaInput.prototype.getField=function(){return this.textarea};TextareaInput.prototype.supportsTouch=function(){return false};TextareaInput.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!mobile||activeElt()!=this.textarea)){try{this.textarea.focus()}catch(e){}}};TextareaInput.prototype.blur=function(){this.textarea.blur()};TextareaInput.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};TextareaInput.prototype.receivedFocus=function(){this.slowPoll()};TextareaInput.prototype.slowPoll=function(){var this$1=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){this$1.poll();if(this$1.cm.state.focused){this$1.slowPoll()}})};TextareaInput.prototype.fastPoll=function(){var missed=false,input=this;input.pollingFast=true;function p(){var changed=input.poll();if(!changed&&!missed){missed=true;input.polling.set(60,p)}else{input.pollingFast=false;input.slowPoll()}}input.polling.set(20,p)};TextareaInput.prototype.poll=function(){var this$1=this;var cm=this.cm,input=this.textarea,prevInput=this.prevInput;if(this.contextMenuPending||!cm.state.focused||hasSelection(input)&&!prevInput&&!this.composing||cm.isReadOnly()||cm.options.disableInput||cm.state.keySeq){return false}var text=input.value;if(text==prevInput&&!cm.somethingSelected()){return false}if(ie&&ie_version>=9&&this.hasSelection===text||mac&&/[\uf700-\uf7ff]/.test(text)){cm.display.input.reset();return false}if(cm.doc.sel==cm.display.selForContextMenu){var first=text.charCodeAt(0);if(first==0x200b&&!prevInput){prevInput="\u200B"}if(first==0x21da){this.reset();return this.cm.execCommand("undo")}}var same=0,l=Math.min(prevInput.length,text.length);while(same<l&&prevInput.charCodeAt(same)==text.charCodeAt(same)){same+=1}runInOp(cm,function(){applyTextInput(cm,text.slice(same),prevInput.length-same,null,this$1.composing?"*compose":null);if(text.length>1000||text.indexOf("\n")>-1){input.value=this$1.prevInput=""}else{this$1.prevInput=text}if(this$1.composing){this$1.composing.range.clear();this$1.composing.range=cm.markText(this$1.composing.start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});return true};TextareaInput.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};TextareaInput.prototype.onKeyPress=function(){if(ie&&ie_version>=9){this.hasSelection=null}this.fastPoll()};TextareaInput.prototype.onContextMenu=function(e){var input=this,cm=input.cm,display=cm.display,te=input.textarea;if(input.contextMenuPending){input.contextMenuPending()}var pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(!pos||presto){return}var reset=cm.options.resetSelectionOnContextMenu;if(reset&&cm.doc.sel.contains(pos)==-1){operation(cm,setSelection)(cm.doc,simpleSelection(pos),sel_dontScroll)}var oldCSS=te.style.cssText,oldWrapperCSS=input.wrapper.style.cssText;var wrapperBox=input.wrapper.offsetParent.getBoundingClientRect();input.wrapper.style.cssText="position: static";te.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-wrapperBox.top-5)+"px; left: "+(e.clientX-wrapperBox.left-5)+"px;\n      z-index: 1000; background: "+(ie?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var oldScrollY;if(webkit){oldScrollY=window.scrollY}display.input.focus();if(webkit){window.scrollTo(null,oldScrollY)}display.input.reset();if(!cm.somethingSelected()){te.value=input.prevInput=" "}input.contextMenuPending=rehide;display.selForContextMenu=cm.doc.sel;clearTimeout(display.detectingSelectAll);function prepareSelectAllHack(){if(te.selectionStart!=null){var selected=cm.somethingSelected();var extval="\u200B"+(selected?te.value:"");te.value="\u21DA";te.value=extval;input.prevInput=selected?"":"\u200B";te.selectionStart=1;te.selectionEnd=extval.length;display.selForContextMenu=cm.doc.sel}}function rehide(){if(input.contextMenuPending!=rehide){return}input.contextMenuPending=false;input.wrapper.style.cssText=oldWrapperCSS;te.style.cssText=oldCSS;if(ie&&ie_version<9){display.scrollbars.setScrollTop(display.scroller.scrollTop=scrollPos)}if(te.selectionStart!=null){if(!ie||ie&&ie_version<9){prepareSelectAllHack()}var i=0,poll=function poll(){if(display.selForContextMenu==cm.doc.sel&&te.selectionStart==0&&te.selectionEnd>0&&input.prevInput=="\u200B"){operation(cm,selectAll)(cm)}else if(i++ <10){display.detectingSelectAll=setTimeout(poll,500)}else{display.selForContextMenu=null;display.input.reset()}};display.detectingSelectAll=setTimeout(poll,200)}}if(ie&&ie_version>=9){prepareSelectAllHack()}if(captureRightClick){e_stop(e);var mouseup=function mouseup(){off(window,"mouseup",mouseup);setTimeout(rehide,20)};on(window,"mouseup",mouseup)}else{setTimeout(rehide,50)}};TextareaInput.prototype.readOnlyChanged=function(val){if(!val){this.reset()}this.textarea.disabled=val=="nocursor"};TextareaInput.prototype.setUneditable=function(){};TextareaInput.prototype.needsContentAttribute=false;function fromTextArea(textarea,options){options=options?copyObj(options):{};options.value=textarea.value;if(!options.tabindex&&textarea.tabIndex){options.tabindex=textarea.tabIndex}if(!options.placeholder&&textarea.placeholder){options.placeholder=textarea.placeholder}if(options.autofocus==null){var hasFocus=activeElt();options.autofocus=hasFocus==textarea||textarea.getAttribute("autofocus")!=null&&hasFocus==document.body}function save(){textarea.value=cm.getValue()}var realSubmit;if(textarea.form){on(textarea.form,"submit",save);if(!options.leaveSubmitMethodAlone){var form=textarea.form;realSubmit=form.submit;try{var wrappedSubmit=form.submit=function(){save();form.submit=realSubmit;form.submit();form.submit=wrappedSubmit}}catch(e){}}}options.finishInit=function(cm){cm.save=save;cm.getTextArea=function(){return textarea};cm.toTextArea=function(){cm.toTextArea=isNaN;save();textarea.parentNode.removeChild(cm.getWrapperElement());textarea.style.display="";if(textarea.form){off(textarea.form,"submit",save);if(!options.leaveSubmitMethodAlone&&typeof textarea.form.submit=="function"){textarea.form.submit=realSubmit}}}};textarea.style.display="none";var cm=CodeMirror(function(node){return textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);return cm}function addLegacyProps(CodeMirror){CodeMirror.off=off;CodeMirror.on=on;CodeMirror.wheelEventPixels=wheelEventPixels;CodeMirror.Doc=Doc;CodeMirror.splitLines=splitLinesAuto;CodeMirror.countColumn=countColumn;CodeMirror.findColumn=findColumn;CodeMirror.isWordChar=isWordCharBasic;CodeMirror.Pass=Pass;CodeMirror.signal=signal;CodeMirror.Line=Line;CodeMirror.changeEnd=changeEnd;CodeMirror.scrollbarModel=scrollbarModel;CodeMirror.Pos=Pos;CodeMirror.cmpPos=cmp;CodeMirror.modes=modes;CodeMirror.mimeModes=mimeModes;CodeMirror.resolveMode=resolveMode;CodeMirror.getMode=getMode;CodeMirror.modeExtensions=modeExtensions;CodeMirror.extendMode=extendMode;CodeMirror.copyState=copyState;CodeMirror.startState=startState;CodeMirror.innerMode=innerMode;CodeMirror.commands=commands;CodeMirror.keyMap=keyMap;CodeMirror.keyName=keyName;CodeMirror.isModifierKey=isModifierKey;CodeMirror.lookupKey=lookupKey;CodeMirror.normalizeKeyMap=normalizeKeyMap;CodeMirror.StringStream=StringStream;CodeMirror.SharedTextMarker=SharedTextMarker;CodeMirror.TextMarker=TextMarker;CodeMirror.LineWidget=LineWidget;CodeMirror.e_preventDefault=e_preventDefault;CodeMirror.e_stopPropagation=e_stopPropagation;CodeMirror.e_stop=e_stop;CodeMirror.addClass=addClass;CodeMirror.contains=contains;CodeMirror.rmClass=rmClass;CodeMirror.keyNames=keyNames}defineOptions(CodeMirror);addEditorMethods(CodeMirror);var dontDelegate="iter insert remove copy getEditor constructor".split(" ");for(var prop in Doc.prototype){if(Doc.prototype.hasOwnProperty(prop)&&indexOf(dontDelegate,prop)<0){CodeMirror.prototype[prop]=function(method){return function(){return method.apply(this.doc,arguments)}}(Doc.prototype[prop])}}eventMixin(Doc);CodeMirror.inputStyles={"textarea":TextareaInput,"contenteditable":ContentEditableInput};CodeMirror.defineMode=function(name ){if(!CodeMirror.defaults.mode&&name!="null"){CodeMirror.defaults.mode=name}defineMode.apply(this,arguments)};CodeMirror.defineMIME=defineMIME;CodeMirror.defineMode("null",function(){return{token:function token(stream){return stream.skipToEnd()}}});CodeMirror.defineMIME("text/plain","null");CodeMirror.defineExtension=function(name,func){CodeMirror.prototype[name]=func};CodeMirror.defineDocExtension=function(name,func){Doc.prototype[name]=func};CodeMirror.fromTextArea=fromTextArea;addLegacyProps(CodeMirror);CodeMirror.version="5.52.2";return CodeMirror})});var xml=createCommonjsModule(function(module,exports){(function(mod){mod(codemirror)})(function(CodeMirror){var htmlConfig={autoSelfClosers:{'area':true,'base':true,'br':true,'col':true,'command':true,'embed':true,'frame':true,'hr':true,'img':true,'input':true,'keygen':true,'link':true,'meta':true,'param':true,'source':true,'track':true,'wbr':true,'menuitem':true},implicitlyClosed:{'dd':true,'li':true,'optgroup':true,'option':true,'p':true,'rp':true,'rt':true,'tbody':true,'td':true,'tfoot':true,'th':true,'tr':true},contextGrabbers:{'dd':{'dd':true,'dt':true},'dt':{'dd':true,'dt':true},'li':{'li':true},'option':{'option':true,'optgroup':true},'optgroup':{'optgroup':true},'p':{'address':true,'article':true,'aside':true,'blockquote':true,'dir':true,'div':true,'dl':true,'fieldset':true,'footer':true,'form':true,'h1':true,'h2':true,'h3':true,'h4':true,'h5':true,'h6':true,'header':true,'hgroup':true,'hr':true,'menu':true,'nav':true,'ol':true,'p':true,'pre':true,'section':true,'table':true,'ul':true},'rp':{'rp':true,'rt':true},'rt':{'rp':true,'rt':true},'tbody':{'tbody':true,'tfoot':true},'td':{'td':true,'th':true},'tfoot':{'tbody':true},'th':{'td':true,'th':true},'thead':{'tbody':true,'tfoot':true},'tr':{'tr':true}},doNotIndent:{"pre":true},allowUnquoted:true,allowMissing:true,caseFold:true};var xmlConfig={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,allowMissingTagName:false,caseFold:false};CodeMirror.defineMode("xml",function(editorConf,config_){var indentUnit=editorConf.indentUnit;var config={};var defaults=config_.htmlMode?htmlConfig:xmlConfig;for(var prop in defaults){config[prop]=defaults[prop]}for(var prop in config_){config[prop]=config_[prop]}var type,setStyle;function inText(stream,state){function chain(parser){state.tokenize=parser;return parser(stream,state)}var ch=stream.next();if(ch=="<"){if(stream.eat("!")){if(stream.eat("[")){if(stream.match("CDATA[")){return chain(inBlock("atom","]]>"))}else{return null}}else if(stream.match("--")){return chain(inBlock("comment","-->"))}else if(stream.match("DOCTYPE",true,true)){stream.eatWhile(/[\w\._\-]/);return chain(doctype(1))}else{return null}}else if(stream.eat("?")){stream.eatWhile(/[\w\._\-]/);state.tokenize=inBlock("meta","?>");return "meta"}else{type=stream.eat("/")?"closeTag":"openTag";state.tokenize=inTag;return "tag bracket"}}else if(ch=="&"){var ok;if(stream.eat("#")){if(stream.eat("x")){ok=stream.eatWhile(/[a-fA-F\d]/)&&stream.eat(";")}else{ok=stream.eatWhile(/[\d]/)&&stream.eat(";")}}else{ok=stream.eatWhile(/[\w\.\-:]/)&&stream.eat(";")}return ok?"atom":"error"}else{stream.eatWhile(/[^&<]/);return null}}inText.isInText=true;function inTag(stream,state){var ch=stream.next();if(ch==">"||ch=="/"&&stream.eat(">")){state.tokenize=inText;type=ch==">"?"endTag":"selfcloseTag";return "tag bracket"}else if(ch=="="){type="equals";return null}else if(ch=="<"){state.tokenize=inText;state.state=baseState;state.tagName=state.tagStart=null;var next=state.tokenize(stream,state);return next?next+" tag error":"tag error"}else if(/[\'\"]/.test(ch)){state.tokenize=inAttribute(ch);state.stringStartCol=stream.column();return state.tokenize(stream,state)}else{stream.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return "word"}}function inAttribute(quote){var closure=function closure(stream,state){while(!stream.eol()){if(stream.next()==quote){state.tokenize=inTag;break}}return "string"};closure.isInAttribute=true;return closure}function inBlock(style,terminator){return function(stream,state){while(!stream.eol()){if(stream.match(terminator)){state.tokenize=inText;break}stream.next()}return style}}function doctype(depth){return function(stream,state){var ch;while((ch=stream.next())!=null){if(ch=="<"){state.tokenize=doctype(depth+1);return state.tokenize(stream,state)}else if(ch==">"){if(depth==1){state.tokenize=inText;break}else{state.tokenize=doctype(depth-1);return state.tokenize(stream,state)}}}return "meta"}}function Context(state,tagName,startOfLine){this.prev=state.context;this.tagName=tagName;this.indent=state.indented;this.startOfLine=startOfLine;if(config.doNotIndent.hasOwnProperty(tagName)||state.context&&state.context.noIndent){this.noIndent=true}}function popContext(state){if(state.context){state.context=state.context.prev}}function maybePopContext(state,nextTagName){var parentTagName;while(true){if(!state.context){return}parentTagName=state.context.tagName;if(!config.contextGrabbers.hasOwnProperty(parentTagName)||!config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)){return}popContext(state)}}function baseState(type,stream,state){if(type=="openTag"){state.tagStart=stream.column();return tagNameState}else if(type=="closeTag"){return closeTagNameState}else{return baseState}}function tagNameState(type,stream,state){if(type=="word"){state.tagName=stream.current();setStyle="tag";return attrState}else if(config.allowMissingTagName&&type=="endTag"){setStyle="tag bracket";return attrState(type,stream,state)}else{setStyle="error";return tagNameState}}function closeTagNameState(type,stream,state){if(type=="word"){var tagName=stream.current();if(state.context&&state.context.tagName!=tagName&&config.implicitlyClosed.hasOwnProperty(state.context.tagName)){popContext(state)}if(state.context&&state.context.tagName==tagName||config.matchClosing===false){setStyle="tag";return closeState}else{setStyle="tag error";return closeStateErr}}else if(config.allowMissingTagName&&type=="endTag"){setStyle="tag bracket";return closeState(type,stream,state)}else{setStyle="error";return closeStateErr}}function closeState(type,_stream,state){if(type!="endTag"){setStyle="error";return closeState}popContext(state);return baseState}function closeStateErr(type,stream,state){setStyle="error";return closeState(type,stream,state)}function attrState(type,_stream,state){if(type=="word"){setStyle="attribute";return attrEqState}else if(type=="endTag"||type=="selfcloseTag"){var tagName=state.tagName,tagStart=state.tagStart;state.tagName=state.tagStart=null;if(type=="selfcloseTag"||config.autoSelfClosers.hasOwnProperty(tagName)){maybePopContext(state,tagName)}else{maybePopContext(state,tagName);state.context=new Context(state,tagName,tagStart==state.indented)}return baseState}setStyle="error";return attrState}function attrEqState(type,stream,state){if(type=="equals"){return attrValueState}if(!config.allowMissing){setStyle="error"}return attrState(type,stream,state)}function attrValueState(type,stream,state){if(type=="string"){return attrContinuedState}if(type=="word"&&config.allowUnquoted){setStyle="string";return attrState}setStyle="error";return attrState(type,stream,state)}function attrContinuedState(type,stream,state){if(type=="string"){return attrContinuedState}return attrState(type,stream,state)}return{startState:function startState(baseIndent){var state={tokenize:inText,state:baseState,indented:baseIndent||0,tagName:null,tagStart:null,context:null};if(baseIndent!=null){state.baseIndent=baseIndent}return state},token:function token(stream,state){if(!state.tagName&&stream.sol()){state.indented=stream.indentation()}if(stream.eatSpace()){return null}type=null;var style=state.tokenize(stream,state);if((style||type)&&style!="comment"){setStyle=null;state.state=state.state(type||style,stream,state);if(setStyle){style=setStyle=="error"?style+" error":setStyle}}return style},indent:function indent(state,textAfter,fullLine){var context=state.context;if(state.tokenize.isInAttribute){if(state.tagStart==state.indented){return state.stringStartCol+1}else{return state.indented+indentUnit}}if(context&&context.noIndent){return CodeMirror.Pass}if(state.tokenize!=inTag&&state.tokenize!=inText){return fullLine?fullLine.match(/^(\s*)/)[0].length:0;}if(state.tagName){if(config.multilineTagIndentPastTag!==false){return state.tagStart+state.tagName.length+2}else{return state.tagStart+indentUnit*(config.multilineTagIndentFactor||1)}}if(config.alignCDATA&&/<!\[CDATA\[/.test(textAfter)){return 0}var tagAfter=textAfter&&/^<(\/)?([\w_:\.-]*)/.exec(textAfter);if(tagAfter&&tagAfter[1]){while(context){if(context.tagName==tagAfter[2]){context=context.prev;break}else if(config.implicitlyClosed.hasOwnProperty(context.tagName)){context=context.prev}else{break}}}else if(tagAfter){while(context){var grabbers=config.contextGrabbers[context.tagName];if(grabbers&&grabbers.hasOwnProperty(tagAfter[2])){context=context.prev}else{break}}}while(context&&context.prev&&!context.startOfLine){context=context.prev}if(context){return context.indent+indentUnit}else{return state.baseIndent||0}},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:config.htmlMode?"html":"xml",helperType:config.htmlMode?"html":"xml",skipAttribute:function skipAttribute(state){if(state.state==attrValueState){state.state=attrState}},xmlCurrentTag:function xmlCurrentTag(state){return state.tagName?{name:state.tagName,close:state.type=="closeTag"}:null},xmlCurrentContext:function xmlCurrentContext(state){var context=[];for(var cx=state.context;cx;cx=cx.prev){if(cx.tagName){context.push(cx.tagName)}}return context.reverse()}}});CodeMirror.defineMIME("text/xml","xml");CodeMirror.defineMIME("application/xml","xml");if(!CodeMirror.mimeModes.hasOwnProperty("text/html")){CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true})}})});var CLASS_NAME='_coral-Playground';var SCREEN_ENUM={FULLSCREEN:'fullscreen',HORIZONTAL:'horizontal',VERTICAL:'vertical'};var PROPERTIES=['livereload','screen','code'];var SCREEN_CLASSES=[];for(var value in SCREEN_ENUM){SCREEN_CLASSES.push("".concat(CLASS_NAME,"--").concat(SCREEN_ENUM[value]))}var CODEMIRROR_CONFIG={mode:'text/xml',lineNumbers:true,matchBrackets:true,indentWithTabs:true,tabSize:2,indentUnit:2};var DEBOUNCE_TIME=250;var Playground=function(_BaseComponent){_inherits(Playground,_BaseComponent);var _super=_createSuper(Playground);function Playground(){var _this;var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Playground);_this=_super.call(this);_this._config=config;_this._elements={};template$10.call(_this._elements,{commons:commons});var overlayId=_this._elements.overlay.id;var events={'click [handle="share"]':'_onShareClick','click [handle="run"]':'_onRunClick'};events["global:capture:change #".concat(overlayId," [handle=\"livereload\"]")]='_onLiveReloadChange';events["global:capture:change #".concat(overlayId," [handle=\"screen\"]")]='_onScreenChange';_this._delegateEvents(events);_this._editor=new codemirror(_this._elements.editor,CODEMIRROR_CONFIG);_this._editor.on('change',function(){if(_this.livereload){_this._debounceTrigger('coral-playground:coderun')}else{_this._elements.run.style.visibility='visible'}});_this._elements.frame.onload=function(){_this._elements.loading.hidden=true;_this.trigger('coral-playground:load')};return _this}_createClass(Playground,[{key:"_debounceTrigger",value:function _debounceTrigger(event){var _this2=this;if(this._timeout!==null){window.clearTimeout(this._timeout)}this._timeout=window.setTimeout(function(){_this2._timeout=null;_this2.trigger(event)},DEBOUNCE_TIME)}},{key:"_onRunClick",value:function _onRunClick(){this._debounceTrigger('coral-playground:coderun')}},{key:"_onShareClick",value:function _onShareClick(){var _this3=this;this._elements.copy.value=location.href;this._elements.copy.select();document.execCommand('copy');this._elements.sharetip.open=true;window.setTimeout(function(){_this3._elements.sharetip.open=false},1000)}},{key:"_onLiveReloadChange",value:function _onLiveReloadChange(event){this.livereload=event.matchedTarget.checked}},{key:"_onScreenChange",value:function _onScreenChange(event){this.screen=event.matchedTarget.value}},{key:"run",value:function run(code){this._elements.loading.hidden=false;this._elements.frame.srcdoc=code}},{key:"share",value:function share(){var _this4=this;var query='?';PROPERTIES.forEach(function(property){if(_this4[property]){query+="".concat(property,"=").concat(property==='code'?Playground._compress(_this4.code):_this4[property],"&")}});return query}},{key:"connectedCallback",value:function connectedCallback(){var _this5=this;this.classList.add(CLASS_NAME);this.appendChild(this._elements.wrapper);this.screen=this._config.screen;this.code=this._config.code;this.livereload=this._config.livereload;window.requestAnimationFrame(function(){_this5._editor.refresh();if(_this5.livereload){_this5._debounceTrigger('coral-playground:coderun')}})}},{key:"livereload",get:function get(){return this._livereload},set:function set(value){if(value){this._livereload=true;this._elements.livereload.setAttribute('checked','');this._elements.run.style.visibility='hidden';this._debounceTrigger('coral-playground:coderun')}else{this._livereload=false;this._elements.livereload.removeAttribute('checked');this._elements.run.style.visibility='visible'}this._debounceTrigger('coral-playground:settingschange')}},{key:"screen",get:function get(){return this._screen},set:function set(value){var _this$classList;value=transform.string(value).toLowerCase();this._screen=validate.enumeration(SCREEN_ENUM)(value)&&value||SCREEN_ENUM.VERTICAL;this._reflectAttribute('screen',this._screen);this._elements.screen.value=this._screen;(_this$classList=this.classList).remove.apply(_this$classList,SCREEN_CLASSES);this.classList.add("".concat(CLASS_NAME,"--").concat(this._screen));this._elements.overlay.reposition();this._debounceTrigger('coral-playground:settingschange')}},{key:"code",get:function get(){return this._editor.getValue()},set:function set(value){this._editor.setValue(value||'')}}],[{key:"_parseQueryString",value:function _parseQueryString(query){var objURL={};query.replace(new RegExp('([^?=&]+)(=([^&]*))?','g'),function($0,$1,$2,$3){objURL[$1]=decodeURI($3)});return objURL}},{key:"_compress",value:function _compress(code){var bytes=Array.prototype.map.call(code,function(char){return char.charCodeAt(0)});var compressed=rawdeflate(bytes);return window.btoa(compressed)}},{key:"_uncompress",value:function _uncompress(base64){var bytes=window.atob(base64);var uncompressed=rawinflate(bytes.split(','));return Array.prototype.map.call(uncompressed,function(byte){return String.fromCharCode(byte)}).join('')}},{key:"read",value:function read(query){var params=Playground._parseQueryString(query);var config={};if(Object.keys(params).length){PROPERTIES.forEach(function(property){config[property]=property==='code'&&params[property]?Playground._uncompress(params[property]):params[property]})}return config}},{key:"screen",get:function get(){return SCREEN_ENUM}},{key:"observedAttributes",get:function get(){return _get(_getPrototypeOf(Playground),"observedAttributes",this).concat(['livereload','screen'])}}]);return Playground}(BaseComponent(HTMLElement));window.customElements.define('coral-playground',Playground);window.Coral={};window.Coral.Playground=Playground;for(var component in components){window.Coral[component]=components[component]}}());
//# sourceMappingURL=coral.js.map